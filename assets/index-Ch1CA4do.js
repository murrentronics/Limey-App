var gg=e=>{throw TypeError(e)};var pu=(e,t,r)=>t.has(e)||gg("Cannot "+r);var ie=(e,t,r)=>(pu(e,t,"read from private field"),r?r.call(e):t.get(e)),tt=(e,t,r)=>t.has(e)?gg("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Ve=(e,t,r,n)=>(pu(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Qt=(e,t,r)=>(pu(e,t,"access private method"),r);var Rl=(e,t,r,n)=>({set _(s){Ve(e,t,s,r)},get _(){return ie(e,t,n)}});function NN(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var qr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function SN(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var l0={exports:{}},hd={},c0={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fl=Symbol.for("react.element"),kN=Symbol.for("react.portal"),CN=Symbol.for("react.fragment"),EN=Symbol.for("react.strict_mode"),PN=Symbol.for("react.profiler"),TN=Symbol.for("react.provider"),RN=Symbol.for("react.context"),AN=Symbol.for("react.forward_ref"),MN=Symbol.for("react.suspense"),DN=Symbol.for("react.memo"),IN=Symbol.for("react.lazy"),vg=Symbol.iterator;function ON(e){return e===null||typeof e!="object"?null:(e=vg&&e[vg]||e["@@iterator"],typeof e=="function"?e:null)}var d0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},u0=Object.assign,f0={};function $o(e,t,r){this.props=e,this.context=t,this.refs=f0,this.updater=r||d0}$o.prototype.isReactComponent={};$o.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$o.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function h0(){}h0.prototype=$o.prototype;function em(e,t,r){this.props=e,this.context=t,this.refs=f0,this.updater=r||d0}var tm=em.prototype=new h0;tm.constructor=em;u0(tm,$o.prototype);tm.isPureReactComponent=!0;var xg=Array.isArray,m0=Object.prototype.hasOwnProperty,rm={current:null},p0={key:!0,ref:!0,__self:!0,__source:!0};function g0(e,t,r){var n,s={},o=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)m0.call(t,n)&&!p0.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:fl,type:e,key:o,ref:a,props:s,_owner:rm.current}}function LN(e,t){return{$$typeof:fl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function nm(e){return typeof e=="object"&&e!==null&&e.$$typeof===fl}function FN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var wg=/\/+/g;function gu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?FN(""+e.key):t.toString(36)}function dc(e,t,r,n,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case fl:case kN:a=!0}}if(a)return a=e,s=s(a),e=n===""?"."+gu(a,0):n,xg(s)?(r="",e!=null&&(r=e.replace(wg,"$&/")+"/"),dc(s,t,r,"",function(d){return d})):s!=null&&(nm(s)&&(s=LN(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(wg,"$&/")+"/")+e)),t.push(s)),1;if(a=0,n=n===""?".":n+":",xg(e))for(var l=0;l<e.length;l++){o=e[l];var c=n+gu(o,l);a+=dc(o,t,r,c,s)}else if(c=ON(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=n+gu(o,l++),a+=dc(o,t,r,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Al(e,t,r){if(e==null)return e;var n=[],s=0;return dc(e,n,"","",function(o){return t.call(r,o,s++)}),n}function zN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var fr={current:null},uc={transition:null},$N={ReactCurrentDispatcher:fr,ReactCurrentBatchConfig:uc,ReactCurrentOwner:rm};function v0(){throw Error("act(...) is not supported in production builds of React.")}Ge.Children={map:Al,forEach:function(e,t,r){Al(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Al(e,function(){t++}),t},toArray:function(e){return Al(e,function(t){return t})||[]},only:function(e){if(!nm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ge.Component=$o;Ge.Fragment=CN;Ge.Profiler=PN;Ge.PureComponent=em;Ge.StrictMode=EN;Ge.Suspense=MN;Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$N;Ge.act=v0;Ge.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=u0({},e.props),s=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=rm.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)m0.call(t,c)&&!p0.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:fl,type:e.type,key:s,ref:o,props:n,_owner:a}};Ge.createContext=function(e){return e={$$typeof:RN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:TN,_context:e},e.Consumer=e};Ge.createElement=g0;Ge.createFactory=function(e){var t=g0.bind(null,e);return t.type=e,t};Ge.createRef=function(){return{current:null}};Ge.forwardRef=function(e){return{$$typeof:AN,render:e}};Ge.isValidElement=nm;Ge.lazy=function(e){return{$$typeof:IN,_payload:{_status:-1,_result:e},_init:zN}};Ge.memo=function(e,t){return{$$typeof:DN,type:e,compare:t===void 0?null:t}};Ge.startTransition=function(e){var t=uc.transition;uc.transition={};try{e()}finally{uc.transition=t}};Ge.unstable_act=v0;Ge.useCallback=function(e,t){return fr.current.useCallback(e,t)};Ge.useContext=function(e){return fr.current.useContext(e)};Ge.useDebugValue=function(){};Ge.useDeferredValue=function(e){return fr.current.useDeferredValue(e)};Ge.useEffect=function(e,t){return fr.current.useEffect(e,t)};Ge.useId=function(){return fr.current.useId()};Ge.useImperativeHandle=function(e,t,r){return fr.current.useImperativeHandle(e,t,r)};Ge.useInsertionEffect=function(e,t){return fr.current.useInsertionEffect(e,t)};Ge.useLayoutEffect=function(e,t){return fr.current.useLayoutEffect(e,t)};Ge.useMemo=function(e,t){return fr.current.useMemo(e,t)};Ge.useReducer=function(e,t,r){return fr.current.useReducer(e,t,r)};Ge.useRef=function(e){return fr.current.useRef(e)};Ge.useState=function(e){return fr.current.useState(e)};Ge.useSyncExternalStore=function(e,t,r){return fr.current.useSyncExternalStore(e,t,r)};Ge.useTransition=function(){return fr.current.useTransition()};Ge.version="18.3.1";c0.exports=Ge;var u=c0.exports;const ge=Jh(u),x0=NN({__proto__:null,default:ge},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UN=u,VN=Symbol.for("react.element"),WN=Symbol.for("react.fragment"),BN=Object.prototype.hasOwnProperty,qN=UN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,HN={key:!0,ref:!0,__self:!0,__source:!0};function w0(e,t,r){var n,s={},o=null,a=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)BN.call(t,n)&&!HN.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:VN,type:e,key:o,ref:a,props:s,_owner:qN.current}}hd.Fragment=WN;hd.jsx=w0;hd.jsxs=w0;l0.exports=hd;var i=l0.exports,y0={exports:{}},Or={},b0={exports:{}},_0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,Q){var ne=D.length;D.push(Q);e:for(;0<ne;){var oe=ne-1>>>1,he=D[oe];if(0<s(he,Q))D[oe]=Q,D[ne]=he,ne=oe;else break e}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var Q=D[0],ne=D.pop();if(ne!==Q){D[0]=ne;e:for(var oe=0,he=D.length,je=he>>>1;oe<je;){var Ce=2*(oe+1)-1,fe=D[Ce],de=Ce+1,ce=D[de];if(0>s(fe,ne))de<he&&0>s(ce,fe)?(D[oe]=ce,D[de]=ne,oe=de):(D[oe]=fe,D[Ce]=ne,oe=Ce);else if(de<he&&0>s(ce,ne))D[oe]=ce,D[de]=ne,oe=de;else break e}}return Q}function s(D,Q){var ne=D.sortIndex-Q.sortIndex;return ne!==0?ne:D.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],d=[],f=1,h=null,m=3,x=!1,y=!1,p=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(D){for(var Q=r(d);Q!==null;){if(Q.callback===null)n(d);else if(Q.startTime<=D)n(d),Q.sortIndex=Q.expirationTime,t(c,Q);else break;Q=r(d)}}function _(D){if(p=!1,v(D),!y)if(r(c)!==null)y=!0,U(j);else{var Q=r(d);Q!==null&&K(_,Q.startTime-D)}}function j(D,Q){y=!1,p&&(p=!1,w(E),E=-1),x=!0;var ne=m;try{for(v(Q),h=r(c);h!==null&&(!(h.expirationTime>Q)||D&&!q());){var oe=h.callback;if(typeof oe=="function"){h.callback=null,m=h.priorityLevel;var he=oe(h.expirationTime<=Q);Q=e.unstable_now(),typeof he=="function"?h.callback=he:h===r(c)&&n(c),v(Q)}else n(c);h=r(c)}if(h!==null)var je=!0;else{var Ce=r(d);Ce!==null&&K(_,Ce.startTime-Q),je=!1}return je}finally{h=null,m=ne,x=!1}}var k=!1,C=null,E=-1,O=5,B=-1;function q(){return!(e.unstable_now()-B<O)}function X(){if(C!==null){var D=e.unstable_now();B=D;var Q=!0;try{Q=C(!0,D)}finally{Q?Z():(k=!1,C=null)}}else k=!1}var Z;if(typeof g=="function")Z=function(){g(X)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,ee=L.port2;L.port1.onmessage=X,Z=function(){ee.postMessage(null)}}else Z=function(){b(X,0)};function U(D){C=D,k||(k=!0,Z())}function K(D,Q){E=b(function(){D(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){y||x||(y=!0,U(j))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(D){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var ne=m;m=Q;try{return D()}finally{m=ne}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,Q){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var ne=m;m=D;try{return Q()}finally{m=ne}},e.unstable_scheduleCallback=function(D,Q,ne){var oe=e.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?oe+ne:oe):ne=oe,D){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=ne+he,D={id:f++,callback:Q,priorityLevel:D,startTime:ne,expirationTime:he,sortIndex:-1},ne>oe?(D.sortIndex=ne,t(d,D),r(c)===null&&D===r(d)&&(p?(w(E),E=-1):p=!0,K(_,ne-oe))):(D.sortIndex=he,t(c,D),y||x||(y=!0,U(j))),D},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(D){var Q=m;return function(){var ne=m;m=Q;try{return D.apply(this,arguments)}finally{m=ne}}}})(_0);b0.exports=_0;var GN=b0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YN=u,Dr=GN;function le(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var j0=new Set,La={};function ki(e,t){ko(e,t),ko(e+"Capture",t)}function ko(e,t){for(La[e]=t,e=0;e<t.length;e++)j0.add(t[e])}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pf=Object.prototype.hasOwnProperty,ZN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yg={},bg={};function KN(e){return pf.call(bg,e)?!0:pf.call(yg,e)?!1:ZN.test(e)?bg[e]=!0:(yg[e]=!0,!1)}function XN(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function QN(e,t,r,n){if(t===null||typeof t>"u"||XN(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function hr(e,t,r,n,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var Kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Kt[e]=new hr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Kt[t]=new hr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Kt[e]=new hr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Kt[e]=new hr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Kt[e]=new hr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Kt[e]=new hr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Kt[e]=new hr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Kt[e]=new hr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Kt[e]=new hr(e,5,!1,e.toLowerCase(),null,!1,!1)});var sm=/[\-:]([a-z])/g;function im(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(sm,im);Kt[t]=new hr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(sm,im);Kt[t]=new hr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(sm,im);Kt[t]=new hr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Kt[e]=new hr(e,1,!1,e.toLowerCase(),null,!1,!1)});Kt.xlinkHref=new hr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Kt[e]=new hr(e,1,!1,e.toLowerCase(),null,!0,!0)});function om(e,t,r,n){var s=Kt.hasOwnProperty(t)?Kt[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(QN(t,r,s,n)&&(r=null),n||s===null?KN(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Gn=YN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ml=Symbol.for("react.element"),Yi=Symbol.for("react.portal"),Zi=Symbol.for("react.fragment"),am=Symbol.for("react.strict_mode"),gf=Symbol.for("react.profiler"),N0=Symbol.for("react.provider"),S0=Symbol.for("react.context"),lm=Symbol.for("react.forward_ref"),vf=Symbol.for("react.suspense"),xf=Symbol.for("react.suspense_list"),cm=Symbol.for("react.memo"),ss=Symbol.for("react.lazy"),k0=Symbol.for("react.offscreen"),_g=Symbol.iterator;function ea(e){return e===null||typeof e!="object"?null:(e=_g&&e[_g]||e["@@iterator"],typeof e=="function"?e:null)}var Nt=Object.assign,vu;function ma(e){if(vu===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);vu=t&&t[1]||""}return`
`+vu+e}var xu=!1;function wu(e,t){if(!e||xu)return"";xu=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=n.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{xu=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ma(e):""}function JN(e){switch(e.tag){case 5:return ma(e.type);case 16:return ma("Lazy");case 13:return ma("Suspense");case 19:return ma("SuspenseList");case 0:case 2:case 15:return e=wu(e.type,!1),e;case 11:return e=wu(e.type.render,!1),e;case 1:return e=wu(e.type,!0),e;default:return""}}function wf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zi:return"Fragment";case Yi:return"Portal";case gf:return"Profiler";case am:return"StrictMode";case vf:return"Suspense";case xf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case S0:return(e.displayName||"Context")+".Consumer";case N0:return(e._context.displayName||"Context")+".Provider";case lm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case cm:return t=e.displayName||null,t!==null?t:wf(e.type)||"Memo";case ss:t=e._payload,e=e._init;try{return wf(e(t))}catch{}}return null}function eS(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wf(t);case 8:return t===am?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Es(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function C0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function tS(e){var t=C0(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Dl(e){e._valueTracker||(e._valueTracker=tS(e))}function E0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=C0(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Rc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function yf(e,t){var r=t.checked;return Nt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function jg(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Es(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function P0(e,t){t=t.checked,t!=null&&om(e,"checked",t,!1)}function bf(e,t){P0(e,t);var r=Es(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?_f(e,t.type,r):t.hasOwnProperty("defaultValue")&&_f(e,t.type,Es(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ng(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function _f(e,t,r){(t!=="number"||Rc(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var pa=Array.isArray;function oo(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Es(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function jf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(le(91));return Nt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Sg(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(le(92));if(pa(r)){if(1<r.length)throw Error(le(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Es(r)}}function T0(e,t){var r=Es(t.value),n=Es(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function kg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function R0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?R0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Il,A0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Il=Il||document.createElement("div"),Il.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Il.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Fa(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ba={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rS=["Webkit","ms","Moz","O"];Object.keys(ba).forEach(function(e){rS.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ba[t]=ba[e]})});function M0(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ba.hasOwnProperty(e)&&ba[e]?(""+t).trim():t+"px"}function D0(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=M0(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var nS=Nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sf(e,t){if(t){if(nS[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(le(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(le(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(le(61))}if(t.style!=null&&typeof t.style!="object")throw Error(le(62))}}function kf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cf=null;function dm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ef=null,ao=null,lo=null;function Cg(e){if(e=pl(e)){if(typeof Ef!="function")throw Error(le(280));var t=e.stateNode;t&&(t=xd(t),Ef(e.stateNode,e.type,t))}}function I0(e){ao?lo?lo.push(e):lo=[e]:ao=e}function O0(){if(ao){var e=ao,t=lo;if(lo=ao=null,Cg(e),t)for(e=0;e<t.length;e++)Cg(t[e])}}function L0(e,t){return e(t)}function F0(){}var yu=!1;function z0(e,t,r){if(yu)return e(t,r);yu=!0;try{return L0(e,t,r)}finally{yu=!1,(ao!==null||lo!==null)&&(F0(),O0())}}function za(e,t){var r=e.stateNode;if(r===null)return null;var n=xd(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(le(231,t,typeof r));return r}var Pf=!1;if($n)try{var ta={};Object.defineProperty(ta,"passive",{get:function(){Pf=!0}}),window.addEventListener("test",ta,ta),window.removeEventListener("test",ta,ta)}catch{Pf=!1}function sS(e,t,r,n,s,o,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(f){this.onError(f)}}var _a=!1,Ac=null,Mc=!1,Tf=null,iS={onError:function(e){_a=!0,Ac=e}};function oS(e,t,r,n,s,o,a,l,c){_a=!1,Ac=null,sS.apply(iS,arguments)}function aS(e,t,r,n,s,o,a,l,c){if(oS.apply(this,arguments),_a){if(_a){var d=Ac;_a=!1,Ac=null}else throw Error(le(198));Mc||(Mc=!0,Tf=d)}}function Ci(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function $0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Eg(e){if(Ci(e)!==e)throw Error(le(188))}function lS(e){var t=e.alternate;if(!t){if(t=Ci(e),t===null)throw Error(le(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return Eg(s),e;if(o===n)return Eg(s),t;o=o.sibling}throw Error(le(188))}if(r.return!==n.return)r=s,n=o;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=o;break}if(l===n){a=!0,n=s,r=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===r){a=!0,r=o,n=s;break}if(l===n){a=!0,n=o,r=s;break}l=l.sibling}if(!a)throw Error(le(189))}}if(r.alternate!==n)throw Error(le(190))}if(r.tag!==3)throw Error(le(188));return r.stateNode.current===r?e:t}function U0(e){return e=lS(e),e!==null?V0(e):null}function V0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=V0(e);if(t!==null)return t;e=e.sibling}return null}var W0=Dr.unstable_scheduleCallback,Pg=Dr.unstable_cancelCallback,cS=Dr.unstable_shouldYield,dS=Dr.unstable_requestPaint,Et=Dr.unstable_now,uS=Dr.unstable_getCurrentPriorityLevel,um=Dr.unstable_ImmediatePriority,B0=Dr.unstable_UserBlockingPriority,Dc=Dr.unstable_NormalPriority,fS=Dr.unstable_LowPriority,q0=Dr.unstable_IdlePriority,md=null,bn=null;function hS(e){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(md,e,void 0,(e.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:gS,mS=Math.log,pS=Math.LN2;function gS(e){return e>>>=0,e===0?32:31-(mS(e)/pS|0)|0}var Ol=64,Ll=4194304;function ga(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ic(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,o=e.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=ga(l):(o&=a,o!==0&&(n=ga(o)))}else a=r&~s,a!==0?n=ga(a):o!==0&&(n=ga(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-on(t),s=1<<r,n|=e[r],t&=~s;return n}function vS(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xS(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-on(o),l=1<<a,c=s[a];c===-1?(!(l&r)||l&n)&&(s[a]=vS(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function Rf(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function H0(){var e=Ol;return Ol<<=1,!(Ol&4194240)&&(Ol=64),e}function bu(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function hl(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-on(t),e[t]=r}function wS(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-on(r),o=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~o}}function fm(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-on(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var nt=0;function G0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Y0,hm,Z0,K0,X0,Af=!1,Fl=[],ws=null,ys=null,bs=null,$a=new Map,Ua=new Map,as=[],yS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tg(e,t){switch(e){case"focusin":case"focusout":ws=null;break;case"dragenter":case"dragleave":ys=null;break;case"mouseover":case"mouseout":bs=null;break;case"pointerover":case"pointerout":$a.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ua.delete(t.pointerId)}}function ra(e,t,r,n,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[s]},t!==null&&(t=pl(t),t!==null&&hm(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function bS(e,t,r,n,s){switch(t){case"focusin":return ws=ra(ws,e,t,r,n,s),!0;case"dragenter":return ys=ra(ys,e,t,r,n,s),!0;case"mouseover":return bs=ra(bs,e,t,r,n,s),!0;case"pointerover":var o=s.pointerId;return $a.set(o,ra($a.get(o)||null,e,t,r,n,s)),!0;case"gotpointercapture":return o=s.pointerId,Ua.set(o,ra(Ua.get(o)||null,e,t,r,n,s)),!0}return!1}function Q0(e){var t=ii(e.target);if(t!==null){var r=Ci(t);if(r!==null){if(t=r.tag,t===13){if(t=$0(r),t!==null){e.blockedOn=t,X0(e.priority,function(){Z0(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Mf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Cf=n,r.target.dispatchEvent(n),Cf=null}else return t=pl(r),t!==null&&hm(t),e.blockedOn=r,!1;t.shift()}return!0}function Rg(e,t,r){fc(e)&&r.delete(t)}function _S(){Af=!1,ws!==null&&fc(ws)&&(ws=null),ys!==null&&fc(ys)&&(ys=null),bs!==null&&fc(bs)&&(bs=null),$a.forEach(Rg),Ua.forEach(Rg)}function na(e,t){e.blockedOn===t&&(e.blockedOn=null,Af||(Af=!0,Dr.unstable_scheduleCallback(Dr.unstable_NormalPriority,_S)))}function Va(e){function t(s){return na(s,e)}if(0<Fl.length){na(Fl[0],e);for(var r=1;r<Fl.length;r++){var n=Fl[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ws!==null&&na(ws,e),ys!==null&&na(ys,e),bs!==null&&na(bs,e),$a.forEach(t),Ua.forEach(t),r=0;r<as.length;r++)n=as[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<as.length&&(r=as[0],r.blockedOn===null);)Q0(r),r.blockedOn===null&&as.shift()}var co=Gn.ReactCurrentBatchConfig,Oc=!0;function jS(e,t,r,n){var s=nt,o=co.transition;co.transition=null;try{nt=1,mm(e,t,r,n)}finally{nt=s,co.transition=o}}function NS(e,t,r,n){var s=nt,o=co.transition;co.transition=null;try{nt=4,mm(e,t,r,n)}finally{nt=s,co.transition=o}}function mm(e,t,r,n){if(Oc){var s=Mf(e,t,r,n);if(s===null)Ru(e,t,n,Lc,r),Tg(e,n);else if(bS(s,e,t,r,n))n.stopPropagation();else if(Tg(e,n),t&4&&-1<yS.indexOf(e)){for(;s!==null;){var o=pl(s);if(o!==null&&Y0(o),o=Mf(e,t,r,n),o===null&&Ru(e,t,n,Lc,r),o===s)break;s=o}s!==null&&n.stopPropagation()}else Ru(e,t,n,null,r)}}var Lc=null;function Mf(e,t,r,n){if(Lc=null,e=dm(n),e=ii(e),e!==null)if(t=Ci(e),t===null)e=null;else if(r=t.tag,r===13){if(e=$0(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Lc=e,null}function J0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uS()){case um:return 1;case B0:return 4;case Dc:case fS:return 16;case q0:return 536870912;default:return 16}default:return 16}}var ps=null,pm=null,hc=null;function ew(){if(hc)return hc;var e,t=pm,r=t.length,n,s="value"in ps?ps.value:ps.textContent,o=s.length;for(e=0;e<r&&t[e]===s[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===s[o-n];n++);return hc=s.slice(e,1<n?1-n:void 0)}function mc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zl(){return!0}function Ag(){return!1}function Lr(e){function t(r,n,s,o,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?zl:Ag,this.isPropagationStopped=Ag,this}return Nt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=zl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=zl)},persist:function(){},isPersistent:zl}),t}var Uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gm=Lr(Uo),ml=Nt({},Uo,{view:0,detail:0}),SS=Lr(ml),_u,ju,sa,pd=Nt({},ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sa&&(sa&&e.type==="mousemove"?(_u=e.screenX-sa.screenX,ju=e.screenY-sa.screenY):ju=_u=0,sa=e),_u)},movementY:function(e){return"movementY"in e?e.movementY:ju}}),Mg=Lr(pd),kS=Nt({},pd,{dataTransfer:0}),CS=Lr(kS),ES=Nt({},ml,{relatedTarget:0}),Nu=Lr(ES),PS=Nt({},Uo,{animationName:0,elapsedTime:0,pseudoElement:0}),TS=Lr(PS),RS=Nt({},Uo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),AS=Lr(RS),MS=Nt({},Uo,{data:0}),Dg=Lr(MS),DS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=OS[e])?!!t[e]:!1}function vm(){return LS}var FS=Nt({},ml,{key:function(e){if(e.key){var t=DS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=mc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?IS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vm,charCode:function(e){return e.type==="keypress"?mc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?mc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zS=Lr(FS),$S=Nt({},pd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ig=Lr($S),US=Nt({},ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vm}),VS=Lr(US),WS=Nt({},Uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),BS=Lr(WS),qS=Nt({},pd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),HS=Lr(qS),GS=[9,13,27,32],xm=$n&&"CompositionEvent"in window,ja=null;$n&&"documentMode"in document&&(ja=document.documentMode);var YS=$n&&"TextEvent"in window&&!ja,tw=$n&&(!xm||ja&&8<ja&&11>=ja),Og=" ",Lg=!1;function rw(e,t){switch(e){case"keyup":return GS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nw(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ki=!1;function ZS(e,t){switch(e){case"compositionend":return nw(t);case"keypress":return t.which!==32?null:(Lg=!0,Og);case"textInput":return e=t.data,e===Og&&Lg?null:e;default:return null}}function KS(e,t){if(Ki)return e==="compositionend"||!xm&&rw(e,t)?(e=ew(),hc=pm=ps=null,Ki=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tw&&t.locale!=="ko"?null:t.data;default:return null}}var XS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!XS[e.type]:t==="textarea"}function sw(e,t,r,n){I0(n),t=Fc(t,"onChange"),0<t.length&&(r=new gm("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Na=null,Wa=null;function QS(e){pw(e,0)}function gd(e){var t=Ji(e);if(E0(t))return e}function JS(e,t){if(e==="change")return t}var iw=!1;if($n){var Su;if($n){var ku="oninput"in document;if(!ku){var zg=document.createElement("div");zg.setAttribute("oninput","return;"),ku=typeof zg.oninput=="function"}Su=ku}else Su=!1;iw=Su&&(!document.documentMode||9<document.documentMode)}function $g(){Na&&(Na.detachEvent("onpropertychange",ow),Wa=Na=null)}function ow(e){if(e.propertyName==="value"&&gd(Wa)){var t=[];sw(t,Wa,e,dm(e)),z0(QS,t)}}function ek(e,t,r){e==="focusin"?($g(),Na=t,Wa=r,Na.attachEvent("onpropertychange",ow)):e==="focusout"&&$g()}function tk(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return gd(Wa)}function rk(e,t){if(e==="click")return gd(t)}function nk(e,t){if(e==="input"||e==="change")return gd(t)}function sk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ln=typeof Object.is=="function"?Object.is:sk;function Ba(e,t){if(ln(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!pf.call(t,s)||!ln(e[s],t[s]))return!1}return!0}function Ug(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vg(e,t){var r=Ug(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ug(r)}}function aw(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?aw(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function lw(){for(var e=window,t=Rc();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Rc(e.document)}return t}function wm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ik(e){var t=lw(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&aw(r.ownerDocument.documentElement,r)){if(n!==null&&wm(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,o=Math.min(n.start,s);n=n.end===void 0?o:Math.min(n.end,s),!e.extend&&o>n&&(s=n,n=o,o=s),s=Vg(r,o);var a=Vg(r,n);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ok=$n&&"documentMode"in document&&11>=document.documentMode,Xi=null,Df=null,Sa=null,If=!1;function Wg(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;If||Xi==null||Xi!==Rc(n)||(n=Xi,"selectionStart"in n&&wm(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Sa&&Ba(Sa,n)||(Sa=n,n=Fc(Df,"onSelect"),0<n.length&&(t=new gm("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Xi)))}function $l(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Qi={animationend:$l("Animation","AnimationEnd"),animationiteration:$l("Animation","AnimationIteration"),animationstart:$l("Animation","AnimationStart"),transitionend:$l("Transition","TransitionEnd")},Cu={},cw={};$n&&(cw=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function vd(e){if(Cu[e])return Cu[e];if(!Qi[e])return e;var t=Qi[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in cw)return Cu[e]=t[r];return e}var dw=vd("animationend"),uw=vd("animationiteration"),fw=vd("animationstart"),hw=vd("transitionend"),mw=new Map,Bg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fs(e,t){mw.set(e,t),ki(t,[e])}for(var Eu=0;Eu<Bg.length;Eu++){var Pu=Bg[Eu],ak=Pu.toLowerCase(),lk=Pu[0].toUpperCase()+Pu.slice(1);Fs(ak,"on"+lk)}Fs(dw,"onAnimationEnd");Fs(uw,"onAnimationIteration");Fs(fw,"onAnimationStart");Fs("dblclick","onDoubleClick");Fs("focusin","onFocus");Fs("focusout","onBlur");Fs(hw,"onTransitionEnd");ko("onMouseEnter",["mouseout","mouseover"]);ko("onMouseLeave",["mouseout","mouseover"]);ko("onPointerEnter",["pointerout","pointerover"]);ko("onPointerLeave",["pointerout","pointerover"]);ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ki("onBeforeInput",["compositionend","keypress","textInput","paste"]);ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var va="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ck=new Set("cancel close invalid load scroll toggle".split(" ").concat(va));function qg(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,aS(n,t,void 0,e),e.currentTarget=null}function pw(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;qg(s,l,d),o=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;qg(s,l,d),o=c}}}if(Mc)throw e=Tf,Mc=!1,Tf=null,e}function vt(e,t){var r=t[$f];r===void 0&&(r=t[$f]=new Set);var n=e+"__bubble";r.has(n)||(gw(t,e,2,!1),r.add(n))}function Tu(e,t,r){var n=0;t&&(n|=4),gw(r,e,n,t)}var Ul="_reactListening"+Math.random().toString(36).slice(2);function qa(e){if(!e[Ul]){e[Ul]=!0,j0.forEach(function(r){r!=="selectionchange"&&(ck.has(r)||Tu(r,!1,e),Tu(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ul]||(t[Ul]=!0,Tu("selectionchange",!1,t))}}function gw(e,t,r,n){switch(J0(t)){case 1:var s=jS;break;case 4:s=NS;break;default:s=mm}r=s.bind(null,t,r,e),s=void 0,!Pf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Ru(e,t,r,n,s){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=ii(l),a===null)return;if(c=a.tag,c===5||c===6){n=o=a;continue e}l=l.parentNode}}n=n.return}z0(function(){var d=o,f=dm(r),h=[];e:{var m=mw.get(e);if(m!==void 0){var x=gm,y=e;switch(e){case"keypress":if(mc(r)===0)break e;case"keydown":case"keyup":x=zS;break;case"focusin":y="focus",x=Nu;break;case"focusout":y="blur",x=Nu;break;case"beforeblur":case"afterblur":x=Nu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Mg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=CS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=VS;break;case dw:case uw:case fw:x=TS;break;case hw:x=BS;break;case"scroll":x=SS;break;case"wheel":x=HS;break;case"copy":case"cut":case"paste":x=AS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Ig}var p=(t&4)!==0,b=!p&&e==="scroll",w=p?m!==null?m+"Capture":null:m;p=[];for(var g=d,v;g!==null;){v=g;var _=v.stateNode;if(v.tag===5&&_!==null&&(v=_,w!==null&&(_=za(g,w),_!=null&&p.push(Ha(g,_,v)))),b)break;g=g.return}0<p.length&&(m=new x(m,y,null,r,f),h.push({event:m,listeners:p}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",m&&r!==Cf&&(y=r.relatedTarget||r.fromElement)&&(ii(y)||y[Un]))break e;if((x||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,x?(y=r.relatedTarget||r.toElement,x=d,y=y?ii(y):null,y!==null&&(b=Ci(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(x=null,y=d),x!==y)){if(p=Mg,_="onMouseLeave",w="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(p=Ig,_="onPointerLeave",w="onPointerEnter",g="pointer"),b=x==null?m:Ji(x),v=y==null?m:Ji(y),m=new p(_,g+"leave",x,r,f),m.target=b,m.relatedTarget=v,_=null,ii(f)===d&&(p=new p(w,g+"enter",y,r,f),p.target=v,p.relatedTarget=b,_=p),b=_,x&&y)t:{for(p=x,w=y,g=0,v=p;v;v=Di(v))g++;for(v=0,_=w;_;_=Di(_))v++;for(;0<g-v;)p=Di(p),g--;for(;0<v-g;)w=Di(w),v--;for(;g--;){if(p===w||w!==null&&p===w.alternate)break t;p=Di(p),w=Di(w)}p=null}else p=null;x!==null&&Hg(h,m,x,p,!1),y!==null&&b!==null&&Hg(h,b,y,p,!0)}}e:{if(m=d?Ji(d):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var j=JS;else if(Fg(m))if(iw)j=nk;else{j=tk;var k=ek}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=rk);if(j&&(j=j(e,d))){sw(h,j,r,f);break e}k&&k(e,m,d),e==="focusout"&&(k=m._wrapperState)&&k.controlled&&m.type==="number"&&_f(m,"number",m.value)}switch(k=d?Ji(d):window,e){case"focusin":(Fg(k)||k.contentEditable==="true")&&(Xi=k,Df=d,Sa=null);break;case"focusout":Sa=Df=Xi=null;break;case"mousedown":If=!0;break;case"contextmenu":case"mouseup":case"dragend":If=!1,Wg(h,r,f);break;case"selectionchange":if(ok)break;case"keydown":case"keyup":Wg(h,r,f)}var C;if(xm)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ki?rw(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(tw&&r.locale!=="ko"&&(Ki||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ki&&(C=ew()):(ps=f,pm="value"in ps?ps.value:ps.textContent,Ki=!0)),k=Fc(d,E),0<k.length&&(E=new Dg(E,e,null,r,f),h.push({event:E,listeners:k}),C?E.data=C:(C=nw(r),C!==null&&(E.data=C)))),(C=YS?ZS(e,r):KS(e,r))&&(d=Fc(d,"onBeforeInput"),0<d.length&&(f=new Dg("onBeforeInput","beforeinput",null,r,f),h.push({event:f,listeners:d}),f.data=C))}pw(h,t)})}function Ha(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Fc(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=za(e,r),o!=null&&n.unshift(Ha(e,o,s)),o=za(e,t),o!=null&&n.push(Ha(e,o,s))),e=e.return}return n}function Di(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Hg(e,t,r,n,s){for(var o=t._reactName,a=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,s?(c=za(r,o),c!=null&&a.unshift(Ha(r,c,l))):s||(c=za(r,o),c!=null&&a.push(Ha(r,c,l)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var dk=/\r\n?/g,uk=/\u0000|\uFFFD/g;function Gg(e){return(typeof e=="string"?e:""+e).replace(dk,`
`).replace(uk,"")}function Vl(e,t,r){if(t=Gg(t),Gg(e)!==t&&r)throw Error(le(425))}function zc(){}var Of=null,Lf=null;function Ff(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var zf=typeof setTimeout=="function"?setTimeout:void 0,fk=typeof clearTimeout=="function"?clearTimeout:void 0,Yg=typeof Promise=="function"?Promise:void 0,hk=typeof queueMicrotask=="function"?queueMicrotask:typeof Yg<"u"?function(e){return Yg.resolve(null).then(e).catch(mk)}:zf;function mk(e){setTimeout(function(){throw e})}function Au(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Va(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Va(t)}function _s(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Zg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Vo=Math.random().toString(36).slice(2),yn="__reactFiber$"+Vo,Ga="__reactProps$"+Vo,Un="__reactContainer$"+Vo,$f="__reactEvents$"+Vo,pk="__reactListeners$"+Vo,gk="__reactHandles$"+Vo;function ii(e){var t=e[yn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Un]||r[yn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Zg(e);e!==null;){if(r=e[yn])return r;e=Zg(e)}return t}e=r,r=e.parentNode}return null}function pl(e){return e=e[yn]||e[Un],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ji(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(le(33))}function xd(e){return e[Ga]||null}var Uf=[],eo=-1;function zs(e){return{current:e}}function xt(e){0>eo||(e.current=Uf[eo],Uf[eo]=null,eo--)}function mt(e,t){eo++,Uf[eo]=e.current,e.current=t}var Ps={},ir=zs(Ps),yr=zs(!1),gi=Ps;function Co(e,t){var r=e.type.contextTypes;if(!r)return Ps;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function br(e){return e=e.childContextTypes,e!=null}function $c(){xt(yr),xt(ir)}function Kg(e,t,r){if(ir.current!==Ps)throw Error(le(168));mt(ir,t),mt(yr,r)}function vw(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(le(108,eS(e)||"Unknown",s));return Nt({},r,n)}function Uc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ps,gi=ir.current,mt(ir,e),mt(yr,yr.current),!0}function Xg(e,t,r){var n=e.stateNode;if(!n)throw Error(le(169));r?(e=vw(e,t,gi),n.__reactInternalMemoizedMergedChildContext=e,xt(yr),xt(ir),mt(ir,e)):xt(yr),mt(yr,r)}var Dn=null,wd=!1,Mu=!1;function xw(e){Dn===null?Dn=[e]:Dn.push(e)}function vk(e){wd=!0,xw(e)}function $s(){if(!Mu&&Dn!==null){Mu=!0;var e=0,t=nt;try{var r=Dn;for(nt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Dn=null,wd=!1}catch(s){throw Dn!==null&&(Dn=Dn.slice(e+1)),W0(um,$s),s}finally{nt=t,Mu=!1}}return null}var to=[],ro=0,Vc=null,Wc=0,Ur=[],Vr=0,vi=null,On=1,Ln="";function Qs(e,t){to[ro++]=Wc,to[ro++]=Vc,Vc=e,Wc=t}function ww(e,t,r){Ur[Vr++]=On,Ur[Vr++]=Ln,Ur[Vr++]=vi,vi=e;var n=On;e=Ln;var s=32-on(n)-1;n&=~(1<<s),r+=1;var o=32-on(t)+s;if(30<o){var a=s-s%5;o=(n&(1<<a)-1).toString(32),n>>=a,s-=a,On=1<<32-on(t)+s|r<<s|n,Ln=o+e}else On=1<<o|r<<s|n,Ln=e}function ym(e){e.return!==null&&(Qs(e,1),ww(e,1,0))}function bm(e){for(;e===Vc;)Vc=to[--ro],to[ro]=null,Wc=to[--ro],to[ro]=null;for(;e===vi;)vi=Ur[--Vr],Ur[Vr]=null,Ln=Ur[--Vr],Ur[Vr]=null,On=Ur[--Vr],Ur[Vr]=null}var Ar=null,Rr=null,yt=!1,nn=null;function yw(e,t){var r=Wr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Qg(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ar=e,Rr=_s(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ar=e,Rr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=vi!==null?{id:On,overflow:Ln}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Wr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ar=e,Rr=null,!0):!1;default:return!1}}function Vf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Wf(e){if(yt){var t=Rr;if(t){var r=t;if(!Qg(e,t)){if(Vf(e))throw Error(le(418));t=_s(r.nextSibling);var n=Ar;t&&Qg(e,t)?yw(n,r):(e.flags=e.flags&-4097|2,yt=!1,Ar=e)}}else{if(Vf(e))throw Error(le(418));e.flags=e.flags&-4097|2,yt=!1,Ar=e}}}function Jg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ar=e}function Wl(e){if(e!==Ar)return!1;if(!yt)return Jg(e),yt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ff(e.type,e.memoizedProps)),t&&(t=Rr)){if(Vf(e))throw bw(),Error(le(418));for(;t;)yw(e,t),t=_s(t.nextSibling)}if(Jg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(le(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Rr=_s(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Rr=null}}else Rr=Ar?_s(e.stateNode.nextSibling):null;return!0}function bw(){for(var e=Rr;e;)e=_s(e.nextSibling)}function Eo(){Rr=Ar=null,yt=!1}function _m(e){nn===null?nn=[e]:nn.push(e)}var xk=Gn.ReactCurrentBatchConfig;function ia(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(le(309));var n=r.stateNode}if(!n)throw Error(le(147,e));var s=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(le(284));if(!r._owner)throw Error(le(290,e))}return e}function Bl(e,t){throw e=Object.prototype.toString.call(t),Error(le(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ev(e){var t=e._init;return t(e._payload)}function _w(e){function t(w,g){if(e){var v=w.deletions;v===null?(w.deletions=[g],w.flags|=16):v.push(g)}}function r(w,g){if(!e)return null;for(;g!==null;)t(w,g),g=g.sibling;return null}function n(w,g){for(w=new Map;g!==null;)g.key!==null?w.set(g.key,g):w.set(g.index,g),g=g.sibling;return w}function s(w,g){return w=ks(w,g),w.index=0,w.sibling=null,w}function o(w,g,v){return w.index=v,e?(v=w.alternate,v!==null?(v=v.index,v<g?(w.flags|=2,g):v):(w.flags|=2,g)):(w.flags|=1048576,g)}function a(w){return e&&w.alternate===null&&(w.flags|=2),w}function l(w,g,v,_){return g===null||g.tag!==6?(g=$u(v,w.mode,_),g.return=w,g):(g=s(g,v),g.return=w,g)}function c(w,g,v,_){var j=v.type;return j===Zi?f(w,g,v.props.children,_,v.key):g!==null&&(g.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ss&&ev(j)===g.type)?(_=s(g,v.props),_.ref=ia(w,g,v),_.return=w,_):(_=bc(v.type,v.key,v.props,null,w.mode,_),_.ref=ia(w,g,v),_.return=w,_)}function d(w,g,v,_){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=Uu(v,w.mode,_),g.return=w,g):(g=s(g,v.children||[]),g.return=w,g)}function f(w,g,v,_,j){return g===null||g.tag!==7?(g=mi(v,w.mode,_,j),g.return=w,g):(g=s(g,v),g.return=w,g)}function h(w,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=$u(""+g,w.mode,v),g.return=w,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ml:return v=bc(g.type,g.key,g.props,null,w.mode,v),v.ref=ia(w,null,g),v.return=w,v;case Yi:return g=Uu(g,w.mode,v),g.return=w,g;case ss:var _=g._init;return h(w,_(g._payload),v)}if(pa(g)||ea(g))return g=mi(g,w.mode,v,null),g.return=w,g;Bl(w,g)}return null}function m(w,g,v,_){var j=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return j!==null?null:l(w,g,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ml:return v.key===j?c(w,g,v,_):null;case Yi:return v.key===j?d(w,g,v,_):null;case ss:return j=v._init,m(w,g,j(v._payload),_)}if(pa(v)||ea(v))return j!==null?null:f(w,g,v,_,null);Bl(w,v)}return null}function x(w,g,v,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return w=w.get(v)||null,l(g,w,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ml:return w=w.get(_.key===null?v:_.key)||null,c(g,w,_,j);case Yi:return w=w.get(_.key===null?v:_.key)||null,d(g,w,_,j);case ss:var k=_._init;return x(w,g,v,k(_._payload),j)}if(pa(_)||ea(_))return w=w.get(v)||null,f(g,w,_,j,null);Bl(g,_)}return null}function y(w,g,v,_){for(var j=null,k=null,C=g,E=g=0,O=null;C!==null&&E<v.length;E++){C.index>E?(O=C,C=null):O=C.sibling;var B=m(w,C,v[E],_);if(B===null){C===null&&(C=O);break}e&&C&&B.alternate===null&&t(w,C),g=o(B,g,E),k===null?j=B:k.sibling=B,k=B,C=O}if(E===v.length)return r(w,C),yt&&Qs(w,E),j;if(C===null){for(;E<v.length;E++)C=h(w,v[E],_),C!==null&&(g=o(C,g,E),k===null?j=C:k.sibling=C,k=C);return yt&&Qs(w,E),j}for(C=n(w,C);E<v.length;E++)O=x(C,w,E,v[E],_),O!==null&&(e&&O.alternate!==null&&C.delete(O.key===null?E:O.key),g=o(O,g,E),k===null?j=O:k.sibling=O,k=O);return e&&C.forEach(function(q){return t(w,q)}),yt&&Qs(w,E),j}function p(w,g,v,_){var j=ea(v);if(typeof j!="function")throw Error(le(150));if(v=j.call(v),v==null)throw Error(le(151));for(var k=j=null,C=g,E=g=0,O=null,B=v.next();C!==null&&!B.done;E++,B=v.next()){C.index>E?(O=C,C=null):O=C.sibling;var q=m(w,C,B.value,_);if(q===null){C===null&&(C=O);break}e&&C&&q.alternate===null&&t(w,C),g=o(q,g,E),k===null?j=q:k.sibling=q,k=q,C=O}if(B.done)return r(w,C),yt&&Qs(w,E),j;if(C===null){for(;!B.done;E++,B=v.next())B=h(w,B.value,_),B!==null&&(g=o(B,g,E),k===null?j=B:k.sibling=B,k=B);return yt&&Qs(w,E),j}for(C=n(w,C);!B.done;E++,B=v.next())B=x(C,w,E,B.value,_),B!==null&&(e&&B.alternate!==null&&C.delete(B.key===null?E:B.key),g=o(B,g,E),k===null?j=B:k.sibling=B,k=B);return e&&C.forEach(function(X){return t(w,X)}),yt&&Qs(w,E),j}function b(w,g,v,_){if(typeof v=="object"&&v!==null&&v.type===Zi&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ml:e:{for(var j=v.key,k=g;k!==null;){if(k.key===j){if(j=v.type,j===Zi){if(k.tag===7){r(w,k.sibling),g=s(k,v.props.children),g.return=w,w=g;break e}}else if(k.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ss&&ev(j)===k.type){r(w,k.sibling),g=s(k,v.props),g.ref=ia(w,k,v),g.return=w,w=g;break e}r(w,k);break}else t(w,k);k=k.sibling}v.type===Zi?(g=mi(v.props.children,w.mode,_,v.key),g.return=w,w=g):(_=bc(v.type,v.key,v.props,null,w.mode,_),_.ref=ia(w,g,v),_.return=w,w=_)}return a(w);case Yi:e:{for(k=v.key;g!==null;){if(g.key===k)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){r(w,g.sibling),g=s(g,v.children||[]),g.return=w,w=g;break e}else{r(w,g);break}else t(w,g);g=g.sibling}g=Uu(v,w.mode,_),g.return=w,w=g}return a(w);case ss:return k=v._init,b(w,g,k(v._payload),_)}if(pa(v))return y(w,g,v,_);if(ea(v))return p(w,g,v,_);Bl(w,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(r(w,g.sibling),g=s(g,v),g.return=w,w=g):(r(w,g),g=$u(v,w.mode,_),g.return=w,w=g),a(w)):r(w,g)}return b}var Po=_w(!0),jw=_w(!1),Bc=zs(null),qc=null,no=null,jm=null;function Nm(){jm=no=qc=null}function Sm(e){var t=Bc.current;xt(Bc),e._currentValue=t}function Bf(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function uo(e,t){qc=e,jm=no=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(wr=!0),e.firstContext=null)}function Hr(e){var t=e._currentValue;if(jm!==e)if(e={context:e,memoizedValue:t,next:null},no===null){if(qc===null)throw Error(le(308));no=e,qc.dependencies={lanes:0,firstContext:e}}else no=no.next=e;return t}var oi=null;function km(e){oi===null?oi=[e]:oi.push(e)}function Nw(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,km(t)):(r.next=s.next,s.next=r),t.interleaved=r,Vn(e,n)}function Vn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var is=!1;function Cm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sw(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function js(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Je&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Vn(e,r)}return s=n.interleaved,s===null?(t.next=t,km(n)):(t.next=s.next,s.next=t),n.interleaved=t,Vn(e,r)}function pc(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,fm(e,r)}}function tv(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?s=o=t:o=o.next=t}else s=o=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Hc(e,t,r,n){var s=e.updateQueue;is=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?o=d:a.next=d,a=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(o!==null){var h=s.baseState;a=0,f=d=c=null,l=o;do{var m=l.lane,x=l.eventTime;if((n&m)===m){f!==null&&(f=f.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,p=l;switch(m=t,x=r,p.tag){case 1:if(y=p.payload,typeof y=="function"){h=y.call(x,h,m);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=p.payload,m=typeof y=="function"?y.call(x,h,m):y,m==null)break e;h=Nt({},h,m);break e;case 2:is=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else x={eventTime:x,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=x,c=h):f=f.next=x,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(f===null&&(c=h),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);wi|=a,e.lanes=a,e.memoizedState=h}}function rv(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(le(191,s));s.call(n)}}}var gl={},_n=zs(gl),Ya=zs(gl),Za=zs(gl);function ai(e){if(e===gl)throw Error(le(174));return e}function Em(e,t){switch(mt(Za,t),mt(Ya,e),mt(_n,gl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Nf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Nf(t,e)}xt(_n),mt(_n,t)}function To(){xt(_n),xt(Ya),xt(Za)}function kw(e){ai(Za.current);var t=ai(_n.current),r=Nf(t,e.type);t!==r&&(mt(Ya,e),mt(_n,r))}function Pm(e){Ya.current===e&&(xt(_n),xt(Ya))}var _t=zs(0);function Gc(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Du=[];function Tm(){for(var e=0;e<Du.length;e++)Du[e]._workInProgressVersionPrimary=null;Du.length=0}var gc=Gn.ReactCurrentDispatcher,Iu=Gn.ReactCurrentBatchConfig,xi=0,jt=null,Ft=null,Wt=null,Yc=!1,ka=!1,Ka=0,wk=0;function Jt(){throw Error(le(321))}function Rm(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ln(e[r],t[r]))return!1;return!0}function Am(e,t,r,n,s,o){if(xi=o,jt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,gc.current=e===null||e.memoizedState===null?jk:Nk,e=r(n,s),ka){o=0;do{if(ka=!1,Ka=0,25<=o)throw Error(le(301));o+=1,Wt=Ft=null,t.updateQueue=null,gc.current=Sk,e=r(n,s)}while(ka)}if(gc.current=Zc,t=Ft!==null&&Ft.next!==null,xi=0,Wt=Ft=jt=null,Yc=!1,t)throw Error(le(300));return e}function Mm(){var e=Ka!==0;return Ka=0,e}function gn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?jt.memoizedState=Wt=e:Wt=Wt.next=e,Wt}function Gr(){if(Ft===null){var e=jt.alternate;e=e!==null?e.memoizedState:null}else e=Ft.next;var t=Wt===null?jt.memoizedState:Wt.next;if(t!==null)Wt=t,Ft=e;else{if(e===null)throw Error(le(310));Ft=e,e={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},Wt===null?jt.memoizedState=Wt=e:Wt=Wt.next=e}return Wt}function Xa(e,t){return typeof t=="function"?t(e):t}function Ou(e){var t=Gr(),r=t.queue;if(r===null)throw Error(le(311));r.lastRenderedReducer=e;var n=Ft,s=n.baseQueue,o=r.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}n.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,n=n.baseState;var l=a=null,c=null,d=o;do{var f=d.lane;if((xi&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,a=n):c=c.next=h,jt.lanes|=f,wi|=f}d=d.next}while(d!==null&&d!==o);c===null?a=n:c.next=l,ln(n,t.memoizedState)||(wr=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do o=s.lane,jt.lanes|=o,wi|=o,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Lu(e){var t=Gr(),r=t.queue;if(r===null)throw Error(le(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,o=t.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do o=e(o,a.action),a=a.next;while(a!==s);ln(o,t.memoizedState)||(wr=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function Cw(){}function Ew(e,t){var r=jt,n=Gr(),s=t(),o=!ln(n.memoizedState,s);if(o&&(n.memoizedState=s,wr=!0),n=n.queue,Dm(Rw.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||Wt!==null&&Wt.memoizedState.tag&1){if(r.flags|=2048,Qa(9,Tw.bind(null,r,n,s,t),void 0,null),Bt===null)throw Error(le(349));xi&30||Pw(r,t,s)}return s}function Pw(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=jt.updateQueue,t===null?(t={lastEffect:null,stores:null},jt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Tw(e,t,r,n){t.value=r,t.getSnapshot=n,Aw(t)&&Mw(e)}function Rw(e,t,r){return r(function(){Aw(t)&&Mw(e)})}function Aw(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ln(e,r)}catch{return!0}}function Mw(e){var t=Vn(e,1);t!==null&&an(t,e,1,-1)}function nv(e){var t=gn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xa,lastRenderedState:e},t.queue=e,e=e.dispatch=_k.bind(null,jt,e),[t.memoizedState,e]}function Qa(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=jt.updateQueue,t===null?(t={lastEffect:null,stores:null},jt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Dw(){return Gr().memoizedState}function vc(e,t,r,n){var s=gn();jt.flags|=e,s.memoizedState=Qa(1|t,r,void 0,n===void 0?null:n)}function yd(e,t,r,n){var s=Gr();n=n===void 0?null:n;var o=void 0;if(Ft!==null){var a=Ft.memoizedState;if(o=a.destroy,n!==null&&Rm(n,a.deps)){s.memoizedState=Qa(t,r,o,n);return}}jt.flags|=e,s.memoizedState=Qa(1|t,r,o,n)}function sv(e,t){return vc(8390656,8,e,t)}function Dm(e,t){return yd(2048,8,e,t)}function Iw(e,t){return yd(4,2,e,t)}function Ow(e,t){return yd(4,4,e,t)}function Lw(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Fw(e,t,r){return r=r!=null?r.concat([e]):null,yd(4,4,Lw.bind(null,t,e),r)}function Im(){}function zw(e,t){var r=Gr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Rm(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function $w(e,t){var r=Gr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Rm(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Uw(e,t,r){return xi&21?(ln(r,t)||(r=H0(),jt.lanes|=r,wi|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,wr=!0),e.memoizedState=r)}function yk(e,t){var r=nt;nt=r!==0&&4>r?r:4,e(!0);var n=Iu.transition;Iu.transition={};try{e(!1),t()}finally{nt=r,Iu.transition=n}}function Vw(){return Gr().memoizedState}function bk(e,t,r){var n=Ss(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Ww(e))Bw(t,r);else if(r=Nw(e,t,r,n),r!==null){var s=dr();an(r,e,n,s),qw(r,t,n)}}function _k(e,t,r){var n=Ss(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ww(e))Bw(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,l=o(a,r);if(s.hasEagerState=!0,s.eagerState=l,ln(l,a)){var c=t.interleaved;c===null?(s.next=s,km(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=Nw(e,t,s,n),r!==null&&(s=dr(),an(r,e,n,s),qw(r,t,n))}}function Ww(e){var t=e.alternate;return e===jt||t!==null&&t===jt}function Bw(e,t){ka=Yc=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function qw(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,fm(e,r)}}var Zc={readContext:Hr,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},jk={readContext:Hr,useCallback:function(e,t){return gn().memoizedState=[e,t===void 0?null:t],e},useContext:Hr,useEffect:sv,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,vc(4194308,4,Lw.bind(null,t,e),r)},useLayoutEffect:function(e,t){return vc(4194308,4,e,t)},useInsertionEffect:function(e,t){return vc(4,2,e,t)},useMemo:function(e,t){var r=gn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=gn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=bk.bind(null,jt,e),[n.memoizedState,e]},useRef:function(e){var t=gn();return e={current:e},t.memoizedState=e},useState:nv,useDebugValue:Im,useDeferredValue:function(e){return gn().memoizedState=e},useTransition:function(){var e=nv(!1),t=e[0];return e=yk.bind(null,e[1]),gn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=jt,s=gn();if(yt){if(r===void 0)throw Error(le(407));r=r()}else{if(r=t(),Bt===null)throw Error(le(349));xi&30||Pw(n,t,r)}s.memoizedState=r;var o={value:r,getSnapshot:t};return s.queue=o,sv(Rw.bind(null,n,o,e),[e]),n.flags|=2048,Qa(9,Tw.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=gn(),t=Bt.identifierPrefix;if(yt){var r=Ln,n=On;r=(n&~(1<<32-on(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ka++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=wk++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Nk={readContext:Hr,useCallback:zw,useContext:Hr,useEffect:Dm,useImperativeHandle:Fw,useInsertionEffect:Iw,useLayoutEffect:Ow,useMemo:$w,useReducer:Ou,useRef:Dw,useState:function(){return Ou(Xa)},useDebugValue:Im,useDeferredValue:function(e){var t=Gr();return Uw(t,Ft.memoizedState,e)},useTransition:function(){var e=Ou(Xa)[0],t=Gr().memoizedState;return[e,t]},useMutableSource:Cw,useSyncExternalStore:Ew,useId:Vw,unstable_isNewReconciler:!1},Sk={readContext:Hr,useCallback:zw,useContext:Hr,useEffect:Dm,useImperativeHandle:Fw,useInsertionEffect:Iw,useLayoutEffect:Ow,useMemo:$w,useReducer:Lu,useRef:Dw,useState:function(){return Lu(Xa)},useDebugValue:Im,useDeferredValue:function(e){var t=Gr();return Ft===null?t.memoizedState=e:Uw(t,Ft.memoizedState,e)},useTransition:function(){var e=Lu(Xa)[0],t=Gr().memoizedState;return[e,t]},useMutableSource:Cw,useSyncExternalStore:Ew,useId:Vw,unstable_isNewReconciler:!1};function Qr(e,t){if(e&&e.defaultProps){t=Nt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function qf(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Nt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var bd={isMounted:function(e){return(e=e._reactInternals)?Ci(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=dr(),s=Ss(e),o=Fn(n,s);o.payload=t,r!=null&&(o.callback=r),t=js(e,o,s),t!==null&&(an(t,e,s,n),pc(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=dr(),s=Ss(e),o=Fn(n,s);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=js(e,o,s),t!==null&&(an(t,e,s,n),pc(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=dr(),n=Ss(e),s=Fn(r,n);s.tag=2,t!=null&&(s.callback=t),t=js(e,s,n),t!==null&&(an(t,e,n,r),pc(t,e,n))}};function iv(e,t,r,n,s,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,a):t.prototype&&t.prototype.isPureReactComponent?!Ba(r,n)||!Ba(s,o):!0}function Hw(e,t,r){var n=!1,s=Ps,o=t.contextType;return typeof o=="object"&&o!==null?o=Hr(o):(s=br(t)?gi:ir.current,n=t.contextTypes,o=(n=n!=null)?Co(e,s):Ps),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=bd,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function ov(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&bd.enqueueReplaceState(t,t.state,null)}function Hf(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Cm(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Hr(o):(o=br(t)?gi:ir.current,s.context=Co(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(qf(e,t,o,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&bd.enqueueReplaceState(s,s.state,null),Hc(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ro(e,t){try{var r="",n=t;do r+=JN(n),n=n.return;while(n);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function Fu(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Gf(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var kk=typeof WeakMap=="function"?WeakMap:Map;function Gw(e,t,r){r=Fn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Xc||(Xc=!0,nh=n),Gf(e,t)},r}function Yw(e,t,r){r=Fn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Gf(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Gf(e,t),typeof n!="function"&&(Ns===null?Ns=new Set([this]):Ns.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function av(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new kk;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=$k.bind(null,e,t,r),t.then(e,e))}function lv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function cv(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Fn(-1,1),t.tag=2,js(r,t,1))),r.lanes|=1),e)}var Ck=Gn.ReactCurrentOwner,wr=!1;function lr(e,t,r,n){t.child=e===null?jw(t,null,r,n):Po(t,e.child,r,n)}function dv(e,t,r,n,s){r=r.render;var o=t.ref;return uo(t,s),n=Am(e,t,r,n,o,s),r=Mm(),e!==null&&!wr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wn(e,t,s)):(yt&&r&&ym(t),t.flags|=1,lr(e,t,n,s),t.child)}function uv(e,t,r,n,s){if(e===null){var o=r.type;return typeof o=="function"&&!Wm(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,Zw(e,t,o,n,s)):(e=bc(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:Ba,r(a,n)&&e.ref===t.ref)return Wn(e,t,s)}return t.flags|=1,e=ks(o,n),e.ref=t.ref,e.return=t,t.child=e}function Zw(e,t,r,n,s){if(e!==null){var o=e.memoizedProps;if(Ba(o,n)&&e.ref===t.ref)if(wr=!1,t.pendingProps=n=o,(e.lanes&s)!==0)e.flags&131072&&(wr=!0);else return t.lanes=e.lanes,Wn(e,t,s)}return Yf(e,t,r,n,s)}function Kw(e,t,r){var n=t.pendingProps,s=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(io,Pr),Pr|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,mt(io,Pr),Pr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,mt(io,Pr),Pr|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,mt(io,Pr),Pr|=n;return lr(e,t,s,r),t.child}function Xw(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Yf(e,t,r,n,s){var o=br(r)?gi:ir.current;return o=Co(t,o),uo(t,s),r=Am(e,t,r,n,o,s),n=Mm(),e!==null&&!wr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wn(e,t,s)):(yt&&n&&ym(t),t.flags|=1,lr(e,t,r,s),t.child)}function fv(e,t,r,n,s){if(br(r)){var o=!0;Uc(t)}else o=!1;if(uo(t,s),t.stateNode===null)xc(e,t),Hw(t,r,n),Hf(t,r,n,s),n=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,d=r.contextType;typeof d=="object"&&d!==null?d=Hr(d):(d=br(r)?gi:ir.current,d=Co(t,d));var f=r.getDerivedStateFromProps,h=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==d)&&ov(t,a,n,d),is=!1;var m=t.memoizedState;a.state=m,Hc(t,n,a,s),c=t.memoizedState,l!==n||m!==c||yr.current||is?(typeof f=="function"&&(qf(t,r,f,n),c=t.memoizedState),(l=is||iv(t,r,l,n,m,c,d))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=d,n=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,Sw(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Qr(t.type,l),a.props=d,h=t.pendingProps,m=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Hr(c):(c=br(r)?gi:ir.current,c=Co(t,c));var x=r.getDerivedStateFromProps;(f=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||m!==c)&&ov(t,a,n,c),is=!1,m=t.memoizedState,a.state=m,Hc(t,n,a,s);var y=t.memoizedState;l!==h||m!==y||yr.current||is?(typeof x=="function"&&(qf(t,r,x,n),y=t.memoizedState),(d=is||iv(t,r,d,n,m,y,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,y,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),a.props=n,a.state=y,a.context=c,n=d):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return Zf(e,t,r,n,o,s)}function Zf(e,t,r,n,s,o){Xw(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return s&&Xg(t,r,!1),Wn(e,t,o);n=t.stateNode,Ck.current=t;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=Po(t,e.child,null,o),t.child=Po(t,null,l,o)):lr(e,t,l,o),t.memoizedState=n.state,s&&Xg(t,r,!0),t.child}function Qw(e){var t=e.stateNode;t.pendingContext?Kg(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Kg(e,t.context,!1),Em(e,t.containerInfo)}function hv(e,t,r,n,s){return Eo(),_m(s),t.flags|=256,lr(e,t,r,n),t.child}var Kf={dehydrated:null,treeContext:null,retryLane:0};function Xf(e){return{baseLanes:e,cachePool:null,transitions:null}}function Jw(e,t,r){var n=t.pendingProps,s=_t.current,o=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),mt(_t,s&1),e===null)return Wf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,o?(n=t.mode,o=t.child,a={mode:"hidden",children:a},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Nd(a,n,0,null),e=mi(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Xf(r),t.memoizedState=Kf,e):Om(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Ek(e,t,a,n,l,s,r);if(o){o=n.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=ks(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=ks(l,o):(o=mi(o,a,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,a=e.child.memoizedState,a=a===null?Xf(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~r,t.memoizedState=Kf,n}return o=e.child,e=o.sibling,n=ks(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Om(e,t){return t=Nd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ql(e,t,r,n){return n!==null&&_m(n),Po(t,e.child,null,r),e=Om(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ek(e,t,r,n,s,o,a){if(r)return t.flags&256?(t.flags&=-257,n=Fu(Error(le(422))),ql(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,s=t.mode,n=Nd({mode:"visible",children:n.children},s,0,null),o=mi(o,s,a,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Po(t,e.child,null,a),t.child.memoizedState=Xf(a),t.memoizedState=Kf,o);if(!(t.mode&1))return ql(e,t,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,o=Error(le(419)),n=Fu(o,n,void 0),ql(e,t,a,n)}if(l=(a&e.childLanes)!==0,wr||l){if(n=Bt,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Vn(e,s),an(n,e,s,-1))}return Vm(),n=Fu(Error(le(421))),ql(e,t,a,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Uk.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,Rr=_s(s.nextSibling),Ar=t,yt=!0,nn=null,e!==null&&(Ur[Vr++]=On,Ur[Vr++]=Ln,Ur[Vr++]=vi,On=e.id,Ln=e.overflow,vi=t),t=Om(t,n.children),t.flags|=4096,t)}function mv(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Bf(e.return,t,r)}function zu(e,t,r,n,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s)}function ey(e,t,r){var n=t.pendingProps,s=n.revealOrder,o=n.tail;if(lr(e,t,n.children,r),n=_t.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&mv(e,r,t);else if(e.tag===19)mv(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(mt(_t,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Gc(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),zu(t,!1,s,r,o);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Gc(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}zu(t,!0,r,null,o);break;case"together":zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function xc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),wi|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(le(153));if(t.child!==null){for(e=t.child,r=ks(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ks(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Pk(e,t,r){switch(t.tag){case 3:Qw(t),Eo();break;case 5:kw(t);break;case 1:br(t.type)&&Uc(t);break;case 4:Em(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;mt(Bc,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(mt(_t,_t.current&1),t.flags|=128,null):r&t.child.childLanes?Jw(e,t,r):(mt(_t,_t.current&1),e=Wn(e,t,r),e!==null?e.sibling:null);mt(_t,_t.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return ey(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),mt(_t,_t.current),n)break;return null;case 22:case 23:return t.lanes=0,Kw(e,t,r)}return Wn(e,t,r)}var ty,Qf,ry,ny;ty=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Qf=function(){};ry=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,ai(_n.current);var o=null;switch(r){case"input":s=yf(e,s),n=yf(e,n),o=[];break;case"select":s=Nt({},s,{value:void 0}),n=Nt({},n,{value:void 0}),o=[];break;case"textarea":s=jf(e,s),n=jf(e,n),o=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=zc)}Sf(r,n);var a;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(La.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in n){var c=n[d];if(l=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(o||(o=[]),o.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(La.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&vt("scroll",e),o||l===c||(o=[])):(o=o||[]).push(d,c))}r&&(o=o||[]).push("style",r);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};ny=function(e,t,r,n){r!==n&&(t.flags|=4)};function oa(e,t){if(!yt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function er(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Tk(e,t,r){var n=t.pendingProps;switch(bm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return er(t),null;case 1:return br(t.type)&&$c(),er(t),null;case 3:return n=t.stateNode,To(),xt(yr),xt(ir),Tm(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Wl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,nn!==null&&(oh(nn),nn=null))),Qf(e,t),er(t),null;case 5:Pm(t);var s=ai(Za.current);if(r=t.type,e!==null&&t.stateNode!=null)ry(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(le(166));return er(t),null}if(e=ai(_n.current),Wl(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[yn]=t,n[Ga]=o,e=(t.mode&1)!==0,r){case"dialog":vt("cancel",n),vt("close",n);break;case"iframe":case"object":case"embed":vt("load",n);break;case"video":case"audio":for(s=0;s<va.length;s++)vt(va[s],n);break;case"source":vt("error",n);break;case"img":case"image":case"link":vt("error",n),vt("load",n);break;case"details":vt("toggle",n);break;case"input":jg(n,o),vt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},vt("invalid",n);break;case"textarea":Sg(n,o),vt("invalid",n)}Sf(r,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?n.textContent!==l&&(o.suppressHydrationWarning!==!0&&Vl(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Vl(n.textContent,l,e),s=["children",""+l]):La.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&vt("scroll",n)}switch(r){case"input":Dl(n),Ng(n,o,!0);break;case"textarea":Dl(n),kg(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=zc)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=R0(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[yn]=t,e[Ga]=n,ty(e,t,!1,!1),t.stateNode=e;e:{switch(a=kf(r,n),r){case"dialog":vt("cancel",e),vt("close",e),s=n;break;case"iframe":case"object":case"embed":vt("load",e),s=n;break;case"video":case"audio":for(s=0;s<va.length;s++)vt(va[s],e);s=n;break;case"source":vt("error",e),s=n;break;case"img":case"image":case"link":vt("error",e),vt("load",e),s=n;break;case"details":vt("toggle",e),s=n;break;case"input":jg(e,n),s=yf(e,n),vt("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Nt({},n,{value:void 0}),vt("invalid",e);break;case"textarea":Sg(e,n),s=jf(e,n),vt("invalid",e);break;default:s=n}Sf(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?D0(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&A0(e,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Fa(e,c):typeof c=="number"&&Fa(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(La.hasOwnProperty(o)?c!=null&&o==="onScroll"&&vt("scroll",e):c!=null&&om(e,o,c,a))}switch(r){case"input":Dl(e),Ng(e,n,!1);break;case"textarea":Dl(e),kg(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Es(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?oo(e,!!n.multiple,o,!1):n.defaultValue!=null&&oo(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=zc)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return er(t),null;case 6:if(e&&t.stateNode!=null)ny(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(le(166));if(r=ai(Za.current),ai(_n.current),Wl(t)){if(n=t.stateNode,r=t.memoizedProps,n[yn]=t,(o=n.nodeValue!==r)&&(e=Ar,e!==null))switch(e.tag){case 3:Vl(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Vl(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[yn]=t,t.stateNode=n}return er(t),null;case 13:if(xt(_t),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(yt&&Rr!==null&&t.mode&1&&!(t.flags&128))bw(),Eo(),t.flags|=98560,o=!1;else if(o=Wl(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(le(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(le(317));o[yn]=t}else Eo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;er(t),o=!1}else nn!==null&&(oh(nn),nn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||_t.current&1?zt===0&&(zt=3):Vm())),t.updateQueue!==null&&(t.flags|=4),er(t),null);case 4:return To(),Qf(e,t),e===null&&qa(t.stateNode.containerInfo),er(t),null;case 10:return Sm(t.type._context),er(t),null;case 17:return br(t.type)&&$c(),er(t),null;case 19:if(xt(_t),o=t.memoizedState,o===null)return er(t),null;if(n=(t.flags&128)!==0,a=o.rendering,a===null)if(n)oa(o,!1);else{if(zt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Gc(e),a!==null){for(t.flags|=128,oa(o,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return mt(_t,_t.current&1|2),t.child}e=e.sibling}o.tail!==null&&Et()>Ao&&(t.flags|=128,n=!0,oa(o,!1),t.lanes=4194304)}else{if(!n)if(e=Gc(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),oa(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!yt)return er(t),null}else 2*Et()-o.renderingStartTime>Ao&&r!==1073741824&&(t.flags|=128,n=!0,oa(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(r=o.last,r!==null?r.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Et(),t.sibling=null,r=_t.current,mt(_t,n?r&1|2:r&1),t):(er(t),null);case 22:case 23:return Um(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Pr&1073741824&&(er(t),t.subtreeFlags&6&&(t.flags|=8192)):er(t),null;case 24:return null;case 25:return null}throw Error(le(156,t.tag))}function Rk(e,t){switch(bm(t),t.tag){case 1:return br(t.type)&&$c(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return To(),xt(yr),xt(ir),Tm(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Pm(t),null;case 13:if(xt(_t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(le(340));Eo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xt(_t),null;case 4:return To(),null;case 10:return Sm(t.type._context),null;case 22:case 23:return Um(),null;case 24:return null;default:return null}}var Hl=!1,nr=!1,Ak=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function so(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){kt(e,t,n)}else r.current=null}function Jf(e,t,r){try{r()}catch(n){kt(e,t,n)}}var pv=!1;function Mk(e,t){if(Of=Oc,e=lw(),wm(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,d=0,f=0,h=e,m=null;t:for(;;){for(var x;h!==r||s!==0&&h.nodeType!==3||(l=a+s),h!==o||n!==0&&h.nodeType!==3||(c=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(x=h.firstChild)!==null;)m=h,h=x;for(;;){if(h===e)break t;if(m===r&&++d===s&&(l=a),m===o&&++f===n&&(c=a),(x=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=x}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Lf={focusedElem:e,selectionRange:r},Oc=!1,Ne=t;Ne!==null;)if(t=Ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ne=e;else for(;Ne!==null;){t=Ne;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var p=y.memoizedProps,b=y.memoizedState,w=t.stateNode,g=w.getSnapshotBeforeUpdate(t.elementType===t.type?p:Qr(t.type,p),b);w.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(_){kt(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Ne=e;break}Ne=t.return}return y=pv,pv=!1,y}function Ca(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Jf(t,r,o)}s=s.next}while(s!==n)}}function _d(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function eh(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function sy(e){var t=e.alternate;t!==null&&(e.alternate=null,sy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[yn],delete t[Ga],delete t[$f],delete t[pk],delete t[gk])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function iy(e){return e.tag===5||e.tag===3||e.tag===4}function gv(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||iy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function th(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=zc));else if(n!==4&&(e=e.child,e!==null))for(th(e,t,r),e=e.sibling;e!==null;)th(e,t,r),e=e.sibling}function rh(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(rh(e,t,r),e=e.sibling;e!==null;)rh(e,t,r),e=e.sibling}var Gt=null,tn=!1;function Xn(e,t,r){for(r=r.child;r!==null;)oy(e,t,r),r=r.sibling}function oy(e,t,r){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(md,r)}catch{}switch(r.tag){case 5:nr||so(r,t);case 6:var n=Gt,s=tn;Gt=null,Xn(e,t,r),Gt=n,tn=s,Gt!==null&&(tn?(e=Gt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Gt.removeChild(r.stateNode));break;case 18:Gt!==null&&(tn?(e=Gt,r=r.stateNode,e.nodeType===8?Au(e.parentNode,r):e.nodeType===1&&Au(e,r),Va(e)):Au(Gt,r.stateNode));break;case 4:n=Gt,s=tn,Gt=r.stateNode.containerInfo,tn=!0,Xn(e,t,r),Gt=n,tn=s;break;case 0:case 11:case 14:case 15:if(!nr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Jf(r,t,a),s=s.next}while(s!==n)}Xn(e,t,r);break;case 1:if(!nr&&(so(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){kt(r,t,l)}Xn(e,t,r);break;case 21:Xn(e,t,r);break;case 22:r.mode&1?(nr=(n=nr)||r.memoizedState!==null,Xn(e,t,r),nr=n):Xn(e,t,r);break;default:Xn(e,t,r)}}function vv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Ak),t.forEach(function(n){var s=Vk.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Zr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var o=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:Gt=l.stateNode,tn=!1;break e;case 3:Gt=l.stateNode.containerInfo,tn=!0;break e;case 4:Gt=l.stateNode.containerInfo,tn=!0;break e}l=l.return}if(Gt===null)throw Error(le(160));oy(o,a,s),Gt=null,tn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){kt(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ay(t,e),t=t.sibling}function ay(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Zr(t,e),pn(e),n&4){try{Ca(3,e,e.return),_d(3,e)}catch(p){kt(e,e.return,p)}try{Ca(5,e,e.return)}catch(p){kt(e,e.return,p)}}break;case 1:Zr(t,e),pn(e),n&512&&r!==null&&so(r,r.return);break;case 5:if(Zr(t,e),pn(e),n&512&&r!==null&&so(r,r.return),e.flags&32){var s=e.stateNode;try{Fa(s,"")}catch(p){kt(e,e.return,p)}}if(n&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,a=r!==null?r.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&P0(s,o),kf(l,a);var d=kf(l,o);for(a=0;a<c.length;a+=2){var f=c[a],h=c[a+1];f==="style"?D0(s,h):f==="dangerouslySetInnerHTML"?A0(s,h):f==="children"?Fa(s,h):om(s,f,h,d)}switch(l){case"input":bf(s,o);break;case"textarea":T0(s,o);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var x=o.value;x!=null?oo(s,!!o.multiple,x,!1):m!==!!o.multiple&&(o.defaultValue!=null?oo(s,!!o.multiple,o.defaultValue,!0):oo(s,!!o.multiple,o.multiple?[]:"",!1))}s[Ga]=o}catch(p){kt(e,e.return,p)}}break;case 6:if(Zr(t,e),pn(e),n&4){if(e.stateNode===null)throw Error(le(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(p){kt(e,e.return,p)}}break;case 3:if(Zr(t,e),pn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Va(t.containerInfo)}catch(p){kt(e,e.return,p)}break;case 4:Zr(t,e),pn(e);break;case 13:Zr(t,e),pn(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(zm=Et())),n&4&&vv(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(nr=(d=nr)||f,Zr(t,e),nr=d):Zr(t,e),pn(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!f&&e.mode&1)for(Ne=e,f=e.child;f!==null;){for(h=Ne=f;Ne!==null;){switch(m=Ne,x=m.child,m.tag){case 0:case 11:case 14:case 15:Ca(4,m,m.return);break;case 1:so(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(p){kt(n,r,p)}}break;case 5:so(m,m.return);break;case 22:if(m.memoizedState!==null){wv(h);continue}}x!==null?(x.return=m,Ne=x):wv(h)}f=f.sibling}e:for(f=null,h=e;;){if(h.tag===5){if(f===null){f=h;try{s=h.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=M0("display",a))}catch(p){kt(e,e.return,p)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(p){kt(e,e.return,p)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Zr(t,e),pn(e),n&4&&vv(e);break;case 21:break;default:Zr(t,e),pn(e)}}function pn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(iy(r)){var n=r;break e}r=r.return}throw Error(le(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Fa(s,""),n.flags&=-33);var o=gv(e);rh(e,o,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=gv(e);th(e,l,a);break;default:throw Error(le(161))}}catch(c){kt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Dk(e,t,r){Ne=e,ly(e)}function ly(e,t,r){for(var n=(e.mode&1)!==0;Ne!==null;){var s=Ne,o=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||Hl;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||nr;l=Hl;var d=nr;if(Hl=a,(nr=c)&&!d)for(Ne=s;Ne!==null;)a=Ne,c=a.child,a.tag===22&&a.memoizedState!==null?yv(s):c!==null?(c.return=a,Ne=c):yv(s);for(;o!==null;)Ne=o,ly(o),o=o.sibling;Ne=s,Hl=l,nr=d}xv(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,Ne=o):xv(e)}}function xv(e){for(;Ne!==null;){var t=Ne;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:nr||_d(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!nr)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Qr(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&rv(t,o,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}rv(t,a,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&Va(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}nr||t.flags&512&&eh(t)}catch(m){kt(t,t.return,m)}}if(t===e){Ne=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ne=r;break}Ne=t.return}}function wv(e){for(;Ne!==null;){var t=Ne;if(t===e){Ne=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ne=r;break}Ne=t.return}}function yv(e){for(;Ne!==null;){var t=Ne;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{_d(4,t)}catch(c){kt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){kt(t,s,c)}}var o=t.return;try{eh(t)}catch(c){kt(t,o,c)}break;case 5:var a=t.return;try{eh(t)}catch(c){kt(t,a,c)}}}catch(c){kt(t,t.return,c)}if(t===e){Ne=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ne=l;break}Ne=t.return}}var Ik=Math.ceil,Kc=Gn.ReactCurrentDispatcher,Lm=Gn.ReactCurrentOwner,Br=Gn.ReactCurrentBatchConfig,Je=0,Bt=null,Mt=null,Zt=0,Pr=0,io=zs(0),zt=0,Ja=null,wi=0,jd=0,Fm=0,Ea=null,vr=null,zm=0,Ao=1/0,An=null,Xc=!1,nh=null,Ns=null,Gl=!1,gs=null,Qc=0,Pa=0,sh=null,wc=-1,yc=0;function dr(){return Je&6?Et():wc!==-1?wc:wc=Et()}function Ss(e){return e.mode&1?Je&2&&Zt!==0?Zt&-Zt:xk.transition!==null?(yc===0&&(yc=H0()),yc):(e=nt,e!==0||(e=window.event,e=e===void 0?16:J0(e.type)),e):1}function an(e,t,r,n){if(50<Pa)throw Pa=0,sh=null,Error(le(185));hl(e,r,n),(!(Je&2)||e!==Bt)&&(e===Bt&&(!(Je&2)&&(jd|=r),zt===4&&ls(e,Zt)),_r(e,n),r===1&&Je===0&&!(t.mode&1)&&(Ao=Et()+500,wd&&$s()))}function _r(e,t){var r=e.callbackNode;xS(e,t);var n=Ic(e,e===Bt?Zt:0);if(n===0)r!==null&&Pg(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Pg(r),t===1)e.tag===0?vk(bv.bind(null,e)):xw(bv.bind(null,e)),hk(function(){!(Je&6)&&$s()}),r=null;else{switch(G0(n)){case 1:r=um;break;case 4:r=B0;break;case 16:r=Dc;break;case 536870912:r=q0;break;default:r=Dc}r=gy(r,cy.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function cy(e,t){if(wc=-1,yc=0,Je&6)throw Error(le(327));var r=e.callbackNode;if(fo()&&e.callbackNode!==r)return null;var n=Ic(e,e===Bt?Zt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Jc(e,n);else{t=n;var s=Je;Je|=2;var o=uy();(Bt!==e||Zt!==t)&&(An=null,Ao=Et()+500,hi(e,t));do try{Fk();break}catch(l){dy(e,l)}while(!0);Nm(),Kc.current=o,Je=s,Mt!==null?t=0:(Bt=null,Zt=0,t=zt)}if(t!==0){if(t===2&&(s=Rf(e),s!==0&&(n=s,t=ih(e,s))),t===1)throw r=Ja,hi(e,0),ls(e,n),_r(e,Et()),r;if(t===6)ls(e,n);else{if(s=e.current.alternate,!(n&30)&&!Ok(s)&&(t=Jc(e,n),t===2&&(o=Rf(e),o!==0&&(n=o,t=ih(e,o))),t===1))throw r=Ja,hi(e,0),ls(e,n),_r(e,Et()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(le(345));case 2:Js(e,vr,An);break;case 3:if(ls(e,n),(n&130023424)===n&&(t=zm+500-Et(),10<t)){if(Ic(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){dr(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=zf(Js.bind(null,e,vr,An),t);break}Js(e,vr,An);break;case 4:if(ls(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var a=31-on(n);o=1<<a,a=t[a],a>s&&(s=a),n&=~o}if(n=s,n=Et()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ik(n/1960))-n,10<n){e.timeoutHandle=zf(Js.bind(null,e,vr,An),n);break}Js(e,vr,An);break;case 5:Js(e,vr,An);break;default:throw Error(le(329))}}}return _r(e,Et()),e.callbackNode===r?cy.bind(null,e):null}function ih(e,t){var r=Ea;return e.current.memoizedState.isDehydrated&&(hi(e,t).flags|=256),e=Jc(e,t),e!==2&&(t=vr,vr=r,t!==null&&oh(t)),e}function oh(e){vr===null?vr=e:vr.push.apply(vr,e)}function Ok(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],o=s.getSnapshot;s=s.value;try{if(!ln(o(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ls(e,t){for(t&=~Fm,t&=~jd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-on(t),n=1<<r;e[r]=-1,t&=~n}}function bv(e){if(Je&6)throw Error(le(327));fo();var t=Ic(e,0);if(!(t&1))return _r(e,Et()),null;var r=Jc(e,t);if(e.tag!==0&&r===2){var n=Rf(e);n!==0&&(t=n,r=ih(e,n))}if(r===1)throw r=Ja,hi(e,0),ls(e,t),_r(e,Et()),r;if(r===6)throw Error(le(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Js(e,vr,An),_r(e,Et()),null}function $m(e,t){var r=Je;Je|=1;try{return e(t)}finally{Je=r,Je===0&&(Ao=Et()+500,wd&&$s())}}function yi(e){gs!==null&&gs.tag===0&&!(Je&6)&&fo();var t=Je;Je|=1;var r=Br.transition,n=nt;try{if(Br.transition=null,nt=1,e)return e()}finally{nt=n,Br.transition=r,Je=t,!(Je&6)&&$s()}}function Um(){Pr=io.current,xt(io)}function hi(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,fk(r)),Mt!==null)for(r=Mt.return;r!==null;){var n=r;switch(bm(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&$c();break;case 3:To(),xt(yr),xt(ir),Tm();break;case 5:Pm(n);break;case 4:To();break;case 13:xt(_t);break;case 19:xt(_t);break;case 10:Sm(n.type._context);break;case 22:case 23:Um()}r=r.return}if(Bt=e,Mt=e=ks(e.current,null),Zt=Pr=t,zt=0,Ja=null,Fm=jd=wi=0,vr=Ea=null,oi!==null){for(t=0;t<oi.length;t++)if(r=oi[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,o=r.pending;if(o!==null){var a=o.next;o.next=s,n.next=a}r.pending=n}oi=null}return e}function dy(e,t){do{var r=Mt;try{if(Nm(),gc.current=Zc,Yc){for(var n=jt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Yc=!1}if(xi=0,Wt=Ft=jt=null,ka=!1,Ka=0,Lm.current=null,r===null||r.return===null){zt=1,Ja=t,Mt=null;break}e:{var o=e,a=r.return,l=r,c=t;if(t=Zt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=l,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var x=lv(a);if(x!==null){x.flags&=-257,cv(x,a,l,o,t),x.mode&1&&av(o,d,t),t=x,c=d;var y=t.updateQueue;if(y===null){var p=new Set;p.add(c),t.updateQueue=p}else y.add(c);break e}else{if(!(t&1)){av(o,d,t),Vm();break e}c=Error(le(426))}}else if(yt&&l.mode&1){var b=lv(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),cv(b,a,l,o,t),_m(Ro(c,l));break e}}o=c=Ro(c,l),zt!==4&&(zt=2),Ea===null?Ea=[o]:Ea.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var w=Gw(o,c,t);tv(o,w);break e;case 1:l=c;var g=o.type,v=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ns===null||!Ns.has(v)))){o.flags|=65536,t&=-t,o.lanes|=t;var _=Yw(o,l,t);tv(o,_);break e}}o=o.return}while(o!==null)}hy(r)}catch(j){t=j,Mt===r&&r!==null&&(Mt=r=r.return);continue}break}while(!0)}function uy(){var e=Kc.current;return Kc.current=Zc,e===null?Zc:e}function Vm(){(zt===0||zt===3||zt===2)&&(zt=4),Bt===null||!(wi&268435455)&&!(jd&268435455)||ls(Bt,Zt)}function Jc(e,t){var r=Je;Je|=2;var n=uy();(Bt!==e||Zt!==t)&&(An=null,hi(e,t));do try{Lk();break}catch(s){dy(e,s)}while(!0);if(Nm(),Je=r,Kc.current=n,Mt!==null)throw Error(le(261));return Bt=null,Zt=0,zt}function Lk(){for(;Mt!==null;)fy(Mt)}function Fk(){for(;Mt!==null&&!cS();)fy(Mt)}function fy(e){var t=py(e.alternate,e,Pr);e.memoizedProps=e.pendingProps,t===null?hy(e):Mt=t,Lm.current=null}function hy(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Rk(r,t),r!==null){r.flags&=32767,Mt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{zt=6,Mt=null;return}}else if(r=Tk(r,t,Pr),r!==null){Mt=r;return}if(t=t.sibling,t!==null){Mt=t;return}Mt=t=e}while(t!==null);zt===0&&(zt=5)}function Js(e,t,r){var n=nt,s=Br.transition;try{Br.transition=null,nt=1,zk(e,t,r,n)}finally{Br.transition=s,nt=n}return null}function zk(e,t,r,n){do fo();while(gs!==null);if(Je&6)throw Error(le(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(le(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(wS(e,o),e===Bt&&(Mt=Bt=null,Zt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Gl||(Gl=!0,gy(Dc,function(){return fo(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Br.transition,Br.transition=null;var a=nt;nt=1;var l=Je;Je|=4,Lm.current=null,Mk(e,r),ay(r,e),ik(Lf),Oc=!!Of,Lf=Of=null,e.current=r,Dk(r),dS(),Je=l,nt=a,Br.transition=o}else e.current=r;if(Gl&&(Gl=!1,gs=e,Qc=s),o=e.pendingLanes,o===0&&(Ns=null),hS(r.stateNode),_r(e,Et()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Xc)throw Xc=!1,e=nh,nh=null,e;return Qc&1&&e.tag!==0&&fo(),o=e.pendingLanes,o&1?e===sh?Pa++:(Pa=0,sh=e):Pa=0,$s(),null}function fo(){if(gs!==null){var e=G0(Qc),t=Br.transition,r=nt;try{if(Br.transition=null,nt=16>e?16:e,gs===null)var n=!1;else{if(e=gs,gs=null,Qc=0,Je&6)throw Error(le(331));var s=Je;for(Je|=4,Ne=e.current;Ne!==null;){var o=Ne,a=o.child;if(Ne.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Ne=d;Ne!==null;){var f=Ne;switch(f.tag){case 0:case 11:case 15:Ca(8,f,o)}var h=f.child;if(h!==null)h.return=f,Ne=h;else for(;Ne!==null;){f=Ne;var m=f.sibling,x=f.return;if(sy(f),f===d){Ne=null;break}if(m!==null){m.return=x,Ne=m;break}Ne=x}}}var y=o.alternate;if(y!==null){var p=y.child;if(p!==null){y.child=null;do{var b=p.sibling;p.sibling=null,p=b}while(p!==null)}}Ne=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Ne=a;else e:for(;Ne!==null;){if(o=Ne,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ca(9,o,o.return)}var w=o.sibling;if(w!==null){w.return=o.return,Ne=w;break e}Ne=o.return}}var g=e.current;for(Ne=g;Ne!==null;){a=Ne;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,Ne=v;else e:for(a=g;Ne!==null;){if(l=Ne,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:_d(9,l)}}catch(j){kt(l,l.return,j)}if(l===a){Ne=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,Ne=_;break e}Ne=l.return}}if(Je=s,$s(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(md,e)}catch{}n=!0}return n}finally{nt=r,Br.transition=t}}return!1}function _v(e,t,r){t=Ro(r,t),t=Gw(e,t,1),e=js(e,t,1),t=dr(),e!==null&&(hl(e,1,t),_r(e,t))}function kt(e,t,r){if(e.tag===3)_v(e,e,r);else for(;t!==null;){if(t.tag===3){_v(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ns===null||!Ns.has(n))){e=Ro(r,e),e=Yw(t,e,1),t=js(t,e,1),e=dr(),t!==null&&(hl(t,1,e),_r(t,e));break}}t=t.return}}function $k(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=dr(),e.pingedLanes|=e.suspendedLanes&r,Bt===e&&(Zt&r)===r&&(zt===4||zt===3&&(Zt&130023424)===Zt&&500>Et()-zm?hi(e,0):Fm|=r),_r(e,t)}function my(e,t){t===0&&(e.mode&1?(t=Ll,Ll<<=1,!(Ll&130023424)&&(Ll=4194304)):t=1);var r=dr();e=Vn(e,t),e!==null&&(hl(e,t,r),_r(e,r))}function Uk(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),my(e,r)}function Vk(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(le(314))}n!==null&&n.delete(t),my(e,r)}var py;py=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||yr.current)wr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return wr=!1,Pk(e,t,r);wr=!!(e.flags&131072)}else wr=!1,yt&&t.flags&1048576&&ww(t,Wc,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;xc(e,t),e=t.pendingProps;var s=Co(t,ir.current);uo(t,r),s=Am(null,t,n,e,s,r);var o=Mm();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,br(n)?(o=!0,Uc(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Cm(t),s.updater=bd,t.stateNode=s,s._reactInternals=t,Hf(t,n,e,r),t=Zf(null,t,n,!0,o,r)):(t.tag=0,yt&&o&&ym(t),lr(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(xc(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=Bk(n),e=Qr(n,e),s){case 0:t=Yf(null,t,n,e,r);break e;case 1:t=fv(null,t,n,e,r);break e;case 11:t=dv(null,t,n,e,r);break e;case 14:t=uv(null,t,n,Qr(n.type,e),r);break e}throw Error(le(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Qr(n,s),Yf(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Qr(n,s),fv(e,t,n,s,r);case 3:e:{if(Qw(t),e===null)throw Error(le(387));n=t.pendingProps,o=t.memoizedState,s=o.element,Sw(e,t),Hc(t,n,null,r);var a=t.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Ro(Error(le(423)),t),t=hv(e,t,n,r,s);break e}else if(n!==s){s=Ro(Error(le(424)),t),t=hv(e,t,n,r,s);break e}else for(Rr=_s(t.stateNode.containerInfo.firstChild),Ar=t,yt=!0,nn=null,r=jw(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Eo(),n===s){t=Wn(e,t,r);break e}lr(e,t,n,r)}t=t.child}return t;case 5:return kw(t),e===null&&Wf(t),n=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,a=s.children,Ff(n,s)?a=null:o!==null&&Ff(n,o)&&(t.flags|=32),Xw(e,t),lr(e,t,a,r),t.child;case 6:return e===null&&Wf(t),null;case 13:return Jw(e,t,r);case 4:return Em(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Po(t,null,n,r):lr(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Qr(n,s),dv(e,t,n,s,r);case 7:return lr(e,t,t.pendingProps,r),t.child;case 8:return lr(e,t,t.pendingProps.children,r),t.child;case 12:return lr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,mt(Bc,n._currentValue),n._currentValue=a,o!==null)if(ln(o.value,a)){if(o.children===s.children&&!yr.current){t=Wn(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=Fn(-1,r&-r),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Bf(o.return,r,t),l.lanes|=r;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(le(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),Bf(a,r,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}lr(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,uo(t,r),s=Hr(s),n=n(s),t.flags|=1,lr(e,t,n,r),t.child;case 14:return n=t.type,s=Qr(n,t.pendingProps),s=Qr(n.type,s),uv(e,t,n,s,r);case 15:return Zw(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Qr(n,s),xc(e,t),t.tag=1,br(n)?(e=!0,Uc(t)):e=!1,uo(t,r),Hw(t,n,s),Hf(t,n,s,r),Zf(null,t,n,!0,e,r);case 19:return ey(e,t,r);case 22:return Kw(e,t,r)}throw Error(le(156,t.tag))};function gy(e,t){return W0(e,t)}function Wk(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wr(e,t,r,n){return new Wk(e,t,r,n)}function Wm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Bk(e){if(typeof e=="function")return Wm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===lm)return 11;if(e===cm)return 14}return 2}function ks(e,t){var r=e.alternate;return r===null?(r=Wr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function bc(e,t,r,n,s,o){var a=2;if(n=e,typeof e=="function")Wm(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Zi:return mi(r.children,s,o,t);case am:a=8,s|=8;break;case gf:return e=Wr(12,r,t,s|2),e.elementType=gf,e.lanes=o,e;case vf:return e=Wr(13,r,t,s),e.elementType=vf,e.lanes=o,e;case xf:return e=Wr(19,r,t,s),e.elementType=xf,e.lanes=o,e;case k0:return Nd(r,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case N0:a=10;break e;case S0:a=9;break e;case lm:a=11;break e;case cm:a=14;break e;case ss:a=16,n=null;break e}throw Error(le(130,e==null?e:typeof e,""))}return t=Wr(a,r,t,s),t.elementType=e,t.type=n,t.lanes=o,t}function mi(e,t,r,n){return e=Wr(7,e,n,t),e.lanes=r,e}function Nd(e,t,r,n){return e=Wr(22,e,n,t),e.elementType=k0,e.lanes=r,e.stateNode={isHidden:!1},e}function $u(e,t,r){return e=Wr(6,e,null,t),e.lanes=r,e}function Uu(e,t,r){return t=Wr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qk(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bu(0),this.expirationTimes=bu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bu(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bm(e,t,r,n,s,o,a,l,c){return e=new qk(e,t,r,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Wr(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cm(o),e}function Hk(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yi,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function vy(e){if(!e)return Ps;e=e._reactInternals;e:{if(Ci(e)!==e||e.tag!==1)throw Error(le(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(br(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(le(171))}if(e.tag===1){var r=e.type;if(br(r))return vw(e,r,t)}return t}function xy(e,t,r,n,s,o,a,l,c){return e=Bm(r,n,!0,e,s,o,a,l,c),e.context=vy(null),r=e.current,n=dr(),s=Ss(r),o=Fn(n,s),o.callback=t??null,js(r,o,s),e.current.lanes=s,hl(e,s,n),_r(e,n),e}function Sd(e,t,r,n){var s=t.current,o=dr(),a=Ss(s);return r=vy(r),t.context===null?t.context=r:t.pendingContext=r,t=Fn(o,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=js(s,t,a),e!==null&&(an(e,s,a,o),pc(e,s,a)),a}function ed(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function qm(e,t){jv(e,t),(e=e.alternate)&&jv(e,t)}function Gk(){return null}var wy=typeof reportError=="function"?reportError:function(e){console.error(e)};function Hm(e){this._internalRoot=e}kd.prototype.render=Hm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(le(409));Sd(e,t,null,null)};kd.prototype.unmount=Hm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;yi(function(){Sd(null,e,null,null)}),t[Un]=null}};function kd(e){this._internalRoot=e}kd.prototype.unstable_scheduleHydration=function(e){if(e){var t=K0();e={blockedOn:null,target:e,priority:t};for(var r=0;r<as.length&&t!==0&&t<as[r].priority;r++);as.splice(r,0,e),r===0&&Q0(e)}};function Gm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Cd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Nv(){}function Yk(e,t,r,n,s){if(s){if(typeof n=="function"){var o=n;n=function(){var d=ed(a);o.call(d)}}var a=xy(t,n,e,0,null,!1,!1,"",Nv);return e._reactRootContainer=a,e[Un]=a.current,qa(e.nodeType===8?e.parentNode:e),yi(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var d=ed(c);l.call(d)}}var c=Bm(e,0,!1,null,null,!1,!1,"",Nv);return e._reactRootContainer=c,e[Un]=c.current,qa(e.nodeType===8?e.parentNode:e),yi(function(){Sd(t,c,r,n)}),c}function Ed(e,t,r,n,s){var o=r._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var c=ed(a);l.call(c)}}Sd(t,a,e,s)}else a=Yk(r,t,e,s,n);return ed(a)}Y0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ga(t.pendingLanes);r!==0&&(fm(t,r|1),_r(t,Et()),!(Je&6)&&(Ao=Et()+500,$s()))}break;case 13:yi(function(){var n=Vn(e,1);if(n!==null){var s=dr();an(n,e,1,s)}}),qm(e,1)}};hm=function(e){if(e.tag===13){var t=Vn(e,134217728);if(t!==null){var r=dr();an(t,e,134217728,r)}qm(e,134217728)}};Z0=function(e){if(e.tag===13){var t=Ss(e),r=Vn(e,t);if(r!==null){var n=dr();an(r,e,t,n)}qm(e,t)}};K0=function(){return nt};X0=function(e,t){var r=nt;try{return nt=e,t()}finally{nt=r}};Ef=function(e,t,r){switch(t){case"input":if(bf(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=xd(n);if(!s)throw Error(le(90));E0(n),bf(n,s)}}}break;case"textarea":T0(e,r);break;case"select":t=r.value,t!=null&&oo(e,!!r.multiple,t,!1)}};L0=$m;F0=yi;var Zk={usingClientEntryPoint:!1,Events:[pl,Ji,xd,I0,O0,$m]},aa={findFiberByHostInstance:ii,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Kk={bundleType:aa.bundleType,version:aa.version,rendererPackageName:aa.rendererPackageName,rendererConfig:aa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=U0(e),e===null?null:e.stateNode},findFiberByHostInstance:aa.findFiberByHostInstance||Gk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yl.isDisabled&&Yl.supportsFiber)try{md=Yl.inject(Kk),bn=Yl}catch{}}Or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zk;Or.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gm(t))throw Error(le(200));return Hk(e,t,null,r)};Or.createRoot=function(e,t){if(!Gm(e))throw Error(le(299));var r=!1,n="",s=wy;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Bm(e,1,!1,null,null,r,!1,n,s),e[Un]=t.current,qa(e.nodeType===8?e.parentNode:e),new Hm(t)};Or.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(le(188)):(e=Object.keys(e).join(","),Error(le(268,e)));return e=U0(t),e=e===null?null:e.stateNode,e};Or.flushSync=function(e){return yi(e)};Or.hydrate=function(e,t,r){if(!Cd(t))throw Error(le(200));return Ed(null,e,t,!0,r)};Or.hydrateRoot=function(e,t,r){if(!Gm(e))throw Error(le(405));var n=r!=null&&r.hydratedSources||null,s=!1,o="",a=wy;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=xy(t,null,e,1,r??null,s,!1,o,a),e[Un]=t.current,qa(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new kd(t)};Or.render=function(e,t,r){if(!Cd(t))throw Error(le(200));return Ed(null,e,t,!1,r)};Or.unmountComponentAtNode=function(e){if(!Cd(e))throw Error(le(40));return e._reactRootContainer?(yi(function(){Ed(null,null,e,!1,function(){e._reactRootContainer=null,e[Un]=null})}),!0):!1};Or.unstable_batchedUpdates=$m;Or.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Cd(r))throw Error(le(200));if(e==null||e._reactInternals===void 0)throw Error(le(38));return Ed(e,t,r,!1,n)};Or.version="18.3.1-next-f1338f8080-20240426";function yy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yy)}catch(e){console.error(e)}}yy(),y0.exports=Or;var Ei=y0.exports;const by=Jh(Ei);var _y,Sv=Ei;_y=Sv.createRoot,Sv.hydrateRoot;const Xk=1,Qk=1e6;let Vu=0;function Jk(){return Vu=(Vu+1)%Number.MAX_SAFE_INTEGER,Vu.toString()}const Wu=new Map,kv=e=>{if(Wu.has(e))return;const t=setTimeout(()=>{Wu.delete(e),Ta({type:"REMOVE_TOAST",toastId:e})},Qk);Wu.set(e,t)},eC=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,Xk)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?kv(r):e.toasts.forEach(n=>{kv(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},_c=[];let jc={toasts:[]};function Ta(e){jc=eC(jc,e),_c.forEach(t=>{t(jc)})}function ei({...e}){const t=Jk(),r=s=>Ta({type:"UPDATE_TOAST",toast:{...s,id:t}}),n=()=>Ta({type:"DISMISS_TOAST",toastId:t});return Ta({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||n()}}}),{id:t,dismiss:n,update:r}}function $t(){const[e,t]=u.useState(jc);return u.useEffect(()=>(_c.push(t),()=>{const r=_c.indexOf(t);r>-1&&_c.splice(r,1)}),[e]),{...e,toast:ei,dismiss:r=>Ta({type:"DISMISS_TOAST",toastId:r})}}function Pe(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function tC(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function jy(...e){return t=>e.forEach(r=>tC(r,t))}function st(...e){return u.useCallback(jy(...e),e)}function rC(e,t=[]){let r=[];function n(o,a){const l=u.createContext(a),c=r.length;r=[...r,a];function d(h){const{scope:m,children:x,...y}=h,p=(m==null?void 0:m[e][c])||l,b=u.useMemo(()=>y,Object.values(y));return i.jsx(p.Provider,{value:b,children:x})}function f(h,m){const x=(m==null?void 0:m[e][c])||l,y=u.useContext(x);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,f]}const s=()=>{const o=r.map(a=>u.createContext(a));return function(l){const c=(l==null?void 0:l[e])||o;return u.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,nC(s,...t)]}function nC(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=n.reduce((l,{useScope:c,scopeName:d})=>{const h=c(o)[`__scope${d}`];return{...l,...h}},{});return u.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}var Ts=u.forwardRef((e,t)=>{const{children:r,...n}=e,s=u.Children.toArray(r),o=s.find(sC);if(o){const a=o.props.children,l=s.map(c=>c===o?u.Children.count(a)>1?u.Children.only(null):u.isValidElement(a)?a.props.children:null:c);return i.jsx(ah,{...n,ref:t,children:u.isValidElement(a)?u.cloneElement(a,void 0,l):null})}return i.jsx(ah,{...n,ref:t,children:r})});Ts.displayName="Slot";var ah=u.forwardRef((e,t)=>{const{children:r,...n}=e;if(u.isValidElement(r)){const s=oC(r);return u.cloneElement(r,{...iC(n,r.props),ref:t?jy(t,s):s})}return u.Children.count(r)>1?u.Children.only(null):null});ah.displayName="SlotClone";var Ny=({children:e})=>i.jsx(i.Fragment,{children:e});function sC(e){return u.isValidElement(e)&&e.type===Ny}function iC(e,t){const r={...t};for(const n in t){const s=e[n],o=t[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...l)=>{o(...l),s(...l)}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...e,...r}}function oC(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Ym(e){const t=e+"CollectionProvider",[r,n]=rC(t),[s,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=x=>{const{scope:y,children:p}=x,b=ge.useRef(null),w=ge.useRef(new Map).current;return i.jsx(s,{scope:y,itemMap:w,collectionRef:b,children:p})};a.displayName=t;const l=e+"CollectionSlot",c=ge.forwardRef((x,y)=>{const{scope:p,children:b}=x,w=o(l,p),g=st(y,w.collectionRef);return i.jsx(Ts,{ref:g,children:b})});c.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",h=ge.forwardRef((x,y)=>{const{scope:p,children:b,...w}=x,g=ge.useRef(null),v=st(y,g),_=o(d,p);return ge.useEffect(()=>(_.itemMap.set(g,{ref:g,...w}),()=>void _.itemMap.delete(g))),i.jsx(Ts,{[f]:"",ref:v,children:b})});h.displayName=d;function m(x){const y=o(e+"CollectionConsumer",x);return ge.useCallback(()=>{const b=y.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${f}]`));return Array.from(y.itemMap.values()).sort((_,j)=>w.indexOf(_.ref.current)-w.indexOf(j.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:a,Slot:c,ItemSlot:h},m,n]}function aC(e,t){const r=u.createContext(t),n=o=>{const{children:a,...l}=o,c=u.useMemo(()=>l,Object.values(l));return i.jsx(r.Provider,{value:c,children:a})};n.displayName=e+"Provider";function s(o){const a=u.useContext(r);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[n,s]}function Us(e,t=[]){let r=[];function n(o,a){const l=u.createContext(a),c=r.length;r=[...r,a];const d=h=>{var w;const{scope:m,children:x,...y}=h,p=((w=m==null?void 0:m[e])==null?void 0:w[c])||l,b=u.useMemo(()=>y,Object.values(y));return i.jsx(p.Provider,{value:b,children:x})};d.displayName=o+"Provider";function f(h,m){var p;const x=((p=m==null?void 0:m[e])==null?void 0:p[c])||l,y=u.useContext(x);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[d,f]}const s=()=>{const o=r.map(a=>u.createContext(a));return function(l){const c=(l==null?void 0:l[e])||o;return u.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,lC(s,...t)]}function lC(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=n.reduce((l,{useScope:c,scopeName:d})=>{const h=c(o)[`__scope${d}`];return{...l,...h}},{});return u.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}var cC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ie=cC.reduce((e,t)=>{const r=u.forwardRef((n,s)=>{const{asChild:o,...a}=n,l=o?Ts:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Sy(e,t){e&&Ei.flushSync(()=>e.dispatchEvent(t))}function ur(e){const t=u.useRef(e);return u.useEffect(()=>{t.current=e}),u.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function dC(e,t=globalThis==null?void 0:globalThis.document){const r=ur(e);u.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var uC="DismissableLayer",lh="dismissableLayer.update",fC="dismissableLayer.pointerDownOutside",hC="dismissableLayer.focusOutside",Cv,ky=u.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Wo=u.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=e,d=u.useContext(ky),[f,h]=u.useState(null),m=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=u.useState({}),y=st(t,C=>h(C)),p=Array.from(d.layers),[b]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),w=p.indexOf(b),g=f?p.indexOf(f):-1,v=d.layersWithOutsidePointerEventsDisabled.size>0,_=g>=w,j=pC(C=>{const E=C.target,O=[...d.branches].some(B=>B.contains(E));!_||O||(s==null||s(C),a==null||a(C),C.defaultPrevented||l==null||l())},m),k=gC(C=>{const E=C.target;[...d.branches].some(B=>B.contains(E))||(o==null||o(C),a==null||a(C),C.defaultPrevented||l==null||l())},m);return dC(C=>{g===d.layers.size-1&&(n==null||n(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},m),u.useEffect(()=>{if(f)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Cv=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),Ev(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Cv)}},[f,m,r,d]),u.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),Ev())},[f,d]),u.useEffect(()=>{const C=()=>x({});return document.addEventListener(lh,C),()=>document.removeEventListener(lh,C)},[]),i.jsx(Ie.div,{...c,ref:y,style:{pointerEvents:v?_?"auto":"none":void 0,...e.style},onFocusCapture:Pe(e.onFocusCapture,k.onFocusCapture),onBlurCapture:Pe(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:Pe(e.onPointerDownCapture,j.onPointerDownCapture)})});Wo.displayName=uC;var mC="DismissableLayerBranch",Cy=u.forwardRef((e,t)=>{const r=u.useContext(ky),n=u.useRef(null),s=st(t,n);return u.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),i.jsx(Ie.div,{...e,ref:s})});Cy.displayName=mC;function pC(e,t=globalThis==null?void 0:globalThis.document){const r=ur(e),n=u.useRef(!1),s=u.useRef(()=>{});return u.useEffect(()=>{const o=l=>{if(l.target&&!n.current){let c=function(){Ey(fC,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);n.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function gC(e,t=globalThis==null?void 0:globalThis.document){const r=ur(e),n=u.useRef(!1);return u.useEffect(()=>{const s=o=>{o.target&&!n.current&&Ey(hC,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Ev(){const e=new CustomEvent(lh);document.dispatchEvent(e)}function Ey(e,t,r,{discrete:n}){const s=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Sy(s,o):s.dispatchEvent(o)}var vC=Wo,xC=Cy,qt=globalThis!=null&&globalThis.document?u.useLayoutEffect:()=>{},wC="Portal",vl=u.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[s,o]=u.useState(!1);qt(()=>o(!0),[]);const a=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?by.createPortal(i.jsx(Ie.div,{...n,ref:t}),a):null});vl.displayName=wC;function yC(e,t){return u.useReducer((r,n)=>t[r][n]??r,e)}var Yn=e=>{const{present:t,children:r}=e,n=bC(t),s=typeof r=="function"?r({present:n.isPresent}):u.Children.only(r),o=st(n.ref,_C(s));return typeof r=="function"||n.isPresent?u.cloneElement(s,{ref:o}):null};Yn.displayName="Presence";function bC(e){const[t,r]=u.useState(),n=u.useRef({}),s=u.useRef(e),o=u.useRef("none"),a=e?"mounted":"unmounted",[l,c]=yC(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return u.useEffect(()=>{const d=Zl(n.current);o.current=l==="mounted"?d:"none"},[l]),qt(()=>{const d=n.current,f=s.current;if(f!==e){const m=o.current,x=Zl(d);e?c("MOUNT"):x==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(f&&m!==x?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),qt(()=>{if(t){let d;const f=t.ownerDocument.defaultView??window,h=x=>{const p=Zl(n.current).includes(x.animationName);if(x.target===t&&p&&(c("ANIMATION_END"),!s.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",d=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},m=x=>{x.target===t&&(o.current=Zl(n.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(d),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:u.useCallback(d=>{d&&(n.current=getComputedStyle(d)),r(d)},[])}}function Zl(e){return(e==null?void 0:e.animationName)||"none"}function _C(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Rs({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=jC({defaultProp:t,onChange:r}),o=e!==void 0,a=o?e:n,l=ur(r),c=u.useCallback(d=>{if(o){const h=typeof d=="function"?d(e):d;h!==e&&l(h)}else s(d)},[o,e,s,l]);return[a,c]}function jC({defaultProp:e,onChange:t}){const r=u.useState(e),[n]=r,s=u.useRef(n),o=ur(t);return u.useEffect(()=>{s.current!==n&&(o(n),s.current=n)},[n,s,o]),r}var NC="VisuallyHidden",xl=u.forwardRef((e,t)=>i.jsx(Ie.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));xl.displayName=NC;var SC=xl,Zm="ToastProvider",[Km,kC,CC]=Ym("Toast"),[Py,h3]=Us("Toast",[CC]),[EC,Pd]=Py(Zm),Ty=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:a}=e,[l,c]=u.useState(null),[d,f]=u.useState(0),h=u.useRef(!1),m=u.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Zm}\`. Expected non-empty \`string\`.`),i.jsx(Km.Provider,{scope:t,children:i.jsx(EC,{scope:t,label:r,duration:n,swipeDirection:s,swipeThreshold:o,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:u.useCallback(()=>f(x=>x+1),[]),onToastRemove:u.useCallback(()=>f(x=>x-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:a})})};Ty.displayName=Zm;var Ry="ToastViewport",PC=["F8"],ch="toast.viewportPause",dh="toast.viewportResume",Ay=u.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=PC,label:s="Notifications ({hotkey})",...o}=e,a=Pd(Ry,r),l=kC(r),c=u.useRef(null),d=u.useRef(null),f=u.useRef(null),h=u.useRef(null),m=st(t,h,a.onViewportChange),x=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=a.toastCount>0;u.useEffect(()=>{const b=w=>{var v;n.length!==0&&n.every(_=>w[_]||w.code===_)&&((v=h.current)==null||v.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[n]),u.useEffect(()=>{const b=c.current,w=h.current;if(y&&b&&w){const g=()=>{if(!a.isClosePausedRef.current){const k=new CustomEvent(ch);w.dispatchEvent(k),a.isClosePausedRef.current=!0}},v=()=>{if(a.isClosePausedRef.current){const k=new CustomEvent(dh);w.dispatchEvent(k),a.isClosePausedRef.current=!1}},_=k=>{!b.contains(k.relatedTarget)&&v()},j=()=>{b.contains(document.activeElement)||v()};return b.addEventListener("focusin",g),b.addEventListener("focusout",_),b.addEventListener("pointermove",g),b.addEventListener("pointerleave",j),window.addEventListener("blur",g),window.addEventListener("focus",v),()=>{b.removeEventListener("focusin",g),b.removeEventListener("focusout",_),b.removeEventListener("pointermove",g),b.removeEventListener("pointerleave",j),window.removeEventListener("blur",g),window.removeEventListener("focus",v)}}},[y,a.isClosePausedRef]);const p=u.useCallback(({tabbingDirection:b})=>{const g=l().map(v=>{const _=v.ref.current,j=[_,...VC(_)];return b==="forwards"?j:j.reverse()});return(b==="forwards"?g.reverse():g).flat()},[l]);return u.useEffect(()=>{const b=h.current;if(b){const w=g=>{var j,k,C;const v=g.altKey||g.ctrlKey||g.metaKey;if(g.key==="Tab"&&!v){const E=document.activeElement,O=g.shiftKey;if(g.target===b&&O){(j=d.current)==null||j.focus();return}const X=p({tabbingDirection:O?"backwards":"forwards"}),Z=X.findIndex(L=>L===E);Bu(X.slice(Z+1))?g.preventDefault():O?(k=d.current)==null||k.focus():(C=f.current)==null||C.focus()}};return b.addEventListener("keydown",w),()=>b.removeEventListener("keydown",w)}},[l,p]),i.jsxs(xC,{ref:c,role:"region","aria-label":s.replace("{hotkey}",x),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&i.jsx(uh,{ref:d,onFocusFromOutsideViewport:()=>{const b=p({tabbingDirection:"forwards"});Bu(b)}}),i.jsx(Km.Slot,{scope:r,children:i.jsx(Ie.ol,{tabIndex:-1,...o,ref:m})}),y&&i.jsx(uh,{ref:f,onFocusFromOutsideViewport:()=>{const b=p({tabbingDirection:"backwards"});Bu(b)}})]})});Ay.displayName=Ry;var My="ToastFocusProxy",uh=u.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=e,o=Pd(My,r);return i.jsx(xl,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:a=>{var d;const l=a.relatedTarget;!((d=o.viewport)!=null&&d.contains(l))&&n()}})});uh.displayName=My;var Td="Toast",TC="toast.swipeStart",RC="toast.swipeMove",AC="toast.swipeCancel",MC="toast.swipeEnd",Dy=u.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:o,...a}=e,[l=!0,c]=Rs({prop:n,defaultProp:s,onChange:o});return i.jsx(Yn,{present:r||l,children:i.jsx(OC,{open:l,...a,ref:t,onClose:()=>c(!1),onPause:ur(e.onPause),onResume:ur(e.onResume),onSwipeStart:Pe(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Pe(e.onSwipeMove,d=>{const{x:f,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Pe(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Pe(e.onSwipeEnd,d=>{const{x:f,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});Dy.displayName=Td;var[DC,IC]=Py(Td,{onClose(){}}),OC=u.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:o,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:f,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:x,...y}=e,p=Pd(Td,r),[b,w]=u.useState(null),g=st(t,L=>w(L)),v=u.useRef(null),_=u.useRef(null),j=s||p.duration,k=u.useRef(0),C=u.useRef(j),E=u.useRef(0),{onToastAdd:O,onToastRemove:B}=p,q=ur(()=>{var ee;(b==null?void 0:b.contains(document.activeElement))&&((ee=p.viewport)==null||ee.focus()),a()}),X=u.useCallback(L=>{!L||L===1/0||(window.clearTimeout(E.current),k.current=new Date().getTime(),E.current=window.setTimeout(q,L))},[q]);u.useEffect(()=>{const L=p.viewport;if(L){const ee=()=>{X(C.current),d==null||d()},U=()=>{const K=new Date().getTime()-k.current;C.current=C.current-K,window.clearTimeout(E.current),c==null||c()};return L.addEventListener(ch,U),L.addEventListener(dh,ee),()=>{L.removeEventListener(ch,U),L.removeEventListener(dh,ee)}}},[p.viewport,j,c,d,X]),u.useEffect(()=>{o&&!p.isClosePausedRef.current&&X(j)},[o,j,p.isClosePausedRef,X]),u.useEffect(()=>(O(),()=>B()),[O,B]);const Z=u.useMemo(()=>b?Uy(b):null,[b]);return p.viewport?i.jsxs(i.Fragment,{children:[Z&&i.jsx(LC,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:Z}),i.jsx(DC,{scope:r,onClose:q,children:Ei.createPortal(i.jsx(Km.ItemSlot,{scope:r,children:i.jsx(vC,{asChild:!0,onEscapeKeyDown:Pe(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||q(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(Ie.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":p.swipeDirection,...y,ref:g,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Pe(e.onKeyDown,L=>{L.key==="Escape"&&(l==null||l(L.nativeEvent),L.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,q()))}),onPointerDown:Pe(e.onPointerDown,L=>{L.button===0&&(v.current={x:L.clientX,y:L.clientY})}),onPointerMove:Pe(e.onPointerMove,L=>{if(!v.current)return;const ee=L.clientX-v.current.x,U=L.clientY-v.current.y,K=!!_.current,D=["left","right"].includes(p.swipeDirection),Q=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,ne=D?Q(0,ee):0,oe=D?0:Q(0,U),he=L.pointerType==="touch"?10:2,je={x:ne,y:oe},Ce={originalEvent:L,delta:je};K?(_.current=je,Kl(RC,h,Ce,{discrete:!1})):Pv(je,p.swipeDirection,he)?(_.current=je,Kl(TC,f,Ce,{discrete:!1}),L.target.setPointerCapture(L.pointerId)):(Math.abs(ee)>he||Math.abs(U)>he)&&(v.current=null)}),onPointerUp:Pe(e.onPointerUp,L=>{const ee=_.current,U=L.target;if(U.hasPointerCapture(L.pointerId)&&U.releasePointerCapture(L.pointerId),_.current=null,v.current=null,ee){const K=L.currentTarget,D={originalEvent:L,delta:ee};Pv(ee,p.swipeDirection,p.swipeThreshold)?Kl(MC,x,D,{discrete:!0}):Kl(AC,m,D,{discrete:!0}),K.addEventListener("click",Q=>Q.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),LC=e=>{const{__scopeToast:t,children:r,...n}=e,s=Pd(Td,t),[o,a]=u.useState(!1),[l,c]=u.useState(!1);return $C(()=>a(!0)),u.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:i.jsx(vl,{asChild:!0,children:i.jsx(xl,{...n,children:o&&i.jsxs(i.Fragment,{children:[s.label," ",r]})})})},FC="ToastTitle",Iy=u.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return i.jsx(Ie.div,{...n,ref:t})});Iy.displayName=FC;var zC="ToastDescription",Oy=u.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return i.jsx(Ie.div,{...n,ref:t})});Oy.displayName=zC;var Ly="ToastAction",Fy=u.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?i.jsx($y,{altText:r,asChild:!0,children:i.jsx(Xm,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Ly}\`. Expected non-empty \`string\`.`),null)});Fy.displayName=Ly;var zy="ToastClose",Xm=u.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,s=IC(zy,r);return i.jsx($y,{asChild:!0,children:i.jsx(Ie.button,{type:"button",...n,ref:t,onClick:Pe(e.onClick,s.onClose)})})});Xm.displayName=zy;var $y=u.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...s}=e;return i.jsx(Ie.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:t})});function Uy(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),UC(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const a=n.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...Uy(n))}}),t}function Kl(e,t,r,{discrete:n}){const s=r.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Sy(s,o):s.dispatchEvent(o)}var Pv=(e,t,r=0)=>{const n=Math.abs(e.x),s=Math.abs(e.y),o=n>s;return t==="left"||t==="right"?o&&n>r:!o&&s>r};function $C(e=()=>{}){const t=ur(e);qt(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function UC(e){return e.nodeType===e.ELEMENT_NODE}function VC(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Bu(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var WC=Ty,Vy=Ay,Wy=Dy,By=Iy,qy=Oy,Hy=Fy,Gy=Xm;function Yy(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=Yy(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ra(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=Yy(e))&&(n&&(n+=" "),n+=t);return n}const Tv=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Rv=Ra,wl=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return Rv(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:o}=t,a=Object.keys(s).map(d=>{const f=r==null?void 0:r[d],h=o==null?void 0:o[d];if(f===null)return null;const m=Tv(f)||Tv(h);return s[d][m]}),l=r&&Object.entries(r).reduce((d,f)=>{let[h,m]=f;return m===void 0||(d[h]=m),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,f)=>{let{class:h,className:m,...x}=f;return Object.entries(x).every(y=>{let[p,b]=y;return Array.isArray(b)?b.includes({...o,...l}[p]):{...o,...l}[p]===b})?[...d,h,m]:d},[]);return Rv(e,a,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Zy=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=u.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:a,...l},c)=>u.createElement("svg",{ref:c,...qC,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:Zy("lucide",s),...l},[...a.map(([d,f])=>u.createElement(d,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=(e,t)=>{const r=u.forwardRef(({className:n,...s},o)=>u.createElement(HC,{ref:o,iconNode:t,className:Zy(`lucide-${BC(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=Re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=Re("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=Re("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=Re("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=Re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=Re("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=Re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jm=Re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=Re("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=Re("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=Re("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=Re("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=Re("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=Re("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=Re("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=Re("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=Re("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=Re("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=Re("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=Re("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=Re("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=Re("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=Re("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=Re("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=Re("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=Re("Paintbrush",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=Re("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=Re("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=Re("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=Re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=Re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=Re("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=Re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=Re("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=Re("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=Re("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=Re("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=Re("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=Re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=Re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=Re("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=Re("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=Re("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=Re("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hh=Re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=Re("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=Re("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=Re("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=Re("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=Re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=Re("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),np="-",cE=e=>{const t=uE(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:a=>{const l=a.split(np);return l[0]===""&&l.length!==1&&l.shift(),eb(l,t)||dE(a)},getConflictingClassGroupIds:(a,l)=>{const c=r[a]||[];return l&&n[a]?[...c,...n[a]]:c}}},eb=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?eb(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const o=e.join(np);return(a=t.validators.find(({validator:l})=>l(o)))==null?void 0:a.classGroupId},Fv=/^\[(.+)\]$/,dE=e=>{if(Fv.test(e)){const t=Fv.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},uE=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return hE(Object.entries(e.classGroups),r).forEach(([o,a])=>{mh(a,n,o,t)}),n},mh=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const o=s===""?t:zv(t,s);o.classGroupId=r;return}if(typeof s=="function"){if(fE(s)){mh(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([o,a])=>{mh(a,zv(t,o),r,n)})})},zv=(e,t)=>{let r=e;return t.split(np).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},fE=e=>e.isThemeGetter,hE=(e,t)=>t?e.map(([r,n])=>{const s=n.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,l])=>[t+a,l])):o);return[r,s]}):e,mE=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(o,a)=>{r.set(o,a),t++,t>e&&(t=0,n=r,r=new Map)};return{get(o){let a=r.get(o);if(a!==void 0)return a;if((a=n.get(o))!==void 0)return s(o,a),a},set(o,a){r.has(o)?r.set(o,a):s(o,a)}}},tb="!",pE=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],o=t.length,a=l=>{const c=[];let d=0,f=0,h;for(let b=0;b<l.length;b++){let w=l[b];if(d===0){if(w===s&&(n||l.slice(b,b+o)===t)){c.push(l.slice(f,b)),f=b+o;continue}if(w==="/"){h=b;continue}}w==="["?d++:w==="]"&&d--}const m=c.length===0?l:l.substring(f),x=m.startsWith(tb),y=x?m.substring(1):m,p=h&&h>f?h-f:void 0;return{modifiers:c,hasImportantModifier:x,baseClassName:y,maybePostfixModifierPosition:p}};return r?l=>r({className:l,parseClassName:a}):a},gE=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},vE=e=>({cache:mE(e.cacheSize),parseClassName:pE(e),...cE(e)}),xE=/\s+/,wE=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,o=[],a=e.trim().split(xE);let l="";for(let c=a.length-1;c>=0;c-=1){const d=a[c],{modifiers:f,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:x}=r(d);let y=!!x,p=n(y?m.substring(0,x):m);if(!p){if(!y){l=d+(l.length>0?" "+l:l);continue}if(p=n(m),!p){l=d+(l.length>0?" "+l:l);continue}y=!1}const b=gE(f).join(":"),w=h?b+tb:b,g=w+p;if(o.includes(g))continue;o.push(g);const v=s(p,y);for(let _=0;_<v.length;++_){const j=v[_];o.push(w+j)}l=d+(l.length>0?" "+l:l)}return l};function yE(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=rb(t))&&(n&&(n+=" "),n+=r);return n}const rb=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=rb(e[n]))&&(r&&(r+=" "),r+=t);return r};function bE(e,...t){let r,n,s,o=a;function a(c){const d=t.reduce((f,h)=>h(f),e());return r=vE(d),n=r.cache.get,s=r.cache.set,o=l,l(c)}function l(c){const d=n(c);if(d)return d;const f=wE(c,r);return s(c,f),f}return function(){return o(yE.apply(null,arguments))}}const gt=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},nb=/^\[(?:([a-z-]+):)?(.+)\]$/i,_E=/^\d+\/\d+$/,jE=new Set(["px","full","screen"]),NE=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,SE=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,kE=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,CE=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,EE=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Pn=e=>mo(e)||jE.has(e)||_E.test(e),Qn=e=>Bo(e,"length",OE),mo=e=>!!e&&!Number.isNaN(Number(e)),Hu=e=>Bo(e,"number",mo),la=e=>!!e&&Number.isInteger(Number(e)),PE=e=>e.endsWith("%")&&mo(e.slice(0,-1)),Ue=e=>nb.test(e),Jn=e=>NE.test(e),TE=new Set(["length","size","percentage"]),RE=e=>Bo(e,TE,sb),AE=e=>Bo(e,"position",sb),ME=new Set(["image","url"]),DE=e=>Bo(e,ME,FE),IE=e=>Bo(e,"",LE),ca=()=>!0,Bo=(e,t,r)=>{const n=nb.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},OE=e=>SE.test(e)&&!kE.test(e),sb=()=>!1,LE=e=>CE.test(e),FE=e=>EE.test(e),zE=()=>{const e=gt("colors"),t=gt("spacing"),r=gt("blur"),n=gt("brightness"),s=gt("borderColor"),o=gt("borderRadius"),a=gt("borderSpacing"),l=gt("borderWidth"),c=gt("contrast"),d=gt("grayscale"),f=gt("hueRotate"),h=gt("invert"),m=gt("gap"),x=gt("gradientColorStops"),y=gt("gradientColorStopPositions"),p=gt("inset"),b=gt("margin"),w=gt("opacity"),g=gt("padding"),v=gt("saturate"),_=gt("scale"),j=gt("sepia"),k=gt("skew"),C=gt("space"),E=gt("translate"),O=()=>["auto","contain","none"],B=()=>["auto","hidden","clip","visible","scroll"],q=()=>["auto",Ue,t],X=()=>[Ue,t],Z=()=>["",Pn,Qn],L=()=>["auto",mo,Ue],ee=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],K=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],Q=()=>["","0",Ue],ne=()=>["auto","avoid","all","avoid-page","page","left","right","column"],oe=()=>[mo,Ue];return{cacheSize:500,separator:":",theme:{colors:[ca],spacing:[Pn,Qn],blur:["none","",Jn,Ue],brightness:oe(),borderColor:[e],borderRadius:["none","","full",Jn,Ue],borderSpacing:X(),borderWidth:Z(),contrast:oe(),grayscale:Q(),hueRotate:oe(),invert:Q(),gap:X(),gradientColorStops:[e],gradientColorStopPositions:[PE,Qn],inset:q(),margin:q(),opacity:oe(),padding:X(),saturate:oe(),scale:oe(),sepia:Q(),skew:oe(),space:X(),translate:X()},classGroups:{aspect:[{aspect:["auto","square","video",Ue]}],container:["container"],columns:[{columns:[Jn]}],"break-after":[{"break-after":ne()}],"break-before":[{"break-before":ne()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ee(),Ue]}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",la,Ue]}],basis:[{basis:q()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ue]}],grow:[{grow:Q()}],shrink:[{shrink:Q()}],order:[{order:["first","last","none",la,Ue]}],"grid-cols":[{"grid-cols":[ca]}],"col-start-end":[{col:["auto",{span:["full",la,Ue]},Ue]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[ca]}],"row-start-end":[{row:["auto",{span:[la,Ue]},Ue]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ue]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ue,t]}],"min-w":[{"min-w":[Ue,t,"min","max","fit"]}],"max-w":[{"max-w":[Ue,t,"none","full","min","max","fit","prose",{screen:[Jn]},Jn]}],h:[{h:[Ue,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ue,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ue,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ue,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Jn,Qn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Hu]}],"font-family":[{font:[ca]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ue]}],"line-clamp":[{"line-clamp":["none",mo,Hu]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Pn,Ue]}],"list-image":[{"list-image":["none",Ue]}],"list-style-type":[{list:["none","disc","decimal",Ue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Pn,Qn]}],"underline-offset":[{"underline-offset":["auto",Pn,Ue]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:X()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ee(),AE]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",RE]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},DE]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:U()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[Pn,Ue]}],"outline-w":[{outline:[Pn,Qn]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[Pn,Qn]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Jn,IE]}],"shadow-color":[{shadow:[ca]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...K(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":K()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Jn,Ue]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[h]}],saturate:[{saturate:[v]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ue]}],duration:[{duration:oe()}],ease:[{ease:["linear","in","out","in-out",Ue]}],delay:[{delay:oe()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[la,Ue]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ue]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ue]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":X()}],"scroll-mx":[{"scroll-mx":X()}],"scroll-my":[{"scroll-my":X()}],"scroll-ms":[{"scroll-ms":X()}],"scroll-me":[{"scroll-me":X()}],"scroll-mt":[{"scroll-mt":X()}],"scroll-mr":[{"scroll-mr":X()}],"scroll-mb":[{"scroll-mb":X()}],"scroll-ml":[{"scroll-ml":X()}],"scroll-p":[{"scroll-p":X()}],"scroll-px":[{"scroll-px":X()}],"scroll-py":[{"scroll-py":X()}],"scroll-ps":[{"scroll-ps":X()}],"scroll-pe":[{"scroll-pe":X()}],"scroll-pt":[{"scroll-pt":X()}],"scroll-pr":[{"scroll-pr":X()}],"scroll-pb":[{"scroll-pb":X()}],"scroll-pl":[{"scroll-pl":X()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ue]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Pn,Qn,Hu]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},$E=bE(zE);function Fe(...e){return $E(Ra(e))}async function UE(e,t){const r=await VE(e),n=document.createElement("canvas"),s=n.getContext("2d");if(!s)throw new Error("No 2d context");const o=window.devicePixelRatio||1;return n.width=t.width*o,n.height=t.height*o,s.setTransform(o,0,0,o,0,0),s.imageSmoothingQuality="high",s.drawImage(r,t.x,t.y,t.width,t.height,0,0,t.width,t.height),new Promise((a,l)=>{n.toBlob(c=>{c?a(c):l(new Error("Canvas is empty"))},"image/jpeg")})}function VE(e){return new Promise((t,r)=>{const n=new window.Image;n.addEventListener("load",()=>t(n)),n.addEventListener("error",s=>r(s)),n.setAttribute("crossOrigin","anonymous"),n.src=e})}const WE=WC,ib=u.forwardRef(({className:e,...t},r)=>i.jsx(Vy,{ref:r,className:Fe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));ib.displayName=Vy.displayName;const BE=wl("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ob=u.forwardRef(({className:e,variant:t,...r},n)=>i.jsx(Wy,{ref:n,className:Fe(BE({variant:t}),e),...r}));ob.displayName=Wy.displayName;const qE=u.forwardRef(({className:e,...t},r)=>i.jsx(Hy,{ref:r,className:Fe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));qE.displayName=Hy.displayName;const ab=u.forwardRef(({className:e,...t},r)=>i.jsx(Gy,{ref:r,className:Fe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(Nr,{className:"h-4 w-4"})}));ab.displayName=Gy.displayName;const lb=u.forwardRef(({className:e,...t},r)=>i.jsx(By,{ref:r,className:Fe("text-sm font-semibold",e),...t}));lb.displayName=By.displayName;const cb=u.forwardRef(({className:e,...t},r)=>i.jsx(qy,{ref:r,className:Fe("text-sm opacity-90",e),...t}));cb.displayName=qy.displayName;function HE(){const{toasts:e}=$t();return i.jsxs(WE,{children:[e.map(function({id:t,title:r,description:n,action:s,...o}){return i.jsxs(ob,{...o,children:[i.jsxs("div",{className:"grid gap-1",children:[r&&i.jsx(lb,{children:r}),n&&i.jsx(cb,{children:n})]}),s,i.jsx(ab,{})]},t)}),i.jsx(ib,{})]})}var GE=e=>{switch(e){case"success":return KE;case"info":return QE;case"warning":return XE;case"error":return JE;default:return null}},YE=Array(12).fill(0),ZE=({visible:e})=>ge.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},ge.createElement("div",{className:"sonner-spinner"},YE.map((t,r)=>ge.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),KE=ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ge.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),XE=ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ge.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),QE=ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ge.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),JE=ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ge.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),e2=()=>{let[e,t]=ge.useState(document.hidden);return ge.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},ph=1,t2=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:ph++,o=this.toasts.find(l=>l.id===s),a=e.dismissible===void 0?!0:e.dismissible;return o?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:r}),{...l,...e,id:s,dismissible:a,title:r}):l):this.addToast({title:r,...n,dismissible:a,id:s}),s},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),s=r!==void 0;return n.then(async o=>{if(n2(o)&&!o.ok){s=!1;let a=typeof t.error=="function"?await t.error(`HTTP error! status: ${o.status}`):t.error,l=typeof t.description=="function"?await t.description(`HTTP error! status: ${o.status}`):t.description;this.create({id:r,type:"error",message:a,description:l})}else if(t.success!==void 0){s=!1;let a=typeof t.success=="function"?await t.success(o):t.success,l=typeof t.description=="function"?await t.description(o):t.description;this.create({id:r,type:"success",message:a,description:l})}}).catch(async o=>{if(t.error!==void 0){s=!1;let a=typeof t.error=="function"?await t.error(o):t.error,l=typeof t.description=="function"?await t.description(o):t.description;this.create({id:r,type:"error",message:a,description:l})}}).finally(()=>{var o;s&&(this.dismiss(r),r=void 0),(o=t.finally)==null||o.call(t)}),r},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||ph++;return this.create({jsx:e(r),id:r,...t}),r},this.subscribers=[],this.toasts=[]}},Er=new t2,r2=(e,t)=>{let r=(t==null?void 0:t.id)||ph++;return Er.addToast({title:e,...t,id:r}),r},n2=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",s2=r2,i2=()=>Er.toasts;Object.assign(s2,{success:Er.success,info:Er.info,warning:Er.warning,error:Er.error,custom:Er.custom,message:Er.message,promise:Er.promise,dismiss:Er.dismiss,loading:Er.loading},{getHistory:i2});function o2(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}o2(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Xl(e){return e.label!==void 0}var a2=3,l2="32px",c2=4e3,d2=356,u2=14,f2=20,h2=200;function m2(...e){return e.filter(Boolean).join(" ")}var p2=e=>{var t,r,n,s,o,a,l,c,d,f;let{invert:h,toast:m,unstyled:x,interacting:y,setHeights:p,visibleToasts:b,heights:w,index:g,toasts:v,expanded:_,removeToast:j,defaultRichColors:k,closeButton:C,style:E,cancelButtonStyle:O,actionButtonStyle:B,className:q="",descriptionClassName:X="",duration:Z,position:L,gap:ee,loadingIcon:U,expandByDefault:K,classNames:D,icons:Q,closeButtonAriaLabel:ne="Close toast",pauseWhenPageIsHidden:oe,cn:he}=e,[je,Ce]=ge.useState(!1),[fe,de]=ge.useState(!1),[ce,xe]=ge.useState(!1),[T,A]=ge.useState(!1),[G,V]=ge.useState(0),[S,z]=ge.useState(0),M=ge.useRef(null),R=ge.useRef(null),I=g===0,$=g+1<=b,te=m.type,re=m.dismissible!==!1,Y=m.className||"",me=m.descriptionClassName||"",be=ge.useMemo(()=>w.findIndex(Ae=>Ae.toastId===m.id)||0,[w,m.id]),_e=ge.useMemo(()=>{var Ae;return(Ae=m.closeButton)!=null?Ae:C},[m.closeButton,C]),Ee=ge.useMemo(()=>m.duration||Z||c2,[m.duration,Z]),We=ge.useRef(0),ke=ge.useRef(0),Se=ge.useRef(0),Le=ge.useRef(null),[Be,at]=L.split("-"),wt=ge.useMemo(()=>w.reduce((Ae,Ye,Qe)=>Qe>=be?Ae:Ae+Ye.height,0),[w,be]),Ot=e2(),Oe=m.invert||h,et=te==="loading";ke.current=ge.useMemo(()=>be*ee+wt,[be,wt]),ge.useEffect(()=>{Ce(!0)},[]),ge.useLayoutEffect(()=>{if(!je)return;let Ae=R.current,Ye=Ae.style.height;Ae.style.height="auto";let Qe=Ae.getBoundingClientRect().height;Ae.style.height=Ye,z(Qe),p(Lt=>Lt.find(Tt=>Tt.toastId===m.id)?Lt.map(Tt=>Tt.toastId===m.id?{...Tt,height:Qe}:Tt):[{toastId:m.id,height:Qe,position:m.position},...Lt])},[je,m.title,m.description,p,m.id]);let Pt=ge.useCallback(()=>{de(!0),V(ke.current),p(Ae=>Ae.filter(Ye=>Ye.toastId!==m.id)),setTimeout(()=>{j(m)},h2)},[m,j,p,ke]);ge.useEffect(()=>{if(m.promise&&te==="loading"||m.duration===1/0||m.type==="loading")return;let Ae,Ye=Ee;return _||y||oe&&Ot?(()=>{if(Se.current<We.current){let Qe=new Date().getTime()-We.current;Ye=Ye-Qe}Se.current=new Date().getTime()})():Ye!==1/0&&(We.current=new Date().getTime(),Ae=setTimeout(()=>{var Qe;(Qe=m.onAutoClose)==null||Qe.call(m,m),Pt()},Ye)),()=>clearTimeout(Ae)},[_,y,K,m,Ee,Pt,m.promise,te,oe,Ot]),ge.useEffect(()=>{let Ae=R.current;if(Ae){let Ye=Ae.getBoundingClientRect().height;return z(Ye),p(Qe=>[{toastId:m.id,height:Ye,position:m.position},...Qe]),()=>p(Qe=>Qe.filter(Lt=>Lt.toastId!==m.id))}},[p,m.id]),ge.useEffect(()=>{m.delete&&Pt()},[Pt,m.delete]);function Yr(){return Q!=null&&Q.loading?ge.createElement("div",{className:"sonner-loader","data-visible":te==="loading"},Q.loading):U?ge.createElement("div",{className:"sonner-loader","data-visible":te==="loading"},U):ge.createElement(ZE,{visible:te==="loading"})}return ge.createElement("li",{"aria-live":m.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:R,className:he(q,Y,D==null?void 0:D.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,D==null?void 0:D.default,D==null?void 0:D[te],(r=m==null?void 0:m.classNames)==null?void 0:r[te]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:k,"data-styled":!(m.jsx||m.unstyled||x),"data-mounted":je,"data-promise":!!m.promise,"data-removed":fe,"data-visible":$,"data-y-position":Be,"data-x-position":at,"data-index":g,"data-front":I,"data-swiping":ce,"data-dismissible":re,"data-type":te,"data-invert":Oe,"data-swipe-out":T,"data-expanded":!!(_||K&&je),style:{"--index":g,"--toasts-before":g,"--z-index":v.length-g,"--offset":`${fe?G:ke.current}px`,"--initial-height":K?"auto":`${S}px`,...E,...m.style},onPointerDown:Ae=>{et||!re||(M.current=new Date,V(ke.current),Ae.target.setPointerCapture(Ae.pointerId),Ae.target.tagName!=="BUTTON"&&(xe(!0),Le.current={x:Ae.clientX,y:Ae.clientY}))},onPointerUp:()=>{var Ae,Ye,Qe,Lt;if(T||!re)return;Le.current=null;let Tt=Number(((Ae=R.current)==null?void 0:Ae.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Fr=new Date().getTime()-((Ye=M.current)==null?void 0:Ye.getTime()),Gs=Math.abs(Tt)/Fr;if(Math.abs(Tt)>=f2||Gs>.11){V(ke.current),(Qe=m.onDismiss)==null||Qe.call(m,m),Pt(),A(!0);return}(Lt=R.current)==null||Lt.style.setProperty("--swipe-amount","0px"),xe(!1)},onPointerMove:Ae=>{var Ye;if(!Le.current||!re)return;let Qe=Ae.clientY-Le.current.y,Lt=Ae.clientX-Le.current.x,Tt=(Be==="top"?Math.min:Math.max)(0,Qe),Fr=Ae.pointerType==="touch"?10:2;Math.abs(Tt)>Fr?(Ye=R.current)==null||Ye.style.setProperty("--swipe-amount",`${Qe}px`):Math.abs(Lt)>Fr&&(Le.current=null)}},_e&&!m.jsx?ge.createElement("button",{"aria-label":ne,"data-disabled":et,"data-close-button":!0,onClick:et||!re?()=>{}:()=>{var Ae;Pt(),(Ae=m.onDismiss)==null||Ae.call(m,m)},className:he(D==null?void 0:D.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ge.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ge.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,m.jsx||ge.isValidElement(m.title)?m.jsx||m.title:ge.createElement(ge.Fragment,null,te||m.icon||m.promise?ge.createElement("div",{"data-icon":"",className:he(D==null?void 0:D.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Yr():null,m.type!=="loading"?m.icon||(Q==null?void 0:Q[te])||GE(te):null):null,ge.createElement("div",{"data-content":"",className:he(D==null?void 0:D.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},ge.createElement("div",{"data-title":"",className:he(D==null?void 0:D.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},m.title),m.description?ge.createElement("div",{"data-description":"",className:he(X,me,D==null?void 0:D.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},m.description):null),ge.isValidElement(m.cancel)?m.cancel:m.cancel&&Xl(m.cancel)?ge.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||O,onClick:Ae=>{var Ye,Qe;Xl(m.cancel)&&re&&((Qe=(Ye=m.cancel).onClick)==null||Qe.call(Ye,Ae),Pt())},className:he(D==null?void 0:D.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,ge.isValidElement(m.action)?m.action:m.action&&Xl(m.action)?ge.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||B,onClick:Ae=>{var Ye,Qe;Xl(m.action)&&(Ae.defaultPrevented||((Qe=(Ye=m.action).onClick)==null||Qe.call(Ye,Ae),Pt()))},className:he(D==null?void 0:D.actionButton,(f=m==null?void 0:m.classNames)==null?void 0:f.actionButton)},m.action.label):null))};function $v(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var g2=e=>{let{invert:t,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:l,theme:c="light",richColors:d,duration:f,style:h,visibleToasts:m=a2,toastOptions:x,dir:y=$v(),gap:p=u2,loadingIcon:b,icons:w,containerAriaLabel:g="Notifications",pauseWhenPageIsHidden:v,cn:_=m2}=e,[j,k]=ge.useState([]),C=ge.useMemo(()=>Array.from(new Set([r].concat(j.filter(oe=>oe.position).map(oe=>oe.position)))),[j,r]),[E,O]=ge.useState([]),[B,q]=ge.useState(!1),[X,Z]=ge.useState(!1),[L,ee]=ge.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),U=ge.useRef(null),K=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=ge.useRef(null),Q=ge.useRef(!1),ne=ge.useCallback(oe=>{var he;(he=j.find(je=>je.id===oe.id))!=null&&he.delete||Er.dismiss(oe.id),k(je=>je.filter(({id:Ce})=>Ce!==oe.id))},[j]);return ge.useEffect(()=>Er.subscribe(oe=>{if(oe.dismiss){k(he=>he.map(je=>je.id===oe.id?{...je,delete:!0}:je));return}setTimeout(()=>{by.flushSync(()=>{k(he=>{let je=he.findIndex(Ce=>Ce.id===oe.id);return je!==-1?[...he.slice(0,je),{...he[je],...oe},...he.slice(je+1)]:[oe,...he]})})})}),[]),ge.useEffect(()=>{if(c!=="system"){ee(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ee("dark"):ee("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:oe})=>{ee(oe?"dark":"light")})},[c]),ge.useEffect(()=>{j.length<=1&&q(!1)},[j]),ge.useEffect(()=>{let oe=he=>{var je,Ce;n.every(fe=>he[fe]||he.code===fe)&&(q(!0),(je=U.current)==null||je.focus()),he.code==="Escape"&&(document.activeElement===U.current||(Ce=U.current)!=null&&Ce.contains(document.activeElement))&&q(!1)};return document.addEventListener("keydown",oe),()=>document.removeEventListener("keydown",oe)},[n]),ge.useEffect(()=>{if(U.current)return()=>{D.current&&(D.current.focus({preventScroll:!0}),D.current=null,Q.current=!1)}},[U.current]),j.length?ge.createElement("section",{"aria-label":`${g} ${K}`,tabIndex:-1},C.map((oe,he)=>{var je;let[Ce,fe]=oe.split("-");return ge.createElement("ol",{key:oe,dir:y==="auto"?$v():y,tabIndex:-1,ref:U,className:a,"data-sonner-toaster":!0,"data-theme":L,"data-y-position":Ce,"data-x-position":fe,style:{"--front-toast-height":`${((je=E[0])==null?void 0:je.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||l2,"--width":`${d2}px`,"--gap":`${p}px`,...h},onBlur:de=>{Q.current&&!de.currentTarget.contains(de.relatedTarget)&&(Q.current=!1,D.current&&(D.current.focus({preventScroll:!0}),D.current=null))},onFocus:de=>{de.target instanceof HTMLElement&&de.target.dataset.dismissible==="false"||Q.current||(Q.current=!0,D.current=de.relatedTarget)},onMouseEnter:()=>q(!0),onMouseMove:()=>q(!0),onMouseLeave:()=>{X||q(!1)},onPointerDown:de=>{de.target instanceof HTMLElement&&de.target.dataset.dismissible==="false"||Z(!0)},onPointerUp:()=>Z(!1)},j.filter(de=>!de.position&&he===0||de.position===oe).map((de,ce)=>{var xe,T;return ge.createElement(p2,{key:de.id,icons:w,index:ce,toast:de,defaultRichColors:d,duration:(xe=x==null?void 0:x.duration)!=null?xe:f,className:x==null?void 0:x.className,descriptionClassName:x==null?void 0:x.descriptionClassName,invert:t,visibleToasts:m,closeButton:(T=x==null?void 0:x.closeButton)!=null?T:o,interacting:X,position:oe,style:x==null?void 0:x.style,unstyled:x==null?void 0:x.unstyled,classNames:x==null?void 0:x.classNames,cancelButtonStyle:x==null?void 0:x.cancelButtonStyle,actionButtonStyle:x==null?void 0:x.actionButtonStyle,removeToast:ne,toasts:j.filter(A=>A.position==de.position),heights:E.filter(A=>A.position==de.position),setHeights:O,expandByDefault:s,gap:p,loadingIcon:b,expanded:B,pauseWhenPageIsHidden:v,cn:_})}))})):null};const v2=({...e})=>i.jsx(g2,{theme:"dark",className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e});var x2=x0.useId||(()=>{}),w2=0;function zn(e){const[t,r]=u.useState(x2());return qt(()=>{e||r(n=>n??String(w2++))},[e]),e||(t?`radix-${t}`:"")}const y2=["top","right","bottom","left"],Ds=Math.min,Tr=Math.max,td=Math.round,Ql=Math.floor,Is=e=>({x:e,y:e}),b2={left:"right",right:"left",bottom:"top",top:"bottom"},_2={start:"end",end:"start"};function gh(e,t,r){return Tr(e,Ds(t,r))}function qn(e,t){return typeof e=="function"?e(t):e}function Hn(e){return e.split("-")[0]}function qo(e){return e.split("-")[1]}function sp(e){return e==="x"?"y":"x"}function ip(e){return e==="y"?"height":"width"}function Os(e){return["top","bottom"].includes(Hn(e))?"y":"x"}function op(e){return sp(Os(e))}function j2(e,t,r){r===void 0&&(r=!1);const n=qo(e),s=op(e),o=ip(s);let a=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=rd(a)),[a,rd(a)]}function N2(e){const t=rd(e);return[vh(e),t,vh(t)]}function vh(e){return e.replace(/start|end/g,t=>_2[t])}function S2(e,t,r){const n=["left","right"],s=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return r?t?s:n:t?n:s;case"left":case"right":return t?o:a;default:return[]}}function k2(e,t,r,n){const s=qo(e);let o=S2(Hn(e),r==="start",n);return s&&(o=o.map(a=>a+"-"+s),t&&(o=o.concat(o.map(vh)))),o}function rd(e){return e.replace(/left|right|bottom|top/g,t=>b2[t])}function C2(e){return{top:0,right:0,bottom:0,left:0,...e}}function db(e){return typeof e!="number"?C2(e):{top:e,right:e,bottom:e,left:e}}function nd(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function Uv(e,t,r){let{reference:n,floating:s}=e;const o=Os(t),a=op(t),l=ip(a),c=Hn(t),d=o==="y",f=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,m=n[l]/2-s[l]/2;let x;switch(c){case"top":x={x:f,y:n.y-s.height};break;case"bottom":x={x:f,y:n.y+n.height};break;case"right":x={x:n.x+n.width,y:h};break;case"left":x={x:n.x-s.width,y:h};break;default:x={x:n.x,y:n.y}}switch(qo(t)){case"start":x[a]-=m*(r&&d?-1:1);break;case"end":x[a]+=m*(r&&d?-1:1);break}return x}const E2=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:a}=r,l=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let d=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:h}=Uv(d,n,c),m=n,x={},y=0;for(let p=0;p<l.length;p++){const{name:b,fn:w}=l[p],{x:g,y:v,data:_,reset:j}=await w({x:f,y:h,initialPlacement:n,placement:m,strategy:s,middlewareData:x,rects:d,platform:a,elements:{reference:e,floating:t}});f=g??f,h=v??h,x={...x,[b]:{...x[b],..._}},j&&y<=50&&(y++,typeof j=="object"&&(j.placement&&(m=j.placement),j.rects&&(d=j.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):j.rects),{x:f,y:h}=Uv(d,m,c)),p=-1)}return{x:f,y:h,placement:m,strategy:s,middlewareData:x}};async function rl(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:o,rects:a,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:m=!1,padding:x=0}=qn(t,e),y=db(x),b=l[m?h==="floating"?"reference":"floating":h],w=nd(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(b)))==null||r?b:b.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:d,rootBoundary:f,strategy:c})),g=h==="floating"?{x:n,y:s,width:a.floating.width,height:a.floating.height}:a.reference,v=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),_=await(o.isElement==null?void 0:o.isElement(v))?await(o.getScale==null?void 0:o.getScale(v))||{x:1,y:1}:{x:1,y:1},j=nd(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:g,offsetParent:v,strategy:c}):g);return{top:(w.top-j.top+y.top)/_.y,bottom:(j.bottom-w.bottom+y.bottom)/_.y,left:(w.left-j.left+y.left)/_.x,right:(j.right-w.right+y.right)/_.x}}const P2=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:o,platform:a,elements:l,middlewareData:c}=t,{element:d,padding:f=0}=qn(e,t)||{};if(d==null)return{};const h=db(f),m={x:r,y:n},x=op(s),y=ip(x),p=await a.getDimensions(d),b=x==="y",w=b?"top":"left",g=b?"bottom":"right",v=b?"clientHeight":"clientWidth",_=o.reference[y]+o.reference[x]-m[x]-o.floating[y],j=m[x]-o.reference[x],k=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let C=k?k[v]:0;(!C||!await(a.isElement==null?void 0:a.isElement(k)))&&(C=l.floating[v]||o.floating[y]);const E=_/2-j/2,O=C/2-p[y]/2-1,B=Ds(h[w],O),q=Ds(h[g],O),X=B,Z=C-p[y]-q,L=C/2-p[y]/2+E,ee=gh(X,L,Z),U=!c.arrow&&qo(s)!=null&&L!==ee&&o.reference[y]/2-(L<X?B:q)-p[y]/2<0,K=U?L<X?L-X:L-Z:0;return{[x]:m[x]+K,data:{[x]:ee,centerOffset:L-ee-K,...U&&{alignmentOffset:K}},reset:U}}}),T2=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:o,rects:a,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:p=!0,...b}=qn(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const w=Hn(s),g=Os(l),v=Hn(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(d.floating)),j=m||(v||!p?[rd(l)]:N2(l)),k=y!=="none";!m&&k&&j.push(...k2(l,p,y,_));const C=[l,...j],E=await rl(t,b),O=[];let B=((n=o.flip)==null?void 0:n.overflows)||[];if(f&&O.push(E[w]),h){const L=j2(s,a,_);O.push(E[L[0]],E[L[1]])}if(B=[...B,{placement:s,overflows:O}],!O.every(L=>L<=0)){var q,X;const L=(((q=o.flip)==null?void 0:q.index)||0)+1,ee=C[L];if(ee)return{data:{index:L,overflows:B},reset:{placement:ee}};let U=(X=B.filter(K=>K.overflows[0]<=0).sort((K,D)=>K.overflows[1]-D.overflows[1])[0])==null?void 0:X.placement;if(!U)switch(x){case"bestFit":{var Z;const K=(Z=B.filter(D=>{if(k){const Q=Os(D.placement);return Q===g||Q==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(Q=>Q>0).reduce((Q,ne)=>Q+ne,0)]).sort((D,Q)=>D[1]-Q[1])[0])==null?void 0:Z[0];K&&(U=K);break}case"initialPlacement":U=l;break}if(s!==U)return{reset:{placement:U}}}return{}}}};function Vv(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Wv(e){return y2.some(t=>e[t]>=0)}const R2=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=qn(e,t);switch(n){case"referenceHidden":{const o=await rl(t,{...s,elementContext:"reference"}),a=Vv(o,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:Wv(a)}}}case"escaped":{const o=await rl(t,{...s,altBoundary:!0}),a=Vv(o,r.floating);return{data:{escapedOffsets:a,escaped:Wv(a)}}}default:return{}}}}};async function A2(e,t){const{placement:r,platform:n,elements:s}=e,o=await(n.isRTL==null?void 0:n.isRTL(s.floating)),a=Hn(r),l=qo(r),c=Os(r)==="y",d=["left","top"].includes(a)?-1:1,f=o&&c?-1:1,h=qn(t,e);let{mainAxis:m,crossAxis:x,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof y=="number"&&(x=l==="end"?y*-1:y),c?{x:x*f,y:m*d}:{x:m*d,y:x*f}}const M2=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:o,placement:a,middlewareData:l}=t,c=await A2(t,e);return a===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:a}}}}},D2=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:b=>{let{x:w,y:g}=b;return{x:w,y:g}}},...c}=qn(e,t),d={x:r,y:n},f=await rl(t,c),h=Os(Hn(s)),m=sp(h);let x=d[m],y=d[h];if(o){const b=m==="y"?"top":"left",w=m==="y"?"bottom":"right",g=x+f[b],v=x-f[w];x=gh(g,x,v)}if(a){const b=h==="y"?"top":"left",w=h==="y"?"bottom":"right",g=y+f[b],v=y-f[w];y=gh(g,y,v)}const p=l.fn({...t,[m]:x,[h]:y});return{...p,data:{x:p.x-r,y:p.y-n,enabled:{[m]:o,[h]:a}}}}}},I2=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:o,middlewareData:a}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=qn(e,t),f={x:r,y:n},h=Os(s),m=sp(h);let x=f[m],y=f[h];const p=qn(l,t),b=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const v=m==="y"?"height":"width",_=o.reference[m]-o.floating[v]+b.mainAxis,j=o.reference[m]+o.reference[v]-b.mainAxis;x<_?x=_:x>j&&(x=j)}if(d){var w,g;const v=m==="y"?"width":"height",_=["top","left"].includes(Hn(s)),j=o.reference[h]-o.floating[v]+(_&&((w=a.offset)==null?void 0:w[h])||0)+(_?0:b.crossAxis),k=o.reference[h]+o.reference[v]+(_?0:((g=a.offset)==null?void 0:g[h])||0)-(_?b.crossAxis:0);y<j?y=j:y>k&&(y=k)}return{[m]:x,[h]:y}}}},O2=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:o,platform:a,elements:l}=t,{apply:c=()=>{},...d}=qn(e,t),f=await rl(t,d),h=Hn(s),m=qo(s),x=Os(s)==="y",{width:y,height:p}=o.floating;let b,w;h==="top"||h==="bottom"?(b=h,w=m===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(w=h,b=m==="end"?"top":"bottom");const g=p-f.top-f.bottom,v=y-f.left-f.right,_=Ds(p-f[b],g),j=Ds(y-f[w],v),k=!t.middlewareData.shift;let C=_,E=j;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(E=v),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(C=g),k&&!m){const B=Tr(f.left,0),q=Tr(f.right,0),X=Tr(f.top,0),Z=Tr(f.bottom,0);x?E=y-2*(B!==0||q!==0?B+q:Tr(f.left,f.right)):C=p-2*(X!==0||Z!==0?X+Z:Tr(f.top,f.bottom))}await c({...t,availableWidth:E,availableHeight:C});const O=await a.getDimensions(l.floating);return y!==O.width||p!==O.height?{reset:{rects:!0}}:{}}}};function Ad(){return typeof window<"u"}function Ho(e){return ub(e)?(e.nodeName||"").toLowerCase():"#document"}function Mr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Sn(e){var t;return(t=(ub(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function ub(e){return Ad()?e instanceof Node||e instanceof Mr(e).Node:!1}function cn(e){return Ad()?e instanceof Element||e instanceof Mr(e).Element:!1}function jn(e){return Ad()?e instanceof HTMLElement||e instanceof Mr(e).HTMLElement:!1}function Bv(e){return!Ad()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Mr(e).ShadowRoot}function yl(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=dn(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(s)}function L2(e){return["table","td","th"].includes(Ho(e))}function Md(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function ap(e){const t=lp(),r=cn(e)?dn(e):e;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function F2(e){let t=Ls(e);for(;jn(t)&&!Io(t);){if(ap(t))return t;if(Md(t))return null;t=Ls(t)}return null}function lp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Io(e){return["html","body","#document"].includes(Ho(e))}function dn(e){return Mr(e).getComputedStyle(e)}function Dd(e){return cn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ls(e){if(Ho(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Bv(e)&&e.host||Sn(e);return Bv(t)?t.host:t}function fb(e){const t=Ls(e);return Io(t)?e.ownerDocument?e.ownerDocument.body:e.body:jn(t)&&yl(t)?t:fb(t)}function nl(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=fb(e),o=s===((n=e.ownerDocument)==null?void 0:n.body),a=Mr(s);if(o){const l=xh(a);return t.concat(a,a.visualViewport||[],yl(s)?s:[],l&&r?nl(l):[])}return t.concat(s,nl(s,[],r))}function xh(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function hb(e){const t=dn(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=jn(e),o=s?e.offsetWidth:r,a=s?e.offsetHeight:n,l=td(r)!==o||td(n)!==a;return l&&(r=o,n=a),{width:r,height:n,$:l}}function cp(e){return cn(e)?e:e.contextElement}function po(e){const t=cp(e);if(!jn(t))return Is(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:o}=hb(t);let a=(o?td(r.width):r.width)/n,l=(o?td(r.height):r.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const z2=Is(0);function mb(e){const t=Mr(e);return!lp()||!t.visualViewport?z2:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function $2(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Mr(e)?!1:t}function bi(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),o=cp(e);let a=Is(1);t&&(n?cn(n)&&(a=po(n)):a=po(e));const l=$2(o,r,n)?mb(o):Is(0);let c=(s.left+l.x)/a.x,d=(s.top+l.y)/a.y,f=s.width/a.x,h=s.height/a.y;if(o){const m=Mr(o),x=n&&cn(n)?Mr(n):n;let y=m,p=xh(y);for(;p&&n&&x!==y;){const b=po(p),w=p.getBoundingClientRect(),g=dn(p),v=w.left+(p.clientLeft+parseFloat(g.paddingLeft))*b.x,_=w.top+(p.clientTop+parseFloat(g.paddingTop))*b.y;c*=b.x,d*=b.y,f*=b.x,h*=b.y,c+=v,d+=_,y=Mr(p),p=xh(y)}}return nd({width:f,height:h,x:c,y:d})}function U2(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const o=s==="fixed",a=Sn(n),l=t?Md(t.floating):!1;if(n===a||l&&o)return r;let c={scrollLeft:0,scrollTop:0},d=Is(1);const f=Is(0),h=jn(n);if((h||!h&&!o)&&((Ho(n)!=="body"||yl(a))&&(c=Dd(n)),jn(n))){const m=bi(n);d=po(n),f.x=m.x+n.clientLeft,f.y=m.y+n.clientTop}return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+f.x,y:r.y*d.y-c.scrollTop*d.y+f.y}}function V2(e){return Array.from(e.getClientRects())}function wh(e,t){const r=Dd(e).scrollLeft;return t?t.left+r:bi(Sn(e)).left+r}function W2(e){const t=Sn(e),r=Dd(e),n=e.ownerDocument.body,s=Tr(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=Tr(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+wh(e);const l=-r.scrollTop;return dn(n).direction==="rtl"&&(a+=Tr(t.clientWidth,n.clientWidth)-s),{width:s,height:o,x:a,y:l}}function B2(e,t){const r=Mr(e),n=Sn(e),s=r.visualViewport;let o=n.clientWidth,a=n.clientHeight,l=0,c=0;if(s){o=s.width,a=s.height;const d=lp();(!d||d&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:o,height:a,x:l,y:c}}function q2(e,t){const r=bi(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,o=jn(e)?po(e):Is(1),a=e.clientWidth*o.x,l=e.clientHeight*o.y,c=s*o.x,d=n*o.y;return{width:a,height:l,x:c,y:d}}function qv(e,t,r){let n;if(t==="viewport")n=B2(e,r);else if(t==="document")n=W2(Sn(e));else if(cn(t))n=q2(t,r);else{const s=mb(e);n={...t,x:t.x-s.x,y:t.y-s.y}}return nd(n)}function pb(e,t){const r=Ls(e);return r===t||!cn(r)||Io(r)?!1:dn(r).position==="fixed"||pb(r,t)}function H2(e,t){const r=t.get(e);if(r)return r;let n=nl(e,[],!1).filter(l=>cn(l)&&Ho(l)!=="body"),s=null;const o=dn(e).position==="fixed";let a=o?Ls(e):e;for(;cn(a)&&!Io(a);){const l=dn(a),c=ap(a);!c&&l.position==="fixed"&&(s=null),(o?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||yl(a)&&!c&&pb(e,a))?n=n.filter(f=>f!==a):s=l,a=Ls(a)}return t.set(e,n),n}function G2(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const a=[...r==="clippingAncestors"?Md(t)?[]:H2(t,this._c):[].concat(r),n],l=a[0],c=a.reduce((d,f)=>{const h=qv(t,f,s);return d.top=Tr(h.top,d.top),d.right=Ds(h.right,d.right),d.bottom=Ds(h.bottom,d.bottom),d.left=Tr(h.left,d.left),d},qv(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Y2(e){const{width:t,height:r}=hb(e);return{width:t,height:r}}function Z2(e,t,r){const n=jn(t),s=Sn(t),o=r==="fixed",a=bi(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=Is(0);if(n||!n&&!o)if((Ho(t)!=="body"||yl(s))&&(l=Dd(t)),n){const x=bi(t,!0,o,t);c.x=x.x+t.clientLeft,c.y=x.y+t.clientTop}else s&&(c.x=wh(s));let d=0,f=0;if(s&&!n&&!o){const x=s.getBoundingClientRect();f=x.top+l.scrollTop,d=x.left+l.scrollLeft-wh(s,x)}const h=a.left+l.scrollLeft-c.x-d,m=a.top+l.scrollTop-c.y-f;return{x:h,y:m,width:a.width,height:a.height}}function Gu(e){return dn(e).position==="static"}function Hv(e,t){if(!jn(e)||dn(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Sn(e)===r&&(r=r.ownerDocument.body),r}function gb(e,t){const r=Mr(e);if(Md(e))return r;if(!jn(e)){let s=Ls(e);for(;s&&!Io(s);){if(cn(s)&&!Gu(s))return s;s=Ls(s)}return r}let n=Hv(e,t);for(;n&&L2(n)&&Gu(n);)n=Hv(n,t);return n&&Io(n)&&Gu(n)&&!ap(n)?r:n||F2(e)||r}const K2=async function(e){const t=this.getOffsetParent||gb,r=this.getDimensions,n=await r(e.floating);return{reference:Z2(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function X2(e){return dn(e).direction==="rtl"}const Q2={convertOffsetParentRelativeRectToViewportRelativeRect:U2,getDocumentElement:Sn,getClippingRect:G2,getOffsetParent:gb,getElementRects:K2,getClientRects:V2,getDimensions:Y2,getScale:po,isElement:cn,isRTL:X2};function J2(e,t){let r=null,n;const s=Sn(e);function o(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const{left:d,top:f,width:h,height:m}=e.getBoundingClientRect();if(l||t(),!h||!m)return;const x=Ql(f),y=Ql(s.clientWidth-(d+h)),p=Ql(s.clientHeight-(f+m)),b=Ql(d),g={rootMargin:-x+"px "+-y+"px "+-p+"px "+-b+"px",threshold:Tr(0,Ds(1,c))||1};let v=!0;function _(j){const k=j[0].intersectionRatio;if(k!==c){if(!v)return a();k?a(!1,k):n=setTimeout(()=>{a(!1,1e-7)},1e3)}v=!1}try{r=new IntersectionObserver(_,{...g,root:s.ownerDocument})}catch{r=new IntersectionObserver(_,g)}r.observe(e)}return a(!0),o}function eP(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=cp(e),f=s||o?[...d?nl(d):[],...nl(t)]:[];f.forEach(w=>{s&&w.addEventListener("scroll",r,{passive:!0}),o&&w.addEventListener("resize",r)});const h=d&&l?J2(d,r):null;let m=-1,x=null;a&&(x=new ResizeObserver(w=>{let[g]=w;g&&g.target===d&&x&&(x.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var v;(v=x)==null||v.observe(t)})),r()}),d&&!c&&x.observe(d),x.observe(t));let y,p=c?bi(e):null;c&&b();function b(){const w=bi(e);p&&(w.x!==p.x||w.y!==p.y||w.width!==p.width||w.height!==p.height)&&r(),p=w,y=requestAnimationFrame(b)}return r(),()=>{var w;f.forEach(g=>{s&&g.removeEventListener("scroll",r),o&&g.removeEventListener("resize",r)}),h==null||h(),(w=x)==null||w.disconnect(),x=null,c&&cancelAnimationFrame(y)}}const tP=M2,rP=D2,nP=T2,sP=O2,iP=R2,Gv=P2,oP=I2,aP=(e,t,r)=>{const n=new Map,s={platform:Q2,...r},o={...s.platform,_c:n};return E2(e,t,{...s,platform:o})};var Nc=typeof document<"u"?u.useLayoutEffect:u.useEffect;function sd(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!sd(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const o=s[n];if(!(o==="_owner"&&e.$$typeof)&&!sd(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function vb(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Yv(e,t){const r=vb(e);return Math.round(t*r)/r}function Yu(e){const t=u.useRef(e);return Nc(()=>{t.current=e}),t}function lP(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:o,floating:a}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[f,h]=u.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[m,x]=u.useState(n);sd(m,n)||x(n);const[y,p]=u.useState(null),[b,w]=u.useState(null),g=u.useCallback(D=>{D!==k.current&&(k.current=D,p(D))},[]),v=u.useCallback(D=>{D!==C.current&&(C.current=D,w(D))},[]),_=o||y,j=a||b,k=u.useRef(null),C=u.useRef(null),E=u.useRef(f),O=c!=null,B=Yu(c),q=Yu(s),X=Yu(d),Z=u.useCallback(()=>{if(!k.current||!C.current)return;const D={placement:t,strategy:r,middleware:m};q.current&&(D.platform=q.current),aP(k.current,C.current,D).then(Q=>{const ne={...Q,isPositioned:X.current!==!1};L.current&&!sd(E.current,ne)&&(E.current=ne,Ei.flushSync(()=>{h(ne)}))})},[m,t,r,q,X]);Nc(()=>{d===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,h(D=>({...D,isPositioned:!1})))},[d]);const L=u.useRef(!1);Nc(()=>(L.current=!0,()=>{L.current=!1}),[]),Nc(()=>{if(_&&(k.current=_),j&&(C.current=j),_&&j){if(B.current)return B.current(_,j,Z);Z()}},[_,j,Z,B,O]);const ee=u.useMemo(()=>({reference:k,floating:C,setReference:g,setFloating:v}),[g,v]),U=u.useMemo(()=>({reference:_,floating:j}),[_,j]),K=u.useMemo(()=>{const D={position:r,left:0,top:0};if(!U.floating)return D;const Q=Yv(U.floating,f.x),ne=Yv(U.floating,f.y);return l?{...D,transform:"translate("+Q+"px, "+ne+"px)",...vb(U.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:Q,top:ne}},[r,l,U.floating,f.x,f.y]);return u.useMemo(()=>({...f,update:Z,refs:ee,elements:U,floatingStyles:K}),[f,Z,ee,U,K])}const cP=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?Gv({element:n.current,padding:s}).fn(r):{}:n?Gv({element:n,padding:s}).fn(r):{}}}},dP=(e,t)=>({...tP(e),options:[e,t]}),uP=(e,t)=>({...rP(e),options:[e,t]}),fP=(e,t)=>({...oP(e),options:[e,t]}),hP=(e,t)=>({...nP(e),options:[e,t]}),mP=(e,t)=>({...sP(e),options:[e,t]}),pP=(e,t)=>({...iP(e),options:[e,t]}),gP=(e,t)=>({...cP(e),options:[e,t]});var vP="Arrow",xb=u.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...o}=e;return i.jsx(Ie.svg,{...o,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});xb.displayName=vP;var xP=xb;function wP(e,t=[]){let r=[];function n(o,a){const l=u.createContext(a),c=r.length;r=[...r,a];function d(h){const{scope:m,children:x,...y}=h,p=(m==null?void 0:m[e][c])||l,b=u.useMemo(()=>y,Object.values(y));return i.jsx(p.Provider,{value:b,children:x})}function f(h,m){const x=(m==null?void 0:m[e][c])||l,y=u.useContext(x);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,f]}const s=()=>{const o=r.map(a=>u.createContext(a));return function(l){const c=(l==null?void 0:l[e])||o;return u.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,yP(s,...t)]}function yP(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=n.reduce((l,{useScope:c,scopeName:d})=>{const h=c(o)[`__scope${d}`];return{...l,...h}},{});return u.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}function wb(e){const[t,r]=u.useState(void 0);return qt(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let a,l;if("borderBoxSize"in o){const c=o.borderBoxSize,d=Array.isArray(c)?c[0]:c;a=d.inlineSize,l=d.blockSize}else a=e.offsetWidth,l=e.offsetHeight;r({width:a,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var dp="Popper",[yb,Go]=wP(dp),[bP,bb]=yb(dp),_b=e=>{const{__scopePopper:t,children:r}=e,[n,s]=u.useState(null);return i.jsx(bP,{scope:t,anchor:n,onAnchorChange:s,children:r})};_b.displayName=dp;var jb="PopperAnchor",Nb=u.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,o=bb(jb,r),a=u.useRef(null),l=st(t,a);return u.useEffect(()=>{o.onAnchorChange((n==null?void 0:n.current)||a.current)}),n?null:i.jsx(Ie.div,{...s,ref:l})});Nb.displayName=jb;var up="PopperContent",[_P,jP]=yb(up),Sb=u.forwardRef((e,t)=>{var ce,xe,T,A,G,V;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:o="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:x="optimized",onPlaced:y,...p}=e,b=bb(up,r),[w,g]=u.useState(null),v=st(t,S=>g(S)),[_,j]=u.useState(null),k=wb(_),C=(k==null?void 0:k.width)??0,E=(k==null?void 0:k.height)??0,O=n+(o!=="center"?"-"+o:""),B=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},q=Array.isArray(d)?d:[d],X=q.length>0,Z={padding:B,boundary:q.filter(SP),altBoundary:X},{refs:L,floatingStyles:ee,placement:U,isPositioned:K,middlewareData:D}=lP({strategy:"fixed",placement:O,whileElementsMounted:(...S)=>eP(...S,{animationFrame:x==="always"}),elements:{reference:b.anchor},middleware:[dP({mainAxis:s+E,alignmentAxis:a}),c&&uP({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?fP():void 0,...Z}),c&&hP({...Z}),mP({...Z,apply:({elements:S,rects:z,availableWidth:M,availableHeight:R})=>{const{width:I,height:$}=z.reference,te=S.floating.style;te.setProperty("--radix-popper-available-width",`${M}px`),te.setProperty("--radix-popper-available-height",`${R}px`),te.setProperty("--radix-popper-anchor-width",`${I}px`),te.setProperty("--radix-popper-anchor-height",`${$}px`)}}),_&&gP({element:_,padding:l}),kP({arrowWidth:C,arrowHeight:E}),m&&pP({strategy:"referenceHidden",...Z})]}),[Q,ne]=Eb(U),oe=ur(y);qt(()=>{K&&(oe==null||oe())},[K,oe]);const he=(ce=D.arrow)==null?void 0:ce.x,je=(xe=D.arrow)==null?void 0:xe.y,Ce=((T=D.arrow)==null?void 0:T.centerOffset)!==0,[fe,de]=u.useState();return qt(()=>{w&&de(window.getComputedStyle(w).zIndex)},[w]),i.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...ee,transform:K?ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:fe,"--radix-popper-transform-origin":[(A=D.transformOrigin)==null?void 0:A.x,(G=D.transformOrigin)==null?void 0:G.y].join(" "),...((V=D.hide)==null?void 0:V.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(_P,{scope:r,placedSide:Q,onArrowChange:j,arrowX:he,arrowY:je,shouldHideArrow:Ce,children:i.jsx(Ie.div,{"data-side":Q,"data-align":ne,...p,ref:v,style:{...p.style,animation:K?void 0:"none"}})})})});Sb.displayName=up;var kb="PopperArrow",NP={top:"bottom",right:"left",bottom:"top",left:"right"},Cb=u.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,o=jP(kb,n),a=NP[o.placedSide];return i.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:i.jsx(xP,{...s,ref:r,style:{...s.style,display:"block"}})})});Cb.displayName=kb;function SP(e){return e!==null}var kP=e=>({name:"transformOrigin",options:e,fn(t){var b,w,g;const{placement:r,rects:n,middlewareData:s}=t,a=((b=s.arrow)==null?void 0:b.centerOffset)!==0,l=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[d,f]=Eb(r),h={start:"0%",center:"50%",end:"100%"}[f],m=(((w=s.arrow)==null?void 0:w.x)??0)+l/2,x=(((g=s.arrow)==null?void 0:g.y)??0)+c/2;let y="",p="";return d==="bottom"?(y=a?h:`${m}px`,p=`${-c}px`):d==="top"?(y=a?h:`${m}px`,p=`${n.floating.height+c}px`):d==="right"?(y=`${-c}px`,p=a?h:`${x}px`):d==="left"&&(y=`${n.floating.width+c}px`,p=a?h:`${x}px`),{data:{x:y,y:p}}}});function Eb(e){const[t,r="center"]=e.split("-");return[t,r]}var Pb=_b,Id=Nb,fp=Sb,hp=Cb,[Od,m3]=Us("Tooltip",[Go]),mp=Go(),Tb="TooltipProvider",CP=700,Zv="tooltip.open",[EP,Rb]=Od(Tb),Ab=e=>{const{__scopeTooltip:t,delayDuration:r=CP,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:o}=e,[a,l]=u.useState(!0),c=u.useRef(!1),d=u.useRef(0);return u.useEffect(()=>{const f=d.current;return()=>window.clearTimeout(f)},[]),i.jsx(EP,{scope:t,isOpenDelayed:a,delayDuration:r,onOpen:u.useCallback(()=>{window.clearTimeout(d.current),l(!1)},[]),onClose:u.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l(!0),n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:u.useCallback(f=>{c.current=f},[]),disableHoverableContent:s,children:o})};Ab.displayName=Tb;var Mb="Tooltip",[p3,Ld]=Od(Mb),yh="TooltipTrigger",PP=u.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=Ld(yh,r),o=Rb(yh,r),a=mp(r),l=u.useRef(null),c=st(t,l,s.onTriggerChange),d=u.useRef(!1),f=u.useRef(!1),h=u.useCallback(()=>d.current=!1,[]);return u.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),i.jsx(Id,{asChild:!0,...a,children:i.jsx(Ie.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:c,onPointerMove:Pe(e.onPointerMove,m=>{m.pointerType!=="touch"&&!f.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),f.current=!0)}),onPointerLeave:Pe(e.onPointerLeave,()=>{s.onTriggerLeave(),f.current=!1}),onPointerDown:Pe(e.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Pe(e.onFocus,()=>{d.current||s.onOpen()}),onBlur:Pe(e.onBlur,s.onClose),onClick:Pe(e.onClick,s.onClose)})})});PP.displayName=yh;var TP="TooltipPortal",[g3,RP]=Od(TP,{forceMount:void 0}),Oo="TooltipContent",Db=u.forwardRef((e,t)=>{const r=RP(Oo,e.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...o}=e,a=Ld(Oo,e.__scopeTooltip);return i.jsx(Yn,{present:n||a.open,children:a.disableHoverableContent?i.jsx(Ib,{side:s,...o,ref:t}):i.jsx(AP,{side:s,...o,ref:t})})}),AP=u.forwardRef((e,t)=>{const r=Ld(Oo,e.__scopeTooltip),n=Rb(Oo,e.__scopeTooltip),s=u.useRef(null),o=st(t,s),[a,l]=u.useState(null),{trigger:c,onClose:d}=r,f=s.current,{onPointerInTransitChange:h}=n,m=u.useCallback(()=>{l(null),h(!1)},[h]),x=u.useCallback((y,p)=>{const b=y.currentTarget,w={x:y.clientX,y:y.clientY},g=OP(w,b.getBoundingClientRect()),v=LP(w,g),_=FP(p.getBoundingClientRect()),j=$P([...v,..._]);l(j),h(!0)},[h]);return u.useEffect(()=>()=>m(),[m]),u.useEffect(()=>{if(c&&f){const y=b=>x(b,f),p=b=>x(b,c);return c.addEventListener("pointerleave",y),f.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",y),f.removeEventListener("pointerleave",p)}}},[c,f,x,m]),u.useEffect(()=>{if(a){const y=p=>{const b=p.target,w={x:p.clientX,y:p.clientY},g=(c==null?void 0:c.contains(b))||(f==null?void 0:f.contains(b)),v=!zP(w,a);g?m():v&&(m(),d())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,f,a,d,m]),i.jsx(Ib,{...e,ref:o})}),[MP,DP]=Od(Mb,{isInside:!1}),Ib=u.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:a,...l}=e,c=Ld(Oo,r),d=mp(r),{onClose:f}=c;return u.useEffect(()=>(document.addEventListener(Zv,f),()=>document.removeEventListener(Zv,f)),[f]),u.useEffect(()=>{if(c.trigger){const h=m=>{const x=m.target;x!=null&&x.contains(c.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,f]),i.jsx(Wo,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:i.jsxs(fp,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(Ny,{children:n}),i.jsx(MP,{scope:r,isInside:!0,children:i.jsx(SC,{id:c.contentId,role:"tooltip",children:s||n})})]})})});Db.displayName=Oo;var Ob="TooltipArrow",IP=u.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=mp(r);return DP(Ob,r).isInside?null:i.jsx(hp,{...s,...n,ref:t})});IP.displayName=Ob;function OP(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(r,n,s,o)){case o:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function LP(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function FP(e){const{top:t,right:r,bottom:n,left:s}=e;return[{x:s,y:t},{x:r,y:t},{x:r,y:n},{x:s,y:n}]}function zP(e,t){const{x:r,y:n}=e;let s=!1;for(let o=0,a=t.length-1;o<t.length;a=o++){const l=t[o].x,c=t[o].y,d=t[a].x,f=t[a].y;c>n!=f>n&&r<(d-l)*(n-c)/(f-c)+l&&(s=!s)}return s}function $P(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),UP(t)}function UP(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const s=e[n];for(;t.length>=2;){const o=t[t.length-1],a=t[t.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))t.pop();else break}t.push(s)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const s=e[n];for(;r.length>=2;){const o=r[r.length-1],a=r[r.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))r.pop();else break}r.push(s)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var VP=Ab,Lb=Db;const WP=VP,BP=u.forwardRef(({className:e,sideOffset:t=4,...r},n)=>i.jsx(Lb,{ref:n,sideOffset:t,className:Fe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));BP.displayName=Lb.displayName;var Fd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},zd=typeof window>"u"||"Deno"in globalThis;function Jr(){}function qP(e,t){return typeof e=="function"?e(t):e}function HP(e){return typeof e=="number"&&e>=0&&e!==1/0}function GP(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Kv(e,t){return typeof e=="function"?e(t):e}function YP(e,t){return typeof e=="function"?e(t):e}function Xv(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:o,queryKey:a,stale:l}=e;if(a){if(n){if(t.queryHash!==pp(a,t.options))return!1}else if(!il(t.queryKey,a))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||o&&!o(t))}function Qv(e,t){const{exact:r,status:n,predicate:s,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(r){if(sl(t.options.mutationKey)!==sl(o))return!1}else if(!il(t.options.mutationKey,o))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function pp(e,t){return((t==null?void 0:t.queryKeyHashFn)||sl)(e)}function sl(e){return JSON.stringify(e,(t,r)=>bh(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function il(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!il(e[r],t[r])):!1}function Fb(e,t){if(e===t)return e;const r=Jv(e)&&Jv(t);if(r||bh(e)&&bh(t)){const n=r?e:Object.keys(e),s=n.length,o=r?t:Object.keys(t),a=o.length,l=r?[]:{};let c=0;for(let d=0;d<a;d++){const f=r?d:o[d];(!r&&n.includes(f)||r)&&e[f]===void 0&&t[f]===void 0?(l[f]=void 0,c++):(l[f]=Fb(e[f],t[f]),l[f]===e[f]&&e[f]!==void 0&&c++)}return s===a&&c===s?e:l}return t}function Jv(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function bh(e){if(!ex(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!ex(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function ex(e){return Object.prototype.toString.call(e)==="[object Object]"}function ZP(e){return new Promise(t=>{setTimeout(t,e)})}function KP(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Fb(e,t):t}function XP(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function QP(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var gp=Symbol();function zb(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===gp?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var ci,ds,vo,e0,JP=(e0=class extends Fd{constructor(){super();tt(this,ci);tt(this,ds);tt(this,vo);Ve(this,vo,t=>{if(!zd&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){ie(this,ds)||this.setEventListener(ie(this,vo))}onUnsubscribe(){var t;this.hasListeners()||((t=ie(this,ds))==null||t.call(this),Ve(this,ds,void 0))}setEventListener(t){var r;Ve(this,vo,t),(r=ie(this,ds))==null||r.call(this),Ve(this,ds,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){ie(this,ci)!==t&&(Ve(this,ci,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof ie(this,ci)=="boolean"?ie(this,ci):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},ci=new WeakMap,ds=new WeakMap,vo=new WeakMap,e0),$b=new JP,xo,us,wo,t0,eT=(t0=class extends Fd{constructor(){super();tt(this,xo,!0);tt(this,us);tt(this,wo);Ve(this,wo,t=>{if(!zd&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){ie(this,us)||this.setEventListener(ie(this,wo))}onUnsubscribe(){var t;this.hasListeners()||((t=ie(this,us))==null||t.call(this),Ve(this,us,void 0))}setEventListener(t){var r;Ve(this,wo,t),(r=ie(this,us))==null||r.call(this),Ve(this,us,t(this.setOnline.bind(this)))}setOnline(t){ie(this,xo)!==t&&(Ve(this,xo,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return ie(this,xo)}},xo=new WeakMap,us=new WeakMap,wo=new WeakMap,t0),id=new eT;function tT(){let e,t;const r=new Promise((s,o)=>{e=s,t=o});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}function rT(e){return Math.min(1e3*2**e,3e4)}function Ub(e){return(e??"online")==="online"?id.isOnline():!0}var Vb=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Zu(e){return e instanceof Vb}function Wb(e){let t=!1,r=0,n=!1,s;const o=tT(),a=p=>{var b;n||(m(new Vb(p)),(b=e.abort)==null||b.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>$b.isFocused()&&(e.networkMode==="always"||id.isOnline())&&e.canRun(),f=()=>Ub(e.networkMode)&&e.canRun(),h=p=>{var b;n||(n=!0,(b=e.onSuccess)==null||b.call(e,p),s==null||s(),o.resolve(p))},m=p=>{var b;n||(n=!0,(b=e.onError)==null||b.call(e,p),s==null||s(),o.reject(p))},x=()=>new Promise(p=>{var b;s=w=>{(n||d())&&p(w)},(b=e.onPause)==null||b.call(e)}).then(()=>{var p;s=void 0,n||(p=e.onContinue)==null||p.call(e)}),y=()=>{if(n)return;let p;const b=r===0?e.initialPromise:void 0;try{p=b??e.fn()}catch(w){p=Promise.reject(w)}Promise.resolve(p).then(h).catch(w=>{var k;if(n)return;const g=e.retry??(zd?0:3),v=e.retryDelay??rT,_=typeof v=="function"?v(r,w):v,j=g===!0||typeof g=="number"&&r<g||typeof g=="function"&&g(r,w);if(t||!j){m(w);return}r++,(k=e.onFail)==null||k.call(e,r,w),ZP(_).then(()=>d()?void 0:x()).then(()=>{t?m(w):y()})})};return{promise:o,cancel:a,continue:()=>(s==null||s(),o),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?y():x().then(y),o)}}function nT(){let e=[],t=0,r=l=>{l()},n=l=>{l()},s=l=>setTimeout(l,0);const o=l=>{t?e.push(l):s(()=>{r(l)})},a=()=>{const l=e;e=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||a()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var cr=nT(),di,r0,Bb=(r0=class{constructor(){tt(this,di)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),HP(this.gcTime)&&Ve(this,di,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(zd?1/0:5*60*1e3))}clearGcTimeout(){ie(this,di)&&(clearTimeout(ie(this,di)),Ve(this,di,void 0))}},di=new WeakMap,r0),yo,bo,$r,rr,dl,ui,en,Tn,n0,sT=(n0=class extends Bb{constructor(t){super();tt(this,en);tt(this,yo);tt(this,bo);tt(this,$r);tt(this,rr);tt(this,dl);tt(this,ui);Ve(this,ui,!1),Ve(this,dl,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ve(this,$r,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ve(this,yo,oT(this.options)),this.state=t.state??ie(this,yo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=ie(this,rr))==null?void 0:t.promise}setOptions(t){this.options={...ie(this,dl),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ie(this,$r).remove(this)}setData(t,r){const n=KP(this.state.data,t,this.options);return Qt(this,en,Tn).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Qt(this,en,Tn).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,s;const r=(n=ie(this,rr))==null?void 0:n.promise;return(s=ie(this,rr))==null||s.cancel(t),r?r.then(Jr).catch(Jr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ie(this,yo))}isActive(){return this.observers.some(t=>YP(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===gp||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!GP(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=ie(this,rr))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=ie(this,rr))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),ie(this,$r).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(ie(this,rr)&&(ie(this,ui)?ie(this,rr).cancel({revert:!0}):ie(this,rr).cancelRetry()),this.scheduleGc()),ie(this,$r).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Qt(this,en,Tn).call(this,{type:"invalidate"})}fetch(t,r){var c,d,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(ie(this,rr))return ie(this,rr).continueRetry(),ie(this,rr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(m=>m.options.queryFn);h&&this.setOptions(h.options)}const n=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(Ve(this,ui,!0),n.signal)})},o=()=>{const h=zb(this.options,r),m={queryKey:this.queryKey,meta:this.meta};return s(m),Ve(this,ui,!1),this.options.persister?this.options.persister(h,m,this):h(m)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};s(a),(c=this.options.behavior)==null||c.onFetch(a,this),Ve(this,bo,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&Qt(this,en,Tn).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta});const l=h=>{var m,x,y,p;Zu(h)&&h.silent||Qt(this,en,Tn).call(this,{type:"error",error:h}),Zu(h)||((x=(m=ie(this,$r).config).onError)==null||x.call(m,h,this),(p=(y=ie(this,$r).config).onSettled)==null||p.call(y,this.state.data,h,this)),this.scheduleGc()};return Ve(this,rr,Wb({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onSuccess:h=>{var m,x,y,p;if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(b){l(b);return}(x=(m=ie(this,$r).config).onSuccess)==null||x.call(m,h,this),(p=(y=ie(this,$r).config).onSettled)==null||p.call(y,h,this.state.error,this),this.scheduleGc()},onError:l,onFail:(h,m)=>{Qt(this,en,Tn).call(this,{type:"failed",failureCount:h,error:m})},onPause:()=>{Qt(this,en,Tn).call(this,{type:"pause"})},onContinue:()=>{Qt(this,en,Tn).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),ie(this,rr).start()}},yo=new WeakMap,bo=new WeakMap,$r=new WeakMap,rr=new WeakMap,dl=new WeakMap,ui=new WeakMap,en=new WeakSet,Tn=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...iT(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return Zu(s)&&s.revert&&ie(this,bo)?{...ie(this,bo),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),cr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),ie(this,$r).notify({query:this,type:"updated",action:t})})},n0);function iT(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ub(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function oT(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var vn,s0,aT=(s0=class extends Fd{constructor(t={}){super();tt(this,vn);this.config=t,Ve(this,vn,new Map)}build(t,r,n){const s=r.queryKey,o=r.queryHash??pp(s,r);let a=this.get(o);return a||(a=new sT({cache:this,queryKey:s,queryHash:o,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(a)),a}add(t){ie(this,vn).has(t.queryHash)||(ie(this,vn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=ie(this,vn).get(t.queryHash);r&&(t.destroy(),r===t&&ie(this,vn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){cr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return ie(this,vn).get(t)}getAll(){return[...ie(this,vn).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Xv(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>Xv(t,n)):r}notify(t){cr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){cr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){cr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},vn=new WeakMap,s0),xn,ar,fi,wn,ts,i0,lT=(i0=class extends Bb{constructor(t){super();tt(this,wn);tt(this,xn);tt(this,ar);tt(this,fi);this.mutationId=t.mutationId,Ve(this,ar,t.mutationCache),Ve(this,xn,[]),this.state=t.state||cT(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){ie(this,xn).includes(t)||(ie(this,xn).push(t),this.clearGcTimeout(),ie(this,ar).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ve(this,xn,ie(this,xn).filter(r=>r!==t)),this.scheduleGc(),ie(this,ar).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){ie(this,xn).length||(this.state.status==="pending"?this.scheduleGc():ie(this,ar).remove(this))}continue(){var t;return((t=ie(this,fi))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,o,a,l,c,d,f,h,m,x,y,p,b,w,g,v,_,j,k,C;Ve(this,fi,Wb({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(E,O)=>{Qt(this,wn,ts).call(this,{type:"failed",failureCount:E,error:O})},onPause:()=>{Qt(this,wn,ts).call(this,{type:"pause"})},onContinue:()=>{Qt(this,wn,ts).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ie(this,ar).canRun(this)}));const r=this.state.status==="pending",n=!ie(this,fi).canStart();try{if(!r){Qt(this,wn,ts).call(this,{type:"pending",variables:t,isPaused:n}),await((o=(s=ie(this,ar).config).onMutate)==null?void 0:o.call(s,t,this));const O=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,t));O!==this.state.context&&Qt(this,wn,ts).call(this,{type:"pending",context:O,variables:t,isPaused:n})}const E=await ie(this,fi).start();return await((d=(c=ie(this,ar).config).onSuccess)==null?void 0:d.call(c,E,t,this.state.context,this)),await((h=(f=this.options).onSuccess)==null?void 0:h.call(f,E,t,this.state.context)),await((x=(m=ie(this,ar).config).onSettled)==null?void 0:x.call(m,E,null,this.state.variables,this.state.context,this)),await((p=(y=this.options).onSettled)==null?void 0:p.call(y,E,null,t,this.state.context)),Qt(this,wn,ts).call(this,{type:"success",data:E}),E}catch(E){try{throw await((w=(b=ie(this,ar).config).onError)==null?void 0:w.call(b,E,t,this.state.context,this)),await((v=(g=this.options).onError)==null?void 0:v.call(g,E,t,this.state.context)),await((j=(_=ie(this,ar).config).onSettled)==null?void 0:j.call(_,void 0,E,this.state.variables,this.state.context,this)),await((C=(k=this.options).onSettled)==null?void 0:C.call(k,void 0,E,t,this.state.context)),E}finally{Qt(this,wn,ts).call(this,{type:"error",error:E})}}finally{ie(this,ar).runNext(this)}}},xn=new WeakMap,ar=new WeakMap,fi=new WeakMap,wn=new WeakSet,ts=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),cr.batch(()=>{ie(this,xn).forEach(n=>{n.onMutationUpdate(t)}),ie(this,ar).notify({mutation:this,type:"updated",action:t})})},i0);function cT(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Cr,ul,o0,dT=(o0=class extends Fd{constructor(t={}){super();tt(this,Cr);tt(this,ul);this.config=t,Ve(this,Cr,new Map),Ve(this,ul,Date.now())}build(t,r,n){const s=new lT({mutationCache:this,mutationId:++Rl(this,ul)._,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){const r=Jl(t),n=ie(this,Cr).get(r)??[];n.push(t),ie(this,Cr).set(r,n),this.notify({type:"added",mutation:t})}remove(t){var n;const r=Jl(t);if(ie(this,Cr).has(r)){const s=(n=ie(this,Cr).get(r))==null?void 0:n.filter(o=>o!==t);s&&(s.length===0?ie(this,Cr).delete(r):ie(this,Cr).set(r,s))}this.notify({type:"removed",mutation:t})}canRun(t){var n;const r=(n=ie(this,Cr).get(Jl(t)))==null?void 0:n.find(s=>s.state.status==="pending");return!r||r===t}runNext(t){var n;const r=(n=ie(this,Cr).get(Jl(t)))==null?void 0:n.find(s=>s!==t&&s.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){cr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...ie(this,Cr).values()].flat()}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Qv(r,n))}findAll(t={}){return this.getAll().filter(r=>Qv(t,r))}notify(t){cr.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return cr.batch(()=>Promise.all(t.map(r=>r.continue().catch(Jr))))}},Cr=new WeakMap,ul=new WeakMap,o0);function Jl(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function tx(e){return{onFetch:(t,r)=>{var f,h,m,x,y;const n=t.options,s=(m=(h=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,o=((x=t.state.data)==null?void 0:x.pages)||[],a=((y=t.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let p=!1;const b=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},w=zb(t.options,t.fetchOptions),g=async(v,_,j)=>{if(p)return Promise.reject();if(_==null&&v.pages.length)return Promise.resolve(v);const k={queryKey:t.queryKey,pageParam:_,direction:j?"backward":"forward",meta:t.options.meta};b(k);const C=await w(k),{maxPages:E}=t.options,O=j?QP:XP;return{pages:O(v.pages,C,E),pageParams:O(v.pageParams,_,E)}};if(s&&o.length){const v=s==="backward",_=v?uT:rx,j={pages:o,pageParams:a},k=_(n,j);l=await g(j,k,v)}else{const v=e??o.length;do{const _=c===0?a[0]??n.initialPageParam:rx(n,l);if(c>0&&_==null)break;l=await g(l,_),c++}while(c<v)}return l};t.options.persister?t.fetchFn=()=>{var p,b;return(b=(p=t.options).persister)==null?void 0:b.call(p,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function rx(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function uT(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var St,fs,hs,_o,jo,ms,No,So,a0,fT=(a0=class{constructor(e={}){tt(this,St);tt(this,fs);tt(this,hs);tt(this,_o);tt(this,jo);tt(this,ms);tt(this,No);tt(this,So);Ve(this,St,e.queryCache||new aT),Ve(this,fs,e.mutationCache||new dT),Ve(this,hs,e.defaultOptions||{}),Ve(this,_o,new Map),Ve(this,jo,new Map),Ve(this,ms,0)}mount(){Rl(this,ms)._++,ie(this,ms)===1&&(Ve(this,No,$b.subscribe(async e=>{e&&(await this.resumePausedMutations(),ie(this,St).onFocus())})),Ve(this,So,id.subscribe(async e=>{e&&(await this.resumePausedMutations(),ie(this,St).onOnline())})))}unmount(){var e,t;Rl(this,ms)._--,ie(this,ms)===0&&((e=ie(this,No))==null||e.call(this),Ve(this,No,void 0),(t=ie(this,So))==null||t.call(this),Ve(this,So,void 0))}isFetching(e){return ie(this,St).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return ie(this,fs).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=ie(this,St).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),n=ie(this,St).build(this,r);return e.revalidateIfStale&&n.isStaleByTime(Kv(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return ie(this,St).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=ie(this,St).get(n.queryHash),o=s==null?void 0:s.state.data,a=qP(t,o);if(a!==void 0)return ie(this,St).build(this,n).setData(a,{...r,manual:!0})}setQueriesData(e,t,r){return cr.batch(()=>ie(this,St).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=ie(this,St).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=ie(this,St);cr.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=ie(this,St),n={type:"active",...e};return cr.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries(n,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},n=cr.batch(()=>ie(this,St).findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(Jr).catch(Jr)}invalidateQueries(e={},t={}){return cr.batch(()=>{if(ie(this,St).findAll(e).forEach(n=>{n.invalidate()}),e.refetchType==="none")return Promise.resolve();const r={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},n=cr.batch(()=>ie(this,St).findAll(e).filter(s=>!s.isDisabled()).map(s=>{let o=s.fetch(void 0,r);return r.throwOnError||(o=o.catch(Jr)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(Jr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=ie(this,St).build(this,t);return r.isStaleByTime(Kv(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Jr).catch(Jr)}fetchInfiniteQuery(e){return e.behavior=tx(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Jr).catch(Jr)}ensureInfiniteQueryData(e){return e.behavior=tx(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return id.isOnline()?ie(this,fs).resumePausedMutations():Promise.resolve()}getQueryCache(){return ie(this,St)}getMutationCache(){return ie(this,fs)}getDefaultOptions(){return ie(this,hs)}setDefaultOptions(e){Ve(this,hs,e)}setQueryDefaults(e,t){ie(this,_o).set(sl(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...ie(this,_o).values()];let r={};return t.forEach(n=>{il(e,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(e,t){ie(this,jo).set(sl(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...ie(this,jo).values()];let r={};return t.forEach(n=>{il(e,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...ie(this,hs).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=pp(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===gp&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...ie(this,hs).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){ie(this,St).clear(),ie(this,fs).clear()}},St=new WeakMap,fs=new WeakMap,hs=new WeakMap,_o=new WeakMap,jo=new WeakMap,ms=new WeakMap,No=new WeakMap,So=new WeakMap,a0),hT=u.createContext(void 0),mT=({client:e,children:t})=>(u.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(hT.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ol(){return ol=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ol.apply(this,arguments)}var xs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(xs||(xs={}));const nx="popstate";function pT(e){e===void 0&&(e={});function t(s,o){let{pathname:a="/",search:l="",hash:c=""}=Pi(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),_h("",{pathname:a,search:l,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(s,o){let a=s.document.querySelector("base"),l="";if(a&&a.getAttribute("href")){let c=s.location.href,d=c.indexOf("#");l=d===-1?c:c.slice(0,d)}return l+"#"+(typeof o=="string"?o:od(o))}function n(s,o){vp(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return vT(t,r,n,e)}function It(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function vp(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function gT(){return Math.random().toString(36).substr(2,8)}function sx(e,t){return{usr:e.state,key:e.key,idx:t}}function _h(e,t,r,n){return r===void 0&&(r=null),ol({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Pi(t):t,{state:r,key:t&&t.key||n||gT()})}function od(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Pi(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function vT(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:o=!1}=n,a=s.history,l=xs.Pop,c=null,d=f();d==null&&(d=0,a.replaceState(ol({},a.state,{idx:d}),""));function f(){return(a.state||{idx:null}).idx}function h(){l=xs.Pop;let b=f(),w=b==null?null:b-d;d=b,c&&c({action:l,location:p.location,delta:w})}function m(b,w){l=xs.Push;let g=_h(p.location,b,w);r&&r(g,b),d=f()+1;let v=sx(g,d),_=p.createHref(g);try{a.pushState(v,"",_)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(_)}o&&c&&c({action:l,location:p.location,delta:1})}function x(b,w){l=xs.Replace;let g=_h(p.location,b,w);r&&r(g,b),d=f();let v=sx(g,d),_=p.createHref(g);a.replaceState(v,"",_),o&&c&&c({action:l,location:p.location,delta:0})}function y(b){let w=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof b=="string"?b:od(b);return g=g.replace(/ $/,"%20"),It(w,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,w)}let p={get action(){return l},get location(){return e(s,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(nx,h),c=b,()=>{s.removeEventListener(nx,h),c=null}},createHref(b){return t(s,b)},createURL:y,encodeLocation(b){let w=y(b);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:x,go(b){return a.go(b)}};return p}var ix;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ix||(ix={}));function xT(e,t,r){return r===void 0&&(r="/"),wT(e,t,r,!1)}function wT(e,t,r,n){let s=typeof t=="string"?Pi(t):t,o=xp(s.pathname||"/",r);if(o==null)return null;let a=qb(e);yT(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let d=RT(o);l=PT(a[c],d,n)}return l}function qb(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(o,a,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(It(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=Cs([n,c.relativePath]),f=r.concat(c);o.children&&o.children.length>0&&(It(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),qb(o.children,t,f,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:CT(d,o.index),routesMeta:f})};return e.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let c of Hb(o.path))s(o,a,c)}),t}function Hb(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let a=Hb(n.join("/")),l=[];return l.push(...a.map(c=>c===""?o:[o,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function yT(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:ET(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const bT=/^:[\w-]+$/,_T=3,jT=2,NT=1,ST=10,kT=-2,ox=e=>e==="*";function CT(e,t){let r=e.split("/"),n=r.length;return r.some(ox)&&(n+=kT),t&&(n+=jT),r.filter(s=>!ox(s)).reduce((s,o)=>s+(bT.test(o)?_T:o===""?NT:ST),n)}function ET(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function PT(e,t,r){let{routesMeta:n}=e,s={},o="/",a=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,f=o==="/"?t:t.slice(o.length)||"/",h=ax({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),m=c.route;if(!h&&d&&r&&!n[n.length-1].route.index&&(h=ax({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:Cs([o,h.pathname]),pathnameBase:IT(Cs([o,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(o=Cs([o,h.pathnameBase]))}return a}function ax(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=TT(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((d,f,h)=>{let{paramName:m,isOptional:x}=f;if(m==="*"){let p=l[h]||"";a=o.slice(0,o.length-p.length).replace(/(.)\/+$/,"$1")}const y=l[h];return x&&!y?d[m]=void 0:d[m]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:a,pattern:e}}function TT(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),vp(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function RT(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return vp(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function xp(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function AT(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Pi(e):e;return{pathname:r?r.startsWith("/")?r:MT(r,t):t,search:OT(n),hash:LT(s)}}function MT(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Ku(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function DT(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Gb(e,t){let r=DT(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Yb(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Pi(e):(s=ol({},e),It(!s.pathname||!s.pathname.includes("?"),Ku("?","pathname","search",s)),It(!s.pathname||!s.pathname.includes("#"),Ku("#","pathname","hash",s)),It(!s.search||!s.search.includes("#"),Ku("#","search","hash",s)));let o=e===""||s.pathname==="",a=o?"/":s.pathname,l;if(a==null)l=r;else{let h=t.length-1;if(!n&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=AT(s,l),d=a&&a!=="/"&&a.endsWith("/"),f=(o||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const Cs=e=>e.join("/").replace(/\/\/+/g,"/"),IT=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),OT=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,LT=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function FT(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Zb=["post","put","patch","delete"];new Set(Zb);const zT=["get",...Zb];new Set(zT);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function al(){return al=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},al.apply(this,arguments)}const wp=u.createContext(null),$T=u.createContext(null),Ti=u.createContext(null),$d=u.createContext(null),Vs=u.createContext({outlet:null,matches:[],isDataRoute:!1}),Kb=u.createContext(null);function UT(e,t){let{relative:r}=t===void 0?{}:t;bl()||It(!1);let{basename:n,navigator:s}=u.useContext(Ti),{hash:o,pathname:a,search:l}=Qb(e,{relative:r}),c=a;return n!=="/"&&(c=a==="/"?n:Cs([n,a])),s.createHref({pathname:c,search:l,hash:o})}function bl(){return u.useContext($d)!=null}function un(){return bl()||It(!1),u.useContext($d).location}function Xb(e){u.useContext(Ti).static||u.useLayoutEffect(e)}function ot(){let{isDataRoute:e}=u.useContext(Vs);return e?eR():VT()}function VT(){bl()||It(!1);let e=u.useContext(wp),{basename:t,future:r,navigator:n}=u.useContext(Ti),{matches:s}=u.useContext(Vs),{pathname:o}=un(),a=JSON.stringify(Gb(s,r.v7_relativeSplatPath)),l=u.useRef(!1);return Xb(()=>{l.current=!0}),u.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let h=Yb(d,JSON.parse(a),o,f.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Cs([t,h.pathname])),(f.replace?n.replace:n.push)(h,f.state,f)},[t,n,a,o,e])}function _l(){let{matches:e}=u.useContext(Vs),t=e[e.length-1];return t?t.params:{}}function Qb(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=u.useContext(Ti),{matches:s}=u.useContext(Vs),{pathname:o}=un(),a=JSON.stringify(Gb(s,n.v7_relativeSplatPath));return u.useMemo(()=>Yb(e,JSON.parse(a),o,r==="path"),[e,a,o,r])}function WT(e,t){return BT(e,t)}function BT(e,t,r,n){bl()||It(!1);let{navigator:s}=u.useContext(Ti),{matches:o}=u.useContext(Vs),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=un(),f;if(t){var h;let b=typeof t=="string"?Pi(t):t;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||It(!1),f=b}else f=d;let m=f.pathname||"/",x=m;if(c!=="/"){let b=c.replace(/^\//,"").split("/");x="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let y=xT(e,{pathname:x}),p=ZT(y&&y.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Cs([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Cs([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),o,r,n);return t&&p?u.createElement($d.Provider,{value:{location:al({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:xs.Pop}},p):p}function qT(){let e=JT(),t=FT(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),r?u.createElement("pre",{style:s},r):null,null)}const HT=u.createElement(qT,null);class GT extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?u.createElement(Vs.Provider,{value:this.props.routeContext},u.createElement(Kb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YT(e){let{routeContext:t,match:r,children:n}=e,s=u.useContext(wp);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),u.createElement(Vs.Provider,{value:t},n)}function ZT(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var o;if(!r)return null;if(r.errors)e=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let f=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);f>=0||It(!1),a=a.slice(0,Math.min(a.length,f+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let f=0;f<a.length;f++){let h=a[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=f),h.route.id){let{loaderData:m,errors:x}=r,y=h.route.loader&&m[h.route.id]===void 0&&(!x||x[h.route.id]===void 0);if(h.route.lazy||y){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((f,h,m)=>{let x,y=!1,p=null,b=null;r&&(x=l&&h.route.id?l[h.route.id]:void 0,p=h.route.errorElement||HT,c&&(d<0&&m===0?(y=!0,b=null):d===m&&(y=!0,b=h.route.hydrateFallbackElement||null)));let w=t.concat(a.slice(0,m+1)),g=()=>{let v;return x?v=p:y?v=b:h.route.Component?v=u.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=f,u.createElement(YT,{match:h,routeContext:{outlet:f,matches:w,isDataRoute:r!=null},children:v})};return r&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?u.createElement(GT,{location:r.location,revalidation:r.revalidation,component:p,error:x,children:g(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):g()},null)}var Jb=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Jb||{}),ad=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ad||{});function KT(e){let t=u.useContext(wp);return t||It(!1),t}function XT(e){let t=u.useContext($T);return t||It(!1),t}function QT(e){let t=u.useContext(Vs);return t||It(!1),t}function e1(e){let t=QT(),r=t.matches[t.matches.length-1];return r.route.id||It(!1),r.route.id}function JT(){var e;let t=u.useContext(Kb),r=XT(ad.UseRouteError),n=e1(ad.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function eR(){let{router:e}=KT(Jb.UseNavigateStable),t=e1(ad.UseNavigateStable),r=u.useRef(!1);return Xb(()=>{r.current=!0}),u.useCallback(function(s,o){o===void 0&&(o={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,al({fromRouteId:t},o)))},[e,t])}function lt(e){It(!1)}function tR(e){let{basename:t="/",children:r=null,location:n,navigationType:s=xs.Pop,navigator:o,static:a=!1,future:l}=e;bl()&&It(!1);let c=t.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:o,static:a,future:al({v7_relativeSplatPath:!1},l)}),[c,l,o,a]);typeof n=="string"&&(n=Pi(n));let{pathname:f="/",search:h="",hash:m="",state:x=null,key:y="default"}=n,p=u.useMemo(()=>{let b=xp(f,c);return b==null?null:{location:{pathname:b,search:h,hash:m,state:x,key:y},navigationType:s}},[c,f,h,m,x,y,s]);return p==null?null:u.createElement(Ti.Provider,{value:d},u.createElement($d.Provider,{children:r,value:p}))}function rR(e){let{children:t,location:r}=e;return WT(jh(t),r)}new Promise(()=>{});function jh(e,t){t===void 0&&(t=[]);let r=[];return u.Children.forEach(e,(n,s)=>{if(!u.isValidElement(n))return;let o=[...t,s];if(n.type===u.Fragment){r.push.apply(r,jh(n.props.children,o));return}n.type!==lt&&It(!1),!n.props.index||!n.props.children||It(!1);let a={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=jh(n.props.children,o)),r.push(a)}),r}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nh(){return Nh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nh.apply(this,arguments)}function nR(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,o;for(o=0;o<n.length;o++)s=n[o],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function sR(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function iR(e,t){return e.button===0&&(!t||t==="_self")&&!sR(e)}function Sh(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function oR(e,t){let r=Sh(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(o=>{r.append(s,o)})}),r}const aR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],lR="6";try{window.__reactRouterVersion=lR}catch{}const cR="startTransition",lx=x0[cR];function dR(e){let{basename:t,children:r,future:n,window:s}=e,o=u.useRef();o.current==null&&(o.current=pT({window:s,v5Compat:!0}));let a=o.current,[l,c]=u.useState({action:a.action,location:a.location}),{v7_startTransition:d}=n||{},f=u.useCallback(h=>{d&&lx?lx(()=>c(h)):c(h)},[c,d]);return u.useLayoutEffect(()=>a.listen(f),[a,f]),u.createElement(tR,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:a,future:n})}const uR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,li=u.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:d,preventScrollReset:f,viewTransition:h}=t,m=nR(t,aR),{basename:x}=u.useContext(Ti),y,p=!1;if(typeof d=="string"&&fR.test(d)&&(y=d,uR))try{let v=new URL(window.location.href),_=d.startsWith("//")?new URL(v.protocol+d):new URL(d),j=xp(_.pathname,x);_.origin===v.origin&&j!=null?d=j+_.search+_.hash:p=!0}catch{}let b=UT(d,{relative:s}),w=hR(d,{replace:a,state:l,target:c,preventScrollReset:f,relative:s,viewTransition:h});function g(v){n&&n(v),v.defaultPrevented||w(v)}return u.createElement("a",Nh({},m,{href:y||b,onClick:p||o?n:g,ref:r,target:c}))});var cx;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(cx||(cx={}));var dx;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(dx||(dx={}));function hR(e,t){let{target:r,replace:n,state:s,preventScrollReset:o,relative:a,viewTransition:l}=t===void 0?{}:t,c=ot(),d=un(),f=Qb(e,{relative:a});return u.useCallback(h=>{if(iR(h,r)){h.preventDefault();let m=n!==void 0?n:od(d)===od(f);c(e,{replace:m,state:s,preventScrollReset:o,relative:a,viewTransition:l})}},[d,c,f,n,s,r,e,o,a,l])}function yp(e){let t=u.useRef(Sh(e)),r=u.useRef(!1),n=un(),s=u.useMemo(()=>oR(n.search,r.current?null:t.current),[n.search]),o=ot(),a=u.useCallback((l,c)=>{const d=Sh(typeof l=="function"?l(s):l);r.current=!0,o("?"+d,c)},[o,s]);return[s,a]}const mR="modulepreload",pR=function(e){return"/Limey-App/"+e},ux={},Ir=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=pR(c),c in ux)return;ux[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":mR,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((m,x)=>{h.addEventListener("load",m),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},gR=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ir(async()=>{const{default:n}=await Promise.resolve().then(()=>Yo);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class bp extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class vR extends bp{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class fx extends bp{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class hx extends bp{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var kh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(kh||(kh={}));var xR=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(f){try{d(n.next(f))}catch(h){a(h)}}function c(f){try{d(n.throw(f))}catch(h){a(h)}}function d(f){f.done?o(f.value):s(f.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class wR{constructor(t,{headers:r={},customFetch:n,region:s=kh.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=gR(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return xR(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:a}=r;let l={},{region:c}=r;c||(c=this.region);const d=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let f;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=a):typeof a=="string"?(l["Content-Type"]="text/plain",f=a):typeof FormData<"u"&&a instanceof FormData?f=a:(l["Content-Type"]="application/json",f=JSON.stringify(a)));const h=yield this.fetch(d.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:f}).catch(p=>{throw new vR(p)}),m=h.headers.get("x-relay-error");if(m&&m==="true")throw new fx(h);if(!h.ok)throw new hx(h);let x=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),y;return x==="application/json"?y=yield h.json():x==="application/octet-stream"?y=yield h.blob():x==="text/event-stream"?y=h:x==="multipart/form-data"?y=yield h.formData():y=yield h.text(),{data:y,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof hx||s instanceof fx?s.context:void 0}}})}}var xr={},_p={},Ud={},jl={},Vd={},Wd={},yR=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Lo=yR();const bR=Lo.fetch,t1=Lo.fetch.bind(Lo),r1=Lo.Headers,_R=Lo.Request,jR=Lo.Response,Yo=Object.freeze(Object.defineProperty({__proto__:null,Headers:r1,Request:_R,Response:jR,default:t1,fetch:bR},Symbol.toStringTag,{value:"Module"})),NR=SN(Yo);var Bd={};Object.defineProperty(Bd,"__esModule",{value:!0});let SR=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Bd.default=SR;var n1=qr&&qr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wd,"__esModule",{value:!0});const kR=n1(NR),CR=n1(Bd);let ER=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=kR.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var a,l,c;let d=null,f=null,h=null,m=o.status,x=o.statusText;if(o.ok){if(this.method!=="HEAD"){const w=await o.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?f=w:f=JSON.parse(w))}const p=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),b=(l=o.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");p&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,h=null,m=406,x="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const p=await o.text();try{d=JSON.parse(p),Array.isArray(d)&&o.status===404&&(f=[],d=null,m=200,x="OK")}catch{o.status===404&&p===""?(m=204,x="No Content"):d={message:p}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,m=200,x="OK"),d&&this.shouldThrowOnError)throw new CR.default(d)}return{error:d,data:f,count:h,status:m,statusText:x}});return this.shouldThrowOnError||(s=s.catch(o=>{var a,l,c;return{error:{message:`${(a=o==null?void 0:o.name)!==null&&a!==void 0?a:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(l=o==null?void 0:o.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};Wd.default=ER;var PR=qr&&qr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vd,"__esModule",{value:!0});const TR=PR(Wd);let RR=class extends TR.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:o=s}={}){const a=o?`${o}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const o=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(a,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:o=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${d}"; options=${c};`,a==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Vd.default=RR;var AR=qr&&qr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jl,"__esModule",{value:!0});const MR=AR(Vd);let DR=class extends MR.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${o}fts${a}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};jl.default=DR;var IR=qr&&qr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ud,"__esModule",{value:!0});const da=IR(jl);let OR=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let o=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new da.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),r&&o.push(`count=${r}`),n||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new da.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:o=!0}={}){const a="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(c.length>0){const d=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new da.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new da.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new da.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ud.default=OR;var qd={},Hd={};Object.defineProperty(Hd,"__esModule",{value:!0});Hd.version=void 0;Hd.version="0.0.0-automated";Object.defineProperty(qd,"__esModule",{value:!0});qd.DEFAULT_HEADERS=void 0;const LR=Hd;qd.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${LR.version}`};var s1=qr&&qr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_p,"__esModule",{value:!0});const FR=s1(Ud),zR=s1(jl),$R=qd;let UR=class i1{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},$R.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new FR.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new i1(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:o}={}){let a;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([f,h])=>h!==void 0).map(([f,h])=>[f,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([f,h])=>{l.searchParams.append(f,h)})):(a="POST",c=r);const d=Object.assign({},this.headers);return o&&(d.Prefer=`count=${o}`),new zR.default({method:a,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};_p.default=UR;var Zo=qr&&qr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xr,"__esModule",{value:!0});xr.PostgrestError=xr.PostgrestBuilder=xr.PostgrestTransformBuilder=xr.PostgrestFilterBuilder=xr.PostgrestQueryBuilder=xr.PostgrestClient=void 0;const o1=Zo(_p);xr.PostgrestClient=o1.default;const a1=Zo(Ud);xr.PostgrestQueryBuilder=a1.default;const l1=Zo(jl);xr.PostgrestFilterBuilder=l1.default;const c1=Zo(Vd);xr.PostgrestTransformBuilder=c1.default;const d1=Zo(Wd);xr.PostgrestBuilder=d1.default;const u1=Zo(Bd);xr.PostgrestError=u1.default;var VR=xr.default={PostgrestClient:o1.default,PostgrestQueryBuilder:a1.default,PostgrestFilterBuilder:l1.default,PostgrestTransformBuilder:c1.default,PostgrestBuilder:d1.default,PostgrestError:u1.default};const{PostgrestClient:WR,PostgrestQueryBuilder:_3,PostgrestFilterBuilder:j3,PostgrestTransformBuilder:N3,PostgrestBuilder:S3,PostgrestError:k3}=VR;function BR(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const qR=BR(),HR="2.11.15",GR=`realtime-js/${HR}`,YR="1.0.0",f1=1e4,ZR=1e3;var Ia;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ia||(Ia={}));var tr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(tr||(tr={}));var rn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(rn||(rn={}));var Ch;(function(e){e.websocket="websocket"})(Ch||(Ch={}));var ni;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ni||(ni={}));class KR{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),o=r.getUint8(2);let a=this.HEADER_LENGTH+2;const l=n.decode(t.slice(a,a+s));a=a+s;const c=n.decode(t.slice(a,a+o));a=a+o;const d=JSON.parse(n.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class h1{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ct;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ct||(ct={}));const mx=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((o,a)=>(o[a]=XR(a,e,t,s),o),{})},XR=(e,t,r,n)=>{const s=t.find(l=>l.name===e),o=s==null?void 0:s.type,a=r[e];return o&&!n.includes(o)?m1(o,a):Eh(a)},m1=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return t4(t,r)}switch(e){case ct.bool:return QR(t);case ct.float4:case ct.float8:case ct.int2:case ct.int4:case ct.int8:case ct.numeric:case ct.oid:return JR(t);case ct.json:case ct.jsonb:return e4(t);case ct.timestamp:return r4(t);case ct.abstime:case ct.date:case ct.daterange:case ct.int4range:case ct.int8range:case ct.money:case ct.reltime:case ct.text:case ct.time:case ct.timestamptz:case ct.timetz:case ct.tsrange:case ct.tstzrange:return Eh(t);default:return Eh(t)}},Eh=e=>e,QR=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},JR=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},e4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},t4=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let o;const a=e.slice(1,r);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(l=>m1(t,l))}return e},r4=e=>typeof e=="string"?e.replace(" ","T"):e,p1=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Xu{constructor(t,r,n={},s=f1){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var px;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(px||(px={}));class Oa{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Oa.syncState(this.state,s,o,a),this.pendingDiffs.forEach(c=>{this.state=Oa.syncDiff(this.state,c,o,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Oa.syncDiff(this.state,s,o,a),l())}),this.onJoin((s,o,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:a})}),this.onLeave((s,o,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const o=this.cloneDeep(t),a=this.transformState(r),l={},c={};return this.map(o,(d,f)=>{a[d]||(c[d]=f)}),this.map(a,(d,f)=>{const h=o[d];if(h){const m=f.map(b=>b.presence_ref),x=h.map(b=>b.presence_ref),y=f.filter(b=>x.indexOf(b.presence_ref)<0),p=h.filter(b=>m.indexOf(b.presence_ref)<0);y.length>0&&(l[d]=y),p.length>0&&(c[d]=p)}else l[d]=f}),this.syncDiff(o,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:o,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(o,(l,c)=>{var d;const f=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),f.length>0){const h=t[l].map(x=>x.presence_ref),m=f.filter(x=>h.indexOf(x.presence_ref)<0);t[l].unshift(...m)}n(l,f,c)}),this.map(a,(l,c)=>{let d=t[l];if(!d)return;const f=c.map(h=>h.presence_ref);d=d.filter(h=>f.indexOf(h.presence_ref)<0),t[l]=d,s(l,d,c),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var gx;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(gx||(gx={}));var vx;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(vx||(vx={}));var Mn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Mn||(Mn={}));class jp{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=tr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Xu(this,rn.join,this.params,this.timeout),this.rejoinTimer=new h1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=tr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=tr.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=tr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=tr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rn.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new Oa(this),this.broadcastEndpointURL=p1(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==tr.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params;this._onError(f=>t==null?void 0:t(Mn.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(Mn.CLOSED));const c={},d={broadcast:o,presence:a,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var h;if(this.socket.setAuth(),f===void 0){t==null||t(Mn.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,x=(h=m==null?void 0:m.length)!==null&&h!==void 0?h:0,y=[];for(let p=0;p<x;p++){const b=m[p],{filter:{event:w,schema:g,table:v,filter:_}}=b,j=f&&f[p];if(j&&j.event===w&&j.schema===g&&j.table===v&&j.filter===_)y.push(Object.assign(Object.assign({},b),{id:j.id}));else{this.unsubscribe(),this.state=tr.errored,t==null||t(Mn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(Mn.SUBSCRIBED);return}}).receive("error",f=>{this.state=tr.errored,t==null||t(Mn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Mn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,l,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=tr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Xu(this,rn.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const s=new AbortController,o=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(o),a}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Xu(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,o;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:f}=rn;if(n&&[l,c,d,f].indexOf(a)>=0&&n!==this._joinRef())return;let m=this._onMessage(a,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var y,p,b;return((y=x.filter)===null||y===void 0?void 0:y.event)==="*"||((b=(p=x.filter)===null||p===void 0?void 0:p.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(x=>x.callback(m,n)):(o=this.bindings[a])===null||o===void 0||o.filter(x=>{var y,p,b,w,g,v;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in x){const _=x.id,j=(y=x.filter)===null||y===void 0?void 0:y.event;return _&&((p=r.ids)===null||p===void 0?void 0:p.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const _=(g=(w=x==null?void 0:x.filter)===null||w===void 0?void 0:w.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return _==="*"||_===((v=r==null?void 0:r.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===a}).map(x=>{if(typeof m=="object"&&"ids"in m){const y=m.data,{schema:p,table:b,commit_timestamp:w,type:g,errors:v}=y;m=Object.assign(Object.assign({},{schema:p,table:b,commit_timestamp:w,eventType:g,new:{},old:{},errors:v}),this._getPayloadRecords(y))}x.callback(m,n)})}_isClosed(){return this.state===tr.closed}_isJoined(){return this.state===tr.joined}_isJoining(){return this.state===tr.joining}_isLeaving(){return this.state===tr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),o={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&jp.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(rn.close,{},t)}_onError(t){this._on(rn.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=tr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=mx(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=mx(t.columns,t.old_record)),r}}const xx=()=>{},n4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class s4{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=f1,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=xx,this.ref=0,this.logger=xx,this.conn=null,this.sendBuffer=[],this.serializer=new KR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let a;return o?a=o:typeof fetch>"u"?a=(...l)=>Ir(async()=>{const{default:c}=await Promise.resolve().then(()=>Yo);return{default:c}},void 0).then(({default:c})=>c(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${t}/${Ch.websocket}`,this.httpEndpoint=p1(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(o,a)=>a(JSON.stringify(o)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new h1(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=qR),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:YR}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ia.connecting:return ni.Connecting;case Ia.open:return ni.Open;case Ia.closing:return ni.Closing;default:return ni.Closed}}isConnected(){return this.connectionState()===ni.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(o=>o.topic===n);if(s)return s;{const o=new jp(`realtime:${t}`,r,this);return this.channels.push(o),o}}push(t){const{topic:r,event:n,payload:s,ref:o}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${o})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:GR};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(rn.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(ZR,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:o,ref:a}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${n} ${s} ${a&&"("+a+")"||""}`,o),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,o,a)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(rn.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([n4],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class Np extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Vt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class i4 extends Np{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ph extends Np{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var o4=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(f){try{d(n.next(f))}catch(h){a(h)}}function c(f){try{d(n.throw(f))}catch(h){a(h)}}function d(f){f.done?o(f.value):s(f.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const g1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ir(async()=>{const{default:n}=await Promise.resolve().then(()=>Yo);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},a4=()=>o4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ir(()=>Promise.resolve().then(()=>Yo),void 0)).Response:Response}),Th=e=>{if(Array.isArray(e))return e.map(r=>Th(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[s]=Th(n)}),t};var Ri=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(f){try{d(n.next(f))}catch(h){a(h)}}function c(f){try{d(n.throw(f))}catch(h){a(h)}}function d(f){f.done?o(f.value):s(f.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const Qu=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),l4=(e,t,r)=>Ri(void 0,void 0,void 0,function*(){const n=yield a4();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{t(new i4(Qu(s),e.status||500))}).catch(s=>{t(new Ph(Qu(s),s))}):t(new Ph(Qu(e),e))}),c4=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function Nl(e,t,r,n,s,o){return Ri(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(r,c4(t,n,s,o)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>l4(c,l,n))})})}function ld(e,t,r,n){return Ri(this,void 0,void 0,function*(){return Nl(e,"GET",t,r,n)})}function os(e,t,r,n,s){return Ri(this,void 0,void 0,function*(){return Nl(e,"POST",t,n,s,r)})}function d4(e,t,r,n,s){return Ri(this,void 0,void 0,function*(){return Nl(e,"PUT",t,n,s,r)})}function u4(e,t,r,n){return Ri(this,void 0,void 0,function*(){return Nl(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function v1(e,t,r,n,s){return Ri(this,void 0,void 0,function*(){return Nl(e,"DELETE",t,n,s,r)})}var pr=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(f){try{d(n.next(f))}catch(h){a(h)}}function c(f){try{d(n.throw(f))}catch(h){a(h)}}function d(f){f.done?o(f.value):s(f.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const f4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},wx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class h4{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=g1(s)}uploadOrUpdate(t,r,n,s){return pr(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},wx),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const d=this._removeEmptyFolders(r),f=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${f}`,Object.assign({method:t,body:o,headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{})),m=yield h.json();return h.ok?{data:{path:d,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(o){if(Vt(o))return{data:null,error:o};throw o}})}upload(t,r,n){return pr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return pr(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),a=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:wx.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:f}),m=yield h.json();return h.ok?{data:{path:o,fullPath:m.Key},error:null}:{data:null,error:m}}catch(c){if(Vt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return pr(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const o=yield os(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(this.url+o.url),l=a.searchParams.get("token");if(!l)throw new Np("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(n){if(Vt(n))return{data:null,error:n};throw n}})}update(t,r,n){return pr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return pr(this,void 0,void 0,function*(){try{return{data:yield os(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Vt(s))return{data:null,error:s};throw s}})}copy(t,r,n){return pr(this,void 0,void 0,function*(){try{return{data:{path:(yield os(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Vt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return pr(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),o=yield os(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(s){if(Vt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return pr(this,void 0,void 0,function*(){try{const s=yield os(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(s){if(Vt(s))return{data:null,error:s};throw s}})}download(t,r){return pr(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=o?`?${o}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield ld(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Vt(l))return{data:null,error:l};throw l}})}info(t){return pr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield ld(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Th(n),error:null}}catch(n){if(Vt(n))return{data:null,error:n};throw n}})}exists(t){return pr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield u4(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Vt(n)&&n instanceof Ph){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&s.push(o);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(t){return pr(this,void 0,void 0,function*(){try{return{data:yield v1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Vt(r))return{data:null,error:r};throw r}})}list(t,r,n){return pr(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},f4),r),{prefix:t||""});return{data:yield os(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Vt(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const m4="2.7.1",p4={"X-Client-Info":`storage-js/${m4}`};var Ii=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(f){try{d(n.next(f))}catch(h){a(h)}}function c(f){try{d(n.throw(f))}catch(h){a(h)}}function d(f){f.done?o(f.value):s(f.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class g4{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},p4),r),this.fetch=g1(n)}listBuckets(){return Ii(this,void 0,void 0,function*(){try{return{data:yield ld(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Vt(t))return{data:null,error:t};throw t}})}getBucket(t){return Ii(this,void 0,void 0,function*(){try{return{data:yield ld(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Vt(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Ii(this,void 0,void 0,function*(){try{return{data:yield os(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Vt(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Ii(this,void 0,void 0,function*(){try{return{data:yield d4(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Vt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Ii(this,void 0,void 0,function*(){try{return{data:yield os(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Vt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ii(this,void 0,void 0,function*(){try{return{data:yield v1(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Vt(r))return{data:null,error:r};throw r}})}}class v4 extends g4{constructor(t,r={},n){super(t,r,n)}from(t){return new h4(this.url,this.headers,t,this.fetch)}}const x4="2.51.0";let xa="";typeof Deno<"u"?xa="deno":typeof document<"u"?xa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?xa="react-native":xa="node";const w4={"X-Client-Info":`supabase-js-${xa}/${x4}`},y4={headers:w4},b4={schema:"public"},_4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},j4={};var N4=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(f){try{d(n.next(f))}catch(h){a(h)}}function c(f){try{d(n.throw(f))}catch(h){a(h)}}function d(f){f.done?o(f.value):s(f.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};const S4=e=>{let t;return e?t=e:typeof fetch>"u"?t=t1:t=fetch,(...r)=>t(...r)},k4=()=>typeof Headers>"u"?r1:Headers,C4=(e,t,r)=>{const n=S4(r),s=k4();return(o,a)=>N4(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new s(a==null?void 0:a.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(o,Object.assign(Object.assign({},a),{headers:d}))})};var E4=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(f){try{d(n.next(f))}catch(h){a(h)}}function c(f){try{d(n.throw(f))}catch(h){a(h)}}function d(f){f.done?o(f.value):s(f.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};function P4(e){return e.endsWith("/")?e:e+"/"}function T4(e,t){var r,n;const{db:s,auth:o,realtime:a,global:l}=e,{db:c,auth:d,realtime:f,global:h}=t,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},f),a),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>E4(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}const x1="2.71.0",Wi=30*1e3,Rh=3,Ju=Rh*Wi,R4="http://localhost:9999",A4="supabase.auth.token",M4={"X-Client-Info":`gotrue-js/${x1}`},Ah="X-Supabase-Api-Version",w1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},D4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,I4=10*60*1e3;class Sp extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function $e(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class O4 extends Sp{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function L4(e){return $e(e)&&e.name==="AuthApiError"}class y1 extends Sp{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ws extends Sp{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class rs extends Ws{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function F4(e){return $e(e)&&e.name==="AuthSessionMissingError"}class ec extends Ws{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class tc extends Ws{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class rc extends Ws{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function z4(e){return $e(e)&&e.name==="AuthImplicitGrantRedirectError"}class yx extends Ws{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Mh extends Ws{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function ef(e){return $e(e)&&e.name==="AuthRetryableFetchError"}class bx extends Ws{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Dh extends Ws{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const cd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_x=` 	
\r=`.split(""),$4=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<_x.length;t+=1)e[_x[t].charCodeAt(0)]=-2;for(let t=0;t<cd.length;t+=1)e[cd[t].charCodeAt(0)]=t;return e})();function jx(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(cd[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(cd[n]),t.queuedBits-=6}}function b1(e,t,r){const n=$4[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Nx(e){const t=[],r=a=>{t.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=a=>{W4(a,n,r)};for(let a=0;a<e.length;a+=1)b1(e.charCodeAt(a),s,o);return t.join("")}function U4(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function V4(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}U4(n,t)}}function W4(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function B4(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)b1(e.charCodeAt(s),r,n);return new Uint8Array(t)}function q4(e){const t=[];return V4(e,r=>t.push(r)),new Uint8Array(t)}function H4(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>jx(s,r,n)),jx(null,r,n),t.join("")}function G4(e){return Math.round(Date.now()/1e3)+e}function Y4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Kr=()=>typeof window<"u"&&typeof document<"u",Ks={tested:!1,writable:!1},_1=()=>{if(!Kr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ks.tested)return Ks.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ks.tested=!0,Ks.writable=!0}catch{Ks.tested=!0,Ks.writable=!1}return Ks.writable};function Z4(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,o)=>{t[o]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const j1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ir(async()=>{const{default:n}=await Promise.resolve().then(()=>Yo);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},K4=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Bi=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Xs=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},es=async(e,t)=>{await e.removeItem(t)};class Gd{constructor(){this.promise=new Gd.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Gd.promiseConstructor=Promise;function tf(e){const t=e.split(".");if(t.length!==3)throw new Dh("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!D4.test(t[n]))throw new Dh("JWT not in base64url format");return{header:JSON.parse(Nx(t[0])),payload:JSON.parse(Nx(t[1])),signature:B4(t[2]),raw:{header:t[0],payload:t[1]}}}async function X4(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Q4(e,t){return new Promise((n,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await e(o);if(!t(o,null,a)){n(a);return}}catch(a){if(!t(o,a)){s(a);return}}})()})}function J4(e){return("0"+e.toString(16)).substr(-2)}function eA(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let o=0;o<56;o++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,J4).join("")}async function tA(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function rA(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await tA(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Oi(e,t,r=!1){const n=eA();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Bi(e,`${t}-code-verifier`,s);const o=await rA(n);return[o,n===o?"plain":"s256"]}const nA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function sA(e){const t=e.headers.get(Ah);if(!t||!t.match(nA))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function iA(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function oA(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const aA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Li(e){if(!aA.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function rf(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}var lA=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const ti=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),cA=[502,503,504];async function Sx(e){var t;if(!K4(e))throw new Mh(ti(e),0);if(cA.includes(e.status))throw new Mh(ti(e),e.status);let r;try{r=await e.json()}catch(o){throw new y1(ti(o),o)}let n;const s=sA(e);if(s&&s.getTime()>=w1["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new bx(ti(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new rs}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new bx(ti(r),e.status,r.weak_password.reasons);throw new O4(ti(r),e.status||500,n)}const dA=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function He(e,t,r,n){var s;const o=Object.assign({},n==null?void 0:n.headers);o[Ah]||(o[Ah]=w1["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await uA(e,t,r+l,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function uA(e,t,r,n,s,o){const a=dA(t,n,s,o);let l;try{l=await e(r,Object.assign({},a))}catch(c){throw console.error(c),new Mh(ti(c),0)}if(l.ok||await Sx(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Sx(c)}}function Rn(e){var t;let r=null;pA(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=G4(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function kx(e){const t=Rn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function cs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function fA(e){return{data:e,error:null}}function hA(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o}=e,a=lA(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function mA(e){return e}function pA(e){return e.access_token&&e.refresh_token&&e.expires_in}const nf=["global","local","others"];var gA=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class vA{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=j1(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=nf[0]){if(nf.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${nf.join(", ")}`);try{return await He(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await He(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:cs})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=gA(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await He(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:hA,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if($e(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await He(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:cs})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,o,a,l,c;try{const d={nextPage:null,lastPage:0,total:0},f=await He(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:mA});if(f.error)throw f.error;const h=await f.json(),m=(a=f.headers.get("x-total-count"))!==null&&a!==void 0?a:0,x=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(y=>{const p=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);d[`${b}Page`]=p}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if($e(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Li(t);try{return await He(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:cs})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Li(t);try{return await He(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:cs})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Li(t);try{return await He(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:cs})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Li(t.userId);try{const{data:r,error:n}=await He(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if($e(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Li(t.userId),Li(t.id);try{return{data:await He(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if($e(r))return{data:null,error:r};throw r}}}function Cx(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function xA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Fi={debug:!!(globalThis&&_1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class N1 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class wA extends N1{}async function yA(e,t,r){Fi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Fi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Fi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Fi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Fi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new wA(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Fi.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}xA();const bA={url:R4,storageKey:A4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:M4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ex(e,t,r){return await r()}const zi={};class ll{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ll.nextInstanceID,ll.nextInstanceID+=1,this.instanceID>0&&Kr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},bA),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new vA({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=j1(s.fetch),this.lock=s.lock||Ex,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Kr()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=yA:this.lock=Ex,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:_1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Cx(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Cx(this.memoryStorage)),Kr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=zi[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){zi[this.storageKey]=Object.assign(Object.assign({},zi[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=zi[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){zi[this.storageKey]=Object.assign(Object.assign({},zi[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${x1}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=Z4(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Kr()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),z4(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return $e(r)?{error:r}:{error:new y1("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const o=await He(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Rn}),{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if($e(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var r,n,s;try{let o;if("email"in t){const{email:f,password:h,options:m}=t;let x=null,y=null;this.flowType==="pkce"&&([x,y]=await Oi(this.storage,this.storageKey)),o=await He(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:f,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:x,code_challenge_method:y},xform:Rn})}else if("phone"in t){const{phone:f,password:h,options:m}=t;o=await He(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Rn})}else throw new tc("You must provide either an email or phone number and a password");const{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if($e(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let r;if("email"in t){const{email:o,password:a,options:l}=t;r=await He(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:kx})}else if("phone"in t){const{phone:o,password:a,options:l}=t;r=await He(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:kx})}else throw new tc("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ec}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if($e(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,o,a,l,c,d,f,h,m,x;let y,p;if("message"in t)y=t.message,p=t.signature;else{const{chain:b,wallet:w,statement:g,options:v}=t;let _;if(Kr())if(typeof w=="object")_=w;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))_=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=w}const j=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const k=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),g?{statement:g}:null));let C;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")C=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)C=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)y=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),p=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((d=v==null?void 0:v.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(f=v==null?void 0:v.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const k=await _.signMessage(new TextEncoder().encode(y),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=k}}try{const{data:b,error:w}=await He(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:H4(p)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Rn});if(w)throw w;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new ec}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:w})}catch(b){if($e(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await Xs(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:o,error:a}=await He(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Rn});if(await es(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new ec}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:a})}catch(o){if($e(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:o,nonce:a}=t,l=await He(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Rn}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ec}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if($e(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,o,a;try{if("email"in t){const{email:l,options:c}=t;let d=null,f=null;this.flowType==="pkce"&&([d,f]=await Oi(this.storage,this.storageKey));const{error:h}=await He(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:f}=await He(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:f}}throw new tc("You must provide either an email or phone number.")}catch(l){if($e(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,o;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await He(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:Rn});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,d=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(s){if($e(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let o=null,a=null;return this.flowType==="pkce"&&([o,a]=await Oi(this.storage,this.storageKey)),await He(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:fA})}catch(o){if($e(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new rs;const{error:s}=await He(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if($e(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:o}=t,{error:a}=await He(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:n,type:s,options:o}=t,{data:a,error:l}=await He(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new tc("You must provide either an email or phone number and a type")}catch(r){if($e(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Xs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Ju:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const a=await Xs(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=rf()}if(this.storage.isServer&&t.user){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,f)=>(!a&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,f))})}return{data:{session:t},error:null}}const{session:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await He(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:cs}):await this._useSession(async r=>{var n,s,o;const{data:a,error:l}=r;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new rs}:await He(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:cs})})}catch(r){if($e(r))return F4(r)&&(await this._removeSession(),await es(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:o}=n;if(o)throw o;if(!s.session)throw new rs;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Oi(this.storage,this.storageKey));const{data:d,error:f}=await He(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:cs});if(f)throw f;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new rs;const r=Date.now()/1e3;let n=r,s=!0,o=null;const{payload:a}=tf(t.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if($e(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:a,error:l}=r;if(l)throw l;t=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new rs;const{session:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if($e(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Kr())throw new rc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new rc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new yx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new rc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new yx("No code detected.");const{data:g,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:o,refresh_token:a,expires_in:l,expires_at:c,token_type:d}=t;if(!o||!l||!a||!d)throw new rc("No session defined in URL");const f=Math.round(Date.now()/1e3),h=parseInt(l);let m=f+h;c&&(m=parseInt(c));const x=m-f;x*1e3<=Wi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${h}s`);const y=m-h;f-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,m,f):f-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,m,f);const{data:p,error:b}=await this._getUser(o);if(b)throw b;const w={provider_token:n,provider_refresh_token:s,access_token:o,expires_in:h,expires_at:m,refresh_token:a,token_type:d,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:t.type},error:null}}catch(n){if($e(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Xs(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{error:o};const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(L4(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await es(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=Y4(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:o},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Oi(this.storage,this.storageKey,!0));try{return await He(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if($e(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if($e(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async o=>{var a,l,c,d,f;const{data:h,error:m}=o;if(m)throw m;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await He(this.fetch,"GET",x,{headers:this.headers,jwt:(f=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return Kr()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if($e(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:o,error:a}=r;if(a)throw a;return await He(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if($e(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Q4(async s=>(s>0&&await X4(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await He(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Rn})),(s,o)=>{const a=200*Math.pow(2,s);return o&&ef(o)&&Date.now()+a-n<Wi})}catch(n){if(this._debug(r,"error",n),$e(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Kr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Xs(this.storage,this.storageKey);if(s&&this.userStorage){let a=await Xs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Bi(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:rf()}else if(s&&!s.user&&!s.user){const a=await Xs(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await es(this.storage,this.storageKey+"-user"),await Bi(this.storage,this.storageKey,s)):s.user=rf()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const o=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ju;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${Ju}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),ef(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new rs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Gd;const{data:o,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!o.session)throw new rs;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),$e(o)){const a={session:null,error:o};return ef(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){o.push(c)}});if(await Promise.all(a),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Bi(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const o=structuredClone(s);await Bi(this.storage,this.storageKey,o)}else{const s=structuredClone(r);await Bi(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await es(this.storage,this.storageKey),await es(this.storage,this.storageKey+"-code-verifier"),await es(this.storage,this.storageKey+"-user"),this.userStorage&&await es(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Kr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Wi);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Wi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Wi}ms, refresh threshold is ${Rh} ticks`),s<=Rh&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof N1)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Kr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,a]=await Oi(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);s.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await He(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if($e(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:o,error:a}=r;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await He(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if($e(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{data:null,error:o};const{data:a,error:l}=await He(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(r){if($e(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await He(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if($e(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),o=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:o}=t;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=tf(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const f=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+I4>s)return n;const{data:o,error:a}=await He(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,n=o.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:x,error:y}=await this.getSession();if(y||!x.session)return{data:null,error:y};n=x.session.access_token}const{header:s,payload:o,signature:a,raw:{header:l,payload:c}}=tf(n);r!=null&&r.allowExpired||iA(o.exp);const d=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:o,header:s,signature:a},error:null}}const f=oA(s.alg),h=await crypto.subtle.importKey("jwk",d,f,!0,["verify"]);if(!await crypto.subtle.verify(f,h,a,q4(`${l}.${c}`)))throw new Dh("Invalid JWT signature");return{data:{claims:o,header:s,signature:a},error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}}ll.nextInstanceID=0;const _A=ll;class jA extends _A{constructor(t){super(t)}}var NA=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(f){try{d(n.next(f))}catch(h){a(h)}}function c(f){try{d(n.throw(f))}catch(h){a(h)}}function d(f){f.done?o(f.value):s(f.value).then(l,c)}d((n=n.apply(e,t||[])).next())})};class SA{constructor(t,r,n){var s,o,a;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=P4(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:b4,realtime:j4,auth:Object.assign(Object.assign({},_4),{storageKey:d}),global:y4},h=T4(n??{},f);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=C4(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new WR(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new wR(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new v4(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return NA(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:o,flowType:a,lock:l,debug:c},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new jA({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:a,lock:l,debug:c,fetch:f,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new s4(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const kA=(e,t,r)=>new SA(e,t,r),CA="https://hhcirfvubsugcuypjyxp.supabase.co",EA="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhoY2lyZnZ1YnN1Z2N1eXBqeXhwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE0MjE4OTMsImV4cCI6MjA2Njk5Nzg5M30.1B5paA-hI-zL0NG2st5xiJwecR8z9JBHzCTaAtwX38k",N=kA(CA,EA,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}});async function S1(e){try{const{data:t,error:r}=await N.from("wallet_links").insert([{user_id:e}]);return{data:t,error:r}}catch(t){return console.error("Exception in linkWallet:",t),{data:null,error:t}}}async function Yd(e){try{const{data:t,error:r}=await N.from("wallet_links").select("*").eq("user_id",e).maybeSingle();return{data:t,error:r}}catch(t){return console.error("Exception in getLinkedWallet:",t),{data:null,error:t}}}const Zd=Object.freeze(Object.defineProperty({__proto__:null,getLinkedWallet:Yd,linkWallet:S1,supabase:N},Symbol.toStringTag,{value:"Module"})),k1=u.createContext(void 0),PA=({children:e})=>{const[t,r]=u.useState(null),[n,s]=u.useState(null),[o,a]=u.useState(!0),[l,c]=u.useState(!1),{toast:d}=$t(),f=async b=>{try{const w=new Promise((j,k)=>setTimeout(()=>k(new Error("Admin check timeout")),2e3)),g=N.from("profiles").select("is_admin").eq("user_id",b).single(),{data:v,error:_}=await Promise.race([g,w]);c(!_&&v&&v.is_admin||!1)}catch{c(!1)}};u.useEffect(()=>{const b=setTimeout(()=>{a(!1)},3e3),{data:{subscription:w}}=N.auth.onAuthStateChange(async(g,v)=>{s(v),r((v==null?void 0:v.user)??null),v!=null&&v.user?f(v.user.id).catch(()=>{c(!1)}):c(!1),clearTimeout(b),a(!1)});return N.auth.getSession().then(async({data:{session:g}})=>{s(g),r((g==null?void 0:g.user)??null),g!=null&&g.user?f(g.user.id).catch(()=>{c(!1)}):c(!1),clearTimeout(b),a(!1)}).catch(()=>{clearTimeout(b),a(!1)}),()=>{w.unsubscribe(),clearTimeout(b)}},[]);const h=async(b,w,g)=>{const v=`${window.location.origin}/`,{error:_}=await N.auth.signUp({email:b,password:w,options:{emailRedirectTo:v,data:{username:g,display_name:g}}});return d(_?{title:"Sign up failed",description:_.message,variant:"destructive"}:{title:"Check your email",description:"We sent you a confirmation link to complete your sign up.",className:"bg-green-600 text-white border-green-700"}),{error:_}};async function m(b,w){try{const g=new AbortController,v=setTimeout(()=>g.abort(),5e3),_=await fetch("https://theronm18.sg-host.com/wp-json/jwt-auth/v1/token",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({username:b,password:w}),signal:g.signal});if(clearTimeout(v),_.ok){const j=await _.json();if(j.token)return localStorage.setItem("wp_jwt_token",j.token),localStorage.setItem("wp_jwt_validated","true"),localStorage.setItem("wp_jwt_validation_time",Date.now().toString()),console.log("WordPress JWT token stored successfully"),!0}return localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time"),console.warn("WordPress JWT token fetch failed"),!1}catch(g){return console.error("WordPress JWT token fetch error:",g),localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time"),!1}}const p={user:t,session:n,loading:o,isAdmin:l,signUp:h,signIn:async(b,w)=>{var v;const{error:g}=await N.auth.signInWithPassword({email:b,password:w});if(!g)try{if(!await m(b,w))console.warn("WordPress JWT token could not be obtained, wallet features may not work");else try{const{fixWordPressBalance:j,getTrincreditsBalance:k}=await Ir(async()=>{const{fixWordPressBalance:E,getTrincreditsBalance:O}=await Promise.resolve().then(()=>dd);return{fixWordPressBalance:E,getTrincreditsBalance:O}},void 0),{data:{session:C}}=await N.auth.getSession();(v=C==null?void 0:C.user)!=null&&v.id&&(await j(C.user.id),console.log("Auto-synced balance to WordPress after login"))}catch(j){console.warn("Auto-sync after login failed:",j)}}catch(_){console.error("JWT token fetch failed:",_),localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time")}return g&&d({title:"Sign in failed",description:g.message,variant:"destructive"}),{error:g}},signOut:async()=>{try{const{error:b}=await N.auth.signOut();localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time"),r(null),s(null),d(b?{title:"Signed out",description:"You have been signed out (session was already missing).",className:"bg-green-600 text-white border-green-700"}:{description:"You have been signed out successfully.",className:"bg-green-600 text-white border-green-700",duration:3e3})}catch{r(null),s(null),d({title:"Signed out",description:"You have been signed out (local session cleared)",className:"bg-green-600 text-white border-green-700"})}}};return i.jsx(k1.Provider,{value:p,children:e})},it=()=>{const e=u.useContext(k1);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Ut=({children:e})=>{const{user:t,loading:r}=it(),n=ot(),[s,o]=u.useState(!0),a=u.useRef(null);return u.useEffect(()=>{if(a.current&&clearTimeout(a.current),!r&&t){const l=setTimeout(()=>{o(!1)},2e3);a.current=l,N.from("profiles").select("deactivated").eq("user_id",t.id).single().then(({data:c,error:d})=>{a.current&&(clearTimeout(a.current),a.current=null),d?o(!1):c!=null&&c.deactivated?n("/deactivated",{replace:!0}):o(!1)}).catch(()=>{a.current&&(clearTimeout(a.current),a.current=null),o(!1)})}else!r&&!t&&n("/welcome");return()=>{a.current&&clearTimeout(a.current)}},[t,r,n]),r||s?i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):t?i.jsx(i.Fragment,{children:e}):null},TA=wl("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-primary bg-transparent text-primary hover:bg-primary hover:text-primary-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",neon:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-[0_0_10px_hsl(var(--primary)),0_0_20px_hsl(var(--primary)),0_0_30px_hsl(var(--primary))] hover:shadow-[0_0_15px_hsl(var(--primary)),0_0_30px_hsl(var(--primary)),0_0_45px_hsl(var(--primary))] transition-all duration-300"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),H=u.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},o)=>{const a=n?Ts:"button";return i.jsx(a,{className:Fe(TA({variant:t,size:r,className:e})),ref:o,...s})});H.displayName="Button";const kp=({className:e="",showText:t=!0,showCircle:r=!1,circleSize:n,wordmark:s=!1})=>{const o=n||96,a=o*1.33,l=o*1.66;return i.jsxs("div",{className:`flex flex-col items-center justify-center ${e}`,children:[r&&i.jsx("div",{className:"relative mb-4 flex justify-center",children:i.jsx("div",{className:"bg-black border-4 border-primary rounded-full neon-glow overflow-hidden flex items-center justify-center relative",style:{width:o,height:o},children:i.jsx("img",{src:"/limey-tree-logo.png",alt:"Limey Tree Logo",style:{width:a,height:l,zIndex:2},className:"object-contain drop-shadow-[0_0_16px_hsl(120,100%,50%)]"})})}),t&&s&&i.jsxs("svg",{width:"420",height:"120",viewBox:"0 0 420 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"block mx-auto",style:{maxWidth:"100%",height:"auto"},children:[i.jsx("defs",{children:i.jsxs("filter",{id:"neon",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[i.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"6",floodColor:"#39FF14"}),i.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"12",floodColor:"#39FF14"}),i.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"24",floodColor:"#39FF14"})]})}),i.jsx("text",{x:"50%",y:"60%",textAnchor:"middle",dominantBaseline:"middle",fontFamily:"'Pacifico', 'Inter', cursive, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",fontWeight:"900",fontSize:"84",stroke:"#000",strokeWidth:"10",fill:"#39FF14",filter:"url(#neon)",style:{letterSpacing:"0.08em",paintOrder:"stroke fill"},transform:"rotate(-8 210 60) skewX(-8)",children:"Limey"}),i.jsx("text",{x:"50%",y:"60%",textAnchor:"middle",dominantBaseline:"middle",fontFamily:"'Pacifico', 'Inter', cursive, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",fontWeight:"900",fontSize:"84",fill:"#39FF14",style:{letterSpacing:"0.08em"},transform:"rotate(-8 210 60) skewX(-8)",children:"Limey"})]}),t&&!s&&i.jsx("span",{className:"text-4xl font-black text-primary tracking-wider logo-text-glow",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:900,letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))",WebkitTextStroke:"2px black",textShadow:"0 0 2px black, 0 0 4px black",backgroundImage:"url(/limey-tree-logo.png)",backgroundSize:"cover",backgroundRepeat:"repeat",WebkitBackgroundClip:"text",backgroundClip:"text",color:"transparent"},children:"Limey"}),t&&i.jsx("div",{className:"mt-2 text-center",children:i.jsx("p",{className:"text-muted-foreground text-sm",children:"Trinidad & Tobago"})})]})},RA=()=>i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:i.jsxs("div",{className:"text-center space-y-8",children:[i.jsx(kp,{showCircle:!0,circleSize:192,wordmark:!0}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-2xl text-foreground",children:"Trinbago's Home for Creators"}),i.jsx("p",{className:"text-muted-foreground max-w-md mx-auto text-center px-[20px]",children:"Share your moments, discover local talent, and connect with the Caribbean community."})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(li,{to:"/signup",children:i.jsx(H,{variant:"neon",className:"w-64",children:"Join Limey"})}),i.jsx("div",{children:i.jsx(li,{to:"/login",children:i.jsx(H,{variant:"outline",className:"w-64 py-0",children:"Sign In"})})}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["By signing up, you agree to our"," ",i.jsx(li,{to:"/terms",className:"text-primary hover:underline",children:"Terms of Service"})," ","and"," ",i.jsx(li,{to:"/privacy",className:"text-primary hover:underline",children:"Privacy Policy"}),"."]})]})]})}),rt=u.forwardRef(({className:e,type:t,...r},n)=>i.jsx("input",{type:t,className:Fe("flex h-10 w-full rounded-md border border-input bg-input px-3 py-2 text-base text-foreground ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));rt.displayName="Input";const De=u.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:Fe("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));De.displayName="Card";const qi=u.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:Fe("flex flex-col space-y-1.5 p-6",e),...t}));qi.displayName="CardHeader";const Hi=u.forwardRef(({className:e,...t},r)=>i.jsx("h3",{ref:r,className:Fe("text-2xl font-semibold leading-none tracking-tight",e),...t}));Hi.displayName="CardTitle";const AA=u.forwardRef(({className:e,...t},r)=>i.jsx("p",{ref:r,className:Fe("text-sm text-muted-foreground",e),...t}));AA.displayName="CardDescription";const Gi=u.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:Fe("p-6 pt-0",e),...t}));Gi.displayName="CardContent";const MA=u.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:Fe("flex items-center p-6 pt-0",e),...t}));MA.displayName="CardFooter";const DA=()=>{const[e,t]=u.useState(""),[r,n]=u.useState(""),[s,o]=u.useState(!1),[a,l]=u.useState(!1),{signIn:c,user:d,loading:f}=it(),h=ot(),[m]=yp();u.useEffect(()=>{if(d&&!f){const y=m.get("returnTo");h(y||"/")}},[d,f,h,m]);const x=async y=>{y.preventDefault(),o(!0);try{const{error:p}=await c(e,r);p&&console.error("Login error:",p)}catch(p){console.error("Login exception:",p)}o(!1)};return i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:i.jsxs(De,{className:"w-full max-w-md p-8 space-y-6",children:[i.jsx(kp,{showCircle:!0,wordmark:!0}),i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Welcome Back"}),i.jsx("p",{className:"text-muted-foreground mt-2",children:"Sign in to your Limey account"})]}),i.jsxs("form",{onSubmit:x,className:"space-y-4",children:[i.jsx("div",{children:i.jsx(rt,{type:"email",placeholder:"Email address",value:e,onChange:y=>t(y.target.value),required:!0})}),i.jsxs("div",{className:"relative",children:[i.jsx(rt,{type:a?"text":"password",placeholder:"Password",value:r,onChange:y=>n(y.target.value),required:!0}),i.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground focus:outline-none",tabIndex:-1,onClick:()=>l(y=>!y),"aria-label":a?"Hide password":"Show password",children:a?i.jsx(ho,{size:18}):i.jsx(jr,{size:18})})]}),i.jsx(H,{type:"submit",variant:"neon",className:"w-full mt-6",disabled:s,children:s?"Signing In...":"Sign In"})]}),i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx(li,{to:"/forgot-password",className:"text-primary hover:underline text-sm",children:"Forgot your password?"}),i.jsxs("div",{className:"text-muted-foreground",children:["Don't have an account?"," ",i.jsx(li,{to:"/signup",className:"text-primary hover:underline",children:"Sign up"})]})]})]})})},IA=()=>{const[e,t]=u.useState({username:"",email:"",password:"",confirmPassword:""}),[r,n]=u.useState(!1),[s,o]=u.useState(!1),[a,l]=u.useState(!1),{signUp:c,user:d,loading:f}=it(),h=ot();$t(),u.useEffect(()=>{d&&!f&&h("/verify-phone")},[d,f,h]);const m=(y,p)=>{t(b=>({...b,[y]:p}))},x=async y=>{if(y.preventDefault(),e.password!==e.confirmPassword){console.error("Passwords do not match");return}n(!0);try{const{error:p}=await c(e.email,e.password,e.username);p||console.log("Signup successful, should redirect")}catch(p){console.error("Signup error:",p)}n(!1)};return i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:i.jsxs(De,{className:"w-full max-w-md p-8 space-y-6",children:[i.jsx(kp,{showCircle:!0,wordmark:!0}),i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Join Limey"}),i.jsx("p",{className:"text-muted-foreground mt-2",children:"Create your creator account"})]}),i.jsxs("form",{onSubmit:x,className:"space-y-4",children:[i.jsx("div",{children:i.jsx(rt,{type:"text",placeholder:"Username",value:e.username,onChange:y=>m("username",y.target.value),required:!0})}),i.jsx("div",{children:i.jsx(rt,{type:"email",placeholder:"Email address",value:e.email,onChange:y=>m("email",y.target.value),required:!0})}),i.jsxs("div",{className:"relative",children:[i.jsx(rt,{type:s?"text":"password",placeholder:"Password",value:e.password,onChange:y=>m("password",y.target.value),required:!0}),i.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground focus:outline-none",tabIndex:-1,onClick:()=>o(y=>!y),"aria-label":s?"Hide password":"Show password",children:s?i.jsx(ho,{size:18}):i.jsx(jr,{size:18})})]}),i.jsxs("div",{className:"relative",children:[i.jsx(rt,{type:a?"text":"password",placeholder:"Confirm Password",value:e.confirmPassword,onChange:y=>m("confirmPassword",y.target.value),required:!0}),i.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground focus:outline-none",tabIndex:-1,onClick:()=>l(y=>!y),"aria-label":a?"Hide password":"Show password",children:a?i.jsx(ho,{size:18}):i.jsx(jr,{size:18})})]}),i.jsx(H,{type:"submit",variant:"neon",className:"w-full mt-6",disabled:r,children:r?"Creating Account...":"Create Account"})]}),i.jsx("div",{className:"text-center",children:i.jsxs("div",{className:"text-muted-foreground",children:["Already have an account?"," ",i.jsx(li,{to:"/login",className:"text-primary hover:underline",children:"Sign in"})]})})]})})},OA=wl("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Dt({className:e,variant:t,...r}){return i.jsx("div",{className:Fe(OA({variant:t}),e),...r})}const Cp=()=>{const{user:e,isAdmin:t,loading:r}=it(),[n,s]=u.useState(0),[o,a]=u.useState(0),[l,c]=u.useState(0),d=async()=>{if(!(!e||r)){if(t){s(0),a(0),c(0);return}try{const{data:f,error:h}=await N.from("messages").select("id").eq("receiver_id",e.id).eq("read_by_receiver",!1).eq("deleted_for_receiver",!1).eq("deleted_for_everyone",!1);let m=0,x=null;if(!t){const{data:y,error:p}=await N.from("system_notifications").select("id").eq("to_user_id",e.id).eq("read",!1);x=p,m=(y==null?void 0:y.length)||0}if(!h&&!x){const y=(f==null?void 0:f.length)||0,p=y+m;a(y),c(m),s(p)}}catch(f){console.error("Error fetching unread counts:",f)}}};return u.useEffect(()=>{if(e&&!r){d();const f=setInterval(()=>{d()},1e4),h=()=>{document.hidden||d()};document.addEventListener("visibilitychange",h);const m=N.channel(`unread_messages_${e.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`receiver_id=eq.${e.id}`},()=>{a(y=>y+1),s(y=>y+1)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`receiver_id=eq.${e.id}`},y=>{y.new.read_by_receiver&&!y.old.read_by_receiver&&setTimeout(()=>d(),100)}).subscribe();let x=null;return t||(x=N.channel(`unread_notifications_${e.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"system_notifications",filter:`to_user_id=eq.${e.id}`},()=>{c(y=>y+1),s(y=>y+1)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"system_notifications",filter:`to_user_id=eq.${e.id}`},y=>{y.new.read&&!y.old.read&&setTimeout(()=>d(),100)}).subscribe()),()=>{clearInterval(f),document.removeEventListener("visibilitychange",h),m.unsubscribe(),x&&x.unsubscribe()}}},[e,t,r]),{totalUnreadCount:n,inboxUnreadCount:o,systemUnreadCount:l,refreshCounts:d}};var Ep="Avatar",[LA,C3]=Us(Ep),[FA,C1]=LA(Ep),E1=u.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[s,o]=u.useState("idle");return i.jsx(FA,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:i.jsx(Ie.span,{...n,ref:t})})});E1.displayName=Ep;var P1="AvatarImage",T1=u.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...o}=e,a=C1(P1,r),l=zA(n,o.referrerPolicy),c=ur(d=>{s(d),a.onImageLoadingStatusChange(d)});return qt(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(Ie.img,{...o,ref:t,src:n}):null});T1.displayName=P1;var R1="AvatarFallback",A1=u.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...s}=e,o=C1(R1,r),[a,l]=u.useState(n===void 0);return u.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),a&&o.imageLoadingStatus!=="loaded"?i.jsx(Ie.span,{...s,ref:t}):null});A1.displayName=R1;function zA(e,t){const[r,n]=u.useState("idle");return qt(()=>{if(!e){n("error");return}let s=!0;const o=new window.Image,a=l=>()=>{s&&n(l)};return n("loading"),o.onload=a("loaded"),o.onerror=a("error"),o.src=e,t&&(o.referrerPolicy=t),()=>{s=!1}},[e,t]),r}var M1=E1,D1=T1,I1=A1;const ut=u.forwardRef(({className:e,...t},r)=>i.jsx(M1,{ref:r,className:Fe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));ut.displayName=M1.displayName;const ft=u.forwardRef(({className:e,...t},r)=>i.jsx(D1,{ref:r,className:Fe("aspect-square h-full w-full",e),...t}));ft.displayName=D1.displayName;const ht=u.forwardRef(({className:e,...t},r)=>i.jsx(I1,{ref:r,className:Fe("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));ht.displayName=I1.displayName;const mr=()=>{const e=ot(),t=un(),{totalUnreadCount:r}=Cp(),{isAdmin:n,loading:s,user:o}=it(),[a,l]=u.useState(null);u.useEffect(()=>{o&&c()},[o]),u.useEffect(()=>{if(!o)return;const f=N.channel("profile_updates").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`user_id=eq.${o.id}`},h=>{h.new&&l(h.new)}).subscribe();return()=>{N.removeChannel(f)}},[o]);const c=async()=>{if(o)try{const{data:f,error:h}=await N.from("profiles").select("user_id, username, avatar_url").eq("user_id",o.id).single();!h&&f&&l(f)}catch(f){console.error("Error fetching user profile:",f)}},d=n?[{path:"/",icon:Mv},{path:"/friends",icon:hh},{path:"/upload",icon:Ms,isUpload:!0},{path:"/admin",icon:XC,isCrown:!0},{path:"/profile",icon:Av}]:[{path:"/",icon:Mv},{path:"/friends",icon:hh},{path:"/upload",icon:Ms,isUpload:!0},{path:"/inbox",icon:Ma},{path:"/profile",icon:Av}];return i.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border p-2 z-50",children:i.jsx("div",{className:"flex justify-around items-center max-w-md mx-auto",children:d.map(f=>{var m,x,y,p,b;const h=f.icon;return i.jsx(H,{variant:f.isUpload?"neon":"ghost",size:"sm",onClick:()=>e(f.path),className:`${f.isUpload?"px-3":"p-3"} ${t.pathname===f.path&&!f.isUpload?"relative border-b-2 border-green-500 rounded-none bg-transparent":""}`,children:f.isAdmin?i.jsx("span",{className:"text-xl",role:"img","aria-label":"Admin",children:"👑"}):f.path==="/inbox"?i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"text-xl",role:"img","aria-label":"Messages",children:"💬"}),!s&&r>0&&i.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full min-w-[18px] h-[18px] flex items-center justify-center font-bold",children:r>99?"99+":r})]}):f.path==="/profile"?i.jsxs(ut,{className:"w-7 h-7",children:[i.jsx(ft,{src:(a==null?void 0:a.avatar_url)||((m=o==null?void 0:o.user_metadata)==null?void 0:m.avatar_url)||void 0}),i.jsx(ht,{className:"bg-white/10 text-white text-xs",children:((y=(x=a==null?void 0:a.username)==null?void 0:x.charAt(0))==null?void 0:y.toUpperCase())||((b=(p=o==null?void 0:o.email)==null?void 0:p.charAt(0))==null?void 0:b.toUpperCase())||"U"})]}):i.jsx(h,{size:20})},f.path)})})})},Pp=({isOpen:e,onClose:t,video:r})=>{var m;const{toast:n}=$t(),[s,o]=u.useState(!1);u.useEffect(()=>{if(e)o(!0);else{const x=setTimeout(()=>o(!1),300);return()=>clearTimeout(x)}},[e]);const a=`${window.location.origin}/video/${r.id}`,l=((m=r.profiles)==null?void 0:m.username)||r.username||"user",c=r.description?`${r.description}

By @${l} on Limey`:`Check out this amazing video by @${l} on Limey!`,d=[{name:"WhatsApp",icon:"💬",color:"bg-green-500",action:()=>{const x=`https://wa.me/?text=${encodeURIComponent(`${r.title}

${c}

${a}`)}`;window.open(x,"_blank")}},{name:"Facebook",icon:"📘",color:"bg-blue-600",action:()=>{const x=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(a)}&quote=${encodeURIComponent(c)}`;window.open(x,"_blank")}},{name:"Instagram",icon:"📷",color:"bg-gradient-to-r from-purple-500 to-pink-500",action:()=>{f(),n({title:"Link copied!",description:"Paste this link in your Instagram story or bio"})}},{name:"Twitter",icon:"🐦",color:"bg-blue-400",action:()=>{const x=`https://twitter.com/intent/tweet?text=${encodeURIComponent(c)}&url=${encodeURIComponent(a)}`;window.open(x,"_blank")}},{name:"Email",icon:"📧",color:"bg-gray-600",action:()=>{const x=`mailto:?subject=${encodeURIComponent(r.title)}&body=${encodeURIComponent(`${c}

${a}`)}`;window.open(x,"_blank")}},{name:"SMS",icon:"💬",color:"bg-green-600",action:()=>{const x=`sms:?body=${encodeURIComponent(`${r.title}

${c}

${a}`)}`;window.open(x,"_blank")}},{name:"Telegram",icon:"✈️",color:"bg-blue-500",action:()=>{const x=`https://t.me/share/url?url=${encodeURIComponent(a)}&text=${encodeURIComponent(c)}`;window.open(x,"_blank")}},{name:"LinkedIn",icon:"💼",color:"bg-blue-700",action:()=>{const x=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(a)}`;window.open(x,"_blank")}}],f=async()=>{const x=`${r.title}

${c}

${a}`;try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(x);else{const y=document.createElement("textarea");y.value=x,y.style.position="fixed",y.style.left="-999999px",y.style.top="-999999px",document.body.appendChild(y),y.focus(),y.select(),document.execCommand("copy"),document.body.removeChild(y)}n({title:"Link copied!",description:"Video link copied to clipboard"}),t()}catch(y){console.error("Failed to copy to clipboard:",y),n({title:"Copy failed",description:"Unable to copy link. Please try again.",variant:"destructive"})}},h=async()=>{try{navigator.share&&(await navigator.share({title:r.title,text:c,url:a}),t())}catch{console.log("Native sharing cancelled or failed")}};return s?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center",children:[i.jsx("div",{className:`absolute inset-0 bg-black transition-opacity duration-300 ${e?"opacity-50":"opacity-0"}`,onClick:t}),i.jsxs("div",{className:`relative w-full max-w-md mx-4 mb-4 bg-white rounded-t-3xl transform transition-transform duration-300 ease-out ${e?"translate-y-0":"translate-y-full"}`,children:[i.jsx("div",{className:"flex justify-center pt-3 pb-2",children:i.jsx("div",{className:"w-12 h-1 bg-gray-300 rounded-full"})}),i.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Share video"}),i.jsx(H,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8 rounded-full hover:bg-gray-100",children:i.jsx(Nr,{size:20,className:"text-gray-500"})})]}),i.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-16 bg-gray-200 rounded-lg overflow-hidden flex-shrink-0",children:r.thumbnail_url?i.jsx("img",{src:r.thumbnail_url.startsWith("http")?r.thumbnail_url:N.storage.from("limeytt-uploads").getPublicUrl(r.thumbnail_url).data.publicUrl,alt:r.title,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-gray-300 flex items-center justify-center",children:i.jsx(Do,{size:16,className:"text-gray-500"})})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-medium text-gray-900 truncate",children:r.title}),i.jsxs("p",{className:"text-sm text-gray-500",children:["@",l]})]})]})}),i.jsxs("div",{className:"px-6 py-6",children:[i.jsx("div",{className:"grid grid-cols-4 gap-4 mb-6",children:d.map(x=>i.jsxs("button",{onClick:x.action,className:"flex flex-col items-center gap-2 p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx("div",{className:`w-12 h-12 rounded-full ${x.color} flex items-center justify-center text-white text-xl shadow-lg`,children:x.icon}),i.jsx("span",{className:"text-xs text-gray-600 font-medium",children:x.name})]},x.name))}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:f,className:"w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:i.jsx(Ky,{size:18,className:"text-gray-600"})}),i.jsx("span",{className:"text-gray-900 font-medium",children:"Copy link"})]}),navigator.share&&i.jsxs("button",{onClick:h,className:"w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:i.jsx(fh,{size:18,className:"text-gray-600"})}),i.jsx("span",{className:"text-gray-900 font-medium",children:"More options"})]})]})]})]})]}):null};function Yt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function $A(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const nc=43200,Px=1440;let UA={};function VA(){return UA}function Tx(e){const t=Yt(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Sc(e,t){const r=Yt(e),n=Yt(t),s=r.getTime()-n.getTime();return s<0?-1:s>0?1:s}function WA(e){return $A(e,Date.now())}function BA(e,t){const r=Yt(e),n=Yt(t),s=r.getFullYear()-n.getFullYear(),o=r.getMonth()-n.getMonth();return s*12+o}function qA(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function HA(e,t){return+Yt(e)-+Yt(t)}function GA(e){const t=Yt(e);return t.setHours(23,59,59,999),t}function YA(e){const t=Yt(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function ZA(e){const t=Yt(e);return+GA(t)==+YA(t)}function KA(e,t){const r=Yt(e),n=Yt(t),s=Sc(r,n),o=Math.abs(BA(r,n));let a;if(o<1)a=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*o);let l=Sc(r,n)===-s;ZA(Yt(e))&&o===1&&Sc(e,n)===1&&(l=!1),a=s*(o-Number(l))}return a===0?0:a}function XA(e,t,r){const n=HA(e,t)/1e3;return qA(r==null?void 0:r.roundingMethod)(n)}const QA={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},JA=(e,t,r)=>{let n;const s=QA[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function sf(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const eM={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},tM={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},rM={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},nM={date:sf({formats:eM,defaultWidth:"full"}),time:sf({formats:tM,defaultWidth:"full"}),dateTime:sf({formats:rM,defaultWidth:"full"})},sM={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},iM=(e,t,r,n)=>sM[e];function ua(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):a;s=e.formattingValues[l]||e.formattingValues[a]}else{const a=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[l]||e.values[a]}const o=e.argumentCallback?e.argumentCallback(t):t;return s[o]}}const oM={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},aM={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},lM={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},cM={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},uM={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},fM=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},hM={ordinalNumber:fM,era:ua({values:oM,defaultWidth:"wide"}),quarter:ua({values:aM,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ua({values:lM,defaultWidth:"wide"}),day:ua({values:cM,defaultWidth:"wide"}),dayPeriod:ua({values:dM,defaultWidth:"wide",formattingValues:uM,defaultFormattingWidth:"wide"})};function fa(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],o=t.match(s);if(!o)return null;const a=o[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?pM(l,h=>h.test(a)):mM(l,h=>h.test(a));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const f=t.slice(a.length);return{value:d,rest:f}}}function mM(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function pM(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function gM(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],o=t.match(e.parsePattern);if(!o)return null;let a=e.valueCallback?e.valueCallback(o[0]):o[0];a=r.valueCallback?r.valueCallback(a):a;const l=t.slice(s.length);return{value:a,rest:l}}}const vM=/^(\d+)(th|st|nd|rd)?/i,xM=/\d+/i,wM={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},yM={any:[/^b/i,/^(a|c)/i]},bM={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},_M={any:[/1/i,/2/i,/3/i,/4/i]},jM={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},NM={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},SM={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},kM={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},CM={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},EM={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},PM={ordinalNumber:gM({matchPattern:vM,parsePattern:xM,valueCallback:e=>parseInt(e,10)}),era:fa({matchPatterns:wM,defaultMatchWidth:"wide",parsePatterns:yM,defaultParseWidth:"any"}),quarter:fa({matchPatterns:bM,defaultMatchWidth:"wide",parsePatterns:_M,defaultParseWidth:"any",valueCallback:e=>e+1}),month:fa({matchPatterns:jM,defaultMatchWidth:"wide",parsePatterns:NM,defaultParseWidth:"any"}),day:fa({matchPatterns:SM,defaultMatchWidth:"wide",parsePatterns:kM,defaultParseWidth:"any"}),dayPeriod:fa({matchPatterns:CM,defaultMatchWidth:"any",parsePatterns:EM,defaultParseWidth:"any"})},TM={code:"en-US",formatDistance:JA,formatLong:nM,formatRelative:iM,localize:hM,match:PM,options:{weekStartsOn:0,firstWeekContainsDate:1}};function RM(e,t,r){const n=VA(),s=(r==null?void 0:r.locale)??n.locale??TM,o=2520,a=Sc(e,t);if(isNaN(a))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:a});let c,d;a>0?(c=Yt(t),d=Yt(e)):(c=Yt(e),d=Yt(t));const f=XA(d,c),h=(Tx(d)-Tx(c))/1e3,m=Math.round((f-h)/60);let x;if(m<2)return r!=null&&r.includeSeconds?f<5?s.formatDistance("lessThanXSeconds",5,l):f<10?s.formatDistance("lessThanXSeconds",10,l):f<20?s.formatDistance("lessThanXSeconds",20,l):f<40?s.formatDistance("halfAMinute",0,l):f<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):m===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",m,l);if(m<45)return s.formatDistance("xMinutes",m,l);if(m<90)return s.formatDistance("aboutXHours",1,l);if(m<Px){const y=Math.round(m/60);return s.formatDistance("aboutXHours",y,l)}else{if(m<o)return s.formatDistance("xDays",1,l);if(m<nc){const y=Math.round(m/Px);return s.formatDistance("xDays",y,l)}else if(m<nc*2)return x=Math.round(m/nc),s.formatDistance("aboutXMonths",x,l)}if(x=KA(d,c),x<12){const y=Math.round(m/nc);return s.formatDistance("xMonths",y,l)}else{const y=x%12,p=Math.trunc(x/12);return y<3?s.formatDistance("aboutXYears",p,l):y<9?s.formatDistance("overXYears",p,l):s.formatDistance("almostXYears",p+1,l)}}function AM(e,t){return RM(e,WA(e),t)}const Rx=({content:e})=>{const t=/!\[GIF\]\((https?:\/\/[^\s)]+)\)/g,r=e.split(t);return i.jsx("div",{className:"whitespace-pre-wrap",children:r.map((n,s)=>s%2===1&&n.startsWith("http")?i.jsx("div",{className:"my-2",children:i.jsx("img",{src:n,alt:"GIF",className:"max-w-full h-auto rounded-lg max-h-48 object-contain",loading:"lazy"})},s):n?i.jsx("span",{children:n},s):null)})},MM=({onGifSelect:e})=>{const t=["https://media.giphy.com/media/3o7abKhOpu0NwenH3O/giphy.gif","https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif","https://media.giphy.com/media/3o6Zt4HU9uwXmXSAuI/giphy.gif","https://media.giphy.com/media/26u4cqiYI30juCOGY/giphy.gif","https://media.giphy.com/media/l0HlvtIPzPdt2usKs/giphy.gif","https://media.giphy.com/media/3o7abAHdYvZdBNnGZq/giphy.gif","https://media.giphy.com/media/3o6ZtaO9BZHcOjmErm/giphy.gif","https://media.giphy.com/media/26BRrSvJUa0crqw4E/giphy.gif","https://media.giphy.com/media/3o7aCSPqXE5C6T8tBC/giphy.gif","https://media.giphy.com/media/l0MYEqEzwMWFCg8rm/giphy.gif","https://media.giphy.com/media/3o6Zt6KHxJTbXCnSvu/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExbGZpMzA2cHRrZTBrbHptZWgxajBidW83YW9rMnk1b2lhdGQybWYyOCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/nqT2V4HpFuomc/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExbGZpMzA2cHRrZTBrbHptZWgxajBidW83YW9rMnk1b2lhdGQybWYyOCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/8iOzrJARYNURO/giphy.gif","https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3OTN6dWo2OG9sMGU4amxqaGpkMTFnc3R3dGN3bjc4eG5vOG4zNzhrZyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/eGl4ZnPBvOCkDqVLJo/giphy.gif","https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3bHJ1amNjNTIzejl5bG1vc2dpMzl5NmF4MjN4cmM3ZXM0b2hlcnVlZyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/lnIZZfwNzeYow/giphy.gif","https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3bHJ1amNjNTIzejl5bG1vc2dpMzl5NmF4MjN4cmM3ZXM0b2hlcnVlZyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/26CaLKiimsm3ibpE4/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExMWdnaXRkdXMwb3JkZ294Mmp1eHppbDltc3N6OGI1OHV0Zzh3Mmx4cSZlcD12MV9naWZzX3NlYXJjaCZjdD1n/VyB31XTqZNJhFRZNyl/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExMWdnaXRkdXMwb3JkZ294Mmp1eHppbDltc3N6OGI1OHV0Zzh3Mmx4cSZlcD12MV9naWZzX3NlYXJjaCZjdD1n/ljuSksqL9j0yI/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExMWdnaXRkdXMwb3JkZ294Mmp1eHppbDltc3N6OGI1OHV0Zzh3Mmx4cSZlcD12MV9naWZzX3NlYXJjaCZjdD1n/6WFScxN6fi95z3YVQD/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExMWdnaXRkdXMwb3JkZ294Mmp1eHppbDltc3N6OGI1OHV0Zzh3Mmx4cSZlcD12MV9naWZzX3NlYXJjaCZjdD1n/xSlDYEXknFwY4ucrZV/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExMWdnaXRkdXMwb3JkZ294Mmp1eHppbDltc3N6OGI1OHV0Zzh3Mmx4cSZlcD12MV9naWZzX3NlYXJjaCZjdD1n/wGKrkvHxZT6PVpw635/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExMWdnaXRkdXMwb3JkZ294Mmp1eHppbDltc3N6OGI1OHV0Zzh3Mmx4cSZlcD12MV9naWZzX3NlYXJjaCZjdD1n/wel1vvgXM2a7hRWttF/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExYm9tamZwbGVna3JjanB6NGxlbzliYXl2MmhmZ3Y1eGxpcndxZzFtNyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/WXB88TeARFVvi/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExYm9tamZwbGVna3JjanB6NGxlbzliYXl2MmhmZ3Y1eGxpcndxZzFtNyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/ZGU890vUpxuOKjKcpZ/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExYm9tamZwbGVna3JjanB6NGxlbzliYXl2MmhmZ3Y1eGxpcndxZzFtNyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/8lgqAbycBjosxjfi9k/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExYm9tamZwbGVna3JjanB6NGxlbzliYXl2MmhmZ3Y1eGxpcndxZzFtNyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/okfvUCpgArv3y/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExYm9tamZwbGVna3JjanB6NGxlbzliYXl2MmhmZ3Y1eGxpcndxZzFtNyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/cjnErkOZtvq5sHTM7c/giphy.gif","https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3MndhNWR6YmE3eWU3eTl0YXNrMnF0bXV6bDhnaXZkdDlobzhsMGg2ZCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/ES9osccp5aUdq/giphy.gif","https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3M3k1ZmUxMXd6bzFzZGVjMzNhdm95Ym84eDh0MjU3aDZtb3FneXNwbiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/286RXzjX37vtZOwXQq/giphy.gif","https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3NGVmOWw4bnRrdTZiaWJrajE1MDRkZGt5Mzg5dTc3bHFxZGRkbW01YyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/IVIRMpSAlSnHq/giphy.gif","https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExMHQydGR4ZXUyY25mM3JiczUzbmtoYmlnMW5vMWQ4ZTl2dGh6aDd0NSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/nGEO47ShV3Us0/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExc2RvenM4Y2lyNTdwaXBpa2VkODQ3ejl3NmttemVvam9iaWh6MHE3ZyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/bECCppRU0yRiS0iVJH/giphy.gif","https://media2.giphy.com/media/v1.Y2lkPTc5MGI3NjExcXpmbHNlajF4MDRuN3d1cHhjZngyNWUwaXM3a3gyM3YxOWRlaXY5cyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/WeiYU1ea1Poqs/giphy.gif","https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExZXY1Y2c0NmV2MXdob200MnNmbzdlc3d2MG16c21vbHVlZ3I2NWV3eiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/2D8g2rXcWx1DO/giphy.gif","https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExbW1xOHAyZXFlbDI0azB4cDd1eG1uMzNlbnVieGg2dm11NnAzMGdzbSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/dhz1gKi7WKWpW/giphy.gif","https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExYmtoOTNlengybTZjc3dubWRvYWMzNHg5eWxrcXZtdTZsdjV6NHIwcSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/7waKDy5RbDYVG/giphy.gif","https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3cnBuejd0M2xxM21mcjE4bmR6eXpqdHIzdmx6ZXdvZmMxcjNucG40aiZlcD12MV9naWZzX3JlbGF0ZWQmY3Q9Zw/zIwAuqRp2Ki7S/giphy.gif","https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3cnBuejd0M2xxM21mcjE4bmR6eXpqdHIzdmx6ZXdvZmMxcjNucG40aiZlcD12MV9naWZzX3JlbGF0ZWQmY3Q9Zw/A7ZbCuv0fJ0POGucwV/giphy.gif","https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExcXp4YWprbDJsbnAxNXloYWVyenNmYWs1cXJucW1ncHc4emxocTEycyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/5t3fgYmnNfRICx34Wj/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExc2RvenM4Y2lyNTdwaXBpa2VkODQ3ejl3NmttemVvam9iaWh6MHE3ZyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/jkRTu2tTfpwJbwvZz3/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExc2RvenM4Y2lyNTdwaXBpa2VkODQ3ejl3NmttemVvam9iaWh6MHE3ZyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/cE5TH06rukeFIHbaKs/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExc2RvenM4Y2lyNTdwaXBpa2VkODQ3ejl3NmttemVvam9iaWh6MHE3ZyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/CWBgyqeF5344RsP4b9/giphy.gif","https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3anh6bzh6bzd6cGhzeDZsNzRubjRkY3phaWVqaWtyazVzOGZxeDF6aCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/QZsDxgHYw3VpLDubUS/giphy.gif","https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExc2RvenM4Y2lyNTdwaXBpa2VkODQ3ejl3NmttemVvam9iaWh6MHE3ZyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/8CuA9BgLtQs3pBFF1J/giphy.gif","https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3anh6bzh6bzd6cGhzeDZsNzRubjRkY3phaWVqaWtyazVzOGZxeDF6aCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/9zylPz0kQKzmAWydBi/giphy.gif"],r=n=>{try{e(`![GIF](${n})`)}catch(s){console.error("Error selecting GIF:",s)}};return i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-40 overflow-y-auto",children:t.map((n,s)=>i.jsx("button",{onClick:()=>r(n),className:"relative aspect-square rounded overflow-hidden hover:opacity-80 hover:scale-105 transition-all bg-white/10",title:"Click to insert GIF",children:i.jsx("img",{src:n,alt:"GIF",className:"w-full h-full object-cover",loading:"lazy"})},s))}),i.jsx("p",{className:"text-white/50 text-xs text-center",children:"Click a GIF to insert it into your comment"})]})},Ax={smileys:{icon:Qy,name:"Smileys & People",emojis:["😀","😃","😄","😁","😆","😅","🤣","😂","🙂","🙃","😉","😊","😇","🥰","😍","🤩","😘","😗","😚","😙","😋","😛","😜","🤪","😝","🤑","🤗","🤭","😎","🤔","🤐","🤨","😐","😑","😶","😏","😒","🙄","😬","🤥","😔","😪","🤤","😴","😷","🤒","🤕","🤢","🤮","🤧","🥵","🥶","🥴","😵","🤯","🤠","🥳","🤫","🤓","🧐","😕","😟","🙁","☹️","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","😳","😱"]},food:{icon:KC,name:"Food & Drink",emojis:["🍎","🍊","🍋","🍌","🍉","🍇","🍓","🍈","🍒","🍑","🥭","🍍","🥥","🥝","🍅","🍆","🥑","🥦","🥬","🥒","🌶️","🌽","🥕","🧄","🧅","🥔","🍠","🥐","🥖","🍞","🥨","🥯","🧀","🥚","🍳","🧈","🥞","🧇","🥓","🥩","🍗","🍖","🌭","🍔","🍟","🍕","🥪","🥙","🌮","🌯","🥗","🥘","🥫","🍝","🍜","🍲","🍛","🍣","🍱","🥟","🦪","🍤","🍙","🍚","☕","🍵","🧃","🥤","🍶","🍺","🍻","🥂","🍷","🥃","🍸","🍹","🧉","🍼","🥛"]},travel:{icon:rE,name:"Travel & Places",emojis:["🚗","🚕","🚙","🚎","🏎️","🚓","🚑","🚒","🚐","🚚","🚛","🚜","🏍️","🛵","🚲","🛴","🚁","🛸","✈️","🛩️","🛫","🛬","🪂","💺","🚀","🛰️","🚢","⛵","🚤","🛥️","🛳️","⛴️","🚟","🚠","🚡","🚂","🚃","🚄","🚅","🚆","🚇","🚈","🚉","🚊","🚝","🚞","🚋","🚍","🏗️","🌁","🗼","🏭","⛲","🏰","🏯","🗾","🎌","🗻","🌋"]},sports:{icon:Jy,name:"Sports & Activities",emojis:["⚽","🏀","🏈","⚾","🥎","🎾","🏐","🏉","🥏","🎱","🪀","🏓","🏸","🏒","🏑","🥍","🏏","🥅","⛳","🪁","🏹","🎣","🤿","🥊","🥋","🎽","🛷","⛸️","🥌","🎿","⛷️","🏂","🏋️‍♀️","🏋️‍♂️","🤼‍♀️","🤼‍♂️","🤸‍♀️","🤸‍♂️","⛹️‍♀️","⛹️‍♂️","🤺","🤾‍♀️","🤾‍♂️","🏌️‍♀️","🏌️‍♂️","🏇","🧘‍♀️","🧘‍♂️","🏄‍♀️","🏄‍♂️","🏊‍♀️","🏊‍♂️","🤽‍♀️","🤽‍♂️","🚣‍♂️","🧗‍♀️","🧗‍♂️","🚵‍♀️","🚵‍♂️","🚴‍♀️"]},objects:{icon:nE,name:"Objects & Symbols",emojis:["👑","🎩","🧢","⛑️","📿","💄","💍","💎","🔇","🔈","🔉","🔊","📢","📣","📯","🔔","🔕","🎼","🎵","🎶","🎙️","🎚️","🎛️","🎧","📻","🎷","🎸","🎹","🎺","🎻","🪕","🥁","📱","📲","☎️","📞","📟","📠","🔋","🔌","💻","🖥️","🖨️","⌨️","🖱️","🖲️","💽","💾","💿","📀","🧮","🎥","🎞️","📽️","📺","📷","📸","📹","📼","💰","💴","💵","💶","💷","💸","💳","🧾","⚖️","🔧","🔨","⚒️","🛠️","⛏️","🔩"]},gifs:{icon:lE,name:"GIFs",emojis:[]}},cl=({isOpen:e,onClose:t,videoId:r,videoTitle:n,onCommentCountChange:s,highlightCommentId:o})=>{var M,R,I,$,te,re;const{user:a}=it(),{toast:l}=$t(),c=ot(),[d,f]=u.useState([]),[h,m]=u.useState(""),[x,y]=u.useState(null),[p,b]=u.useState(""),[w,g]=u.useState(!1),[v,_]=u.useState(!1),[j,k]=u.useState("smileys"),[C,E]=u.useState(!0),[O,B]=u.useState(!1),[q,X]=u.useState({}),[Z,L]=u.useState(!1),[ee,U]=u.useState(null),[K,D]=u.useState({}),[Q,ne]=u.useState(null),[oe,he]=u.useState(null),je=u.useRef(null),Ce=u.useRef(null),fe=u.useRef({});u.useEffect(()=>{e&&(ce(),de())},[e,r]);const de=async()=>{if(a)try{const{data:Y,error:me}=await N.from("profiles").select("user_id, username, avatar_url, display_name").eq("user_id",a.id).single();!me&&Y&&he(Y)}catch(Y){console.error("Error fetching current user profile:",Y)}};u.useEffect(()=>{if(o&&d.length>0)try{V(o)}catch(Y){console.error("Error highlighting comment:",Y)}},[o,d]),u.useEffect(()=>{if(!a)return;const Y=N.channel("current_user_profile_updates").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`user_id=eq.${a.id}`},me=>{me.new&&he(me.new)}).subscribe();return()=>{N.removeChannel(Y)}},[a]);const ce=async()=>{var Y;try{g(!0);const{data:me,error:be}=await N.from("comments").select("*").eq("video_id",r).is("parent_id",null).order("created_at",{ascending:!1});if(be){if((Y=be.message)!=null&&Y.includes('relation "comments" does not exist')){f([]),g(!1);return}throw be}if(!me||me.length===0){f([]),g(!1);return}const _e=me,Ee=[...new Set(_e.map(Be=>Be.user_id))],{data:We,error:ke}=await N.from("profiles").select("user_id, username, avatar_url, display_name").in("user_id",Ee);ke&&console.error("Error fetching profiles:",ke);const Se=(We||[]).reduce((Be,at)=>(Be[at.user_id]=at,Be),{}),Le=await Promise.all(_e.map(async Be=>{const{data:at,error:wt}=await N.from("comment_likes").select("id").eq("comment_id",Be.id),Ot=at,Oe=wt?0:(Ot==null?void 0:Ot.length)||0,{data:et,error:Pt}=await N.from("comments").select("*").eq("parent_id",Be.id).order("created_at",{ascending:!0});if(Pt)return console.error("Error fetching replies:",Pt),{...Be,like_count:Oe,profiles:Se[Be.user_id]||{username:"Unknown",avatar_url:null,display_name:null},replies:[]};const Yr=et||[],Ae=await Promise.all(Yr.map(async Ye=>{const{data:Qe,error:Lt}=await N.from("comment_likes").select("id").eq("comment_id",Ye.id),Tt=Qe,Fr=Lt?0:(Tt==null?void 0:Tt.length)||0;return{...Ye,like_count:Fr,profiles:Se[Ye.user_id]||{username:"Unknown",avatar_url:null,display_name:null}}}));return{...Be,like_count:Oe,profiles:Se[Be.user_id]||{username:"Unknown",avatar_url:null,display_name:null},replies:Ae}}));if(f(Le),a&&Le.length>0){const Be=Le.flatMap(Oe=>{var et;return[Oe.id,...((et=Oe.replies)==null?void 0:et.map(Pt=>Pt.id))||[]]}),{data:at}=await N.from("comment_likes").select("comment_id").eq("user_id",a.id).in("comment_id",Be),Ot=(at||[]).reduce((Oe,et)=>(Oe[et.comment_id]=!0,Oe),{});X(Ot)}}catch(me){console.error("Error fetching comments:",me),l({title:"Error",description:"Failed to load comments",variant:"destructive"})}finally{g(!1)}},xe=async()=>{var Y,me,be;if(!(!h.trim()||!a))try{const{data:_e,error:Ee}=await N.from("comments").insert({content:h.trim(),user_id:a.id,video_id:r}).select("*").single();if(Ee){if((Y=Ee.message)!=null&&Y.includes('relation "comments" does not exist')){l({title:"Comments not available",description:"The comments system is being set up. Please try again later.",variant:"destructive"});return}throw Ee}const{data:We}=await N.from("profiles").select("user_id, username, avatar_url, display_name").eq("user_id",a.id).single(),ke={..._e,profiles:We||{username:((me=a.email)==null?void 0:me.split("@")[0])||"Unknown",avatar_url:null,display_name:null},replies:[]};f(Se=>[ke,...Se]),s&&s(r,d.length+1),m(""),await N.rpc("increment_comment_count",{video_uuid:r});try{const{data:Se}=await N.from("videos").select("user_id").eq("id",r).single();if(Se&&Se.user_id!==a.id){const Le=We||{username:((be=a.email)==null?void 0:be.split("@")[0])||"Someone"};console.log("Sending video comment notification to video owner:",Se.user_id);const{error:Be}=await N.from("system_notifications").insert({to_user_id:Se.user_id,from_user_id:a.id,type:"video_comment",title:"New comment on your video",message:`@${Le.username} commented on your video`,video_id:r});Be?console.error("Failed to send video comment notification:",Be):console.log("Video comment notification sent successfully")}else console.log("No video comment notification needed (same user or no video data)")}catch(Se){console.warn("Failed to send video comment notification:",Se)}l({title:"Comment posted!",description:"Your comment has been added.",className:"bg-green-600 text-white border-green-700"})}catch(_e){console.error("Error posting comment:",_e),l({title:"Error",description:"Failed to post comment",variant:"destructive"})}},T=async Y=>{var me,be;if(!(!p.trim()||!a))try{const{data:_e,error:Ee}=await N.from("comments").insert({content:p.trim(),user_id:a.id,video_id:r,parent_id:Y}).select("*").single();if(Ee)throw Ee;const{data:We}=await N.from("profiles").select("user_id, username, avatar_url, display_name").eq("user_id",a.id).single(),ke={..._e,profiles:We||{username:((me=a.email)==null?void 0:me.split("@")[0])||"Unknown",avatar_url:null,display_name:null}};f(Le=>Le.map(Be=>Be.id===Y?{...Be,replies:[...Be.replies||[],ke]}:Be)),b(""),y(null);const Se=d.find(Le=>Le.id===Y);if(Se){const Le=new Set;Le.add(Se.user_id),Se.replies&&Se.replies.forEach(at=>{Le.add(at.user_id)}),Le.delete(a.id);const Be=Array.from(Le);if(Be.length>0){const{data:at}=await N.from("profiles").select("user_id, username").in("user_id",Be),wt=We||{username:((be=a.email)==null?void 0:be.split("@")[0])||"Someone"},Ot=Be.map(Oe=>{const et=Oe===Se.user_id,Pt=at==null?void 0:at.find(Yr=>Yr.user_id===Oe);return{to_user_id:Oe,from_user_id:a.id,type:et?"comment_reply":"comment_thread_activity",title:et?"New reply to your comment":"New activity in followed thread",message:et?`@${wt.username} replied to your comment`:`@${wt.username} replied in a comment thread you're following`,video_id:r}});if(Ot.length>0){console.log("Sending notifications to:",Ot.length,"users");try{const{error:Oe}=await N.from("system_notifications").insert(Ot);Oe?console.error("Failed to send thread notifications:",Oe):console.log("Thread notifications sent successfully")}catch(Oe){console.error("Exception sending thread notifications:",Oe)}}else console.log("No notifications to send (no other participants)")}}l({title:"Reply posted!",description:"Your reply has been added.",className:"bg-green-600 text-white border-green-700"})}catch(_e){console.error("Error posting reply:",_e),l({title:"Error",description:"Failed to post reply",variant:"destructive"})}},A=async Y=>{if(!a)return;const me=q[Y];X(be=>({...be,[Y]:!me})),f(be=>be.map(_e=>_e.id===Y?{..._e,like_count:me?Math.max(0,_e.like_count-1):_e.like_count+1}:_e.replies?{..._e,replies:_e.replies.map(Ee=>Ee.id===Y?{...Ee,like_count:me?Math.max(0,Ee.like_count-1):Ee.like_count+1}:Ee)}:_e));try{me?(await N.from("comment_likes").delete().eq("comment_id",Y).eq("user_id",a.id),await N.rpc("decrement_comment_likes",{comment_uuid:Y})):(await N.from("comment_likes").insert({comment_id:Y,user_id:a.id}),await N.rpc("increment_comment_likes",{comment_uuid:Y}))}catch(be){console.error("Error liking comment:",be),X(_e=>({..._e,[Y]:me})),f(_e=>_e.map(Ee=>Ee.id===Y?{...Ee,like_count:me?Ee.like_count+1:Math.max(0,Ee.like_count-1)}:Ee.replies?{...Ee,replies:Ee.replies.map(We=>We.id===Y?{...We,like_count:me?We.like_count+1:Math.max(0,We.like_count-1)}:We)}:Ee))}},G=Y=>{var me,be;x?(b(_e=>_e+Y),(me=Ce.current)==null||me.focus()):(m(_e=>_e+Y),(be=je.current)==null||be.focus())},V=Y=>{try{console.log("Highlighting comment:",Y),B(!0),d.forEach(me=>{me.replies&&me.replies.find(_e=>_e.id===Y)&&D(_e=>({..._e,[me.id]:!0}))}),setTimeout(()=>{try{ne(Y);const me=fe.current[Y];me&&(me.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{ne(null)},3e3))}catch(me){console.error("Error scrolling to comment:",me)}},500)}catch(me){console.error("Error in highlightSpecificComment:",me)}},S=Y=>AM(new Date(Y),{addSuffix:!0}),z=async Y=>{try{const{error:me}=await N.from("comments").delete().eq("id",Y);if(me)throw me;f(be=>be.filter(Ee=>Ee.id===Y?!1:(Ee.replies&&(Ee.replies=Ee.replies.filter(We=>We.id!==Y)),!0))),s&&s(r,d.length-1),L(!1),U(null),l({title:"Comment deleted",description:"Your comment has been removed.",className:"bg-green-600 text-white border-green-700"})}catch(me){console.error("Error deleting comment:",me),l({title:"Error",description:"Failed to delete comment",variant:"destructive"})}};return e?i.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 flex items-end",children:i.jsxs("div",{className:"w-full bg-black rounded-t-2xl max-h-[80vh] flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[O&&i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>B(!1),className:"text-white hover:bg-white/10",children:"←"}),i.jsxs("div",{children:[i.jsxs("h2",{className:"text-lg font-semibold text-white",children:["Comments ",d.length>0&&`(${d.length})`]}),d.length>0&&!O&&i.jsx("p",{className:"text-xs text-white/60 mt-1",children:"Most recent"}),O&&i.jsx("p",{className:"text-xs text-white/60 mt-1",children:"All comments"})]})]}),i.jsx(H,{variant:"ghost",size:"icon",onClick:t,className:"text-white hover:bg-white/10",children:i.jsx(Nr,{size:20})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:w?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto"}),i.jsx("p",{className:"text-white/60 mt-2",children:"Loading comments..."})]}):d.length===0?i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-white/60",children:"No comments yet. Be the first to comment!"})}):i.jsxs(i.Fragment,{children:[(O?d:d.slice(0,5)).map(Y=>{var me,be,_e,Ee,We;return i.jsxs("div",{ref:ke=>fe.current[Y.id]=ke,className:`space-y-3 transition-all duration-500 rounded-lg p-2 ${Q===Y.id?"bg-green-500/20 border-2 border-green-500 shadow-lg":""}`,children:[i.jsxs("div",{className:"flex gap-3",children:[i.jsxs(ut,{className:"w-8 h-8 flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>{var ke;(ke=Y.profiles)!=null&&ke.username&&(t(),c(`/profile/${Y.profiles.username}`))},children:[i.jsx(ft,{src:(me=Y.profiles)==null?void 0:me.avatar_url}),i.jsx(ht,{className:"bg-white/10 text-white text-xs",children:((_e=(be=Y.profiles)==null?void 0:be.username)==null?void 0:_e.charAt(0).toUpperCase())||"U"})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("span",{className:"text-white font-medium text-sm cursor-pointer hover:text-blue-400 transition-colors",onClick:()=>{var ke;(ke=Y.profiles)!=null&&ke.username&&(t(),c(`/profile/${Y.profiles.username}`))},children:["@",((Ee=Y.profiles)==null?void 0:Ee.username)||"Unknown"]}),i.jsx("span",{className:"text-white/50 text-xs",children:S(Y.created_at)})]}),i.jsx("div",{className:"text-white/90 text-sm leading-relaxed select-none",children:i.jsx(Rx,{content:Y.content})}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("button",{onClick:()=>A(Y.id),className:"flex items-center gap-1 text-white/60 hover:text-red-500 transition-colors",children:[i.jsx(As,{size:14,className:q[Y.id]?"text-red-500 fill-red-500":""}),i.jsx("span",{className:"text-xs",children:Y.like_count||0})]}),i.jsx("button",{onClick:()=>{y(Y.id),setTimeout(()=>{var ke;return(ke=Ce.current)==null?void 0:ke.focus()},100)},className:"text-white/60 hover:text-white text-xs transition-colors",children:"Reply"})]}),Y.user_id===(a==null?void 0:a.id)&&i.jsx("button",{onClick:()=>{U(Y.id),L(!0)},className:"text-white/60 hover:text-white transition-colors p-1",children:i.jsx(pi,{size:14})})]})]})]}),Y.replies&&Y.replies.length>0&&i.jsxs("div",{className:"ml-11",children:[!K[Y.id]&&i.jsxs("button",{onClick:()=>D(ke=>({...ke,[Y.id]:!0})),className:"text-white/60 hover:text-white text-xs mb-3 transition-colors",children:["View replies (",Y.replies.length,")"]}),(K[Y.id]?Y.replies:Y.replies.slice(0,3)).map(ke=>{var Se,Le,Be,at;return i.jsxs("div",{ref:wt=>fe.current[ke.id]=wt,className:`flex gap-3 mb-3 transition-all duration-500 rounded-lg p-2 ${Q===ke.id?"bg-green-500/20 border-2 border-green-500 shadow-lg":""}`,children:[i.jsxs(ut,{className:"w-6 h-6 flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>{var wt;(wt=ke.profiles)!=null&&wt.username&&(t(),c(`/profile/${ke.profiles.username}`))},children:[i.jsx(ft,{src:(Se=ke.profiles)==null?void 0:Se.avatar_url}),i.jsx(ht,{className:"bg-white/10 text-white text-xs",children:((Be=(Le=ke.profiles)==null?void 0:Le.username)==null?void 0:Be.charAt(0).toUpperCase())||"U"})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("span",{className:"text-white font-medium text-sm cursor-pointer hover:text-blue-400 transition-colors",onClick:()=>{var wt;(wt=ke.profiles)!=null&&wt.username&&(t(),c(`/profile/${ke.profiles.username}`))},children:["@",((at=ke.profiles)==null?void 0:at.username)||"Unknown"]}),i.jsx("span",{className:"text-white/50 text-xs",children:S(ke.created_at)})]}),i.jsx("div",{className:"text-white/90 text-sm leading-relaxed select-none",children:i.jsx(Rx,{content:ke.content})}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsxs("button",{onClick:()=>A(ke.id),className:"flex items-center gap-1 text-white/60 hover:text-red-500 transition-colors",children:[i.jsx(As,{size:14,className:q[ke.id]?"text-red-500 fill-red-500":""}),i.jsx("span",{className:"text-xs",children:ke.like_count||0})]}),ke.user_id===(a==null?void 0:a.id)&&i.jsx("button",{onClick:()=>{U(ke.id),L(!0)},className:"text-white/60 hover:text-white transition-colors p-1",children:i.jsx(pi,{size:14})})]})]})]},ke.id)}),K[Y.id]&&Y.replies.length>3&&i.jsx("button",{onClick:()=>D(ke=>({...ke,[Y.id]:!1})),className:"text-white/60 hover:text-white text-xs mb-3 transition-colors",children:"Hide replies"})]}),x===Y.id&&i.jsx("div",{className:"ml-11",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx(rt,{ref:Ce,value:p,onChange:ke=>b(ke.target.value),placeholder:`Reply to @${(We=Y.profiles)==null?void 0:We.username}...`,className:"flex-1 bg-white/10 border-white/20 text-white placeholder-white/50",onKeyPress:ke=>{ke.key==="Enter"&&!ke.shiftKey&&(ke.preventDefault(),T(Y.id))}}),i.jsx(H,{onClick:()=>T(Y.id),disabled:!p.trim(),size:"sm",className:"bg-primary hover:bg-primary/90",children:i.jsx(In,{size:16})}),i.jsx(H,{onClick:()=>{y(null),b("")},variant:"ghost",size:"sm",className:"text-white/60 hover:text-white",children:"Cancel"})]})})]},Y.id)}),!O&&d.length>5&&i.jsx("div",{className:"text-center py-4",children:i.jsxs("button",{onClick:()=>B(!0),className:"text-blue-400 hover:text-blue-300 text-sm font-medium transition-colors",children:["See all ",d.length," comments"]})})]})}),i.jsxs("div",{className:"p-4 border-t border-white/10",children:[v&&i.jsxs("div",{className:"mb-3 bg-white/10 rounded-lg max-h-64 overflow-hidden",children:[i.jsx("div",{className:"flex border-b border-white/10",children:Object.entries(Ax).map(([Y,me])=>{const be=me.icon;return i.jsx("button",{onClick:()=>k(Y),className:`flex-1 p-3 flex items-center justify-center transition-colors ${j===Y?"bg-white/20 text-white":"text-white/60 hover:text-white hover:bg-white/10"}`,children:i.jsx(be,{size:20})},Y)})}),i.jsx("div",{className:"p-3 max-h-48 overflow-y-auto",children:j==="gifs"?i.jsx(MM,{onGifSelect:Y=>G(Y)}):i.jsx("div",{className:"grid grid-cols-8 gap-2",children:(((M=Ax[j])==null?void 0:M.emojis)||[]).map((Y,me)=>i.jsx("button",{onClick:()=>G(Y),className:"text-xl hover:bg-white/10 rounded p-1 transition-colors",children:Y},me))})})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(ut,{className:"w-8 h-8 flex-shrink-0",children:[i.jsx(ft,{src:(oe==null?void 0:oe.avatar_url)||((R=a==null?void 0:a.user_metadata)==null?void 0:R.avatar_url)||void 0}),i.jsx(ht,{className:"bg-white/10 text-white text-xs",children:(($=(I=oe==null?void 0:oe.username)==null?void 0:I.charAt(0))==null?void 0:$.toUpperCase())||((re=(te=a==null?void 0:a.email)==null?void 0:te.charAt(0))==null?void 0:re.toUpperCase())||"U"})]}),i.jsxs("div",{className:"flex-1 flex gap-2",children:[i.jsx(rt,{ref:je,value:h,onChange:Y=>m(Y.target.value),placeholder:"Add a comment...",className:"flex-1 bg-white/10 border-white/20 text-white placeholder-white/50",onKeyPress:Y=>{Y.key==="Enter"&&!Y.shiftKey&&(Y.preventDefault(),xe())}}),i.jsx(H,{onClick:()=>{v?(_(!1),E(!0)):(_(!0),E(!1))},variant:"ghost",size:"sm",className:"text-white/60 hover:text-white",children:C?i.jsx(Qy,{size:20}):i.jsx(QC,{size:20})}),i.jsx(H,{onClick:xe,disabled:!h.trim(),size:"sm",className:"bg-primary hover:bg-primary/90",children:i.jsx(In,{size:16})})]})]})]}),Z&&i.jsx("div",{className:"fixed inset-0 z-[101] bg-black/80 flex items-center justify-center p-4",children:i.jsx("div",{className:"bg-black/90 rounded-lg max-w-sm w-full mx-4 border border-white/20",children:i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"text-white font-semibold mb-2",children:"Delete Comment"}),i.jsx("p",{className:"text-white/70 text-sm mb-4",children:"Are you sure you want to delete this comment? This action cannot be undone."}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(H,{onClick:()=>{L(!1),U(null)},variant:"outline",className:"flex-1 bg-white/10 hover:bg-white/20 text-white border-white/20",children:"Cancel"}),i.jsx(H,{onClick:()=>ee&&z(ee),className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:"Delete"})]})]})})})]})}):null};function Ko(){const e=localStorage.getItem("wp_jwt_token"),t=localStorage.getItem("wp_jwt_validated"),r=localStorage.getItem("wp_jwt_validation_time");if(e&&t==="true"&&r){const n=Date.now()-parseInt(r),s=24*60*60*1e3;return n>s?(localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time"),null):e}return null}async function O1(){const e=Ko();if(!e)throw new Error("Not authenticated with TrinEPay. Please sign in again to refresh your session.");try{const t=await fetch("https://theronm18.sg-host.com/wp-json/ttpaypal/v1/user-limits",{headers:{Authorization:`Bearer ${e}`,Accept:"application/json"}});if(!t.ok)throw t.status===401||t.status===403?(localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time"),new Error("Authentication expired. Please sign in again.")):new Error("Failed to fetch user limits");return await t.json()}catch(t){throw console.error("User limits error:",t),t}}async function L1({email:e,password:t,passcode:r}){const n=Ko();if(!n)throw new Error("Not authenticated with TrinEPay. Please sign in again to refresh your session.");try{const s=await fetch("https://theronm18.sg-host.com/wp-json/ttpaypal/v1/link",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`,Accept:"application/json"},mode:"cors",credentials:"omit",body:JSON.stringify({email:e,password:t,passcode:r})});if(!s.ok){let o="Failed to link wallet";try{const a=await s.json();o=a.message||a.error||o}catch{}throw(s.status===401||s.status===403)&&(localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time"),o="Authentication expired. Please sign in again."),new Error(o)}return await s.json()}catch(s){throw console.error("Wallet link error:",s),s}}async function F1({amount:e}){var r;const t=Ko();if(!t)throw new Error("Not authenticated with TrinEPay. Please sign in again to refresh your session.");try{const n=await fetch("https://theronm18.sg-host.com/wp-json/ttpaypal/v1/deposit",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`,Accept:"application/json"},mode:"cors",credentials:"omit",body:JSON.stringify({amount:e})});if(!n.ok){let o="Failed to deposit";try{const a=await n.json();o=a.message||a.error||o}catch{}throw(n.status===401||n.status===403)&&(localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time"),o="Authentication expired. Please sign in again."),new Error(o)}const s=await n.json();try{const{supabase:o}=await Ir(async()=>{const{supabase:l}=await Promise.resolve().then(()=>Zd);return{supabase:l}},void 0),a=(r=JSON.parse(localStorage.getItem("sb-supabase-auth-token")||"{}"))==null?void 0:r.user;if(a!=null&&a.id){const l=await Nn(a.id);await Sl(l)}}catch(o){console.warn("Auto-sync after deposit failed:",o)}return s}catch(n){throw console.error("Deposit error:",n),n}}async function z1({amount:e}){var r;const t=Ko();if(!t)throw new Error("Not authenticated with TrinEPay. Please sign in again to refresh your session.");try{const n=await fetch("https://theronm18.sg-host.com/wp-json/ttpaypal/v1/withdraw",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`,Accept:"application/json"},body:JSON.stringify({amount:e})});if(!n.ok){let o="Failed to withdraw";try{const a=await n.json();o=a.message||a.error||o}catch{}throw(n.status===401||n.status===403)&&(localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time"),o="Authentication expired. Please sign in again."),new Error(o)}const s=await n.json();try{const{supabase:o}=await Ir(async()=>{const{supabase:l}=await Promise.resolve().then(()=>Zd);return{supabase:l}},void 0),a=(r=JSON.parse(localStorage.getItem("sb-supabase-auth-token")||"{}"))==null?void 0:r.user;if(a!=null&&a.id){const l=await Nn(a.id);await Sl(l)}}catch(o){console.warn("Auto-sync after withdrawal failed:",o)}return s}catch(n){throw console.error("Withdraw error:",n),n}}async function $1(){const e=Ko();if(!e)throw new Error("Not authenticated with TrinEPay. Please sign in again to refresh your session.");try{const t=await fetch("https://theronm18.sg-host.com/wp-json/ttpaypal/v1/unlink",{method:"POST",headers:{Authorization:`Bearer ${e}`,Accept:"application/json"}});if(t.ok)return localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time"),await t.json();if(t.status===404)return console.log("TrinEPay unlink endpoint not found, handling locally"),localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time"),{success:!0,message:"Wallet unlinked locally"};{let r="Failed to unlink wallet";try{const n=await t.json();r=n.message||n.error||r}catch{}throw(t.status===401||t.status===403)&&(localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time"),r="Authentication expired. Please sign in again."),new Error(r)}}catch(t){return console.log("Error calling TrinEPay unlink endpoint, handling locally:",t),localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time"),{success:!0,message:"Wallet unlinked locally"}}}async function Nn(e){const{supabase:t}=await Ir(async()=>{const{supabase:r}=await Promise.resolve().then(()=>Zd);return{supabase:r}},void 0);try{const{data:r,error:n}=await t.from("trincredits_transactions").select("transaction_type, amount").eq("user_id",e).eq("status","completed");if(n)throw console.error("Error fetching transactions:",n),new Error("Failed to fetch transaction history");let s=0;return r==null||r.forEach(o=>{o.transaction_type==="deposit"||o.transaction_type==="refund"||o.transaction_type==="reward"?s+=o.amount:o.transaction_type==="withdrawal"&&(s-=o.amount)}),s}catch(r){throw console.error("Error calculating balance:",r),new Error("Failed to calculate balance")}}async function _i({userId:e,transactionType:t,amount:r,description:n,referenceId:s}){const{supabase:o}=await Ir(async()=>{const{supabase:a}=await Promise.resolve().then(()=>Zd);return{supabase:a}},void 0);try{const{data:a,error:l}=await o.from("profiles").select("trini_credits").eq("user_id",e).single();if(l)throw console.error("Error fetching current balance:",l),new Error("Failed to fetch current balance");const c=a.trini_credits||0;let d=c;t==="deposit"||t==="refund"||t==="reward"?d=c+r:t==="withdrawal"&&(d=c-r);const{data:f,error:h}=await o.from("trincredits_transactions").insert({user_id:e,transaction_type:t,amount:r,balance_before:c,balance_after:d,description:n,reference_id:s,status:"completed"}).select().single();if(h)throw console.error("Error inserting transaction:",h),new Error("Failed to record transaction");const{error:m}=await o.from("profiles").update({trini_credits:d}).eq("user_id",e);if(m)throw console.error("Error updating balance:",m),new Error("Failed to update balance");try{await Sl(d)}catch(x){console.warn("Failed to sync balance to WordPress:",x)}return f}catch(a){throw console.error("Error recording transaction:",a),new Error("Failed to record transaction")}}async function Sl(e){const t=Ko();if(!t)throw new Error("No WordPress token available");try{const r=await fetch("https://theronm18.sg-host.com/wp-json/ttpaypal/v1/sync-trinicredit",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`,Accept:"application/json"},body:JSON.stringify({balance:e})});if(!r.ok)throw new Error(`WordPress sync failed: ${r.status}`);return await r.json()}catch(r){throw console.error("WordPress TriniCredit sync error:",r),r}}async function U1(e,t){try{const r=await Nn(e);if(r<t)return{success:!1,error:`Insufficient balance. You have TT${r.toFixed(2)} but need TT${t.toFixed(2)}`};await _i({userId:e,transactionType:"withdrawal",amount:t,description:"Debit for Boost",referenceId:`boost_${Date.now()}`});try{const n=await Nn(e);await Sl(n)}catch(n){console.warn("Auto-sync after deduction failed:",n)}return{success:!0}}catch(r){return console.error("Error deducting balance:",r),{success:!1,error:r instanceof Error?r.message:"Failed to deduct balance"}}}async function V1(e){try{const t=await Nn(e);return await Sl(t),{success:!0,balance:t}}catch(t){throw console.error("Error fixing WordPress balance:",t),t}}const dd=Object.freeze(Object.defineProperty({__proto__:null,deductTrincredits:U1,depositToApp:F1,fixWordPressBalance:V1,getTrincreditsBalance:Nn,getUserLimits:O1,linkWallet:L1,recordTrincreditsTransaction:_i,unlinkWallet:$1,withdrawToWallet:z1},Symbol.toStringTag,{value:"Module"})),W1=async()=>{try{const{data:e,error:t}=await N.from("profiles").select("user_id").eq("is_admin",!0).single();return t?(console.error("Error getting admin user:",t),null):(e==null?void 0:e.user_id)||null}catch(e){return console.error("Error getting admin user:",e),null}},wa={1:15,3:40,7:85,14:150,30:250},DM=(e,t)=>{const r=new Date(e);return r.setDate(r.getDate()+t),r},IM=async(e,t,r)=>{try{const n=await W1();if(!n)return console.warn("Admin account not found for boost transaction tracking"),{success:!0};try{const{error:s}=await N.from("boost_transactions").insert({sponsored_ad_id:r,user_id:t,admin_id:n,amount:e,transaction_type:"boost_payment",status:"completed"});s?console.error("Error recording boost transaction (non-critical):",s):console.log("Boost transaction recorded successfully")}catch(s){console.error("Exception recording boost transaction (non-critical):",s)}return{success:!0}}catch(n){return console.error("Error in transferBoostPaymentToAdmin:",n),{success:!0}}},of=async e=>{try{const t=wa[e.boost_duration],r=new Date,n=DM(r,e.boost_duration),{data:s,error:o}=await N.from("sponsored_ads").insert({...e,boost_cost:t,campaign_start:r.toISOString(),campaign_end:n.toISOString(),status:e.status||"pending"}).select("id").single();return o?(console.error("Error creating sponsored ad:",o),{success:!1,error:"Failed to create sponsored ad"}):{success:!0,adId:s.id}}catch(t){return console.error("Error creating sponsored ad:",t),{success:!1,error:"Failed to create sponsored ad"}}},B1=async e=>{try{const{data:t,error:r}=await N.from("sponsored_ads").select("*").eq("user_id",e).order("created_at",{ascending:!1});return r?(console.error("Error fetching user sponsored ads:",r),[]):t||[]}catch(t){return console.error("Error fetching user sponsored ads:",t),[]}},OM=async()=>{try{const{data:e,error:t}=await N.from("sponsored_ads").select("*").order("created_at",{ascending:!1});if(t)return console.error("Error fetching sponsored ads:",t),[];if(!e||e.length===0)return[];const r=[...new Set(e.map(l=>l.user_id).filter(Boolean))],{data:n,error:s}=await N.from("profiles").select("user_id, username, display_name, avatar_url").in("user_id",r);if(s)return console.error("Error fetching profiles:",s),e;const o=new Map;return n==null||n.forEach(l=>{o.set(l.user_id,l)}),e.map(l=>({...l,profiles:o.get(l.user_id)||null}))}catch(e){return console.error("Error fetching all sponsored ads:",e),[]}},LM=async e=>{try{const{data:t,error:r}=await N.from("sponsored_ads").select("boost_cost, user_id, title").eq("id",e).single();if(r||!t)return console.error("Error fetching ad details:",r),{success:!1,error:"Failed to fetch ad details"};const{data:n,error:s}=await N.from("profiles").select("username, display_name").eq("user_id",t.user_id).single(),o=(n==null?void 0:n.username)||(n==null?void 0:n.display_name)||"Unknown User",a=await W1();if(!a)return{success:!1,error:"Admin account not found"};const{error:l}=await N.from("sponsored_ads").update({status:"approved",updated_at:new Date().toISOString()}).eq("id",e);if(l)return console.error("Error approving sponsored ad:",l),{success:!1,error:"Failed to approve ad"};try{await _i({userId:a,transactionType:"deposit",amount:t.boost_cost,description:`Boost Credit from ${o}`,referenceId:`boost_revenue_${e}`})}catch(c){return console.error("Error crediting admin:",c),{success:!1,error:"Failed to process admin payment. Please try again."}}return{success:!0}}catch(t){return console.error("Error approving sponsored ad:",t),{success:!1,error:"Failed to approve ad"}}},FM=async e=>{try{const{data:t,error:r}=await N.from("sponsored_ads").select("boost_cost, user_id, title").eq("id",e).single();if(r||!t)return console.error("Error fetching ad details:",r),{success:!1,error:"Failed to fetch ad details"};const{error:n}=await N.from("sponsored_ads").update({status:"rejected",updated_at:new Date().toISOString()}).eq("id",e);if(n)return console.error("Error rejecting sponsored ad:",n),{success:!1,error:"Failed to reject ad"};try{await _i({userId:t.user_id,transactionType:"refund",amount:t.boost_cost,description:`Boost Refund - Ad Rejected: "${t.title}"`,referenceId:`boost_refund_${e}`})}catch(s){return console.error("Error refunding user:",s),{success:!1,error:"Failed to process user refund. Please try again."}}return{success:!0}}catch(t){return console.error("Error rejecting sponsored ad:",t),{success:!1,error:"Failed to reject ad"}}},zM=async(e,t,r=0)=>{try{await N.from("ad_impressions").insert({sponsored_ad_id:e,viewer_id:t,view_duration:r}),await N.rpc("increment_ad_impressions",{ad_id:e})}catch(n){console.error("Error tracking ad impression:",n)}},$M=async(e,t)=>{try{await N.from("ad_clicks").insert({sponsored_ad_id:e,viewer_id:t}),await N.rpc("increment_ad_clicks",{ad_id:e})}catch(r){console.error("Error tracking ad click:",r)}},UM=async(e,t)=>{try{const{data:r,error:n}=await N.from("sponsored_ads").select("user_id, video_url, thumbnail_url, status, boost_cost, title").eq("id",e).single();if(n||!r)return console.error("Error fetching ad details:",n),{success:!1,error:"Ad not found"};if(r.user_id!==t)return{success:!1,error:"You can only delete your own ads"};if(r.status==="active"||r.status==="approved")try{await _i({userId:t,transactionType:"refund",amount:r.boost_cost,description:`Boost Refund - Ad Deleted: "${r.title}"`,referenceId:`ad_delete_${e}`})}catch(o){return console.error("Error refunding user:",o),{success:!1,error:"Failed to process refund. Please contact support."}}const{error:s}=await N.from("sponsored_ads").delete().eq("id",e);if(s)return console.error("Error deleting sponsored ad:",s),{success:!1,error:"Failed to delete ad"};try{if(r.video_url){const o=r.video_url.split("/").pop();o&&await N.storage.from("limeytt-uploads").remove([o])}if(r.thumbnail_url){const o=r.thumbnail_url.split("/").pop();o&&await N.storage.from("limeytt-uploads").remove([o])}}catch(o){console.error("Error deleting files from storage:",o)}return{success:!0}}catch(r){return console.error("Error deleting sponsored ad:",r),{success:!1,error:"Failed to delete ad"}}},Mx=({src:e,className:t,globalMuted:r,videoId:n,user:s,onViewRecorded:o,...a})=>{const l=u.useRef(null),[c,d]=u.useState(!1),[f,h]=u.useState(!1),[m,x]=u.useState(!1),y=u.useRef(null),p=async()=>{try{"wakeLock"in navigator&&(y.current=await navigator.wakeLock.request("screen"))}catch(g){console.error("Failed to request wake lock:",g)}},b=async()=>{if(y.current)try{await y.current.release(),y.current=null}catch(g){console.error("Failed to release wake lock:",g)}};u.useEffect(()=>{const g=l.current;if(!g)return;g.muted=!0;const v=new window.IntersectionObserver(([j])=>{j.isIntersecting&&j.intersectionRatio>=.5?(d(!0),g.play().catch(k=>{})):(d(!1),g.pause(),g.currentTime=0)},{threshold:.5});v.observe(g);const _=setTimeout(()=>{g.muted=r},1e3);return()=>{v.unobserve(g),clearTimeout(_)}},[r]),u.useEffect(()=>{if(c&&f&&!m&&n){const g=setTimeout(async()=>{try{const{data:v,error:_}=await N.rpc("record_video_view",{video_uuid:n});_||(x(!0),v&&o&&o(n))}catch{}},5e3);return()=>{clearTimeout(g)}}},[c,f,m,n,o]),u.useEffect(()=>{l.current&&(l.current.muted=r)},[r]),u.useEffect(()=>{const g=l.current;if(!g)return;const v=()=>{h(!0),p()},_=()=>{h(!1),b()};return g.addEventListener("play",v),g.addEventListener("pause",_),()=>{g.removeEventListener("play",v),g.removeEventListener("pause",_),b()}},[]);const w=()=>{l.current&&(f?l.current.pause():l.current.play())};return i.jsxs("div",{className:"relative w-full h-full",children:[i.jsx("video",{ref:l,src:e,loop:!0,muted:r,playsInline:!0,className:t,...a}),c&&!f&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20",children:i.jsx("button",{onClick:g=>{g.stopPropagation(),w()},className:"w-16 h-16 flex items-center justify-center rounded-full bg-black/60 hover:bg-black/80 text-white","aria-label":"Play","data-control":!0,children:i.jsx(Mo,{size:32})})})]})},VM=()=>{var Ai;const e=un(),[t,r]=u.useState("All"),[n,s]=u.useState(null),[o,a]=u.useState([]),[l,c]=u.useState(!0),[d,f]=u.useState(null),[h,m]=u.useState(0),[x,y]=u.useState(!1),[p,b]=u.useState(""),[w,g]=u.useState(null),[v,_]=u.useState(!1);u.useState({}),u.useState({});const[j,k]=u.useState({}),[C,E]=u.useState({}),[O,B]=u.useState({}),[q,X]=u.useState({}),[Z,L]=u.useState({}),[ee,U]=u.useState({}),[K,D]=u.useState({}),[Q,ne]=u.useState(!1),[oe,he]=u.useState({}),[je,Ce]=u.useState(null),[fe,de]=u.useState(!1),[ce,xe]=u.useState(null),[T,A]=u.useState([]),[G,V]=u.useState(!1),[S,z]=u.useState(null),[M,R]=u.useState({});u.useRef({});const I=u.useRef(null),$=u.useRef(null),te=ot();it();const{user:re}=it();u.useEffect(()=>{const F=document.createElement("style");return F.textContent=`
      @keyframes fire-glow {
        0%, 100% { 
          filter: drop-shadow(0 0 5px #ff6b35) drop-shadow(0 0 10px #ff8c42) drop-shadow(0 0 15px #ffa726);
          transform: rotate(-1deg) scale(1);
        }
        25% { 
          filter: drop-shadow(0 0 8px #ff5722) drop-shadow(0 0 15px #ff7043) drop-shadow(0 0 20px #ffab40);
          transform: rotate(1deg) scale(1.05);
        }
        50% { 
          filter: drop-shadow(0 0 6px #ff6b35) drop-shadow(0 0 12px #ff8c42) drop-shadow(0 0 18px #ffa726);
          transform: rotate(-0.5deg) scale(1.02);
        }
        75% { 
          filter: drop-shadow(0 0 9px #ff5722) drop-shadow(0 0 16px #ff7043) drop-shadow(0 0 22px #ffab40);
          transform: rotate(0.5deg) scale(1.03);
        }
      }
      
      .animate-fire {
        animation: fire-glow 2s ease-in-out infinite;
        display: inline-block;
        transform-origin: center bottom;
      }
    `,document.head.appendChild(F),()=>{document.head.removeChild(F)}},[]);const[Y,me]=yp();$t();const be=["Anime","Bar Limes","Cartoon","Carnival","Comedy","Dance","Dancehall","DIY Projects","Educational","Events","Fete","Funny Vids","HOW TOs","Local News","Music Vids","Parties","Soca","Trini Celebs"],_e=ge.useMemo(()=>n?o.filter(F=>F.description&&F.description.toLowerCase().includes(`#${n.toLowerCase()}`)):t&&t!=="All"?o.filter(F=>F.category===t):o,[o,t,n]);u.useEffect(()=>{wt()},[t]),u.useEffect(()=>{const F=Y.get("video");if(F&&o.length>0){const se=o.findIndex(ue=>ue.id===F);se!==-1&&(setTimeout(()=>{const ue=document.querySelector(`[data-video-id="${F}"]`);ue&&(ue.scrollIntoView({behavior:"smooth",block:"start"}),m(se))},500),me(ue=>{const pe=new URLSearchParams(ue);return pe.delete("video"),pe}))}},[o,Y,me]),u.useEffect(()=>{x&&$.current&&$.current.focus()},[x]);const Ee=async F=>{if(!(!F||F.length===0))try{const se=[...new Set(F.map(we=>we.user_id))],{data:ue,error:pe}=await N.from("profiles").select("user_id, username, avatar_url").in("user_id",se);if(pe)return;if(ue&&ue.length>0){const we=new Map;ue.forEach(Te=>we.set(Te.user_id,Te));const ve=F.map(Te=>{const qe=we.get(Te.user_id);return qe?{...Te,profiles:{...Te.profiles,username:qe.username,avatar_url:qe.avatar_url},avatar_url:qe.avatar_url}:Te});w!==null?g(ve):a(ve)}}catch{}};u.useEffect(()=>{if(!re)return;const F=N.channel("profiles_changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles"},se=>{Ee(w!==null?w:o)}).subscribe(se=>{});return()=>{N.removeChannel(F)}},[re,o,w]),u.useEffect(()=>{if(!re)return;const F=N.channel("videos_realtime").on("postgres_changes",{event:"UPDATE",schema:"public",table:"videos"},async we=>{try{if(we.new&&we.new.id){const ve=we.new.id,Te=we.new.like_count||0,qe=we.new.share_count||0,Rt=we.new.save_count||0;B(bt=>({...bt,[ve]:Te})),X(bt=>({...bt,[ve]:qe})),L(bt=>({...bt,[ve]:Rt}))}}catch(ve){console.error("Unexpected error in videos realtime handler:",ve)}}).subscribe(),se=N.channel("likes_realtime").on("postgres_changes",{event:"*",schema:"public",table:"video_likes"},async we=>{var ve;try{if(we.eventType==="INSERT"&&((ve=we.new)==null?void 0:ve.user_id)===re.id)E(Te=>({...Te,[we.new.video_id]:!0}));else if(we.eventType==="DELETE"&&we.old&&we.old.video_id){const Te=we.old.video_id;E(qe=>({...qe,[Te]:!1}))}}catch(Te){console.error("Error in likes realtime handler:",Te)}}).subscribe(),ue=N.channel("video_views_realtime").on("postgres_changes",{event:"INSERT",schema:"public",table:"video_views"},async we=>{const ve=we.new;if(ve&&ve.video_id)try{const{data:Te,error:qe}=await N.rpc("get_genuine_view_count",{video_uuid:ve.video_id});U(!qe&&typeof Te=="number"?Rt=>({...Rt,[ve.video_id]:Te}):Rt=>{const bt=(Rt[ve.video_id]||0)+1;return{...Rt,[ve.video_id]:bt}})}catch(Te){console.error("Error getting genuine view count:",Te),U(qe=>{const Rt=(qe[ve.video_id]||0)+1;return{...qe,[ve.video_id]:Rt}})}}).subscribe(),pe=N.channel("saved_videos_realtime").on("postgres_changes",{event:"*",schema:"public",table:"saved_videos"},async we=>{var ve;try{we.eventType==="INSERT"&&((ve=we.new)==null?void 0:ve.user_id)===re.id?he(Te=>({...Te,[we.new.video_id]:!0})):we.eventType==="DELETE"&&we.old&&we.old.user_id===re.id&&he(Te=>({...Te,[we.old.video_id]:!1}))}catch(Te){console.error("Error in saved_videos realtime handler:",Te)}}).subscribe();return()=>{N.removeChannel(F),N.removeChannel(se),N.removeChannel(ue),N.removeChannel(pe)}},[re,o]),u.useEffect(()=>{},[o,l]),u.useEffect(()=>{var F;if((F=e.state)!=null&&F.showCommentsForVideo&&o.length>0){const se=e.state.showCommentsForVideo;Ce(se),te(e.pathname,{replace:!0,state:{}})}},[e.state,o,te,e.pathname]);const We=async F=>{if(F&&F.preventDefault(),!p.trim()){g(null);return}_(!0);let se=N.from("videos").select("*, profiles!inner(username, avatar_url)").order("created_at",{ascending:!1}).limit(100);if(p.startsWith("#")){const we=p.replace("#","").toLowerCase();se=se.ilike("description",`%#${we}%`)}else if(p.startsWith("@")){const we=p.replace("@","").toLowerCase();se=se.ilike("profiles.username",`%${we}%`)}else se=se.or(`title.ilike.%${p}%,description.ilike.%${p}%,category.ilike.%${p}%,tags.ilike.%${p}%,profiles.username.ilike.%${p}%`);const{data:ue,error:pe}=await se;if(pe){let we=N.from("videos").select("*").order("created_at",{ascending:!1}).limit(50);if(p.startsWith("#")){const qe=p.replace("#","").toLowerCase();we=we.ilike("description",`%#${qe}%`)}else if(p.startsWith("@")){const qe=p.replace("@","").toLowerCase();we=we.ilike("username",`%${qe}%`)}else we=we.or(`title.ilike.%${p}%,description.ilike.%${p}%,category.ilike.%${p}%,tags.ilike.%${p}%,username.ilike.%${p}%`);const{data:ve,error:Te}=await we;if(Te)g([]);else if(ve&&ve.length>0){const qe=[...new Set(ve.map(hn=>hn.user_id))],{data:Rt}=await N.from("profiles").select("user_id, username, avatar_url").in("user_id",qe),bt=new Map;Rt&&Rt.forEach(hn=>bt.set(hn.user_id,hn));const Me=ve.map(hn=>({...hn,profiles:bt.get(hn.user_id)||null}));g(Me),await Ee(Me)}else g([])}else g(ue||[]),await Ye(ue||[]),await Fr(ue||[]),await Ee(ue||[]);_(!1)},ke=async()=>{try{const{data:F,error:se}=await N.rpc("get_active_sponsored_ads");return se?[]:(F||[]).map(pe=>({...pe,isSponsored:!0}))}catch{return[]}},Se=(F,se)=>{if(se.length===0)return F;const ue=[];let pe=0;const we=()=>Math.floor(Math.random()*3)+3;let ve=we();if(F.forEach((Te,qe)=>{ue.push(Te),t==="All"&&qe>=ve&&pe<se.length&&(ue.push(se[pe]),pe++,ve=qe+we())}),t==="All"&&pe<se.length)for(;pe<se.length;)ue.push(se[pe]),pe++;return ue},Le=F=>{if(M[F.id])return;const se=F.duration||30;R(pe=>({...pe,[F.id]:se}));const ue=setInterval(()=>{R(pe=>{const we=(pe[F.id]||0)-1;return we<=0?(clearInterval(ue),{...pe,[F.id]:0}):{...pe,[F.id]:we}})},1e3)},Be=async F=>{await $M(F.id,re==null?void 0:re.id),z(F),V(!0)},at=async(F,se=0)=>{await zM(F.id,re==null?void 0:re.id,se)},wt=async()=>{try{c(!0),f(null);let F=N.from("videos").select("*, like_count, view_count, share_count, save_count").order("created_at",{ascending:!1}).limit(100);t!=="All"&&(F=F.eq("category",t));const{data:se,error:ue}=await F;if(ue){f("Failed to load videos. Please try again.");return}const pe={},we={},ve={},Te={};se==null||se.forEach(Me=>{pe[Me.id]=Me.like_count||0,we[Me.id]=Me.share_count||0,ve[Me.id]=Me.save_count||0,Te[Me.id]=0}),B(Me=>({...Me,...pe})),X(Me=>({...Me,...we})),L(Me=>({...Me,...ve})),D(Me=>({...Me,...Te}));const qe=(se||[]).filter(Me=>{var Ze;return!((Ze=Me.profiles)!=null&&Ze.deactivated)}),Rt=await ke();A(Rt);const bt=Se(qe,Rt);a(bt),await Yr(qe),await Ye(qe),await Qe(qe),await Fr(qe),await Lt(qe),await Ee(qe)}catch{f("Failed to load videos. Please try again.")}finally{c(!1)}},Ot=F=>{xe(F),de(!0)},Oe=async(F,se)=>{if(re)try{const{data:ue}=await N.from("follows").select("*").eq("follower_id",re.id).eq("following_id",F).single();if(ue)return await N.from("follows").delete().eq("follower_id",re.id).eq("following_id",F),k(pe=>({...pe,[F]:!1})),!1;{const{error:pe}=await N.from("follows").insert({follower_id:re.id,following_id:F});return pe?(pe&&pe.code,!1):(k(we=>({...we,[F]:!0})),!0)}}catch{return j[F]||!1}},et=F=>F.username?F.username:F.user_id?`user_${F.user_id.replace(/[^a-zA-Z0-9]/g,"").slice(0,8)}`:"unknown_user",Pt=F=>{const se=et(F);return re&&F.user_id===re.id?"/profile":`/profile/${se}`},Yr=async F=>{if(re)try{const se=F.map(ve=>ve.user_id).filter(ve=>ve!==re.id);if(se.length===0)return;const{data:ue}=await N.from("follows").select("following_id").eq("follower_id",re.id).in("following_id",se),pe=new Set((ue==null?void 0:ue.map(ve=>ve.following_id))||[]),we={};F.forEach(ve=>{ve.user_id!==re.id&&(we[ve.user_id]=pe.has(ve.user_id))}),k(ve=>({...ve,...we}))}catch{}},Ae=async F=>{if(re)try{const se=C[F]||!1,ue=O[F]||0;E(ve=>({...ve,[F]:!se})),B(ve=>({...ve,[F]:se?Math.max(0,ue-1):ue+1}));const{data:pe,error:we}=await N.rpc("toggle_video_like",{video_uuid:F});if(we){E(ve=>({...ve,[F]:se})),B(ve=>({...ve,[F]:ue}));return}}catch{}},Ye=async F=>{if(re)try{const se=F.map(ve=>ve.id);if(se.length===0)return;const ue=new Set,pe=5;for(let ve=0;ve<se.length;ve+=pe){const Te=se.slice(ve,ve+pe);await Promise.all(Te.map(async qe=>{try{const{data:Rt,error:bt}=await N.from("video_likes").select("id").eq("video_id",qe).eq("user_id",re.id);!bt&&Rt&&Rt.length>0&&ue.add(qe)}catch{}}))}const we={};F.forEach(ve=>{we[ve.id]=ue.has(ve.id)}),E(ve=>({...ve,...we}))}catch{}},Qe=async F=>{try{const se={};for(const ue of F)try{const{data:pe,error:we}=await N.rpc("get_genuine_view_count",{video_uuid:ue.id});!we&&typeof pe=="number"?se[ue.id]=pe:se[ue.id]=ue.view_count||0}catch{se[ue.id]=ue.view_count||0}U(ue=>({...ue,...se}))}catch(se){console.error("Error checking view counts:",se)}},Lt=async F=>{try{const se={};for(const ue of F)try{const{count:pe,error:we}=await N.from("comments").select("*",{count:"exact",head:!0}).eq("video_id",ue.id).is("parent_id",null);!we&&typeof pe=="number"?se[ue.id]=pe:se[ue.id]=0}catch{se[ue.id]=0}D(ue=>({...ue,...se}))}catch(se){console.error("Error checking comment counts:",se);const ue={};F.forEach(pe=>{ue[pe.id]=0}),D(pe=>({...pe,...ue}))}},Tt=async F=>{try{const{data:se,error:ue}=await N.rpc("get_genuine_view_count",{video_uuid:F});U(!ue&&typeof se=="number"?pe=>({...pe,[F]:se}):pe=>({...pe,[F]:(pe[F]||0)+1}))}catch(se){console.error("Error updating view count:",se),U(ue=>({...ue,[F]:(ue[F]||0)+1}))}},Fr=async F=>{if(!(!re||F.length===0))try{const se=F.map(Te=>Te.id),pe=(await N.from("saved_videos").select("video_id").eq("user_id",re.id).in("video_id",se)).data||[],we=new Set(pe.map(Te=>Te.video_id)),ve={};F.forEach(Te=>{Te&&Te.id&&(ve[Te.id]=we.has(Te.id))}),he(ve)}catch(se){console.error("Error checking saved status:",se)}},Gs=async F=>{if(re)try{if(oe[F]){const{error:se}=await N.from("saved_videos").delete().eq("user_id",re.id).eq("video_id",F);if(se)throw se;he(ue=>({...ue,[F]:!1}))}else{const{error:se}=await N.from("saved_videos").insert({user_id:re.id,video_id:F});if(se)throw se;he(ue=>({...ue,[F]:!0}))}}catch(se){console.error("Error saving/unsaving video:",se),he(ue=>({...ue,[F]:!ue[F]}))}};function Zn(F){return F.split(/(#[\w-]+)/g).map((se,ue)=>/^#[\w-]+$/.test(se)?i.jsx("button",{className:"text-lime-400 hover:underline font-semibold",onClick:pe=>{pe.stopPropagation(),s(se.substring(1))},children:se},ue):se)}const Pl=n||t&&t!=="All";return i.jsxs("div",{className:"min-h-screen bg-black",children:[i.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10 p-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-2xl font-black text-white tracking-wider logo-text-glow",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:"900",letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))"},children:"Limey"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>y(F=>!F),"aria-label":"Search",className:"text-white hover:bg-white/10",children:i.jsx(Dv,{size:20})}),i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>te("/trending"),className:"text-white hover:bg-white/10","aria-label":"Trending",children:i.jsx("span",{className:"animate-fire text-xl",children:"🔥"})}),i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>te("/live"),className:"text-white hover:bg-white/10","aria-label":"Live",children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),i.jsx("span",{className:"text-sm font-medium",children:"LIVE"})]})}),i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>te("/settings"),className:"text-white hover:bg-white/10",children:i.jsx(Rd,{size:16})})]})]}),x&&i.jsxs(i.Fragment,{children:[i.jsxs("form",{onSubmit:We,className:"flex flex-col gap-2 mt-4 mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{ref:$,type:"text",className:"flex-1 p-2 border rounded text-base bg-black/50 text-white border-white/20 placeholder-white/50",placeholder:"Search videos by title or hashtags...",value:p,onChange:F=>b(F.target.value)}),i.jsx(H,{type:"submit",variant:"default",size:"icon","aria-label":"Go",disabled:v,children:v?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):i.jsx(Dv,{size:18})}),i.jsx(H,{type:"button",variant:"ghost",size:"icon",onClick:()=>{y(!1),b(""),g(null)},"aria-label":"Close",className:"text-white hover:bg-white/10",children:i.jsx(Nr,{size:18})})]}),i.jsx("div",{className:"overflow-x-auto pb-2 -mx-2 px-2",children:i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(H,{variant:"outline",size:"sm",className:`whitespace-nowrap bg-black border-white text-white hover:bg-black/80 hover:text-lime-400 ${t==="All"?"border-lime-400 text-lime-400":"border-white/50"}`,onClick:()=>{r("All"),s(null),g(null)},children:"All"},"all"),be.map(F=>i.jsx(H,{variant:"outline",size:"sm",className:`whitespace-nowrap bg-black border-white text-white hover:bg-black/80 hover:text-lime-400 ${t===F?"border-lime-400 text-lime-400":"border-white/50"}`,onClick:()=>{r(F),s(null),g(null)},children:F},F))]})})]}),Pl&&i.jsx("div",{className:"flex justify-start mb-2",children:i.jsxs(H,{variant:"ghost",className:"bg-black/70 text-white rounded-full px-4 py-2 flex items-center gap-2 shadow-lg hover:bg-black/80 border-none",onClick:()=>{s(null),r("All")},children:[i.jsx(Bn,{size:20,className:"text-white"}),i.jsx("span",{className:"font-semibold",children:"All Videos"})]})})]})]}),i.jsx("div",{className:"fixed top-20 right-4 z-40",children:i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>ne(F=>!F),"aria-label":"Toggle Global Mute",className:"w-12 h-12 rounded-full p-0 text-white hover:bg-white/10",children:Q?i.jsx(rp,{size:24,className:"text-white"}):i.jsx(tp,{size:24,className:"text-white"})})}),Pl&&!x&&i.jsx("div",{className:"fixed top-16 left-4 z-50",children:i.jsxs(H,{variant:"ghost",className:"bg-black/70 text-white rounded-full px-4 py-2 flex items-center gap-2 shadow-lg hover:bg-black/80 border-none",onClick:()=>{s(null),r("All")},children:[i.jsx(Bn,{size:20,className:"text-white"}),i.jsx("span",{className:"font-semibold",children:"All Videos"})]})}),i.jsx("div",{ref:I,className:"h-screen overflow-y-auto snap-y snap-mandatory",style:{scrollSnapType:"y mandatory"},children:l?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):d?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("p",{className:"text-red-400 mb-4",children:d}),i.jsx(H,{onClick:wt,variant:"outline",className:"text-white border-white/20 hover:bg-white/10",children:"Try Again"})]}):w!==null?v?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):w.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Lv,{size:32,className:"text-white/70"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2 text-white",children:"No results found"}),i.jsx("p",{className:"text-white/70 mb-4",children:"Try searching with different keywords or hashtags"}),i.jsx(H,{onClick:()=>{y(!1),b(""),g(null)},variant:"outline",className:"text-white border-white/20 hover:bg-white/10",children:"Clear Search"})]}):i.jsx("div",{className:"space-y-0",children:w.map(F=>i.jsxs("div",{"data-video-id":F.id,className:"relative h-screen snap-start snap-always flex items-center justify-center",children:["  ",i.jsx("div",{className:"absolute top-0 left-0 right-0 h-16 bg-black z-10"}),i.jsx("div",{className:"absolute inset-0 top-16 bottom-32 overflow-hidden",children:i.jsx(Mx,{src:F.video_url,className:"w-full h-full object-cover",globalMuted:Q,videoId:F.id,user:re,onViewRecorded:Tt})}),i.jsx("div",{className:"absolute bottom-32 left-0 right-0 h-[1px] bg-white/20 z-10"}),i.jsx("div",{className:"absolute bottom-16 left-0 right-0 h-16 bg-black z-10"}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-black z-10"}),i.jsx("div",{className:"absolute bottom-16 left-0 right-0 p-4 text-white z-20",children:i.jsxs("div",{className:"flex justify-between items-end",children:[i.jsx("div",{className:"flex-1 mr-4 space-y-3",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-white font-semibold text-base leading-tight",children:F.title}),F.description&&i.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:Zn(F.description)})]})}),i.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[i.jsx("div",{className:"flex flex-col items-center",children:i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:se=>{se.stopPropagation(),te(Pt(F))},className:"hover:opacity-80 transition-opacity","aria-label":`View ${et(F)}'s profile`,"data-control":!0,children:i.jsxs(ut,{className:"w-12 h-12 rounded-full",children:[i.jsx(ft,{src:F.avatar_url||void 0,alt:et(F)}),i.jsx(ht,{children:et(F).charAt(0).toUpperCase()})]})}),re&&F.user_id!==re.id&&i.jsx("button",{onClick:async se=>{se.stopPropagation(),await Oe(F.user_id,et(F))},className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-6 h-6 bg-red-600 rounded-full flex items-center justify-center shadow-lg hover:bg-red-700 transition-colors","data-control":!0,children:j[F.user_id]?i.jsx("span",{className:"text-white font-bold text-sm",children:"✓"}):i.jsx(Ms,{size:14,className:"text-white"})})]})}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("button",{onClick:se=>{se.stopPropagation(),Ae(F.id)},className:"p-0 bg-transparent border-none","data-control":!0,children:i.jsx(As,{size:28,className:`${C[F.id]?"text-red-500 fill-red-500":"text-white fill-white"} transition-colors`})}),i.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:O[F.id]||0})]}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("button",{onClick:se=>{se.stopPropagation(),Ce(F.id)},className:"p-0 bg-transparent border-none","data-control":!0,children:i.jsx(tl,{size:28,className:"text-white fill-white transition-colors"})}),i.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:K[F.id]||0})]}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("button",{onClick:se=>{se.stopPropagation(),Gs(F.id)},className:"p-0 bg-transparent border-none","data-control":!0,children:i.jsx(el,{size:28,className:`${oe[F.id]?"text-yellow-500 fill-yellow-500":"text-white fill-white"} transition-colors`})}),i.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:Z[F.id]||0})]}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("button",{onClick:se=>{se.stopPropagation(),Ot(F)},className:"p-0 bg-transparent border-none","data-control":!0,children:i.jsx(Do,{size:28,className:"text-white fill-white"})}),i.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:q[F.id]||0})]})]})]})})]},F.id))}):o.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Lv,{size:32,className:"text-white/70"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2 text-white",children:"No videos yet"}),i.jsx("p",{className:"text-white/70 mb-4",children:t==="All"?"Be the first to upload a video!":`No videos found in the "${t}" category`}),i.jsx(H,{onClick:()=>te("/upload"),variant:"default",className:"bg-white text-black hover:bg-white/90",children:"Upload Your First Video"})]}):i.jsx("div",{className:"space-y-0",children:_e.map(F=>{const se=F.isSponsored,ue=se?F:null;return i.jsxs("div",{"data-video-id":F.id,className:"relative h-screen snap-start snap-always flex items-center justify-center",onClick:pe=>{const we=["button[data-control]"];let ve=pe.target;for(;ve&&ve!==pe.currentTarget;){if(we.some(qe=>ve.matches(qe)))return;ve=ve.parentElement}const Te=pe.currentTarget.querySelector("video");Te&&(Te.paused?(Te.play(),ue&&(at(ue),Le(ue))):Te.pause())},children:[i.jsx("div",{className:"absolute top-0 left-0 right-0 h-16 bg-black z-10"}),se&&i.jsxs("div",{className:"absolute top-20 left-4 right-4 z-20 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Dt,{className:"bg-yellow-600 text-black font-bold",children:"SPONSORED"}),i.jsxs("div",{className:"bg-black/70 px-2 py-1 rounded text-white text-sm",children:[M[F.id]||(ue==null?void 0:ue.duration)||30,"s"]})]}),i.jsxs(H,{size:"sm",variant:"outline",className:"bg-white/90 text-black hover:bg-white border-none",onClick:pe=>{pe.stopPropagation(),ue&&Be(ue)},"data-control":!0,children:[i.jsx(fh,{size:14,className:"mr-1"}),"Learn More"]})]}),i.jsx("div",{className:"absolute inset-0 top-16 bottom-32 overflow-hidden",children:i.jsx(Mx,{src:F.video_url,className:"w-full h-full object-cover",globalMuted:Q,videoId:F.id,user:re,onViewRecorded:se?void 0:Tt})}),i.jsx("div",{className:"absolute bottom-32 left-0 right-0 h-[1px] bg-white/20 z-10"}),i.jsx("div",{className:"absolute bottom-16 left-0 right-0 h-16 bg-black z-10"}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-black z-10"}),i.jsx("div",{className:"absolute bottom-16 left-0 right-0 p-4 text-white z-20",children:i.jsxs("div",{className:"flex justify-between items-end",children:[i.jsx("div",{className:"flex-1 mr-4 space-y-3",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-white font-semibold text-base leading-tight",children:F.title}),F.description&&i.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:Zn(F.description)})]})}),!se&&i.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[i.jsx("div",{className:"flex flex-col items-center",children:i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:pe=>{pe.stopPropagation(),te(Pt(F))},className:"hover:opacity-80 transition-opacity","aria-label":`View ${et(F)}'s profile`,"data-control":!0,children:i.jsxs(ut,{className:"w-12 h-12 rounded-full",children:[i.jsx(ft,{src:F.avatar_url||void 0,alt:et(F)}),i.jsx(ht,{children:et(F).charAt(0).toUpperCase()})]})}),re&&F.user_id!==re.id&&i.jsx("button",{onClick:async pe=>{pe.stopPropagation(),await Oe(F.user_id,et(F))},className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-6 h-6 bg-red-600 rounded-full flex items-center justify-center shadow-lg hover:bg-red-700 transition-colors","data-control":!0,children:j[F.user_id]?i.jsx("span",{className:"text-white font-bold text-sm",children:"✓"}):i.jsx(Ms,{size:14,className:"text-white"})})]})}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("button",{onClick:pe=>{pe.stopPropagation(),Ae(F.id)},className:"p-0 bg-transparent border-none","data-control":!0,children:i.jsx(As,{size:28,className:`${C[F.id]?"text-red-500 fill-red-500":"text-white fill-white"} transition-colors`})}),i.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:O[F.id]||0})]}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("button",{onClick:pe=>{pe.stopPropagation(),Ce(F.id)},className:"p-0 bg-transparent border-none","data-control":!0,children:i.jsx(tl,{size:28,className:"text-white fill-white transition-colors"})}),i.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:K[F.id]||0})]}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("button",{onClick:pe=>{pe.stopPropagation(),Gs(F.id)},className:"p-0 bg-transparent border-none","data-control":!0,children:i.jsx(el,{size:28,className:`${oe[F.id]?"text-yellow-500 fill-yellow-500":"text-white fill-white"} transition-colors`})}),i.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:Z[F.id]||0})]}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("button",{onClick:pe=>{pe.stopPropagation(),Ot(F)},className:"p-0 bg-transparent border-none","data-control":!0,children:i.jsx(Do,{size:28,className:"text-white fill-white"})}),i.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:q[F.id]||0})]})]})]})})]},F.id)})})}),i.jsx(mr,{}),S&&i.jsxs("div",{className:`fixed inset-0 z-50 ${G?"block":"hidden"}`,children:[i.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:()=>V(!1)}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-background rounded-lg max-w-md w-full max-h-[80vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[i.jsx("h2",{className:"text-lg font-semibold text-white",children:"Business Details"}),i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>V(!1),className:"p-2",children:i.jsx(Nr,{size:20,className:"text-white"})})]}),i.jsxs("div",{className:"p-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:S.title}),S.description&&i.jsx("p",{className:"text-muted-foreground mb-4",children:S.description})]}),S.business_name&&i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-white mb-1",children:"Business Name"}),i.jsx("p",{className:"text-muted-foreground",children:S.business_name})]}),S.contact_number&&i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-white mb-1",children:"Contact Number"}),i.jsx("a",{href:`tel:${S.contact_number}`,className:"text-blue-400 hover:text-blue-300",children:S.contact_number})]}),S.website_url&&i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-white mb-1",children:"Website"}),i.jsxs("a",{href:S.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 flex items-center gap-1",children:[S.website_url,i.jsx(fh,{size:14})]})]}),S.support_email&&i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-white mb-1",children:"Email"}),i.jsx("a",{href:`mailto:${S.support_email}`,className:"text-blue-400 hover:text-blue-300",children:S.support_email})]}),S.price_info&&i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-white mb-1",children:"Pricing"}),i.jsx("p",{className:"text-muted-foreground",children:S.price_info})]}),i.jsx("div",{className:"pt-4 border-t border-border",children:i.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"This is a sponsored advertisement"})})]})]})})]}),ce&&i.jsx(Pp,{isOpen:fe,onClose:()=>{de(!1),xe(null)},video:ce}),je&&i.jsx(cl,{isOpen:!!je,onClose:()=>Ce(null),videoId:je,videoTitle:(Ai=o.find(F=>F.id===je))==null?void 0:Ai.title,onCommentCountChange:(F,se)=>{D(ue=>({...ue,[F]:se}))}})]})},q1=({src:e,className:t,globalMuted:r=!1,videoId:n,user:s,onViewRecorded:o,...a})=>{const l=u.useRef(null),[c,d]=u.useState(!1),[f,h]=u.useState(!1),[m,x]=u.useState(!1),y=u.useRef(null),p=async()=>{try{"wakeLock"in navigator&&(y.current=await navigator.wakeLock.request("screen"),console.log("Wake lock activated"))}catch(w){console.error("Failed to request wake lock:",w)}},b=async()=>{if(y.current)try{await y.current.release(),y.current=null,console.log("Wake lock released")}catch(w){console.error("Failed to release wake lock:",w)}};return u.useEffect(()=>{const w=l.current;if(!w)return;w.muted=r;const g=new window.IntersectionObserver(([v])=>{v.isIntersecting&&v.intersectionRatio>=.5?(d(!0),w.play()):(d(!1),w.pause(),w.currentTime=0)},{threshold:.5});return g.observe(w),()=>{g.unobserve(w)}},[r]),u.useEffect(()=>{l.current&&(l.current.muted=r)},[r]),u.useEffect(()=>{const w=l.current;if(!w)return;const g=()=>{h(!0),p()},v=()=>{h(!1),b()};return w.addEventListener("play",g),w.addEventListener("pause",v),()=>{w.removeEventListener("play",g),w.removeEventListener("pause",v),b()}},[]),u.useEffect(()=>{if(c&&f&&!m&&n){console.log("AutoPlayVideo: Starting 5-second view timer for video:",n);const w=setTimeout(async()=>{console.log("AutoPlayVideo: 5-second timer completed, recording view for video:",n);try{const{data:g,error:v}=await N.rpc("record_video_view",{video_uuid:n});console.log("AutoPlayVideo: RPC function result:",{data:g,error:v,videoId:n}),v?console.error("AutoPlayVideo: Error recording view:",v):(x(!0),g?(console.log("AutoPlayVideo: New view successfully recorded for video:",n),o&&o(n)):console.log("AutoPlayVideo: View already exists for video:",n,"- not recording duplicate"))}catch(g){console.error("AutoPlayVideo: Exception recording view:",g)}},5e3);return()=>{console.log("AutoPlayVideo: Clearing view timer for video:",n),clearTimeout(w)}}},[c,f,m,n,o]),i.jsxs("div",{className:"relative w-full h-full",children:[i.jsx("video",{ref:l,src:e,loop:!0,muted:r,playsInline:!0,controls:!1,className:t,style:{pointerEvents:"auto"},...a}),i.jsx("style",{children:`
        video::-webkit-media-controls {
          display: none !important;
        }
        video::-webkit-media-controls-enclosure {
          display: none !important;
        }
        video::-webkit-media-controls-panel {
          display: none !important;
        }
        video::-webkit-media-controls-play-button {
          display: none !important;
        }
        video::-webkit-media-controls-start-playback-button {
          display: none !important;
        }
      `}),c&&!f&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20",children:i.jsx("button",{onClick:w=>{var g;w.stopPropagation(),(g=l.current)==null||g.play()},className:"w-16 h-16 flex items-center justify-center rounded-full bg-black/60 hover:bg-black/80 text-white","aria-label":"Play","data-control":!0,children:i.jsx(Mo,{size:32})})})]})},Ih=({videos:e,startIndex:t,onClose:r,highlightCommentId:n,autoOpenComments:s})=>{var xe;const o=u.useRef(null),{user:a}=it(),l=ot(),[c,d]=u.useState(!1),[f,h]=u.useState({}),[m,x]=u.useState({}),[y,p]=u.useState({}),[b,w]=u.useState({}),[g,v]=u.useState({}),[_,j]=u.useState({}),[k,C]=u.useState(e),[E,O]=u.useState({}),[B,q]=u.useState(!1),[X,Z]=u.useState(null),[L,ee]=u.useState(null),[U,K]=u.useState({});u.useEffect(()=>{C(e)},[e]),u.useEffect(()=>{if(o.current){const T=o.current.children[t];T&&T.scrollIntoView({behavior:"auto"})}},[t]),u.useEffect(()=>{if(s&&k.length>0&&t!==null){const T=k[t];T&&ee(T.id)}},[s,k,t]),u.useEffect(()=>{if(!a)return;const T=k.map(G=>G.user_id).filter(G=>G!==a.id);(async()=>{if(T.length===0)return;const{data:G}=await N.from("follows").select("following_id").eq("follower_id",a.id).in("following_id",T),V=new Set((G==null?void 0:G.map(z=>z.following_id))||[]),S={};k.forEach(z=>{z.user_id!==a.id&&(S[z.user_id]=V.has(z.user_id))}),h(S)})()},[a,k]),u.useEffect(()=>{if(!a||k.length===0)return;const T=async()=>{try{const G=k.map($=>$.id),{data:V}=await N.from("video_likes").select("video_id").eq("user_id",a.id).in("video_id",G),S=new Set((V==null?void 0:V.map($=>$.video_id))||[]),z={},M={},R={},I={};k.forEach($=>{z[$.id]=S.has($.id),M[$.id]=$.like_count||0,R[$.id]=$.share_count||0,I[$.id]=$.save_count||0}),x(z),p(M),v(R),j(I)}catch(G){console.error("Error checking like status:",G)}},A=async()=>{try{const G={};for(const V of k)try{const{data:S,error:z}=await N.rpc("get_genuine_view_count",{video_uuid:V.id});!z&&typeof S=="number"?G[V.id]=S:G[V.id]=V.view_count||0}catch(S){console.error(`Error getting view count for video ${V.id}:`,S),G[V.id]=V.view_count||0}w(G)}catch(G){console.error("Error checking view counts:",G)}};T(),A(),D()},[a,k]);const D=async()=>{var T;if(k.length!==0)try{const A=k.map(z=>z.id),{data:G,error:V}=await N.from("comments").select("video_id").in("video_id",A).is("parent_id",null);if(V){if((T=V.message)!=null&&T.includes('relation "comments" does not exist')){const z={};k.forEach(M=>{z[M.id]=0}),K(z);return}console.error("Error fetching comment counts:",V);return}const S={};k.forEach(z=>{S[z.id]=0}),G&&G.forEach(z=>{S[z.video_id]=(S[z.video_id]||0)+1}),K(S)}catch(A){console.error("Error checking comment counts:",A)}},Q=async()=>{if(!(!a||k.length===0))try{const T=k.map(z=>z.id),{data:A,error:G}=await N.from("saved_videos").select("video_id").eq("user_id",a.id).in("video_id",T);if(G){console.error("Error fetching saved videos:",G);return}const V=new Set((A||[]).map(z=>z.video_id)),S={};k.forEach(z=>{S[z.id]=V.has(z.id)}),O(S)}catch(T){console.error("Error checking saved status:",T)}},ne=async T=>{if(a)try{E[T]?(await N.from("saved_videos").delete().eq("user_id",a.id).eq("video_id",T),O(A=>({...A,[T]:!1})),j(A=>({...A,[T]:Math.max((A[T]||0)-1,0)}))):(await N.from("saved_videos").insert({user_id:a.id,video_id:T}),O(A=>({...A,[T]:!0})),j(A=>({...A,[T]:(A[T]||0)+1})))}catch(A){console.error("Error saving/unsaving video:",A)}};u.useEffect(()=>{Q()},[a,k]),u.useEffect(()=>{if(!a)return;const T=N.channel("modal_video_views_realtime").on("postgres_changes",{event:"INSERT",schema:"public",table:"video_views"},async V=>{console.log("ModalVerticalFeed: View change detected via real-time:",V);const S=V.new;if(S&&S.video_id){console.log("ModalVerticalFeed: Updating view count for video:",S.video_id);try{const{data:z,error:M}=await N.rpc("get_genuine_view_count",{video_uuid:S.video_id});w(!M&&typeof z=="number"?R=>(console.log("ModalVerticalFeed: View count updated via real-time:",S.video_id,"to",z),{...R,[S.video_id]:z}):R=>{const I=(R[S.video_id]||0)+1;return console.log("ModalVerticalFeed: View count updated (fallback):",S.video_id,"from",R[S.video_id]||0,"to",I),{...R,[S.video_id]:I}})}catch(z){console.error("ModalVerticalFeed: Error getting genuine view count:",z),w(M=>{const R=(M[S.video_id]||0)+1;return{...M,[S.video_id]:R}})}}}).subscribe(),A=N.channel("modal_videos_realtime").on("postgres_changes",{event:"UPDATE",schema:"public",table:"videos"},async V=>{if(console.log("ModalVerticalFeed: Video change detected via real-time:",V),V.new&&V.old){const S=V.new.id,z=V.new.share_count||0,M=V.new.save_count||0;V.new.share_count!==V.old.share_count&&v(R=>({...R,[S]:z})),V.new.save_count!==V.old.save_count&&j(R=>({...R,[S]:M}))}}).subscribe(),G=N.channel("modal_comments_realtime").on("postgres_changes",{event:"*",schema:"public",table:"comments"},async V=>{console.log("ModalVerticalFeed: Comment change detected:",V),V.new&&V.new.video_id&&!V.new.parent_id?K(S=>({...S,[V.new.video_id]:(S[V.new.video_id]||0)+1})):V.old&&V.old.video_id&&!V.old.parent_id&&K(S=>({...S,[V.old.video_id]:Math.max((S[V.old.video_id]||0)-1,0)}))}).subscribe();return()=>{N.removeChannel(T),N.removeChannel(A),N.removeChannel(G)}},[a,k]);const oe=async T=>{if(!a)return;if(f[T.user_id])await N.from("follows").delete().eq("follower_id",a.id).eq("following_id",T.user_id),h(G=>({...G,[T.user_id]:!1}));else{const{data:G}=await N.from("follows").select("*").eq("follower_id",a.id).eq("following_id",T.user_id).single();if(!G){const{error:V}=await N.from("follows").insert({follower_id:a.id,following_id:T.user_id});V||h(S=>({...S,[T.user_id]:!0})),V&&V.code!=="23505"&&console.error("Error following:",V)}}},he=async T=>{try{const{error:A}=await N.from("videos").update({share_count:(T.share_count||0)+1}).eq("id",T.id);A||v(G=>({...G,[T.id]:(G[T.id]||0)+1}))}catch(A){console.error("Error incrementing share count:",A)}Z(T),q(!0)},je=async T=>{if(a)try{const{data:A,error:G}=await N.rpc("toggle_video_like",{video_uuid:T});if(G){console.error("Error toggling like:",G);return}const V=A;x(S=>({...S,[T]:V})),p(S=>({...S,[T]:V?(S[T]||0)+1:Math.max((S[T]||0)-1,0)}))}catch(A){console.error("Error handling like:",A)}},Ce=async T=>{try{const{data:A,error:G}=await N.rpc("get_genuine_view_count",{video_uuid:T});!G&&typeof A=="number"?(w(V=>({...V,[T]:A})),console.log(`Updated view count for video ${T}: ${A}`)):w(V=>({...V,[T]:(V[T]||0)+1}))}catch(A){console.error("Error updating view count:",A),w(G=>({...G,[T]:(G[T]||0)+1}))}},fe=T=>{var A;return((A=T.profiles)==null?void 0:A.username)||T.username||(T.user_id?`user_${T.user_id.slice(0,8)}`:"unknown")},de=T=>{const A=fe(T);return a&&T.user_id===a.id?"/profile":`/profile/${A}`},ce=T=>T?T.split(/(#[\w-]+)/g).map((A,G)=>/^#[\w-]+$/.test(A)?i.jsx("button",{className:"inline-block text-green-400 hover:text-green-600 font-semibold px-1",onClick:V=>{V.stopPropagation()},children:A},G):A):null;return i.jsxs("div",{className:"fixed inset-0 z-[9998] bg-black flex flex-col",children:[i.jsx("button",{className:"absolute top-4 right-4 z-[9999] text-white bg-black/60 rounded-full p-2",onClick:r,children:i.jsx(Nr,{size:32})}),i.jsx("div",{className:"fixed top-20 right-4 z-[9999]",children:i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>d(T=>!T),"aria-label":"Toggle Global Mute",className:"w-12 h-12 rounded-full p-0 text-white hover:bg-white/10",children:c?i.jsx(rp,{size:24,className:"text-white"}):i.jsx(tp,{size:24,className:"text-white"})})}),i.jsx("div",{ref:o,className:"flex-1 overflow-y-auto snap-y snap-mandatory",style:{scrollSnapType:"y mandatory"},children:k.map(T=>i.jsxs("div",{className:"relative h-screen snap-start snap-always flex items-center justify-center",style:{scrollSnapAlign:"start"},onClick:A=>{const G=["button[data-control]"];let V=A.target;for(;V&&V!==A.currentTarget;){if(G.some(z=>V.matches(z)))return;V=V.parentElement}const S=A.currentTarget.querySelector("video");S&&(S.paused?S.play():S.pause())},children:[i.jsx("div",{className:"absolute top-0 left-0 right-0 h-16 bg-black z-10"}),i.jsx("div",{className:"absolute inset-0 top-16 bottom-32 overflow-hidden",children:i.jsx(q1,{src:T.video_url,className:"w-full h-full object-cover",globalMuted:c,videoId:T.id,user:a,onViewRecorded:Ce})}),i.jsx("div",{className:"absolute bottom-32 left-0 right-0 h-[1px] bg-white/20 z-10"}),i.jsx("div",{className:"absolute bottom-16 left-0 right-0 h-16 bg-black z-10"}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-black z-10"}),i.jsx("div",{className:"absolute bottom-16 left-0 right-0 p-4 text-white z-20",children:i.jsxs("div",{className:"flex justify-between items-end",children:[i.jsx("div",{className:"flex-1 mr-4 space-y-3",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-white font-semibold text-base leading-tight",children:T.title}),T.description&&i.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:ce(T.description)})]})}),i.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[i.jsx("div",{className:"flex flex-col items-center",children:i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:A=>{A.stopPropagation(),l(de(T))},className:"hover:opacity-80 transition-opacity","aria-label":`View ${fe(T)}'s profile`,"data-control":!0,children:i.jsxs(ut,{className:"w-12 h-12 rounded-full",children:[i.jsx(ft,{src:T.avatar_url||void 0,alt:fe(T)}),i.jsx(ht,{children:fe(T).charAt(0).toUpperCase()})]})}),a&&T.user_id!==a.id&&i.jsx("button",{onClick:async A=>{A.stopPropagation(),await oe(T)},className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-6 h-6 bg-red-600 rounded-full flex items-center justify-center shadow-lg hover:bg-red-700 transition-colors","data-control":!0,children:f[T.user_id]?i.jsx("span",{className:"text-white font-bold text-sm",children:"✓"}):i.jsx(Ms,{size:14,className:"text-white"})})]})}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("button",{onClick:A=>{A.stopPropagation(),je(T.id)},className:"p-0 bg-transparent border-none","data-control":!0,children:i.jsx(As,{size:28,className:`${m[T.id]?"text-red-500 fill-red-500":"text-white fill-white"} transition-colors`})}),i.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:y[T.id]||0})]}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("button",{onClick:A=>{A.stopPropagation(),ee(T.id)},className:"p-0 bg-transparent border-none","data-control":!0,children:i.jsx(tl,{size:28,className:"text-white fill-white"})}),i.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:U[T.id]||0})]}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("button",{onClick:A=>{A.stopPropagation(),ne(T.id)},className:"p-0 bg-transparent border-none","data-control":!0,children:i.jsx(el,{size:28,className:`${E[T.id]?"text-yellow-500 fill-yellow-500":"text-white fill-white"} transition-colors`})}),i.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:_[T.id]||0})]}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("button",{onClick:A=>{A.stopPropagation(),he(T)},className:"p-0 bg-transparent border-none","data-control":!0,children:i.jsx(Do,{size:28,className:"text-white fill-white"})}),i.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:g[T.id]||0})]})]})]})})]},T.id))}),X&&i.jsx(Pp,{isOpen:B,onClose:()=>{q(!1),Z(null)},video:X}),L&&i.jsx(cl,{isOpen:!!L,onClose:()=>ee(null),videoId:L,videoTitle:(xe=k.find(T=>T.id===L))==null?void 0:xe.title,highlightCommentId:n,onCommentCountChange:(T,A)=>{K(G=>({...G,[T]:A}))}})]})},WM=()=>{var g;const e=ot();u.useEffect(()=>{const v=document.createElement("style");return v.textContent=`
      @keyframes fire-glow {
        0%, 100% { 
          filter: drop-shadow(0 0 5px #ff6b35) drop-shadow(0 0 10px #ff8c42) drop-shadow(0 0 15px #ffa726);
          transform: rotate(-1deg) scale(1);
        }
        25% { 
          filter: drop-shadow(0 0 8px #ff5722) drop-shadow(0 0 15px #ff7043) drop-shadow(0 0 20px #ffab40);
          transform: rotate(1deg) scale(1.05);
        }
        50% { 
          filter: drop-shadow(0 0 6px #ff6b35) drop-shadow(0 0 12px #ff8c42) drop-shadow(0 0 18px #ffa726);
          transform: rotate(-0.5deg) scale(1.02);
        }
        75% { 
          filter: drop-shadow(0 0 9px #ff5722) drop-shadow(0 0 16px #ff7043) drop-shadow(0 0 22px #ffab40);
          transform: rotate(0.5deg) scale(1.03);
        }
      }
      
      .animate-fire {
        animation: fire-glow 2s ease-in-out infinite;
        display: inline-block;
        transform-origin: center bottom;
      }
    `,document.head.appendChild(v),()=>{document.head.removeChild(v)}},[]);const[t,r]=u.useState(!1),[n,s]=u.useState(null),[o,a]=u.useState([]),[l,c]=u.useState(!0),[d,f]=u.useState(null),[h,m]=u.useState({}),{user:x}=it(),y=25,p=async v=>{if(!(!v||v.length===0))try{const _=[...new Set(v.map(C=>C.user_id))],{data:j,error:k}=await N.from("profiles").select("user_id, username, avatar_url").in("user_id",_);if(k){console.error("Error fetching latest profile data:",k);return}if(j&&j.length>0){const C=new Map;j.forEach(O=>C.set(O.user_id,O));const E=v.map(O=>{const B=C.get(O.user_id);return B?{...O,profiles:{...O.profiles,username:B.username,avatar_url:B.avatar_url},avatar_url:B.avatar_url}:O});a(E),console.log("Updated trending videos with latest profile data")}}catch(_){console.error("Error in fetchLatestProfileData:",_)}},b=async()=>{c(!0);try{console.log("Fetching trending videos...");const{data:v,error:_}=await N.from("videos").select(`
          id, 
          title, 
          video_url, 
          thumbnail_url, 
          duration, 
          user_id, 
          created_at,
          view_count,
          like_count,
          share_count,
          save_count
        `).order("view_count",{ascending:!1,nullsFirst:!1}).order("like_count",{ascending:!1,nullsFirst:!1}).order("created_at",{ascending:!1}).limit(y);if(console.log("Videos query result:",{videos:v,error:_}),_){console.error("Error fetching videos:",_),c(!1);return}if(!v||v.length===0){console.log("No videos found in database"),a([]),c(!1);return}const j=[...new Set(v.map(Z=>Z.user_id))],{data:k,error:C}=await N.from("profiles").select("user_id, username, avatar_url").in("user_id",j);C&&console.error("Error fetching profiles:",C);const E=new Map;(k||[]).forEach(Z=>E.set(Z.user_id,Z));const O=new Map;for(const Z of v)try{const{data:L,error:ee}=await N.rpc("get_genuine_view_count",{video_uuid:Z.id});!ee&&typeof L=="number"?O.set(Z.id,L):O.set(Z.id,Z.view_count||0)}catch(L){console.error(`Error getting view count for video ${Z.id}:`,L),O.set(Z.id,Z.view_count||0)}const q=v.map(Z=>{const L=E.get(Z.user_id);return{...Z,profiles:L?{username:L.username,avatar_url:L.avatar_url,user_id:L.user_id}:null,actual_view_count:O.get(Z.id)||0,genuine_view_count:O.get(Z.id)||0}}).filter(Z=>Z.profiles);console.log("Filtered videos with profiles:",q.length);const X=q.sort((Z,L)=>{const ee=Z.genuine_view_count||0,U=L.genuine_view_count||0,K=Z.like_count||0,D=L.like_count||0;return U!==ee?U-ee:D!==K?D-K:new Date(L.created_at).getTime()-new Date(Z.created_at).getTime()});console.log("Sorted trending videos:",X.length),console.log("Sample video with profile:",X[0]),a(X),await p(X),await w(X)}catch(v){console.error("Error in fetchTrending:",v)}c(!1)},w=async v=>{var _;if(!(!v||v.length===0))try{const j=v.map(O=>O.id),{data:k,error:C}=await N.from("comments").select("video_id").in("video_id",j).is("parent_id",null);if(C){if((_=C.message)!=null&&_.includes('relation "comments" does not exist')){const O={};v.forEach(B=>{O[B.id]=0}),m(O);return}console.error("Error fetching comment counts:",C);return}const E={};v.forEach(O=>{E[O.id]=0}),k&&k.forEach(O=>{E[O.video_id]=(E[O.video_id]||0)+1}),m(E)}catch(j){console.error("Error checking comment counts:",j)}};return u.useEffect(()=>{b()},[]),u.useEffect(()=>{if(!x)return;console.log("Setting up real-time subscriptions for trending page");const v=N.channel("trending_videos_realtime").on("postgres_changes",{event:"UPDATE",schema:"public",table:"videos"},async C=>{if(console.log("Trending: Video change detected via real-time:",C),C.new&&C.old){const E=C.new.id,O=C.new.like_count||0;console.log(`Trending: Like count for video ${E}: ${C.old.like_count} -> ${O}`),a(B=>B.map(q=>q.id===E?{...q,like_count:O}:q))}}).subscribe(),_=N.channel("trending_likes_realtime").on("postgres_changes",{event:"*",schema:"public",table:"video_likes"},async C=>{console.log("Trending: Like change detected:",C)}).subscribe(),j=N.channel("trending_profiles_realtime").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles"},async C=>{console.log("Trending: Profile change detected:",C),C.new&&await p(o)}).subscribe(),k=N.channel("trending_comments_realtime").on("postgres_changes",{event:"*",schema:"public",table:"comments"},async C=>{console.log("Trending: Comment change detected:",C),C.new&&C.new.video_id&&!C.new.parent_id?m(E=>({...E,[C.new.video_id]:(E[C.new.video_id]||0)+1})):C.old&&C.old.video_id&&!C.old.parent_id&&m(E=>({...E,[C.old.video_id]:Math.max((E[C.old.video_id]||0)-1,0)}))}).subscribe();return()=>{console.log("Cleaning up real-time subscriptions for trending page"),N.removeChannel(v),N.removeChannel(_),N.removeChannel(j),N.removeChannel(k)}},[x,o]),l?i.jsx("div",{className:"min-h-screen bg-background pb-20 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),i.jsx("p",{className:"text-white",children:"Loading trending videos..."})]})}):i.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[i.jsx("div",{className:"sticky top-0 z-50 bg-background border-b border-border p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h1",{className:"text-2xl font-bold text-primary flex items-center gap-2",children:[i.jsx("span",{className:"animate-fire",children:"🔥"}),"Trending"]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>e("/live"),className:"text-white hover:bg-white/10","aria-label":"Live",children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),i.jsx("span",{className:"text-sm font-medium",children:"LIVE"})]})}),i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>e("/settings"),"aria-label":"Settings",children:i.jsx(Rd,{size:20})})]})]})}),i.jsxs("div",{className:"px-4 py-6 text-center",children:[i.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center justify-center gap-2 mb-2",children:[i.jsx(vs,{size:22,className:"text-orange-500"}),"Most Trending Videos Today"]}),i.jsx("p",{className:"text-sm text-gray-400",children:"Ranked by views and engagement"})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2 p-4",children:o.length===0?i.jsxs("div",{className:"col-span-2 md:col-span-3 lg:col-span-5 text-center py-12",children:[i.jsx(vs,{size:48,className:"text-gray-500 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-400 text-lg",children:"No trending videos found"}),i.jsx("p",{className:"text-gray-500 text-sm",children:"Check back later for the latest trending content!"})]}):o.map((v,_)=>{var j,k,C,E;return i.jsxs(De,{className:"relative aspect-[9/16] cursor-pointer group overflow-hidden bg-black/10",onClick:()=>{s(_),r(!0)},children:[_<3&&i.jsxs("div",{className:"absolute top-2 right-2 z-10",children:[_===0&&i.jsxs("div",{className:"flex items-center gap-1 bg-gradient-to-r from-yellow-500 to-yellow-600 rounded-full px-2 py-1 shadow-lg",children:[i.jsx(Jy,{size:12,className:"text-white"}),i.jsx("span",{className:"text-xs font-bold text-white",children:"#1"})]}),_===1&&i.jsxs("div",{className:"flex items-center gap-1 bg-gradient-to-r from-gray-400 to-gray-500 rounded-full px-2 py-1 shadow-lg",children:[i.jsx(JC,{size:12,className:"text-white"}),i.jsx("span",{className:"text-xs font-bold text-white",children:"#2"})]}),_===2&&i.jsxs("div",{className:"flex items-center gap-1 bg-gradient-to-r from-amber-600 to-amber-700 rounded-full px-2 py-1 shadow-lg",children:[i.jsx(GC,{size:12,className:"text-white"}),i.jsx("span",{className:"text-xs font-bold text-white",children:"#3"})]})]}),i.jsx("div",{className:"w-full h-full",children:i.jsx(q1,{src:v.video_url,className:"w-full h-full object-cover",globalMuted:!0})}),i.jsx("div",{className:"absolute top-2 left-2 z-10",children:i.jsxs(ut,{className:"w-8 h-8 border-2 border-white shadow",children:[i.jsx(ft,{src:((j=v.profiles)==null?void 0:j.avatar_url)||void 0,alt:((k=v.profiles)==null?void 0:k.username)||v.user_id}),i.jsx(ht,{children:(E=((C=v.profiles)==null?void 0:C.username)||v.user_id)==null?void 0:E.charAt(0).toUpperCase()})]})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2",children:i.jsxs("div",{className:"flex items-center justify-between text-white text-xs",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:O=>{O.stopPropagation(),f(v.id)},className:"flex items-center gap-1 hover:text-blue-400 transition-colors",children:[i.jsx(tl,{size:12}),i.jsx("span",{children:h[v.id]||0})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(jr,{size:12}),i.jsx("span",{children:v.genuine_view_count>=1e3?`${(v.genuine_view_count/1e3).toFixed(1)}K`:v.genuine_view_count||0})]})]}),v.duration&&i.jsx("div",{className:"bg-black/60 rounded-full px-2 py-1",children:`${Math.floor(v.duration/60)}:${(v.duration%60).toString().padStart(2,"0")}`})]})})]},v.id)})}),t&&n!==null&&i.jsx(Ih,{videos:o,startIndex:n,onClose:()=>r(!1)}),d&&i.jsx(cl,{isOpen:!!d,onClose:()=>f(null),videoId:d,videoTitle:(g=o.find(v=>v.id===d))==null?void 0:g.title}),i.jsx(mr,{})]})},BM=()=>{const[e,t]=u.useState("Anime"),r=["Anime","Bar Limes","Cartoon","Carnival","Comedy","Dance","Dancehall","DIY Projects","Educational","Events","Fete","Funny Vids","HOW TOs","Local News","Music Vids","Parties","Soca","Trini Celebs"],s=[{id:1,creator:"CarnivalLive",title:"LIVE: Mas Band Rehearsal 🎭",viewers:"2.3K",thumbnail:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=600&fit=crop",category:"Music"},{id:2,creator:"SocaDJ",title:"Power Soca Mix 2024 🔥",viewers:"1.8K",thumbnail:"https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?w=400&h=600&fit=crop",category:"Music"},{id:3,creator:"TriniChef",title:"Cooking Pelau LIVE!",viewers:"956",thumbnail:"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400&h=600&fit=crop",category:"Talk"},{id:4,creator:"DanceStudio",title:"Soca Dance Class 💃",viewers:"743",thumbnail:"https://images.unsplash.com/photo-1547036967-23d11aacaee0?w=400&h=600&fit=crop",category:"Dance"}].filter(o=>o.category===e);return i.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[i.jsxs("div",{className:"sticky top-0 z-10 bg-background border-b border-border p-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h1",{className:"text-2xl font-bold text-primary",children:"🔴 Live"}),i.jsx("div",{className:"flex items-center space-x-2",children:i.jsx(H,{variant:"neon",size:"sm",children:"Go Live"})})]}),i.jsx("div",{className:"flex overflow-x-auto space-x-2 mt-4 pb-2",children:r.map(o=>i.jsx(H,{variant:e===o?"default":"outline",size:"sm",onClick:()=>t(o),className:"whitespace-nowrap",children:o},o))})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:s.map(o=>i.jsxs(De,{className:"relative group cursor-pointer",onClick:()=>{console.log("Live stream clicked:",o.title)},children:[i.jsxs("div",{className:"relative aspect-[9/16] bg-muted rounded-lg overflow-hidden",children:[i.jsx("img",{src:o.thumbnail,alt:o.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),i.jsx("div",{className:"absolute top-2 left-2",children:i.jsx(Dt,{className:"bg-red-600 text-white animate-pulse",children:"🔴 LIVE"})}),i.jsx("div",{className:"absolute bottom-2 right-2",children:i.jsxs(Dt,{variant:"secondary",className:"bg-black/70 text-white",children:[o.viewers," watching"]})}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/30",children:i.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xl",children:"▶"})})})]}),i.jsxs("div",{className:"p-3",children:[i.jsx("h3",{className:"font-semibold text-foreground text-sm line-clamp-2 mb-1",children:o.title}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[i.jsx("span",{className:"font-medium",children:o.creator}),i.jsx(Dt,{variant:"outline",className:"text-xs",children:o.category})]})]})]},o.id))}),s.length===0&&i.jsxs("div",{className:"text-center mt-12",children:[i.jsx("p",{className:"text-muted-foreground",children:"No live streams in this category"}),i.jsx(H,{variant:"neon",className:"mt-4",children:"Start Streaming"})]})]}),i.jsx(mr,{})]})};function qM(e,t=[]){let r=[];function n(o,a){const l=u.createContext(a),c=r.length;r=[...r,a];function d(h){const{scope:m,children:x,...y}=h,p=(m==null?void 0:m[e][c])||l,b=u.useMemo(()=>y,Object.values(y));return i.jsx(p.Provider,{value:b,children:x})}function f(h,m){const x=(m==null?void 0:m[e][c])||l,y=u.useContext(x);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${o}\``)}return d.displayName=o+"Provider",[d,f]}const s=()=>{const o=r.map(a=>u.createContext(a));return function(l){const c=(l==null?void 0:l[e])||o;return u.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,HM(s,...t)]}function HM(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=n.reduce((l,{useScope:c,scopeName:d})=>{const h=c(o)[`__scope${d}`];return{...l,...h}},{});return u.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}var GM=u.createContext(void 0);function Tp(e){const t=u.useContext(GM);return e||t||"ltr"}var af="rovingFocusGroup.onEntryFocus",YM={bubbles:!1,cancelable:!0},Kd="RovingFocusGroup",[Oh,H1,ZM]=Ym(Kd),[KM,G1]=qM(Kd,[ZM]),[XM,QM]=KM(Kd),Y1=u.forwardRef((e,t)=>i.jsx(Oh.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(Oh.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(JM,{...e,ref:t})})}));Y1.displayName=Kd;var JM=u.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...h}=e,m=u.useRef(null),x=st(t,m),y=Tp(o),[p=null,b]=Rs({prop:a,defaultProp:l,onChange:c}),[w,g]=u.useState(!1),v=ur(d),_=H1(r),j=u.useRef(!1),[k,C]=u.useState(0);return u.useEffect(()=>{const E=m.current;if(E)return E.addEventListener(af,v),()=>E.removeEventListener(af,v)},[v]),i.jsx(XM,{scope:r,orientation:n,dir:y,loop:s,currentTabStopId:p,onItemFocus:u.useCallback(E=>b(E),[b]),onItemShiftTab:u.useCallback(()=>g(!0),[]),onFocusableItemAdd:u.useCallback(()=>C(E=>E+1),[]),onFocusableItemRemove:u.useCallback(()=>C(E=>E-1),[]),children:i.jsx(Ie.div,{tabIndex:w||k===0?-1:0,"data-orientation":n,...h,ref:x,style:{outline:"none",...e.style},onMouseDown:Pe(e.onMouseDown,()=>{j.current=!0}),onFocus:Pe(e.onFocus,E=>{const O=!j.current;if(E.target===E.currentTarget&&O&&!w){const B=new CustomEvent(af,YM);if(E.currentTarget.dispatchEvent(B),!B.defaultPrevented){const q=_().filter(U=>U.focusable),X=q.find(U=>U.active),Z=q.find(U=>U.id===p),ee=[X,Z,...q].filter(Boolean).map(U=>U.ref.current);X1(ee,f)}}j.current=!1}),onBlur:Pe(e.onBlur,()=>g(!1))})})}),Z1="RovingFocusGroupItem",K1=u.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:o,...a}=e,l=zn(),c=o||l,d=QM(Z1,r),f=d.currentTabStopId===c,h=H1(r),{onFocusableItemAdd:m,onFocusableItemRemove:x}=d;return u.useEffect(()=>{if(n)return m(),()=>x()},[n,m,x]),i.jsx(Oh.ItemSlot,{scope:r,id:c,focusable:n,active:s,children:i.jsx(Ie.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...a,ref:t,onMouseDown:Pe(e.onMouseDown,y=>{n?d.onItemFocus(c):y.preventDefault()}),onFocus:Pe(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:Pe(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const p=rD(y,d.orientation,d.dir);if(p!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let w=h().filter(g=>g.focusable).map(g=>g.ref.current);if(p==="last")w.reverse();else if(p==="prev"||p==="next"){p==="prev"&&w.reverse();const g=w.indexOf(y.currentTarget);w=d.loop?nD(w,g+1):w.slice(g+1)}setTimeout(()=>X1(w))}})})})});K1.displayName=Z1;var eD={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function tD(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function rD(e,t,r){const n=tD(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return eD[n]}function X1(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function nD(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var sD=Y1,iD=K1,Rp="Tabs",[oD,E3]=Us(Rp,[G1]),Q1=G1(),[aD,Ap]=oD(Rp),J1=u.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:o,orientation:a="horizontal",dir:l,activationMode:c="automatic",...d}=e,f=Tp(l),[h,m]=Rs({prop:n,onChange:s,defaultProp:o});return i.jsx(aD,{scope:r,baseId:zn(),value:h,onValueChange:m,orientation:a,dir:f,activationMode:c,children:i.jsx(Ie.div,{dir:f,"data-orientation":a,...d,ref:t})})});J1.displayName=Rp;var e_="TabsList",t_=u.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,o=Ap(e_,r),a=Q1(r);return i.jsx(sD,{asChild:!0,...a,orientation:o.orientation,dir:o.dir,loop:n,children:i.jsx(Ie.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:t})})});t_.displayName=e_;var r_="TabsTrigger",n_=u.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...o}=e,a=Ap(r_,r),l=Q1(r),c=o_(a.baseId,n),d=a_(a.baseId,n),f=n===a.value;return i.jsx(iD,{asChild:!0,...l,focusable:!s,active:f,children:i.jsx(Ie.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":d,"data-state":f?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...o,ref:t,onMouseDown:Pe(e.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?a.onValueChange(n):h.preventDefault()}),onKeyDown:Pe(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&a.onValueChange(n)}),onFocus:Pe(e.onFocus,()=>{const h=a.activationMode!=="manual";!f&&!s&&h&&a.onValueChange(n)})})})});n_.displayName=r_;var s_="TabsContent",i_=u.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:o,...a}=e,l=Ap(s_,r),c=o_(l.baseId,n),d=a_(l.baseId,n),f=n===l.value,h=u.useRef(f);return u.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),i.jsx(Yn,{present:s||f,children:({present:m})=>i.jsx(Ie.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&o})})});i_.displayName=s_;function o_(e,t){return`${e}-trigger-${t}`}function a_(e,t){return`${e}-content-${t}`}var lD=J1,l_=t_,c_=n_,d_=i_;const Xd=lD,kl=u.forwardRef(({className:e,...t},r)=>i.jsx(l_,{ref:r,className:Fe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));kl.displayName=l_.displayName;const sr=u.forwardRef(({className:e,...t},r)=>i.jsx(c_,{ref:r,className:Fe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));sr.displayName=c_.displayName;const sn=u.forwardRef(({className:e,...t},r)=>i.jsx(d_,{ref:r,className:Fe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));sn.displayName=d_.displayName;const ji=u.forwardRef(({className:e,...t},r)=>i.jsx("textarea",{className:Fe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));ji.displayName="Textarea";function Dx(e,[t,r]){return Math.min(r,Math.max(t,e))}var lf=0;function Mp(){u.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Ix()),document.body.insertAdjacentElement("beforeend",e[1]??Ix()),lf++,()=>{lf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),lf--}},[])}function Ix(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var cf="focusScope.autoFocusOnMount",df="focusScope.autoFocusOnUnmount",Ox={bubbles:!1,cancelable:!0},cD="FocusScope",Qd=u.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...a}=e,[l,c]=u.useState(null),d=ur(s),f=ur(o),h=u.useRef(null),m=st(t,p=>c(p)),x=u.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;u.useEffect(()=>{if(n){let p=function(v){if(x.paused||!l)return;const _=v.target;l.contains(_)?h.current=_:ns(h.current,{select:!0})},b=function(v){if(x.paused||!l)return;const _=v.relatedTarget;_!==null&&(l.contains(_)||ns(h.current,{select:!0}))},w=function(v){if(document.activeElement===document.body)for(const j of v)j.removedNodes.length>0&&ns(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",b);const g=new MutationObserver(w);return l&&g.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",b),g.disconnect()}}},[n,l,x.paused]),u.useEffect(()=>{if(l){Fx.add(x);const p=document.activeElement;if(!l.contains(p)){const w=new CustomEvent(cf,Ox);l.addEventListener(cf,d),l.dispatchEvent(w),w.defaultPrevented||(dD(pD(u_(l)),{select:!0}),document.activeElement===p&&ns(l))}return()=>{l.removeEventListener(cf,d),setTimeout(()=>{const w=new CustomEvent(df,Ox);l.addEventListener(df,f),l.dispatchEvent(w),w.defaultPrevented||ns(p??document.body,{select:!0}),l.removeEventListener(df,f),Fx.remove(x)},0)}}},[l,d,f,x]);const y=u.useCallback(p=>{if(!r&&!n||x.paused)return;const b=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,w=document.activeElement;if(b&&w){const g=p.currentTarget,[v,_]=uD(g);v&&_?!p.shiftKey&&w===_?(p.preventDefault(),r&&ns(v,{select:!0})):p.shiftKey&&w===v&&(p.preventDefault(),r&&ns(_,{select:!0})):w===g&&p.preventDefault()}},[r,n,x.paused]);return i.jsx(Ie.div,{tabIndex:-1,...a,ref:m,onKeyDown:y})});Qd.displayName=cD;function dD(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(ns(n,{select:t}),document.activeElement!==r)return}function uD(e){const t=u_(e),r=Lx(t,e),n=Lx(t.reverse(),e);return[r,n]}function u_(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Lx(e,t){for(const r of e)if(!fD(r,{upTo:t}))return r}function fD(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function hD(e){return e instanceof HTMLInputElement&&"select"in e}function ns(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&hD(e)&&t&&e.select()}}var Fx=mD();function mD(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=zx(e,t),e.unshift(t)},remove(t){var r;e=zx(e,t),(r=e[0])==null||r.resume()}}}function zx(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function pD(e){return e.filter(t=>t.tagName!=="A")}function f_(e){const t=u.useRef({value:e,previous:e});return u.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var gD=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},$i=new WeakMap,sc=new WeakMap,ic={},uf=0,h_=function(e){return e&&(e.host||h_(e.parentNode))},vD=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=h_(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},xD=function(e,t,r,n){var s=vD(t,Array.isArray(e)?e:[e]);ic[r]||(ic[r]=new WeakMap);var o=ic[r],a=[],l=new Set,c=new Set(s),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};s.forEach(d);var f=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))f(m);else try{var x=m.getAttribute(n),y=x!==null&&x!=="false",p=($i.get(m)||0)+1,b=(o.get(m)||0)+1;$i.set(m,p),o.set(m,b),a.push(m),p===1&&y&&sc.set(m,!0),b===1&&m.setAttribute(r,"true"),y||m.setAttribute(n,"true")}catch(w){console.error("aria-hidden: cannot operate on ",m,w)}})};return f(t),l.clear(),uf++,function(){a.forEach(function(h){var m=$i.get(h)-1,x=o.get(h)-1;$i.set(h,m),o.set(h,x),m||(sc.has(h)||h.removeAttribute(n),sc.delete(h)),x||h.removeAttribute(r)}),uf--,uf||($i=new WeakMap,$i=new WeakMap,sc=new WeakMap,ic={})}},Dp=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=gD(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),xD(n,s,r,"aria-hidden")):function(){return null}},Lh=function(e,t){return Lh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Lh(e,t)};function wD(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Lh(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var dt=function(){return dt=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},dt.apply(this,arguments)};function m_(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function yD(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,o;n<s;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}var kc="right-scroll-bar-position",Cc="width-before-scroll-bar",bD="with-scroll-bars-hidden",_D="--removed-body-scroll-bar-size";function ff(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function jD(e,t){var r=u.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var ND=typeof window<"u"?u.useLayoutEffect:u.useEffect,$x=new WeakMap;function SD(e,t){var r=jD(null,function(n){return e.forEach(function(s){return ff(s,n)})});return ND(function(){var n=$x.get(r);if(n){var s=new Set(n),o=new Set(e),a=r.current;s.forEach(function(l){o.has(l)||ff(l,null)}),o.forEach(function(l){s.has(l)||ff(l,a)})}$x.set(r,e)},[e]),r}function kD(e){return e}function CD(e,t){t===void 0&&(t=kD);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(o){var a=t(o,n);return r.push(a),function(){r=r.filter(function(l){return l!==a})}},assignSyncMedium:function(o){for(n=!0;r.length;){var a=r;r=[],a.forEach(o)}r={push:function(l){return o(l)},filter:function(){return r}}},assignMedium:function(o){n=!0;var a=[];if(r.length){var l=r;r=[],l.forEach(o),a=r}var c=function(){var f=a;a=[],f.forEach(o)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(f){a.push(f),d()},filter:function(f){return a=a.filter(f),r}}}};return s}function ED(e){e===void 0&&(e={});var t=CD(null);return t.options=dt({async:!0,ssr:!1},e),t}var p_=function(e){var t=e.sideCar,r=m_(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return u.createElement(n,dt({},r))};p_.isSideCarExport=!0;function PD(e,t){return e.useMedium(t),p_}var g_=ED(),hf=function(){},Jd=u.forwardRef(function(e,t){var r=u.useRef(null),n=u.useState({onScrollCapture:hf,onWheelCapture:hf,onTouchMoveCapture:hf}),s=n[0],o=n[1],a=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,f=e.enabled,h=e.shards,m=e.sideCar,x=e.noIsolation,y=e.inert,p=e.allowPinchZoom,b=e.as,w=b===void 0?"div":b,g=e.gapMode,v=m_(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=m,j=SD([r,t]),k=dt(dt({},v),s);return u.createElement(u.Fragment,null,f&&u.createElement(_,{sideCar:g_,removeScrollBar:d,shards:h,noIsolation:x,inert:y,setCallbacks:o,allowPinchZoom:!!p,lockRef:r,gapMode:g}),a?u.cloneElement(u.Children.only(l),dt(dt({},k),{ref:j})):u.createElement(w,dt({},k,{className:c,ref:j}),l))});Jd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Jd.classNames={fullWidth:Cc,zeroRight:kc};var TD=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function RD(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=TD();return t&&e.setAttribute("nonce",t),e}function AD(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function MD(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var DD=function(){var e=0,t=null;return{add:function(r){e==0&&(t=RD())&&(AD(t,r),MD(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},ID=function(){var e=DD();return function(t,r){u.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},v_=function(){var e=ID(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},OD={left:0,top:0,right:0,gap:0},mf=function(e){return parseInt(e||"",10)||0},LD=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[mf(r),mf(n),mf(s)]},FD=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return OD;var t=LD(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},zD=v_(),go="data-scroll-locked",$D=function(e,t,r,n){var s=e.left,o=e.top,a=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(bD,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(go,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(kc,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Cc,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(kc," .").concat(kc,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Cc," .").concat(Cc,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(go,`] {
    `).concat(_D,": ").concat(l,`px;
  }
`)},Ux=function(){var e=parseInt(document.body.getAttribute(go)||"0",10);return isFinite(e)?e:0},UD=function(){u.useEffect(function(){return document.body.setAttribute(go,(Ux()+1).toString()),function(){var e=Ux()-1;e<=0?document.body.removeAttribute(go):document.body.setAttribute(go,e.toString())}},[])},VD=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;UD();var o=u.useMemo(function(){return FD(s)},[s]);return u.createElement(zD,{styles:$D(o,!t,s,r?"":"!important")})},Fh=!1;if(typeof window<"u")try{var oc=Object.defineProperty({},"passive",{get:function(){return Fh=!0,!0}});window.addEventListener("test",oc,oc),window.removeEventListener("test",oc,oc)}catch{Fh=!1}var Ui=Fh?{passive:!1}:!1,WD=function(e){return e.tagName==="TEXTAREA"},x_=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!WD(e)&&r[t]==="visible")},BD=function(e){return x_(e,"overflowY")},qD=function(e){return x_(e,"overflowX")},Vx=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=w_(e,n);if(s){var o=y_(e,n),a=o[1],l=o[2];if(a>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},HD=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},GD=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},w_=function(e,t){return e==="v"?BD(t):qD(t)},y_=function(e,t){return e==="v"?HD(t):GD(t)},YD=function(e,t){return e==="h"&&t==="rtl"?-1:1},ZD=function(e,t,r,n,s){var o=YD(e,window.getComputedStyle(t).direction),a=o*n,l=r.target,c=t.contains(l),d=!1,f=a>0,h=0,m=0;do{var x=y_(e,l),y=x[0],p=x[1],b=x[2],w=p-b-o*y;(y||w)&&w_(e,l)&&(h+=w,m+=y),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(Math.abs(h)<1||!s)||!f&&(Math.abs(m)<1||!s))&&(d=!0),d},ac=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Wx=function(e){return[e.deltaX,e.deltaY]},Bx=function(e){return e&&"current"in e?e.current:e},KD=function(e,t){return e[0]===t[0]&&e[1]===t[1]},XD=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},QD=0,Vi=[];function JD(e){var t=u.useRef([]),r=u.useRef([0,0]),n=u.useRef(),s=u.useState(QD++)[0],o=u.useState(v_)[0],a=u.useRef(e);u.useEffect(function(){a.current=e},[e]),u.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var p=yD([e.lockRef.current],(e.shards||[]).map(Bx),!0).filter(Boolean);return p.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),p.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=u.useCallback(function(p,b){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!a.current.allowPinchZoom;var w=ac(p),g=r.current,v="deltaX"in p?p.deltaX:g[0]-w[0],_="deltaY"in p?p.deltaY:g[1]-w[1],j,k=p.target,C=Math.abs(v)>Math.abs(_)?"h":"v";if("touches"in p&&C==="h"&&k.type==="range")return!1;var E=Vx(C,k);if(!E)return!0;if(E?j=C:(j=C==="v"?"h":"v",E=Vx(C,k)),!E)return!1;if(!n.current&&"changedTouches"in p&&(v||_)&&(n.current=j),!j)return!0;var O=n.current||j;return ZD(O,b,p,O==="h"?v:_,!0)},[]),c=u.useCallback(function(p){var b=p;if(!(!Vi.length||Vi[Vi.length-1]!==o)){var w="deltaY"in b?Wx(b):ac(b),g=t.current.filter(function(j){return j.name===b.type&&(j.target===b.target||b.target===j.shadowParent)&&KD(j.delta,w)})[0];if(g&&g.should){b.cancelable&&b.preventDefault();return}if(!g){var v=(a.current.shards||[]).map(Bx).filter(Boolean).filter(function(j){return j.contains(b.target)}),_=v.length>0?l(b,v[0]):!a.current.noIsolation;_&&b.cancelable&&b.preventDefault()}}},[]),d=u.useCallback(function(p,b,w,g){var v={name:p,delta:b,target:w,should:g,shadowParent:eI(w)};t.current.push(v),setTimeout(function(){t.current=t.current.filter(function(_){return _!==v})},1)},[]),f=u.useCallback(function(p){r.current=ac(p),n.current=void 0},[]),h=u.useCallback(function(p){d(p.type,Wx(p),p.target,l(p,e.lockRef.current))},[]),m=u.useCallback(function(p){d(p.type,ac(p),p.target,l(p,e.lockRef.current))},[]);u.useEffect(function(){return Vi.push(o),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Ui),document.addEventListener("touchmove",c,Ui),document.addEventListener("touchstart",f,Ui),function(){Vi=Vi.filter(function(p){return p!==o}),document.removeEventListener("wheel",c,Ui),document.removeEventListener("touchmove",c,Ui),document.removeEventListener("touchstart",f,Ui)}},[]);var x=e.removeScrollBar,y=e.inert;return u.createElement(u.Fragment,null,y?u.createElement(o,{styles:XD(s)}):null,x?u.createElement(VD,{gapMode:e.gapMode}):null)}function eI(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const tI=PD(g_,JD);var eu=u.forwardRef(function(e,t){return u.createElement(Jd,dt({},e,{ref:t,sideCar:tI}))});eu.classNames=Jd.classNames;var rI=[" ","Enter","ArrowUp","ArrowDown"],nI=[" ","Enter"],Cl="Select",[tu,ru,sI]=Ym(Cl),[Xo,P3]=Us(Cl,[sI,Go]),nu=Go(),[iI,Bs]=Xo(Cl),[oI,aI]=Xo(Cl),b_=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:o,value:a,defaultValue:l,onValueChange:c,dir:d,name:f,autoComplete:h,disabled:m,required:x,form:y}=e,p=nu(t),[b,w]=u.useState(null),[g,v]=u.useState(null),[_,j]=u.useState(!1),k=Tp(d),[C=!1,E]=Rs({prop:n,defaultProp:s,onChange:o}),[O,B]=Rs({prop:a,defaultProp:l,onChange:c}),q=u.useRef(null),X=b?y||!!b.closest("form"):!0,[Z,L]=u.useState(new Set),ee=Array.from(Z).map(U=>U.props.value).join(";");return i.jsx(Pb,{...p,children:i.jsxs(iI,{required:x,scope:t,trigger:b,onTriggerChange:w,valueNode:g,onValueNodeChange:v,valueNodeHasChildren:_,onValueNodeHasChildrenChange:j,contentId:zn(),value:O,onValueChange:B,open:C,onOpenChange:E,dir:k,triggerPointerDownPosRef:q,disabled:m,children:[i.jsx(tu.Provider,{scope:t,children:i.jsx(oI,{scope:e.__scopeSelect,onNativeOptionAdd:u.useCallback(U=>{L(K=>new Set(K).add(U))},[]),onNativeOptionRemove:u.useCallback(U=>{L(K=>{const D=new Set(K);return D.delete(U),D})},[]),children:r})}),X?i.jsxs(H_,{"aria-hidden":!0,required:x,tabIndex:-1,name:f,autoComplete:h,value:O,onChange:U=>B(U.target.value),disabled:m,form:y,children:[O===void 0?i.jsx("option",{value:""}):null,Array.from(Z)]},ee):null]})})};b_.displayName=Cl;var __="SelectTrigger",j_=u.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,o=nu(r),a=Bs(__,r),l=a.disabled||n,c=st(t,a.onTriggerChange),d=ru(r),f=u.useRef("touch"),[h,m,x]=G_(p=>{const b=d().filter(v=>!v.disabled),w=b.find(v=>v.value===a.value),g=Y_(b,p,w);g!==void 0&&a.onValueChange(g.value)}),y=p=>{l||(a.onOpenChange(!0),x()),p&&(a.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return i.jsx(Id,{asChild:!0,...o,children:i.jsx(Ie.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":q_(a.value)?"":void 0,...s,ref:c,onClick:Pe(s.onClick,p=>{p.currentTarget.focus(),f.current!=="mouse"&&y(p)}),onPointerDown:Pe(s.onPointerDown,p=>{f.current=p.pointerType;const b=p.target;b.hasPointerCapture(p.pointerId)&&b.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(y(p),p.preventDefault())}),onKeyDown:Pe(s.onKeyDown,p=>{const b=h.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&m(p.key),!(b&&p.key===" ")&&rI.includes(p.key)&&(y(),p.preventDefault())})})})});j_.displayName=__;var N_="SelectValue",S_=u.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:o,placeholder:a="",...l}=e,c=Bs(N_,r),{onValueNodeHasChildrenChange:d}=c,f=o!==void 0,h=st(t,c.onValueNodeChange);return qt(()=>{d(f)},[d,f]),i.jsx(Ie.span,{...l,ref:h,style:{pointerEvents:"none"},children:q_(c.value)?i.jsx(i.Fragment,{children:a}):o})});S_.displayName=N_;var lI="SelectIcon",k_=u.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return i.jsx(Ie.span,{"aria-hidden":!0,...s,ref:t,children:n||"▼"})});k_.displayName=lI;var cI="SelectPortal",C_=e=>i.jsx(vl,{asChild:!0,...e});C_.displayName=cI;var Ni="SelectContent",E_=u.forwardRef((e,t)=>{const r=Bs(Ni,e.__scopeSelect),[n,s]=u.useState();if(qt(()=>{s(new DocumentFragment)},[]),!r.open){const o=n;return o?Ei.createPortal(i.jsx(P_,{scope:e.__scopeSelect,children:i.jsx(tu.Slot,{scope:e.__scopeSelect,children:i.jsx("div",{children:e.children})})}),o):null}return i.jsx(T_,{...e,ref:t})});E_.displayName=Ni;var Xr=10,[P_,qs]=Xo(Ni),dI="SelectContentImpl",T_=u.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:a,side:l,sideOffset:c,align:d,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:x,sticky:y,hideWhenDetached:p,avoidCollisions:b,...w}=e,g=Bs(Ni,r),[v,_]=u.useState(null),[j,k]=u.useState(null),C=st(t,ce=>_(ce)),[E,O]=u.useState(null),[B,q]=u.useState(null),X=ru(r),[Z,L]=u.useState(!1),ee=u.useRef(!1);u.useEffect(()=>{if(v)return Dp(v)},[v]),Mp();const U=u.useCallback(ce=>{const[xe,...T]=X().map(V=>V.ref.current),[A]=T.slice(-1),G=document.activeElement;for(const V of ce)if(V===G||(V==null||V.scrollIntoView({block:"nearest"}),V===xe&&j&&(j.scrollTop=0),V===A&&j&&(j.scrollTop=j.scrollHeight),V==null||V.focus(),document.activeElement!==G))return},[X,j]),K=u.useCallback(()=>U([E,v]),[U,E,v]);u.useEffect(()=>{Z&&K()},[Z,K]);const{onOpenChange:D,triggerPointerDownPosRef:Q}=g;u.useEffect(()=>{if(v){let ce={x:0,y:0};const xe=A=>{var G,V;ce={x:Math.abs(Math.round(A.pageX)-(((G=Q.current)==null?void 0:G.x)??0)),y:Math.abs(Math.round(A.pageY)-(((V=Q.current)==null?void 0:V.y)??0))}},T=A=>{ce.x<=10&&ce.y<=10?A.preventDefault():v.contains(A.target)||D(!1),document.removeEventListener("pointermove",xe),Q.current=null};return Q.current!==null&&(document.addEventListener("pointermove",xe),document.addEventListener("pointerup",T,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",xe),document.removeEventListener("pointerup",T,{capture:!0})}}},[v,D,Q]),u.useEffect(()=>{const ce=()=>D(!1);return window.addEventListener("blur",ce),window.addEventListener("resize",ce),()=>{window.removeEventListener("blur",ce),window.removeEventListener("resize",ce)}},[D]);const[ne,oe]=G_(ce=>{const xe=X().filter(G=>!G.disabled),T=xe.find(G=>G.ref.current===document.activeElement),A=Y_(xe,ce,T);A&&setTimeout(()=>A.ref.current.focus())}),he=u.useCallback((ce,xe,T)=>{const A=!ee.current&&!T;(g.value!==void 0&&g.value===xe||A)&&(O(ce),A&&(ee.current=!0))},[g.value]),je=u.useCallback(()=>v==null?void 0:v.focus(),[v]),Ce=u.useCallback((ce,xe,T)=>{const A=!ee.current&&!T;(g.value!==void 0&&g.value===xe||A)&&q(ce)},[g.value]),fe=n==="popper"?zh:R_,de=fe===zh?{side:l,sideOffset:c,align:d,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:x,sticky:y,hideWhenDetached:p,avoidCollisions:b}:{};return i.jsx(P_,{scope:r,content:v,viewport:j,onViewportChange:k,itemRefCallback:he,selectedItem:E,onItemLeave:je,itemTextRefCallback:Ce,focusSelectedItem:K,selectedItemText:B,position:n,isPositioned:Z,searchRef:ne,children:i.jsx(eu,{as:Ts,allowPinchZoom:!0,children:i.jsx(Qd,{asChild:!0,trapped:g.open,onMountAutoFocus:ce=>{ce.preventDefault()},onUnmountAutoFocus:Pe(s,ce=>{var xe;(xe=g.trigger)==null||xe.focus({preventScroll:!0}),ce.preventDefault()}),children:i.jsx(Wo,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:ce=>ce.preventDefault(),onDismiss:()=>g.onOpenChange(!1),children:i.jsx(fe,{role:"listbox",id:g.contentId,"data-state":g.open?"open":"closed",dir:g.dir,onContextMenu:ce=>ce.preventDefault(),...w,...de,onPlaced:()=>L(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:Pe(w.onKeyDown,ce=>{const xe=ce.ctrlKey||ce.altKey||ce.metaKey;if(ce.key==="Tab"&&ce.preventDefault(),!xe&&ce.key.length===1&&oe(ce.key),["ArrowUp","ArrowDown","Home","End"].includes(ce.key)){let A=X().filter(G=>!G.disabled).map(G=>G.ref.current);if(["ArrowUp","End"].includes(ce.key)&&(A=A.slice().reverse()),["ArrowUp","ArrowDown"].includes(ce.key)){const G=ce.target,V=A.indexOf(G);A=A.slice(V+1)}setTimeout(()=>U(A)),ce.preventDefault()}})})})})})})});T_.displayName=dI;var uI="SelectItemAlignedPosition",R_=u.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,o=Bs(Ni,r),a=qs(Ni,r),[l,c]=u.useState(null),[d,f]=u.useState(null),h=st(t,C=>f(C)),m=ru(r),x=u.useRef(!1),y=u.useRef(!0),{viewport:p,selectedItem:b,selectedItemText:w,focusSelectedItem:g}=a,v=u.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&d&&p&&b&&w){const C=o.trigger.getBoundingClientRect(),E=d.getBoundingClientRect(),O=o.valueNode.getBoundingClientRect(),B=w.getBoundingClientRect();if(o.dir!=="rtl"){const G=B.left-E.left,V=O.left-G,S=C.left-V,z=C.width+S,M=Math.max(z,E.width),R=window.innerWidth-Xr,I=Dx(V,[Xr,Math.max(Xr,R-M)]);l.style.minWidth=z+"px",l.style.left=I+"px"}else{const G=E.right-B.right,V=window.innerWidth-O.right-G,S=window.innerWidth-C.right-V,z=C.width+S,M=Math.max(z,E.width),R=window.innerWidth-Xr,I=Dx(V,[Xr,Math.max(Xr,R-M)]);l.style.minWidth=z+"px",l.style.right=I+"px"}const q=m(),X=window.innerHeight-Xr*2,Z=p.scrollHeight,L=window.getComputedStyle(d),ee=parseInt(L.borderTopWidth,10),U=parseInt(L.paddingTop,10),K=parseInt(L.borderBottomWidth,10),D=parseInt(L.paddingBottom,10),Q=ee+U+Z+D+K,ne=Math.min(b.offsetHeight*5,Q),oe=window.getComputedStyle(p),he=parseInt(oe.paddingTop,10),je=parseInt(oe.paddingBottom,10),Ce=C.top+C.height/2-Xr,fe=X-Ce,de=b.offsetHeight/2,ce=b.offsetTop+de,xe=ee+U+ce,T=Q-xe;if(xe<=Ce){const G=q.length>0&&b===q[q.length-1].ref.current;l.style.bottom="0px";const V=d.clientHeight-p.offsetTop-p.offsetHeight,S=Math.max(fe,de+(G?je:0)+V+K),z=xe+S;l.style.height=z+"px"}else{const G=q.length>0&&b===q[0].ref.current;l.style.top="0px";const S=Math.max(Ce,ee+p.offsetTop+(G?he:0)+de)+T;l.style.height=S+"px",p.scrollTop=xe-Ce+p.offsetTop}l.style.margin=`${Xr}px 0`,l.style.minHeight=ne+"px",l.style.maxHeight=X+"px",n==null||n(),requestAnimationFrame(()=>x.current=!0)}},[m,o.trigger,o.valueNode,l,d,p,b,w,o.dir,n]);qt(()=>v(),[v]);const[_,j]=u.useState();qt(()=>{d&&j(window.getComputedStyle(d).zIndex)},[d]);const k=u.useCallback(C=>{C&&y.current===!0&&(v(),g==null||g(),y.current=!1)},[v,g]);return i.jsx(hI,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:x,onScrollButtonChange:k,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:i.jsx(Ie.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});R_.displayName=uI;var fI="SelectPopperPosition",zh=u.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Xr,...o}=e,a=nu(r);return i.jsx(fp,{...a,...o,ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});zh.displayName=fI;var[hI,Ip]=Xo(Ni,{}),$h="SelectViewport",A_=u.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...s}=e,o=qs($h,r),a=Ip($h,r),l=st(t,o.onViewportChange),c=u.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),i.jsx(tu.Slot,{scope:r,children:i.jsx(Ie.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Pe(s.onScroll,d=>{const f=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=a;if(m!=null&&m.current&&h){const x=Math.abs(c.current-f.scrollTop);if(x>0){const y=window.innerHeight-Xr*2,p=parseFloat(h.style.minHeight),b=parseFloat(h.style.height),w=Math.max(p,b);if(w<y){const g=w+x,v=Math.min(y,g),_=g-v;h.style.height=v+"px",h.style.bottom==="0px"&&(f.scrollTop=_>0?_:0,h.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});A_.displayName=$h;var M_="SelectGroup",[mI,pI]=Xo(M_),gI=u.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=zn();return i.jsx(mI,{scope:r,id:s,children:i.jsx(Ie.div,{role:"group","aria-labelledby":s,...n,ref:t})})});gI.displayName=M_;var D_="SelectLabel",I_=u.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=pI(D_,r);return i.jsx(Ie.div,{id:s.id,...n,ref:t})});I_.displayName=D_;var ud="SelectItem",[vI,O_]=Xo(ud),L_=u.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:o,...a}=e,l=Bs(ud,r),c=qs(ud,r),d=l.value===n,[f,h]=u.useState(o??""),[m,x]=u.useState(!1),y=st(t,g=>{var v;return(v=c.itemRefCallback)==null?void 0:v.call(c,g,n,s)}),p=zn(),b=u.useRef("touch"),w=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(vI,{scope:r,value:n,disabled:s,textId:p,isSelected:d,onItemTextChange:u.useCallback(g=>{h(v=>v||((g==null?void 0:g.textContent)??"").trim())},[]),children:i.jsx(tu.ItemSlot,{scope:r,value:n,disabled:s,textValue:f,children:i.jsx(Ie.div,{role:"option","aria-labelledby":p,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:y,onFocus:Pe(a.onFocus,()=>x(!0)),onBlur:Pe(a.onBlur,()=>x(!1)),onClick:Pe(a.onClick,()=>{b.current!=="mouse"&&w()}),onPointerUp:Pe(a.onPointerUp,()=>{b.current==="mouse"&&w()}),onPointerDown:Pe(a.onPointerDown,g=>{b.current=g.pointerType}),onPointerMove:Pe(a.onPointerMove,g=>{var v;b.current=g.pointerType,s?(v=c.onItemLeave)==null||v.call(c):b.current==="mouse"&&g.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Pe(a.onPointerLeave,g=>{var v;g.currentTarget===document.activeElement&&((v=c.onItemLeave)==null||v.call(c))}),onKeyDown:Pe(a.onKeyDown,g=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&g.key===" "||(nI.includes(g.key)&&w(),g.key===" "&&g.preventDefault())})})})})});L_.displayName=ud;var ya="SelectItemText",F_=u.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...o}=e,a=Bs(ya,r),l=qs(ya,r),c=O_(ya,r),d=aI(ya,r),[f,h]=u.useState(null),m=st(t,w=>h(w),c.onItemTextChange,w=>{var g;return(g=l.itemTextRefCallback)==null?void 0:g.call(l,w,c.value,c.disabled)}),x=f==null?void 0:f.textContent,y=u.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:x},c.value),[c.disabled,c.value,x]),{onNativeOptionAdd:p,onNativeOptionRemove:b}=d;return qt(()=>(p(y),()=>b(y)),[p,b,y]),i.jsxs(i.Fragment,{children:[i.jsx(Ie.span,{id:c.textId,...o,ref:m}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Ei.createPortal(o.children,a.valueNode):null]})});F_.displayName=ya;var z_="SelectItemIndicator",$_=u.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return O_(z_,r).isSelected?i.jsx(Ie.span,{"aria-hidden":!0,...n,ref:t}):null});$_.displayName=z_;var Uh="SelectScrollUpButton",U_=u.forwardRef((e,t)=>{const r=qs(Uh,e.__scopeSelect),n=Ip(Uh,e.__scopeSelect),[s,o]=u.useState(!1),a=st(t,n.onScrollButtonChange);return qt(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;o(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?i.jsx(W_,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});U_.displayName=Uh;var Vh="SelectScrollDownButton",V_=u.forwardRef((e,t)=>{const r=qs(Vh,e.__scopeSelect),n=Ip(Vh,e.__scopeSelect),[s,o]=u.useState(!1),a=st(t,n.onScrollButtonChange);return qt(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<d;o(f)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?i.jsx(W_,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});V_.displayName=Vh;var W_=u.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=e,o=qs("SelectScrollButton",r),a=u.useRef(null),l=ru(r),c=u.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return u.useEffect(()=>()=>c(),[c]),qt(()=>{var f;const d=l().find(h=>h.ref.current===document.activeElement);(f=d==null?void 0:d.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),i.jsx(Ie.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:Pe(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:Pe(s.onPointerMove,()=>{var d;(d=o.onItemLeave)==null||d.call(o),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:Pe(s.onPointerLeave,()=>{c()})})}),xI="SelectSeparator",B_=u.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return i.jsx(Ie.div,{"aria-hidden":!0,...n,ref:t})});B_.displayName=xI;var Wh="SelectArrow",wI=u.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=nu(r),o=Bs(Wh,r),a=qs(Wh,r);return o.open&&a.position==="popper"?i.jsx(hp,{...s,...n,ref:t}):null});wI.displayName=Wh;function q_(e){return e===""||e===void 0}var H_=u.forwardRef((e,t)=>{const{value:r,...n}=e,s=u.useRef(null),o=st(t,s),a=f_(r);return u.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==r&&f){const h=new Event("change",{bubbles:!0});f.call(l,r),l.dispatchEvent(h)}},[a,r]),i.jsx(xl,{asChild:!0,children:i.jsx("select",{...n,ref:o,defaultValue:r})})});H_.displayName="BubbleSelect";function G_(e){const t=ur(e),r=u.useRef(""),n=u.useRef(0),s=u.useCallback(a=>{const l=r.current+a;t(l),function c(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=u.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return u.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,o]}function Y_(e,t,r){const s=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let a=yI(e,Math.max(o,0));s.length===1&&(a=a.filter(d=>d!==r));const c=a.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function yI(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var bI=b_,Z_=j_,_I=S_,jI=k_,NI=C_,K_=E_,SI=A_,X_=I_,Q_=L_,kI=F_,CI=$_,J_=U_,ej=V_,tj=B_;const EI=bI,PI=_I,rj=u.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(Z_,{ref:n,className:Fe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,i.jsx(jI,{asChild:!0,children:i.jsx(Jm,{className:"h-4 w-4 opacity-50"})})]}));rj.displayName=Z_.displayName;const nj=u.forwardRef(({className:e,...t},r)=>i.jsx(J_,{ref:r,className:Fe("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(ZC,{className:"h-4 w-4"})}));nj.displayName=J_.displayName;const sj=u.forwardRef(({className:e,...t},r)=>i.jsx(ej,{ref:r,className:Fe("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(Jm,{className:"h-4 w-4"})}));sj.displayName=ej.displayName;const ij=u.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>i.jsx(NI,{children:i.jsxs(K_,{ref:s,className:Fe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[i.jsx(nj,{}),i.jsx(SI,{className:Fe("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(sj,{})]})}));ij.displayName=K_.displayName;const TI=u.forwardRef(({className:e,...t},r)=>i.jsx(X_,{ref:r,className:Fe("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));TI.displayName=X_.displayName;const Bh=u.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(Q_,{ref:n,className:Fe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(CI,{children:i.jsx(Qm,{className:"h-4 w-4"})})}),i.jsx(kI,{children:t})]}));Bh.displayName=Q_.displayName;const RI=u.forwardRef(({className:e,...t},r)=>i.jsx(tj,{ref:r,className:Fe("-mx-1 my-1 h-px bg-muted",e),...t}));RI.displayName=tj.displayName;function Op(e){const[t,r]=u.useState(!0),[n,s]=u.useState(!1),[o,a]=u.useState(null),l=u.useCallback(async()=>{var c,d;r(!0),a(null);try{const{data:f,error:h}=await Yd(e);h?(console.error("Wallet link status error:",h),h.code==="PGRST116"||(c=h.message)!=null&&c.includes("406")||(d=h.message)!=null&&d.includes("Not Acceptable")||h.status===406?(console.log("Wallet links table access issue, assuming not linked"),s(!1),a(null)):(a(h.message||"Failed to fetch wallet link status"),s(!1))):s(!!f)}catch(f){console.error("Exception in wallet link status:",f),s(!1),a(null)}finally{r(!1)}},[e]);return u.useEffect(()=>{e&&l()},[l,e]),{loading:t,linked:n,error:o,refresh:l,setLinked:s}}function AI({open:e,onClose:t,refreshKey:r}){const[n,s]=u.useState(null),[o,a]=u.useState(!1),[l,c]=u.useState(null),[d,f]=u.useState(!1),h=ot(),{user:m}=it(),{loading:x,linked:y,refresh:p}=Op(m==null?void 0:m.id);u.useEffect(()=>{e&&(c(null),Nn(m==null?void 0:m.id).then(s).catch(()=>s(null)),m!=null&&m.id&&p())},[e,m,r]);const b=async()=>{a(!0),c(null);try{if(await $1(),m!=null&&m.id){const{error:g}=await N.from("wallet_links").delete().eq("user_id",m.id);if(g){c(g.message||"Failed to remove wallet link from database"),a(!1);return}}p(),a(!1),typeof window<"u"&&window.toast&&window.toast({title:"Wallet unlinked",description:"Your wallet has been successfully unlinked.",className:"bg-green-600 text-white border-green-700"}),t()}catch(g){c(g.message||"Failed to unlink wallet"),a(!1)}};if(!e)return null;const w=l==null?void 0:l.replace(/WordPress/gi,"TrinEPay");return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black",children:i.jsxs("div",{className:"bg-black rounded-lg p-6 w-full max-w-xs shadow-lg border border-white/10",children:[i.jsx("h2",{className:"text-lg font-bold text-white mb-4 text-center",children:"TrinEPay Wallet"}),x?i.jsx("div",{className:"text-center text-white",children:"Loading..."}):y?i.jsxs(i.Fragment,{children:[d&&i.jsx("div",{className:"text-center text-red-400 font-semibold mb-2",children:"This wallet is already linked to another Limey account."}),n!==null&&i.jsxs("div",{className:"text-center text-green-400 font-semibold mb-4",children:["TrinECredits: TT$",n.toFixed(2)]}),i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx(H,{onClick:()=>{t(),h("/wallet")},className:"w-full",children:"Go to Wallet"}),i.jsx(H,{onClick:b,className:"w-full",variant:"destructive",disabled:o,children:o?"Unlinking...":"Unlink Wallet"})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-yellow-500/20 border border-yellow-500/30 rounded-lg p-3 mb-4",children:i.jsxs("p",{className:"text-yellow-400 text-sm text-center",children:[i.jsx("strong",{children:"Important:"})," To link your Wallet, make sure you use the exact same email and password from your Limey account to create your TrinEPay Wallet account. If not go to the TrinEPay App and create a new account with your Limey email and password then come back and Link Wallet."]})}),i.jsx(H,{onClick:()=>{t(),h("/wallet/link")},className:"w-full",children:"Link Account"})]}),w&&i.jsx("div",{className:"text-red-400 text-center mt-2",children:w}),i.jsx(H,{onClick:t,className:"w-full mt-4",variant:"ghost",children:"Cancel"})]})})}var Lp="Dialog",[oj,T3]=Us(Lp),[MI,fn]=oj(Lp),aj=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:a=!0}=e,l=u.useRef(null),c=u.useRef(null),[d=!1,f]=Rs({prop:n,defaultProp:s,onChange:o});return i.jsx(MI,{scope:t,triggerRef:l,contentRef:c,contentId:zn(),titleId:zn(),descriptionId:zn(),open:d,onOpenChange:f,onOpenToggle:u.useCallback(()=>f(h=>!h),[f]),modal:a,children:r})};aj.displayName=Lp;var lj="DialogTrigger",DI=u.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=fn(lj,r),o=st(t,s.triggerRef);return i.jsx(Ie.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":$p(s.open),...n,ref:o,onClick:Pe(e.onClick,s.onOpenToggle)})});DI.displayName=lj;var Fp="DialogPortal",[II,cj]=oj(Fp,{forceMount:void 0}),dj=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,o=fn(Fp,t);return i.jsx(II,{scope:t,forceMount:r,children:u.Children.map(n,a=>i.jsx(Yn,{present:r||o.open,children:i.jsx(vl,{asChild:!0,container:s,children:a})}))})};dj.displayName=Fp;var fd="DialogOverlay",uj=u.forwardRef((e,t)=>{const r=cj(fd,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=fn(fd,e.__scopeDialog);return o.modal?i.jsx(Yn,{present:n||o.open,children:i.jsx(OI,{...s,ref:t})}):null});uj.displayName=fd;var OI=u.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=fn(fd,r);return i.jsx(eu,{as:Ts,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(Ie.div,{"data-state":$p(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Si="DialogContent",fj=u.forwardRef((e,t)=>{const r=cj(Si,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=fn(Si,e.__scopeDialog);return i.jsx(Yn,{present:n||o.open,children:o.modal?i.jsx(LI,{...s,ref:t}):i.jsx(FI,{...s,ref:t})})});fj.displayName=Si;var LI=u.forwardRef((e,t)=>{const r=fn(Si,e.__scopeDialog),n=u.useRef(null),s=st(t,r.contentRef,n);return u.useEffect(()=>{const o=n.current;if(o)return Dp(o)},[]),i.jsx(hj,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Pe(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),(a=r.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Pe(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&o.preventDefault()}),onFocusOutside:Pe(e.onFocusOutside,o=>o.preventDefault())})}),FI=u.forwardRef((e,t)=>{const r=fn(Si,e.__scopeDialog),n=u.useRef(!1),s=u.useRef(!1);return i.jsx(hj,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,o),o.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;((d=r.triggerRef.current)==null?void 0:d.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),hj=u.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,...a}=e,l=fn(Si,r),c=u.useRef(null),d=st(t,c);return Mp(),i.jsxs(i.Fragment,{children:[i.jsx(Qd,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(Wo,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":$p(l.open),...a,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(zI,{titleId:l.titleId}),i.jsx(UI,{contentRef:c,descriptionId:l.descriptionId})]})]})}),zp="DialogTitle",mj=u.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=fn(zp,r);return i.jsx(Ie.h2,{id:s.titleId,...n,ref:t})});mj.displayName=zp;var pj="DialogDescription",gj=u.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=fn(pj,r);return i.jsx(Ie.p,{id:s.descriptionId,...n,ref:t})});gj.displayName=pj;var vj="DialogClose",xj=u.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=fn(vj,r);return i.jsx(Ie.button,{type:"button",...n,ref:t,onClick:Pe(e.onClick,()=>s.onOpenChange(!1))})});xj.displayName=vj;function $p(e){return e?"open":"closed"}var wj="DialogTitleWarning",[R3,yj]=aC(wj,{contentName:Si,titleName:zp,docsSlug:"dialog"}),zI=({titleId:e})=>{const t=yj(wj),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return u.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},$I="DialogDescriptionWarning",UI=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${yj($I).contentName}}.`;return u.useEffect(()=>{var o;const s=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},bj=aj,_j=dj,su=uj,iu=fj,ou=mj,au=gj,jj=xj;const VI=bj,WI=_j,Nj=u.forwardRef(({className:e,...t},r)=>i.jsx(su,{className:Fe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));Nj.displayName=su.displayName;const BI=wl("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Sj=u.forwardRef(({side:e="right",className:t,children:r,...n},s)=>i.jsxs(WI,{children:[i.jsx(Nj,{}),i.jsxs(iu,{ref:s,className:Fe(BI({side:e}),t),...n,children:[r,i.jsxs(jj,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[i.jsx(Nr,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Sj.displayName=iu.displayName;const kj=({className:e,...t})=>i.jsx("div",{className:Fe("flex flex-col space-y-2 text-center sm:text-left",e),...t});kj.displayName="SheetHeader";const Cj=u.forwardRef(({className:e,...t},r)=>i.jsx(ou,{ref:r,className:Fe("text-lg font-semibold text-foreground",e),...t}));Cj.displayName=ou.displayName;const qI=u.forwardRef(({className:e,...t},r)=>i.jsx(au,{ref:r,className:Fe("text-sm text-muted-foreground",e),...t}));qI.displayName=au.displayName;const qx=()=>{var Kp,Xp,Qp,Jp,eg,tg,rg,ng,sg,ig,og,ag,lg,cg,dg,ug,fg,hg,mg,pg;const{user:e,signOut:t,isAdmin:r,loading:n}=it(),{username:s}=_l(),o=ot(),{toast:a}=$t(),[l,c]=u.useState(null),[d,f]=u.useState(!0),[h,m]=u.useState([]),[x,y]=u.useState(!1),[p,b]=u.useState(!1),w=u.useRef(null),[g,v]=u.useState(!1),[_,j]=u.useState(null),[k,C]=u.useState(!1),[E,O]=u.useState(null),[B,q]=u.useState(!1),[X,Z]=u.useState(0),[L,ee]=u.useState(null),[U,K]=u.useState([]),[D,Q]=u.useState([]),[ne,oe]=u.useState(!1),[he,je]=u.useState(!1),[Ce,fe]=u.useState([]),[de,ce]=u.useState([]),[xe,T]=u.useState(!1),[A,G]=u.useState(!1),[V,S]=u.useState(!1),[z,M]=u.useState(null),[R,I]=u.useState(!1),[$,te]=u.useState(!1),[re,Y]=u.useState(!1),[me,be]=u.useState(!1),[_e,Ee]=u.useState(""),[We,ke]=u.useState(!1),[Se,Le]=u.useState(0),[Be,at]=u.useState(0),[wt,Ot]=u.useState({}),[Oe,et]=u.useState({type:"all",targetUsername:"",title:"",message:""}),[Pt,Yr]=u.useState(!1),[Ae,Ye]=u.useState([]),[Qe,Lt]=u.useState(!1),[Tt,Fr]=u.useState(!1),[Gs,Zn]=u.useState([]),[Pl,Ai]=u.useState(!1),[F,se]=u.useState({}),[ue,pe]=u.useState([]),[we,ve]=u.useState(null),[Te,qe]=u.useState(null),[Rt,bt]=u.useState(!1),[Me,hn]=u.useState(null);u.useState(null),u.useState(null);const[Ze,kn]=u.useState({replyText:"",isReplying:!1}),[At,tN]=u.useState({}),[rN,Qo]=u.useState(!1),[cu,du]=u.useState({}),[nN,uu]=u.useState(!1),Bp=un(),sN=()=>{tN({comment:Ze.comment,video:Ze.video,notification:Me}),bt(!1),Qo(!0)},iN=async()=>{var P,W;if(!(!((P=Ze.replyText)!=null&&P.trim())||!e||!Ze.comment)){kn(J=>({...J,isReplying:!0}));try{const{data:J,error:ae}=await N.from("comments").insert({content:Ze.replyText.trim(),user_id:e.id,video_id:Me.video_id,parent_id:Ze.comment.id}).select("*").single();if(ae)throw ae;const{data:ye}=await N.from("profiles").select("user_id, username, avatar_url, display_name").eq("user_id",e.id).single(),{data:Ke}=await N.from("comments").select(`
          *,
          replies:comments!parent_id(user_id)
        `).eq("id",Ze.comment.id).single();if(Ke){const ze=new Set;ze.add(Ke.user_id),Ke.replies&&Ke.replies.forEach(Xt=>{ze.add(Xt.user_id)}),ze.delete(e.id);const or=Array.from(ze);if(or.length>0){const Xt=ye||{username:((W=e.email)==null?void 0:W.split("@")[0])||"Someone"},Cn=or.map(Sr=>({to_user_id:Sr,from_user_id:e.id,type:Sr===Ke.user_id?"comment_reply":"comment_thread_activity",title:Sr===Ke.user_id?"New reply to your comment":"New activity in followed thread",message:Sr===Ke.user_id?`@${Xt.username} replied to your comment`:`@${Xt.username} replied in a comment thread you're following`,video_id:Me.video_id}));await N.from("system_notifications").insert(Cn)}}a({title:"Reply sent!",description:"Your reply has been posted.",className:"bg-green-600 text-white border-green-700"}),kn(ze=>({...ze,replyText:"",isReplying:!1})),bt(!1)}catch(J){console.error("Error sending quick reply:",J),a({title:"Error",description:"Failed to send reply. Please try again.",variant:"destructive"})}finally{kn(J=>({...J,isReplying:!1}))}}},qp=async()=>{var P,W,J;if(!(!((P=Ze.replyText)!=null&&P.trim())||!e||!At.comment)){kn(ae=>({...ae,isReplying:!0}));try{let ae=Ze.replyText.trim();const ye=(W=At.comment.profiles)==null?void 0:W.username;ye&&!ae.includes(`@${ye}`)&&(ae=`@${ye} ${ae}`);const{data:Ke,error:ze}=await N.from("comments").insert({content:ae,user_id:e.id,video_id:At.notification.video_id,parent_id:At.comment.id}).select("*").single();if(ze)throw ze;const{data:or}=await N.from("profiles").select("user_id, username, avatar_url, display_name").eq("user_id",e.id).single(),{data:Xt}=await N.from("comments").select(`
          *,
          replies:comments!parent_id(user_id)
        `).eq("id",At.comment.id).single();if(Xt){const Cn=new Set;Cn.add(Xt.user_id),Xt.replies&&Xt.replies.forEach(zr=>{Cn.add(zr.user_id)}),Cn.delete(e.id);const Sr=Array.from(Cn);if(Sr.length>0){const zr=or||{username:((J=e.email)==null?void 0:J.split("@")[0])||"Someone"},hu=Sr.map(Xe=>({to_user_id:Xe,from_user_id:e.id,type:Xe===Xt.user_id?"comment_reply":"comment_thread_activity",title:Xe===Xt.user_id?"New reply to your comment":"New activity in followed thread",message:Xe===Xt.user_id?`@${zr.username} replied to your comment`:`@${zr.username} replied in a comment thread you're following`,video_id:At.notification.video_id}));await N.from("system_notifications").insert(hu)}}a({title:"Reply sent!",description:"Redirecting to video...",className:"bg-green-600 text-white border-green-700"}),Qo(!1),kn({replyText:"",isReplying:!1}),du({video:At.video,commentId:Ke.id}),uu(!0)}catch(ae){console.error("Error sending fullscreen reply:",ae),a({title:"Error",description:"Failed to send reply. Please try again.",variant:"destructive"})}finally{kn(ae=>({...ae,isReplying:!1}))}}};u.useEffect(()=>{Bp.pathname==="/profile"&&B&&(Z(P=>P+1),q(!1))},[Bp.pathname]),u.useEffect(()=>{if(!(l!=null&&l.user_id)||h.length===0||h.map(J=>J.id).length===0)return;const W=N.channel(`user_videos_${l.user_id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"videos",filter:`user_id=eq.${l.user_id}`},J=>{m(ae=>ae.map(ye=>ye.id===J.new.id?{...ye,...J.new}:ye))}).subscribe();return()=>{N.removeChannel(W)}},[l==null?void 0:l.user_id,h.length]),u.useEffect(()=>{if(!(l!=null&&l.user_id)||h.length===0)return;const P=N.channel(`user_views_${l.user_id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"video_views",filter:`video_id=in.(${h.map(W=>W.id).join(",")})`},W=>{var J;(J=W.new)!=null&&J.video_id&&m(ae=>ae.map(ye=>ye.id===W.new.video_id?{...ye,view_count:(ye.view_count||0)+1}:ye))}).subscribe();return()=>{N.removeChannel(P)}},[l==null?void 0:l.user_id,h.length]),u.useEffect(()=>{if(!(l!=null&&l.user_id))return;const P=N.channel(`user_follows_${l.user_id}`).on("postgres_changes",{event:"*",schema:"public",table:"follows",filter:`following_id=eq.${l.user_id}`},()=>{Ys()}).subscribe();return()=>{N.removeChannel(P)}},[l==null?void 0:l.user_id]),u.useEffect(()=>{oN(),x&&(r||dN(),e!=null&&e.id&&lN(e.id))},[s,e,x,r]),u.useEffect(()=>{l!=null&&l.user_id&&Ys()},[l==null?void 0:l.user_id]),u.useEffect(()=>{if(!(l!=null&&l.user_id))return;const P=setInterval(()=>{Ys()},3e4);return()=>clearInterval(P)},[l==null?void 0:l.user_id]),u.useEffect(()=>{!x&&(l!=null&&l.user_id)&&e&&_N()},[x,l==null?void 0:l.user_id,e]),u.useEffect(()=>{x&&(e!=null&&e.id)&&Nn(e.id).then(async P=>{ee(P);try{const{fixWordPressBalance:W}=await Ir(async()=>{const{fixWordPressBalance:J}=await Promise.resolve().then(()=>dd);return{fixWordPressBalance:J}},void 0);await W(e.id),console.log("Auto-synced balance to WordPress from profile:",P)}catch(W){console.warn("Auto-sync from profile failed:",W)}}).catch(()=>ee(0))},[x,e==null?void 0:e.id]),u.useEffect(()=>{if(!p)return;function P(W){w.current&&!w.current.contains(W.target)&&b(!1)}return document.addEventListener("mousedown",P),()=>{document.removeEventListener("mousedown",P)}},[p]),u.useEffect(()=>{if(!$)return;function P(W){W.target.closest(".relative")||te(!1)}return document.addEventListener("mousedown",P),()=>{document.removeEventListener("mousedown",P)}},[$]);const oN=async()=>{try{f(!0);let P=e==null?void 0:e.id,W=!1;if(s){const{data:J,error:ae}=await N.from("profiles").select("*").eq("username",s).single();if(ae){console.error("Error fetching profile by username:",ae);const{data:ye,error:Ke}=await N.from("profiles").select("*").eq("user_id",s).single();if(Ke){console.error("Profile not found:",Ke),c(null),f(!1);return}else c(ye),P=ye.user_id,W=ye.user_id===(e==null?void 0:e.id)}else c(J),P=J.user_id,W=J.user_id===(e==null?void 0:e.id)}else{const{data:J,error:ae}=await N.from("profiles").select("*").eq("user_id",e==null?void 0:e.id).single();ae?console.error("Error fetching profile:",ae):(c(J),W=!0)}y(W),P&&await aN(P)}catch(P){console.error("Profile fetch error:",P)}finally{f(!1)}},Hp=P=>P<1e3?P.toString():P<1e6?(P/1e3).toFixed(1)+"K":(P/1e6).toFixed(1)+"M",Gp=async P=>{try{const W={};for(const J of P)try{const{data:ae,error:ye}=await N.rpc("get_genuine_view_count",{video_uuid:J.id});!ye&&typeof ae=="number"?W[J.id]=ae:W[J.id]=J.view_count||0}catch(ae){console.error(`Error getting view count for video ${J.id}:`,ae),W[J.id]=J.view_count||0}se(J=>({...J,...W}))}catch(W){console.error("Error checking view counts:",W)}},aN=async P=>{try{const{data:W,error:J}=await N.from("videos").select("*").eq("user_id",P).order("created_at",{ascending:!1});if(J){console.error("Error fetching user videos:",J),m([]);return}m(W||[]),W&&W.length>0&&await Gp(W)}catch(W){console.error("Error fetching user videos:",W),m([])}},lN=async P=>{if(x)try{const W=await B1(P);pe(W||[])}catch(W){console.error("Error fetching sponsored ads:",W),pe([])}},cN=async P=>{if(!(!e||Te)){qe(P),ve(null);try{const W=await UM(P,e.id);W.success?(pe(J=>J.filter(ae=>ae.id!==P)),a({title:"Ad Deleted",description:"Your sponsored ad has been deleted successfully.",className:"bg-green-600 text-white border-green-700"})):a({title:"Delete Failed",description:W.error||"Failed to delete ad. Please try again.",variant:"destructive"})}catch(W){console.error("Error deleting ad:",W),a({title:"Delete Failed",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{qe(null)}}},dN=async()=>{if(e)try{const{data:P,error:W}=await N.from("saved_videos").select("video:videos(*)").eq("user_id",e.id).order("created_at",{ascending:!1});if(W){K([]);return}const J=(P||[]).map(ae=>ae.video);K(J),J&&J.length>0&&await Gp(J)}catch{K([])}},uN=async()=>{if(E)try{const{videoId:P,videoUrl:W,thumbnailUrl:J}=E,{error:ae}=await N.from("videos").delete().eq("id",P);if(ae){a({title:"Error deleting video",description:ae.message,variant:"destructive"}),C(!1),O(null);return}if(J){const{error:ye}=await N.storage.from("limeytt-uploads").remove([J]);ye&&console.error("Error deleting thumbnail from storage:",ye)}if(W){const{error:ye}=await N.storage.from("limeytt-uploads").remove([W]);ye&&console.error("Error deleting video file from storage:",ye)}a({title:"Video deleted",description:"Your video has been deleted."}),C(!1),O(null),m(ye=>ye.filter(Ke=>Ke.id!==P)),Q(ye=>ye.filter(Ke=>Ke.id!==P)),K(ye=>ye.filter(Ke=>Ke.id!==P))}catch(P){console.error("Error confirming video deletion:",P),a({title:"Error deleting video",description:"Failed to delete video.",variant:"destructive"}),C(!1),O(null)}},fN=async()=>{if(l!=null&&l.user_id){T(!0);try{const{data:P,error:W}=await N.from("follows").select("follower_id").eq("following_id",l.user_id);if(W||!P){fe([]);return}const J=P.map(ae=>ae.follower_id);if(J.length>0){const{data:ae}=await N.from("profiles").select("user_id, username, avatar_url, display_name").in("user_id",J),ye=ae||[];fe(ye),e&&ye.length>0&&gN(ye)}else fe([])}finally{T(!1)}}},hN=async()=>{if(l!=null&&l.user_id){S(!0);try{const{data:P,error:W}=await N.from("follows").select("following_id").eq("follower_id",l.user_id);if(W||!P){ce([]);return}const J=P.map(ae=>ae.following_id);if(J.length>0){const{data:ae}=await N.from("profiles").select("user_id, username, avatar_url, display_name").in("user_id",J);ce(ae||[])}else ce([])}finally{S(!1)}}},mN=async P=>{M(P);const{error:W}=await N.from("follows").delete().eq("follower_id",l.user_id).eq("following_id",P);W||(ce(de.filter(J=>J.user_id!==P)),Le(J=>Math.max(0,J-1)),Ys()),M(null)},pN=async P=>{if(!(l!=null&&l.user_id))return;M(P);const{error:W}=await N.from("follows").delete().eq("follower_id",P).eq("following_id",l.user_id);W?(console.error("Error removing follower:",W),a({title:"Error",description:"Failed to remove follower",variant:"destructive"})):(fe(J=>J.filter(ae=>ae.user_id!==P)),at(J=>Math.max(0,J-1)),Ys(),a({title:"Success",description:"Follower removed successfully"})),M(null)},gN=async P=>{if(!(!e||P.length===0))try{const W=P.map(ye=>ye.user_id),{data:J,error:ae}=await N.from("follows").select("following_id").eq("follower_id",e.id).in("following_id",W);if(!ae&&J){const ye=new Set(J.map(ze=>ze.following_id)),Ke={};P.forEach(ze=>{Ke[ze.user_id]=ye.has(ze.user_id)}),Ot(Ke)}}catch(W){console.error("Error checking follower follow status:",W)}},vN=async P=>{if(!e||re)return;Y(!0);const W=wt[P];try{if(W){const{error:J}=await N.from("follows").delete().eq("follower_id",e.id).eq("following_id",P);J||Ot(ae=>({...ae,[P]:!1}))}else{const{error:J}=await N.from("follows").insert({follower_id:e.id,following_id:P});J||Ot(ae=>({...ae,[P]:!0}))}}catch(J){console.error("Error toggling follow status:",J)}Y(!1)},xN=async P=>{if(P.length<1){Ye([]),Lt(!1);return}Fr(!0);try{const{data:W,error:J}=await N.from("profiles").select("user_id, username, display_name, avatar_url").ilike("username",`%${P}%`).neq("user_id",e==null?void 0:e.id).limit(10);!J&&W&&(Ye(W),Lt(!0))}catch(W){console.error("Error searching users:",W)}Fr(!1)},wN=P=>{et(W=>({...W,targetUsername:P})),xN(P)},yN=P=>{et(W=>({...W,targetUsername:P})),Lt(!1),Ye([])},bN=async()=>{var P;if(!Oe.title.trim()||!Oe.message.trim()){a({title:"Error",description:"Please fill in both title and message",variant:"destructive"});return}if(Oe.type==="individual"&&!Oe.targetUsername.trim()){a({title:"Error",description:"Please enter a username for individual notification",variant:"destructive"});return}Yr(!0);try{if(Oe.type==="all"){const{data:W,error:J}=await N.from("profiles").select("user_id");if(J)throw J;if(W.length===0){a({title:"Info",description:"No users to send notification to",variant:"default"});return}const ae=W.map(Ke=>({to_user_id:Ke.user_id,from_user_id:e==null?void 0:e.id,type:"admin",title:Oe.title,message:`[ALL_USERS] ${Oe.message}`,recipient_count:W.length}));console.log("About to save All Users notifications:",{count:ae.length,sampleMessage:(P=ae[0])==null?void 0:P.message,sampleNotification:ae[0]});const{error:ye}=await N.from("system_notifications").insert(ae);if(ye)throw ye;a({title:"Success",description:`Push notification sent to all users (${W.length} users)`,className:"bg-green-600 text-white border-green-700"}),fu()}else{const{data:W,error:J}=await N.from("profiles").select("user_id, username").eq("username",Oe.targetUsername.trim()).single();if(J||!W){a({title:"Error",description:"User not found or invalid selection",variant:"destructive"}),Yr(!1);return}const ae=W.username,ye=Oe.title,Ke=`[TO:${ae}] ${Oe.message}`;console.log("About to save individual notification:",{targetUsername:ae,message:Ke,originalMessage:Oe.message});const ze=[{to_user_id:W.user_id,from_user_id:e==null?void 0:e.id,type:"admin",title:ye,message:Ke,sent_to_username:ae,recipient_count:1}];W.user_id!==(e==null?void 0:e.id)&&ze.push({to_user_id:e==null?void 0:e.id,from_user_id:e==null?void 0:e.id,type:"admin_tracking",title:ye,message:Ke,sent_to_username:ae,recipient_count:1}),console.log("Individual notifications to insert:",ze);const{error:or}=await N.from("system_notifications").insert(ze);if(or)throw or;a({title:"Success",description:`Push notification sent to @${W.username}`,className:"bg-green-600 text-white border-green-700"}),fu()}et({type:"all",targetUsername:"",title:"",message:""})}catch(W){console.error("Error sending push notification:",W),a({title:"Error",description:"Failed to send push notification",variant:"destructive"})}Yr(!1)},fu=async()=>{var W,J,ae,ye,Ke;if(!e||!r)return;const P=await N.auth.getSession();console.log("JWT/User Debug Info:",{userId:e==null?void 0:e.id,userEmail:e==null?void 0:e.email,isAdmin:r,sessionUserId:(J=(W=P.data.session)==null?void 0:W.user)==null?void 0:J.id,sessionUserEmail:(ye=(ae=P.data.session)==null?void 0:ae.user)==null?void 0:ye.email,jwtPayload:(Ke=P.data.session)!=null&&Ke.access_token?JSON.parse(atob(P.data.session.access_token.split(".")[1])):null,timestamp:new Date().toISOString()}),Ai(!0);try{const{data:ze,error:or}=await N.from("system_notifications").select("*").eq("from_user_id",e.id).in("type",["admin","admin_tracking"]).order("created_at",{ascending:!1}).limit(50);if(console.log("Raw notifications query result:",{notifications:ze==null?void 0:ze.slice(0,3),error:or,totalCount:ze==null?void 0:ze.length}),or)console.error("Error fetching sent notifications:",or),Zn([]);else if(ze&&Array.isArray(ze)&&ze.length>0){console.log("Found notifications:",ze.length);const Xt=ze.filter(Xe=>Xe&&typeof Xe=="object"&&"id"in Xe&&"from_user_id"in Xe);if(Xt.length===0){Zn([]),Ai(!1);return}const Cn=[...new Set(Xt.map(Xe=>Xe.to_user_id).filter(Boolean))];let Sr={};if(Cn.length>0){const{data:Xe,error:pt}=await N.from("profiles").select("user_id, username, display_name, avatar_url").in("user_id",Cn);!pt&&Xe&&(Sr=Xe.reduce((Ht,Ct)=>(Ht[Ct.user_id]=Ct,Ht),{}))}const zr=Xt.reduce((Xe,pt)=>{const Ht=`${pt.title}-${pt.message}`;return Xe[Ht]||(Xe[Ht]=[]),Xe[Ht].push(pt),Xe},{});Object.keys(zr).forEach(Xe=>{const pt=zr[Xe];if(pt.length>1&&(pt[0].message||"").match(/^\[TO:([^\]]+)\]/)){const kr=pt.filter(Zs=>Zs.type==="admin"),En=pt.filter(Zs=>Zs.type==="admin_tracking");kr.length>0&&En.length>0&&(zr[Xe]=kr)}}),Object.keys(zr).forEach(Xe=>{const pt=zr[Xe];if(pt.length>1){pt.sort((Ct,kr)=>new Date(Ct.created_at).getTime()-new Date(kr.created_at).getTime());const Ht=new Date(pt[0].created_at).getTime();zr[Xe]=pt.filter(Ct=>new Date(Ct.created_at).getTime()-Ht<=12e4)}});const hu=Object.values(zr).map(Xe=>{const pt=Xe[0];let Ht=!1,Ct=null;const kr=pt.message||"",En=pt.sent_to_username,Zs=kr.match(/^\[ALL_USERS\]/);if(Zs)Ht=!0,Ct=null;else if(En)Ht=!1,Ct=Object.values(Sr).find(Kn=>Kn.username===En),Ct||(Ct={username:En,display_name:En,avatar_url:null,user_id:pt.to_user_id});else{const Kn=kr.match(/^\[TO:([^\]]+)\]/);if(Kn){Ht=!1;const mn=Kn[1];Ct=Object.values(Sr).find(mu=>mu.username===mn),Ct||(Ct={username:mn,display_name:mn,avatar_url:null,user_id:pt.to_user_id})}else{const mn=new Set(Xe.map(mu=>mu.to_user_id));console.log("Unique recipients count:",mn.size),mn.size>5?(Ht=!0,Ct=null):(Ht=!1,Ct=Sr[pt.to_user_id])}}let Jo=kr;En||kr.match(/^\[TO:[^\]]+\]/)?Jo=kr.replace(/^\[TO:[^\]]+\]\s*/,""):Zs&&(Jo=kr.replace(/^\[ALL_USERS\]\s*/,"")),console.log("Message cleaning:",{original:kr,cleaned:Jo});let Mi=pt.recipient_count;return Mi||(Zs?Mi=new Set(Xe.map(mn=>mn.to_user_id)).size:En?Mi=1:Mi=new Set(Xe.map(mn=>mn.to_user_id)).size),console.log("Final notification data:",{isAllUsers:Ht,recipientCount:Mi,targetUser:Ct==null?void 0:Ct.username,sentToUsername:En,availableProfiles:Object.values(Sr).map(Kn=>Kn.username),cleanMessage:Jo.substring(0,50)+"..."}),{...pt,message:Jo,to_user:Ct,recipient_count:Mi,is_all_users:Ht}}).filter(Xe=>Xe!==null).sort((Xe,pt)=>new Date(pt.created_at).getTime()-new Date(Xe.created_at).getTime());Zn(hu)}else Zn([])}catch(ze){console.error("Error fetching sent notifications:",ze),Zn([])}Ai(!1)};u.useEffect(()=>{r&&x&&(e!=null&&e.id)&&fu()},[r,x,e==null?void 0:e.id]);const Yp=()=>Array.isArray(h)?h.reduce((P,W)=>P+(W.like_count||0),0):0,Tl=P=>{const W=new Date(P),ae=Math.floor((new Date().getTime()-W.getTime())/1e3);return ae<60?"Just now":ae<3600?`${Math.floor(ae/60)}m ago`:ae<86400?`${Math.floor(ae/3600)}h ago`:ae<604800?`${Math.floor(ae/86400)}d ago`:W.toLocaleDateString()},Ys=async()=>{var P;if(l!=null&&l.user_id)try{try{const{data:W,error:J,count:ae}=await N.from("follows").select("id",{count:"exact",head:!0}).eq("follower_id",l.user_id);J?console.error("Error fetching following count:",J):Le(ae||0)}catch(W){console.error("Network error fetching following count:",W)}try{const{data:W,error:J,count:ae}=await N.from("follows").select("id",{count:"exact",head:!0}).eq("following_id",l.user_id);J?console.error("Error fetching followers count:",J):at(ae||0)}catch(W){console.error("Network error fetching followers count:",W)}}catch(W){console.error("Error fetching follow counts:",W),(P=W.message)!=null&&P.includes("Failed to fetch")||a({title:"Error",description:"Failed to update follow counts. Please refresh the page.",variant:"destructive"})}},_N=async()=>{if(!(!e||!(l!=null&&l.user_id))){console.log("Checking follow status for current user:",e.id,"to profile:",l.user_id);try{const{data:P,error:W}=await N.from("follows").select("id").eq("follower_id",e.id).eq("following_id",l.user_id).single(),J=!W&&P;console.log("Follow status result:",J?"Following":"Not following"),I(!!J)}catch(P){console.error("Error checking follow status:",P),I(!1)}}},Zp=async()=>{if(!e||!(l!=null&&l.user_id)||re)return;Y(!0);const P=R,W=Be,J=Se;try{if(R){I(!1),te(!1),x?Le(ye=>Math.max(0,ye-1)):at(ye=>Math.max(0,ye-1));const{error:ae}=await N.from("follows").delete().eq("follower_id",e.id).eq("following_id",l.user_id);ae?(I(P),x?Le(J):at(W),a({title:"Error",description:"Failed to unfollow user. Please try again.",variant:"destructive"})):Ys()}else{I(!0),x?Le(ye=>ye+1):at(ye=>ye+1);const{error:ae}=await N.from("follows").insert({follower_id:e.id,following_id:l.user_id});ae?(I(P),x?Le(J):at(W),a({title:"Error",description:"Failed to follow user. Please try again.",variant:"destructive"})):Ys()}}catch(ae){console.error("Error following/unfollowing:",ae),I(P),x?Le(J):at(W),a({title:"Error",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{Y(!1)}},jN=async()=>{if(!(!_e.trim()||!e||!(l!=null&&l.user_id)||We)){ke(!0);try{console.log("Sending message to user:",l.username);const{data:P,error:W}=await N.from("chats").select("*").or(`and(sender_id.eq.${e.id},receiver_id.eq.${l.user_id}),and(sender_id.eq.${l.user_id},receiver_id.eq.${e.id})`);if(W){console.error("Error checking for existing chat:",W),a({title:"Failed to send message",description:W.message,variant:"destructive"});return}console.log("Found existing chats:",P);const J=(P||[]).filter(ze=>ze.sender_id===e.id?!ze.deleted_for_sender:!ze.deleted_for_receiver),ae=J.length>0?J[0]:null;console.log("Using existing chat:",ae);let ye;if(ae){console.log("Found existing non-deleted chat:",ae.id),ye=ae.id;const{error:ze}=await N.from("chats").update({last_message:_e.trim(),updated_at:new Date().toISOString()}).eq("id",ye);if(ze)throw console.error("Error updating existing chat:",ze),ze}else{console.log("Creating new chat between",e.id,"and",l.user_id);const{data:ze,error:or}=await N.from("chats").insert({sender_id:e.id,receiver_id:l.user_id,last_message:_e.trim(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(or){console.error("Error creating chat:",or),a({title:"Failed to create chat",description:or.message,variant:"destructive"});return}console.log("Created new chat:",ze),ye=ze.id}const{error:Ke}=await N.from("messages").insert({chat_id:ye,sender_id:e.id,receiver_id:l.user_id,content:_e.trim(),created_at:new Date().toISOString()});if(Ke){console.error("Error sending message:",Ke),a({title:"Failed to send message",description:Ke.message,variant:"destructive"});return}console.log("Message sent successfully, navigating to chat:",ye),be(!1),Ee(""),o(`/chat/${ye}`)}catch(P){console.error("Error sending message:",P),a({title:"Failed to send message",description:"An unexpected error occurred",variant:"destructive"})}finally{ke(!1)}}};return d||n?i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):l?l!=null&&l.deactivated&&!x?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"This user is deactivated"}),i.jsx("p",{className:"text-muted-foreground",children:"Their profile and videos are hidden."})]})}):l!=null&&l.deactivated&&x?(o("/deactivated",{replace:!0}),null):i.jsxs("div",{className:"min-h-screen bg-background pb-20 pt-24",children:[i.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-2xl font-black text-white tracking-wider logo-text-glow",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:"900",letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))"},children:x?"Profile":"Viewing..."}),i.jsx("div",{className:"flex items-center space-x-2",children:x?i.jsxs(i.Fragment,{children:[i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>q(!0),children:i.jsx(aE,{size:16})}),i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>o("/settings"),children:i.jsx(Rd,{size:16})}),i.jsx(H,{variant:"outline",size:"sm",onClick:t,children:"Logout"})]}):i.jsx(H,{variant:"ghost",size:"sm",children:i.jsx(pi,{size:16})})})]})}),i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"relative mb-4",children:l!=null&&l.avatar_url?i.jsx("img",{src:l.avatar_url,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-2 border-primary cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{console.log("Profile image clicked"),G(!0)}}):i.jsx("div",{className:"w-24 h-24 rounded-full bg-primary/20 flex items-center justify-center text-3xl font-bold text-primary",children:((Xp=(Kp=l==null?void 0:l.username)==null?void 0:Kp.charAt(0))==null?void 0:Xp.toUpperCase())||"U"})}),i.jsx("h2",{className:"text-2xl font-bold text-foreground mb-1",children:(l==null?void 0:l.display_name)||(l==null?void 0:l.username)||"User"}),i.jsxs("p",{className:"text-muted-foreground mb-2",children:["@",(l==null?void 0:l.username)||"user"]}),(l==null?void 0:l.bio)&&i.jsx("p",{className:"text-foreground text-sm mb-4 max-w-xs text-center",children:l.bio}),x&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"TrinECredits:"}),i.jsxs(Dt,{variant:"secondary",className:"bg-green-900 text-green-400",children:["TT$",L!==null?L.toFixed(2):"0.00"]})]}),i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx(H,{variant:"outline",size:"sm",onClick:()=>o("/edit-profile"),className:"flex-1",children:"Edit Profile"}),i.jsx(H,{variant:"neon",size:"sm",onClick:()=>o("/boost"),className:"flex-1",children:"Boost"})]})]}),x&&!r&&i.jsxs("div",{className:"flex items-center justify-center gap-8 mb-4",children:[i.jsxs("button",{className:"flex flex-col items-center group",onClick:()=>{hN(),je(!0)},children:[i.jsx("span",{className:"text-lg font-bold text-white group-hover:text-primary transition",children:Se}),i.jsx("span",{className:"text-xs text-muted-foreground group-hover:text-primary transition",children:"Following"})]}),i.jsxs("button",{className:"flex flex-col items-center group",onClick:()=>{fN(),oe(!0)},children:[i.jsx("span",{className:"text-lg font-bold text-white group-hover:text-primary transition",children:Be}),i.jsx("span",{className:"text-xs text-muted-foreground group-hover:text-primary transition",children:"Followers"})]}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("span",{className:"text-lg font-bold text-white",children:Yp()}),i.jsx("span",{className:"text-xs text-muted-foreground",children:"Likes"})]})]}),!x&&i.jsxs("div",{className:"flex items-center justify-center gap-8 mb-4 mt-2",children:[i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("span",{className:"text-lg font-bold text-white",children:Se}),i.jsx("span",{className:"text-xs text-muted-foreground",children:"Following"})]}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("span",{className:"text-lg font-bold text-white",children:Be}),i.jsx("span",{className:"text-xs text-muted-foreground",children:"Followers"})]}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("span",{className:"text-lg font-bold text-white",children:Yp()}),i.jsx("span",{className:"text-xs text-muted-foreground",children:"Likes"})]})]})]})}),!x&&i.jsx("div",{className:"px-6 mb-4",children:i.jsxs("div",{className:"flex items-center justify-center gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx(H,{variant:R?"secondary":"default",size:"sm",onClick:()=>{R?te(!$):Zp()},disabled:re,className:"min-w-[100px] flex items-center justify-center",children:re?"...":R?i.jsxs("span",{className:"flex items-center gap-1",children:["Following ",i.jsx(Jm,{size:14})]}):"Follow"}),$&&i.jsx("div",{className:"absolute top-full left-0 mt-1 bg-red-600 rounded-md shadow-lg z-10",children:i.jsx("button",{onClick:Zp,className:"w-full px-4 py-2 text-white text-sm hover:bg-red-700 rounded-md",children:"Unfollow"})})]}),r?i.jsx(H,{variant:"default",size:"sm",onClick:()=>o("/admin"),className:"bg-yellow-600 hover:bg-yellow-700 text-white min-w-[100px]",title:"Admin Dashboard",children:"👑 Admin"}):R&&i.jsxs(H,{variant:"default",size:"sm",onClick:()=>be(!0),className:"bg-green-600 hover:bg-green-700 text-white min-w-[100px]",children:[i.jsx(In,{size:16,className:"mr-2"}),"Message"]})]})}),i.jsx("div",{className:"px-4",children:i.jsxs(Xd,{defaultValue:r?"push":"videos",className:"w-full",children:[i.jsxs(kl,{className:`grid w-full ${r&&x||x?"grid-cols-3":"grid-cols-1"}`,children:[r?i.jsxs(i.Fragment,{children:[i.jsxs(sr,{value:"push",className:x?"":"justify-center",children:[i.jsx(Aa,{className:"inline mr-1",size:16}),"Push"]}),x&&i.jsxs(sr,{value:"sent",children:[i.jsx(In,{className:"inline mr-1",size:16}),"Sent"]}),x&&i.jsxs(sr,{value:"ads",children:[i.jsx(vs,{className:"inline mr-1",size:16}),"My Ads"]})]}):i.jsx(sr,{value:"videos",className:x?"":"justify-center",children:"Videos"}),x&&!r&&i.jsxs(i.Fragment,{children:[i.jsxs(sr,{value:"saved",children:[i.jsx(el,{className:"inline mr-1",size:16}),"Saved"]}),i.jsxs(sr,{value:"ads",children:[i.jsx(vs,{className:"inline mr-1",size:16}),"My Ads"]})]})]}),i.jsx(sn,{value:"videos",className:"mt-4",children:Array.isArray(h)&&h.length>0?i.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-5 gap-2",children:h.map((P,W)=>i.jsxs(De,{className:"relative aspect-[9/16] cursor-pointer group bg-black/10 overflow-hidden",onClick:()=>{j(W),Q(h),v(!0)},children:[i.jsxs("div",{className:"absolute top-2 left-2 z-10 flex items-center gap-1 bg-black/70 rounded-full px-2 py-1",children:[i.jsx(jr,{size:16,className:"text-white"}),i.jsx("span",{className:"text-xs text-white font-semibold",children:Hp(F[P.id]||0)})]}),x&&i.jsx("div",{className:"absolute",style:{top:"-6px",right:"-6px",zIndex:10,display:"flex",alignItems:"center"},children:i.jsx(H,{variant:"ghost",size:"icon",className:"p-1",onClick:J=>{J.stopPropagation(),O({type:"deleteVideo",videoId:P.id,videoUrl:P.video_url,thumbnailUrl:P.thumbnail_url}),C(!0)},children:i.jsx(pi,{size:20,style:{transform:"rotate(180deg)"}})})}),P.thumbnail_url?i.jsx("img",{src:P.thumbnail_url.startsWith("http")?P.thumbnail_url:N.storage.from("limeytt-uploads").getPublicUrl(P.thumbnail_url).data.publicUrl,alt:P.title,className:"w-full h-full object-cover rounded",onError:J=>{console.error("Error loading thumbnail:",J),J.target.src="/placeholder-thumbnail.png"}}):i.jsx("div",{className:"w-full h-full bg-black flex items-center justify-center text-white text-xs",children:"No Cover"}),i.jsx("div",{className:"absolute bottom-2 right-2",children:i.jsx(Dt,{variant:"secondary",className:"bg-black/70 text-white text-xs",children:(()=>{const J=Number(P.duration);if(!J||isNaN(J)||J<0)return"0:00";const ae=Math.floor(J/60),ye=Math.floor(J%60);return`${ae}:${ye.toString().padStart(2,"0")}`})()})})]},P.id))}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("span",{className:"text-2xl",children:"📹"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2 text-foreground",children:"No videos yet"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:x?"You haven't uploaded any videos yet.":`${(l==null?void 0:l.username)||"This user"} hasn't uploaded any videos yet.`}),x&&i.jsx(H,{variant:"default",onClick:()=>o("/upload"),children:"Upload Your First Video"})]})}),x&&i.jsxs(sn,{value:"ads",className:"mt-4",children:[i.jsx("div",{className:"flex justify-center mb-6",children:i.jsxs(H,{onClick:()=>o("/ad-stats"),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-semibold flex items-center gap-2",children:[i.jsx(vs,{size:16}),"Ad Stats"]})}),ue.length>0?i.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-5 gap-2",children:ue.map(P=>i.jsxs(De,{className:"relative aspect-[9/16] cursor-pointer group bg-black/10 overflow-hidden hover:bg-black/20 transition-colors",onClick:()=>o(`/campaign/${P.id}`),children:[i.jsx("div",{className:"absolute top-2 left-2 z-10",children:i.jsx(Dt,{variant:"secondary",className:`text-xs ${P.status==="active"?"bg-green-900 text-green-400":P.status==="pending"?"bg-yellow-900 text-yellow-400":P.status==="approved"?"bg-blue-900 text-blue-400":P.status==="rejected"?"bg-red-900 text-red-400":P.status==="expired"?"bg-gray-900 text-gray-400":"bg-purple-900 text-purple-400"}`,children:P.status==="active"?"🟢":P.status==="pending"?"⏳":P.status==="approved"?"✅":P.status==="rejected"?"❌":P.status==="expired"?"⏰":"📝"})}),i.jsx("div",{className:"absolute top-2 right-2 z-10",children:i.jsxs("div",{className:"relative",children:[i.jsx(H,{variant:"ghost",size:"sm",className:"p-1 bg-black/70 hover:bg-black/90 rounded-full",onClick:W=>{W.stopPropagation(),ve(we===P.id?null:P.id)},children:i.jsx(pi,{size:16,className:"text-white"})}),we===P.id&&i.jsx("div",{className:"fixed inset-0 z-30 flex items-center justify-center",onClick:W=>{W.stopPropagation(),ve(null)},children:i.jsxs("div",{className:"bg-black/90 backdrop-blur-md border border-white/10 rounded-lg py-2 min-w-[100px]",onClick:W=>W.stopPropagation(),children:[i.jsx("button",{className:"w-full px-3 py-2 text-center text-sm text-white hover:bg-white/10",onClick:W=>{W.stopPropagation(),o(`/campaign/${P.id}`),ve(null)},children:"Statistics"}),i.jsx("button",{className:"w-full px-3 py-2 text-center text-sm text-red-400 hover:bg-white/10",onClick:W=>{W.stopPropagation(),cN(P.id)},disabled:Te===P.id,children:Te===P.id?"Deleting...":"Delete Ad"}),i.jsx("button",{className:"w-full px-3 py-2 text-center text-sm text-white hover:bg-white/10",onClick:W=>{W.stopPropagation(),ve(null)},children:"Cancel"})]})})]})}),P.thumbnail_url?i.jsx("img",{src:P.thumbnail_url,alt:P.title,className:"w-full h-full object-cover rounded",onError:W=>{W.target.src="/placeholder-thumbnail.png"}}):i.jsx("div",{className:"w-full h-full bg-black flex items-center justify-center text-white text-xs",children:"No Cover"}),i.jsx("div",{className:"absolute bottom-2 right-2",children:i.jsxs(Dt,{variant:"secondary",className:"bg-black/70 text-white text-xs",children:[P.duration,"s"]})}),i.jsx("div",{className:"absolute bottom-2 left-2 right-12",children:i.jsx("p",{className:"text-xs text-white font-medium truncate bg-black/70 px-2 py-1 rounded",children:P.title})})]},P.id))}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(vs,{size:32,className:"text-white/70"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2 text-white",children:"No ads yet"}),i.jsx("p",{className:"text-white/70 mb-4",children:"Create your first sponsored ad to reach more viewers"}),i.jsx(H,{onClick:()=>o("/boost"),variant:"neon",className:"bg-primary text-black hover:bg-primary/90",children:"Create Your First Ad"})]})]}),x&&i.jsx(sn,{value:"saved",className:"mt-4",children:i.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-5 gap-2",children:[U.map((P,W)=>i.jsxs(De,{className:"relative aspect-[9/16] cursor-pointer group bg-black/10 overflow-hidden",onClick:()=>{j(W),Q(U),v(!0)},children:[i.jsxs("div",{className:"absolute top-2 left-2 z-10 flex items-center gap-1 bg-black/70 rounded-full px-2 py-1",children:[i.jsx(jr,{size:16,className:"text-white"}),i.jsx("span",{className:"text-xs text-white font-semibold",children:Hp(F[P.id]||0)})]}),P.thumbnail_url?i.jsx("img",{src:P.thumbnail_url.startsWith("http")?P.thumbnail_url:N.storage.from("limeytt-uploads").getPublicUrl(P.thumbnail_url).data.publicUrl,alt:P.title,className:"w-full h-full object-cover rounded",onError:J=>{console.error("Error loading thumbnail:",J),J.target.src="/placeholder-thumbnail.png"}}):i.jsx("div",{className:"w-full h-full bg-black flex items-center justify-center text-white text-xs",children:"No Cover"}),i.jsx("div",{className:"absolute bottom-2 right-2",children:i.jsx(Dt,{variant:"secondary",className:"bg-black/70 text-white text-xs",children:(()=>{const J=Number(P.duration);if(!J||isNaN(J)||J<0)return"0:00";const ae=Math.floor(J/60),ye=Math.floor(J%60);return`${ae}:${ye.toString().padStart(2,"0")}`})()})})]},P.id)),U.length===0&&i.jsx("div",{className:"text-center py-12 col-span-3",children:i.jsx("p",{className:"text-muted-foreground mb-4",children:"No saved videos yet"})})]})}),r&&i.jsx(sn,{value:"push",className:"mt-4",children:i.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Admin Message Center"}),i.jsx("p",{className:"text-white/70",children:"Send push notifications to users"})]}),i.jsx(De,{className:"p-6 bg-black/20 border-white/10",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Send To"}),i.jsxs(EI,{value:Oe.type,onValueChange:P=>et(W=>({...W,type:P})),children:[i.jsx(rj,{className:"bg-black/30 border-white/20 text-white",children:i.jsx(PI,{})}),i.jsxs(ij,{children:[i.jsx(Bh,{value:"all",children:"All Users"}),i.jsx(Bh,{value:"individual",children:"Individual User"})]})]})]}),Oe.type==="individual"&&i.jsxs("div",{className:"relative",children:[i.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Username"}),i.jsxs("div",{className:"relative",children:[i.jsx(rt,{placeholder:"Start typing username...",value:Oe.targetUsername,onChange:P=>wN(P.target.value),onFocus:()=>{Oe.targetUsername.length>=1&&Lt(!0)},className:"bg-black/30 border-white/20 text-white placeholder-white/50"}),Tt&&i.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})})]}),Qe&&Ae.length>0&&i.jsx("div",{className:"absolute z-10 w-full mt-1 bg-black/90 border border-white/20 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:Ae.map(P=>{var W;return i.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-white/10 cursor-pointer transition-colors",onClick:()=>yN(P.username),children:[i.jsxs(ut,{className:"w-8 h-8",children:[i.jsx(ft,{src:P.avatar_url,alt:P.username}),i.jsx(ht,{className:"bg-white/10 text-white text-xs",children:((W=P.username)==null?void 0:W.charAt(0).toUpperCase())||"U"})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-white font-medium truncate",children:P.display_name||P.username}),i.jsxs("div",{className:"text-white/60 text-sm truncate",children:["@",P.username]})]})]},P.user_id)})}),Qe&&Ae.length===0&&Oe.targetUsername.length>=1&&!Tt&&i.jsx("div",{className:"absolute z-10 w-full mt-1 bg-black/90 border border-white/20 rounded-lg shadow-lg p-3",children:i.jsxs("div",{className:"text-white/60 text-sm text-center",children:['No users found matching "',Oe.targetUsername,'"']})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Title"}),i.jsx(rt,{placeholder:"Notification title",value:Oe.title,onChange:P=>et(W=>({...W,title:P.target.value})),className:"bg-black/30 border-white/20 text-white placeholder-white/50",maxLength:100})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Message"}),i.jsx(ji,{placeholder:"Notification message",value:Oe.message,onChange:P=>et(W=>({...W,message:P.target.value})),className:"bg-black/30 border-white/20 text-white placeholder-white/50 min-h-[100px]",maxLength:500}),i.jsxs("div",{className:"text-xs text-white/50 mt-1",children:[Oe.message.length,"/500 characters"]})]}),i.jsx(H,{onClick:bN,disabled:Pt||!Oe.title.trim()||!Oe.message.trim(),className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3",children:Pt?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Sending..."]}):i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(In,{size:16}),"Send Push Notification"]})})]})})]})}),r&&x&&i.jsx(sn,{value:"sent",className:"mt-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Sent Notifications"}),i.jsx("p",{className:"text-white/70",children:"View your sent push notifications"})]}),Pl?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-4"}),i.jsx("p",{className:"text-white/70",children:"Loading sent notifications..."})]}):Gs.length>0?i.jsx("div",{className:"space-y-4",children:Gs.map(P=>{var W;return i.jsx(De,{className:"p-4 bg-black/20 border-white/10 cursor-pointer hover:bg-black/30 transition-colors",onClick:()=>{hn(P),bt(!0)},children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"w-10 h-10 bg-yellow-600 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(Da,{size:20,className:"text-white"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-white font-semibold truncate",children:P.title}),i.jsx("div",{className:"flex items-center gap-2 text-xs text-white/60 flex-shrink-0",children:i.jsx("span",{children:Tl(P.created_at)})})]}),i.jsx("p",{className:"text-white/60 text-sm mb-3",children:"Click to view full message"}),i.jsx("div",{className:"flex items-center gap-2",children:P.is_all_users?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-white/70",children:"All Users"}),i.jsxs("span",{className:"text-xs text-white/50",children:["(",P.recipient_count," recipients)"]})]}):P.to_user?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(ut,{className:"w-5 h-5",children:[i.jsx(ft,{src:P.to_user.avatar_url,alt:P.to_user.username}),i.jsx(ht,{className:"bg-white/10 text-white text-xs",children:((W=P.to_user.username)==null?void 0:W.charAt(0).toUpperCase())||"U"})]}),i.jsxs("span",{className:"text-xs text-white/70",children:["@",P.to_user.username]})]}):i.jsx("span",{className:"text-xs text-white/70",children:"Unknown Recipient"})})]})]})},P.id)})}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(In,{size:32,className:"text-white/70"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2 text-white",children:"No notifications sent yet"}),i.jsx("p",{className:"text-white/70",children:"Your sent push notifications will appear here"})]})]})})]})}),g&&_!==null&&i.jsx(Ih,{videos:D.length>0?D:h,startIndex:_,onClose:()=>v(!1)}),i.jsx(mr,{}),i.jsx(AI,{open:B,onClose:()=>q(!1),refreshKey:X}),k&&E&&E.type==="deleteVideo"&&i.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-black",children:[i.jsx("div",{className:"flex justify-end p-4",children:i.jsx("button",{className:"text-white text-lg font-bold",onClick:()=>{C(!1),O(null)},children:"Close"})}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center px-4 pb-8",children:[i.jsx("h3",{className:"text-2xl font-bold mb-6 text-primary logo-text-glow text-center",children:"Delete Video"}),i.jsx("p",{className:"text-white/70 text-lg mb-8 text-center max-w-md",children:"Are you sure you want to delete this video? This action cannot be undone."}),i.jsxs("div",{className:"flex space-x-4 w-full max-w-sm",children:[i.jsx(H,{onClick:()=>{C(!1),O(null)},variant:"outline",className:"flex-1 border-white/20 text-white hover:bg-white/10 h-12 text-lg",children:"Cancel"}),i.jsx(H,{onClick:uN,variant:"destructive",className:"flex-1 h-12 text-lg",children:"Delete"})]})]})]}),ne&&i.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-black",children:[i.jsxs("div",{className:"flex items-center justify-between p-4",children:[i.jsxs("h3",{className:"text-2xl font-bold text-primary logo-text-glow",children:["Followers (",Be,")"]}),i.jsx("button",{className:"text-white text-lg font-bold",onClick:()=>oe(!1),children:"Close"})]}),i.jsx("div",{className:"flex-1 px-4 pt-4 pb-8 overflow-y-auto",children:i.jsx("div",{className:"w-full max-w-md mx-auto space-y-4",children:xe?i.jsx("div",{className:"text-white text-center",children:"Loading..."}):Ce.length===0?i.jsx("div",{className:"text-white text-center",children:"No followers yet"}):Ce.map(P=>{var W,J;return i.jsxs("div",{className:"flex items-center justify-between bg-black/80 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>{oe(!1),o(`/profile/${P.username}`)},children:[i.jsxs(ut,{className:"w-10 h-10",children:[i.jsx(ft,{src:P.avatar_url||void 0,alt:P.username}),i.jsx(ht,{children:((J=(W=P.username)==null?void 0:W.charAt(0))==null?void 0:J.toUpperCase())||"U"})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-white font-semibold",children:P.display_name||P.username}),i.jsxs("span",{className:"text-gray-400 text-sm",children:["@",P.username]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[e&&P.user_id!==e.id&&i.jsx("button",{className:Ra("p-2 rounded-full transition-colors",wt[P.user_id]?"bg-green-600 hover:bg-green-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white",re&&"opacity-50 pointer-events-none"),onClick:ae=>{ae.stopPropagation(),vN(P.user_id)},disabled:re,title:wt[P.user_id]?"Unfollow":"Follow",children:wt[P.user_id]?i.jsx(Qm,{size:16}):i.jsx(Ms,{size:16})}),x&&i.jsx("button",{className:Ra("p-2 rounded-full bg-red-600 hover:bg-red-700 text-white transition-colors",z===P.user_id&&"opacity-50 pointer-events-none"),onClick:ae=>{ae.stopPropagation(),pN(P.user_id)},disabled:z===P.user_id,title:"Remove follower",children:i.jsx(Ov,{size:16})})]})]},P.user_id)})})})]}),he&&i.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-black",children:[i.jsxs("div",{className:"flex items-center justify-between p-4",children:[i.jsxs("h3",{className:"text-2xl font-bold text-primary logo-text-glow",children:["Following (",Se,")"]}),i.jsx("button",{className:"text-white text-lg font-bold",onClick:()=>je(!1),children:"Close"})]}),i.jsx("div",{className:"flex-1 px-4 pt-4 pb-8 overflow-y-auto",children:i.jsx("div",{className:"w-full max-w-md mx-auto space-y-4",children:V?i.jsx("div",{className:"text-white text-center",children:"Loading..."}):de.length===0?i.jsx("div",{className:"text-white text-center",children:"Not following anyone yet"}):de.map(P=>{var W,J;return i.jsxs("div",{className:"flex items-center justify-between bg-black/80 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>{je(!1),o(`/profile/${P.username}`)},children:[i.jsxs(ut,{className:"w-10 h-10",children:[i.jsx(ft,{src:P.avatar_url||void 0,alt:P.username}),i.jsx(ht,{children:((J=(W=P.username)==null?void 0:W.charAt(0))==null?void 0:J.toUpperCase())||"U"})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-white font-semibold",children:P.display_name||P.username}),i.jsxs("span",{className:"text-gray-400 text-sm",children:["@",P.username]})]})]}),i.jsx("button",{className:Ra("p-2 rounded-full bg-red-600 hover:bg-red-700 text-white transition-colors",z===P.user_id&&"opacity-50 pointer-events-none"),onClick:ae=>{ae.stopPropagation(),mN(P.user_id)},disabled:z===P.user_id,children:i.jsx(Ov,{size:16})})]},P.user_id)})})})]}),i.jsx(VI,{open:me,onOpenChange:be,children:i.jsxs(Sj,{side:"bottom",className:"rounded-t-xl max-h-[80vh] overflow-y-auto","aria-describedby":"message-sheet-description",children:[i.jsx("div",{className:"w-12 h-1.5 bg-muted rounded-full mx-auto mb-4"}),i.jsxs(kj,{className:"mb-4",children:[i.jsx(Cj,{children:"Send Message"}),i.jsx("p",{id:"message-sheet-description",className:"text-sm text-muted-foreground",children:"Send a direct message to this user."})]}),i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsxs(ut,{className:"w-10 h-10",children:[i.jsx(ft,{src:(l==null?void 0:l.avatar_url)||void 0,alt:l==null?void 0:l.username}),i.jsx(ht,{children:((Jp=(Qp=l==null?void 0:l.username)==null?void 0:Qp.charAt(0))==null?void 0:Jp.toUpperCase())||"U"})]}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium",children:["@",l==null?void 0:l.username]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Send a message"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("textarea",{value:_e,onChange:P=>Ee(P.target.value),placeholder:"Type your message...",className:"w-full p-3 border rounded-lg resize-none h-24 bg-background",maxLength:500,autoFocus:!0}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(H,{variant:"outline",onClick:()=>{be(!1),Ee("")},disabled:We,children:"Cancel"}),i.jsxs(H,{onClick:jN,disabled:!_e.trim()||We,className:"bg-green-600 hover:bg-green-700 text-white",children:[i.jsx(In,{size:16,className:"mr-2"}),We?"Sending...":"Send Message"]})]})]})]})}),A&&(l==null?void 0:l.avatar_url)&&i.jsxs("div",{className:"fixed inset-0 z-50 bg-black flex flex-col",onClick:()=>G(!1),children:[i.jsx("div",{className:"p-4 flex justify-end",children:i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>G(!1),className:"bg-black/50 hover:bg-black/70 text-white",children:i.jsx(Nr,{size:24})})}),i.jsx("div",{className:"flex-1 flex items-center justify-center p-4 pb-24",children:i.jsx("img",{src:l.avatar_url,alt:"Profile",className:"max-w-full max-h-full object-contain",onClick:P=>P.stopPropagation()})})]}),Rt&&Me&&i.jsx("div",{className:"fixed inset-0 z-50 bg-black flex flex-col",onClick:()=>bt(!1),children:i.jsxs("div",{className:"w-full h-full flex flex-col",onClick:P=>P.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-yellow-600 rounded-full flex items-center justify-center",children:i.jsx(Da,{size:20,className:"text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-white",children:"Push Notification"}),i.jsx("p",{className:"text-sm text-white/60",children:Tl(Me.created_at)})]})]}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>bt(!1),className:"text-white hover:bg-white/10",children:i.jsx(Nr,{size:24})})]}),i.jsxs("div",{className:"flex-1 p-4 space-y-6 overflow-y-auto",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-white/70 block mb-2",children:"Title"}),i.jsx("p",{className:"text-white font-semibold text-lg",children:Me.title})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-white/70 block mb-2",children:"Message"}),i.jsx("div",{className:"bg-black/40 border border-white/10 rounded-lg p-4",children:i.jsx("p",{className:"text-white/90 leading-relaxed whitespace-pre-wrap",children:Me.message})})]}),(Me.type==="comment_reply"||Me.type==="comment_thread_activity"||Me.type==="video_comment")&&Ze.comment&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-white/70 block mb-2",children:Me.type==="video_comment"?"Comment on your video":"Related Comment"}),i.jsx("div",{className:"bg-black/40 border border-white/10 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs(ut,{className:"w-8 h-8 flex-shrink-0",children:[i.jsx(ft,{src:(eg=Ze.comment.profiles)==null?void 0:eg.avatar_url}),i.jsx(ht,{className:"bg-white/10 text-white text-xs",children:((rg=(tg=Ze.comment.profiles)==null?void 0:tg.username)==null?void 0:rg.charAt(0).toUpperCase())||"U"})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("span",{className:"text-white font-medium text-sm",children:["@",((ng=Ze.comment.profiles)==null?void 0:ng.username)||"Unknown"]}),i.jsx("span",{className:"text-white/50 text-xs",children:Tl(Ze.comment.created_at)})]}),i.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:Ze.comment.content})]})]})})]}),Ze.video&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-white/70 block mb-2",children:"Video"}),i.jsx("div",{className:"bg-black/40 border border-white/10 rounded-lg p-3",children:i.jsxs("div",{className:"flex items-center gap-3",children:[Ze.video.thumbnail_url&&i.jsx("img",{src:Ze.video.thumbnail_url,alt:"Video thumbnail",className:"w-16 h-12 object-cover rounded"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white font-medium text-sm",children:Ze.video.title||"Untitled Video"}),i.jsxs("p",{className:"text-white/60 text-xs",children:[Ze.video.view_count||0," views"]})]})]})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-white/70 block mb-2",children:"Sent to"}),i.jsx("div",{className:"bg-black/40 border border-white/10 rounded-lg p-4",children:Me.is_all_users?i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:i.jsx(Aa,{size:16,className:"text-white"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white font-medium",children:"All Users"}),i.jsxs("p",{className:"text-white/60 text-sm",children:[Me.recipient_count," recipients"]})]})]}):Me.to_user?i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(ut,{className:"w-8 h-8",children:[i.jsx(ft,{src:Me.to_user.avatar_url,alt:Me.to_user.username}),i.jsx(ht,{className:"bg-white/10 text-white text-sm",children:((sg=Me.to_user.username)==null?void 0:sg.charAt(0).toUpperCase())||"U"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white font-medium",children:Me.to_user.display_name||Me.to_user.username}),i.jsxs("p",{className:"text-white/60 text-sm",children:["@",Me.to_user.username]})]})]}):i.jsx("p",{className:"text-white/70",children:"Unknown Recipient"})})]})]}),(Me.type==="comment_reply"||Me.type==="comment_thread_activity"||Me.type==="video_comment")&&Ze.comment&&i.jsxs("div",{className:"p-4 border-t border-white/10",children:[i.jsx("label",{className:"text-sm font-medium text-white/70 block mb-2",children:"Quick Reply"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(ut,{className:"w-8 h-8 flex-shrink-0",children:[i.jsx(ft,{src:(ig=e==null?void 0:e.user_metadata)==null?void 0:ig.avatar_url}),i.jsx(ht,{className:"bg-white/10 text-white text-xs",children:((og=e==null?void 0:e.email)==null?void 0:og.charAt(0).toUpperCase())||"U"})]}),i.jsx("div",{className:"flex-1",children:i.jsx(rt,{value:Ze.replyText||"",onChange:P=>kn(W=>({...W,replyText:P.target.value})),placeholder:`Reply to @${(ag=Ze.comment.profiles)==null?void 0:ag.username}...`,className:"bg-white/10 border-white/20 text-white placeholder-white/50",onKeyPress:P=>{P.key==="Enter"&&!P.shiftKey&&(P.preventDefault(),iN())}})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx(H,{onClick:sN,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:"Reply"}),i.jsx(H,{onClick:()=>{bt(!1),Ze.video&&Ze.comment&&(du({video:Ze.video,commentId:Ze.comment.id}),uu(!0))},variant:"outline",className:"flex-1 bg-green-600 hover:bg-green-700 text-white border-green-600",children:"Go to Video"})]}),i.jsx(H,{onClick:()=>bt(!1),variant:"outline",className:"w-full bg-white/10 hover:bg-white/20 text-white border-white/20",children:"Close"})]})]})]}),!(Me.type==="comment_reply"||Me.type==="comment_thread_activity"||Me.type==="video_comment")&&i.jsx("div",{className:"p-4 border-t border-white/10",children:i.jsx(H,{onClick:()=>bt(!1),className:"w-full bg-white/10 hover:bg-white/20 text-white border-white/20 h-12 text-lg",variant:"outline",children:"Close"})})]})}),rN&&At.comment&&i.jsxs("div",{className:"fixed inset-0 z-60 bg-black flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>Qo(!1),className:"text-white hover:bg-white/10",children:"←"}),i.jsx("h2",{className:"text-lg font-semibold text-white",children:"Reply to Comment"})]}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>Qo(!1),className:"text-white hover:bg-white/10",children:i.jsx(Nr,{size:20})})]}),i.jsxs("div",{className:"flex-1 flex flex-col",children:[At.video&&i.jsx("div",{className:"p-4 border-b border-white/10",children:i.jsxs("div",{className:"flex items-center gap-3",children:[At.video.thumbnail_url&&i.jsx("img",{src:At.video.thumbnail_url,alt:"Video thumbnail",className:"w-20 h-15 object-cover rounded"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white font-medium",children:At.video.title||"Untitled Video"}),i.jsxs("p",{className:"text-white/60 text-sm",children:[At.video.view_count||0," views"]})]})]})}),i.jsx("div",{className:"p-4 border-b border-white/10",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs(ut,{className:"w-10 h-10 flex-shrink-0",children:[i.jsx(ft,{src:(lg=At.comment.profiles)==null?void 0:lg.avatar_url}),i.jsx(ht,{className:"bg-white/10 text-white text-sm",children:((dg=(cg=At.comment.profiles)==null?void 0:cg.username)==null?void 0:dg.charAt(0).toUpperCase())||"U"})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsxs("span",{className:"text-white font-medium",children:["@",((ug=At.comment.profiles)==null?void 0:ug.username)||"Unknown"]}),i.jsx("span",{className:"text-white/50 text-sm",children:Tl(At.comment.created_at)})]}),i.jsx("p",{className:"text-white/90 leading-relaxed",children:At.comment.content})]})]})}),i.jsxs("div",{className:"flex-1 flex flex-col p-4",children:[i.jsxs("div",{className:"flex-1 flex flex-col",children:[i.jsx("label",{className:"text-white/70 text-sm mb-3",children:"Your Reply"}),i.jsxs("div",{className:"flex gap-3 mb-4",children:[i.jsxs(ut,{className:"w-10 h-10 flex-shrink-0",children:[i.jsx(ft,{src:(fg=e==null?void 0:e.user_metadata)==null?void 0:fg.avatar_url}),i.jsx(ht,{className:"bg-white/10 text-white text-sm",children:((hg=e==null?void 0:e.email)==null?void 0:hg.charAt(0).toUpperCase())||"U"})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx(ji,{value:Ze.replyText||"",onChange:P=>kn(W=>({...W,replyText:P.target.value})),placeholder:`Reply to @${(mg=At.comment.profiles)==null?void 0:mg.username}...`,className:"bg-white/10 border-white/20 text-white placeholder-white/50 min-h-[120px] resize-none",onKeyPress:P=>{P.key==="Enter"&&(P.ctrlKey||P.metaKey)&&(P.preventDefault(),qp())},onFocus:()=>{var W,J;const P=(W=At.comment.profiles)==null?void 0:W.username;P&&!((J=Ze.replyText)!=null&&J.includes(`@${P}`))&&kn(ae=>({...ae,replyText:`@${P} ${ae.replyText||""}`}))}}),i.jsx("p",{className:"text-white/50 text-xs mt-2",children:"Press Ctrl+Enter to send"})]})]})]}),i.jsxs("div",{className:"flex gap-3 pt-4 border-t border-white/10",children:[i.jsx(H,{onClick:()=>Qo(!1),variant:"outline",className:"flex-1 bg-white/10 hover:bg-white/20 text-white border-white/20",children:"Cancel"}),i.jsx(H,{onClick:qp,disabled:!((pg=Ze.replyText)!=null&&pg.trim())||Ze.isReplying,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:Ze.isReplying?"Sending...":"Send Reply"})]})]})]})]}),nN&&cu.video&&i.jsx(Ih,{videos:[cu.video],startIndex:0,highlightCommentId:cu.commentId,autoOpenComments:!0,onClose:()=>{uu(!1),du({})}})]}):i.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[i.jsx("div",{className:"sticky top-0 z-10 bg-background border-b border-border p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>o(-1),children:"← Back"}),i.jsx("h1",{className:"text-2xl font-black text-primary tracking-wider logo-text-glow",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:"900",letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))"},children:"Profile Not Found"}),i.jsx("div",{})]})}),i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"User not found"}),i.jsx("p",{className:"text-muted-foreground",children:"The profile you're looking for doesn't exist."})]})})]})},HI=()=>{const e=un(),t=u.useRef(null),r=u.useRef(null),[n,s]=u.useState(null),[o,a]=u.useState(""),[l,c]=u.useState(""),[d,f]=u.useState(!1),[h,m]=u.useState(null),[x,y]=u.useState("All"),{toast:p}=$t(),{user:b}=it(),[w,g]=u.useState(null),[v,_]=u.useState(null),j=ot(),[k,C]=u.useState(null);if(u.useEffect(()=>{var L,ee;(L=e.state)!=null&&L.file&&s(e.state.file),(ee=e.state)!=null&&ee.preview&&m(e.state.preview)},[e.state]),u.useEffect(()=>{b&&N.from("profiles").select("deactivated").eq("user_id",b.id).single().then(({data:L})=>C(L))},[b]),k!=null&&k.deactivated)return i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-primary mb-4",children:"Account Deactivated"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"You cannot upload while your account is deactivated."})]})});const E=(L,ee)=>{var K;const U=(K=L.target.files)==null?void 0:K[0];if(U){if(!["video/mp4","video/webm","video/quicktime","video/mov","video/3gpp","video/3gpp2","video/ogg","video/x-matroska","video/avi","video/x-msvideo","video/mpeg","video/mp2t","video/x-flv","video/x-ms-wmv","video/hevc","video/h264","video/x-m4v","image/jpeg","image/jpg","image/png","image/gif","image/webp","image/heic","image/heif"].includes(U.type)){p({title:"Unsupported File Type",description:"Please select a supported video or image file. Most smartphone formats are supported including iPhone videos (mov, mp4, m4v) and images (jpeg, png, heic).",variant:"destructive"}),L.target.value="",s(null),m(null);return}if(U.size>50*1024*1024){p({title:"File Too Large",description:"Your video is too large. The maximum allowed size is 50 MB. Please use a mobile app (like InShot, CapCut, or your phone's built-in editor) to compress your video before uploading.",variant:"destructive"}),L.target.value="",s(null),m(null);return}s(U);const Q=URL.createObjectURL(U);if(m(Q),!o){const ne=U.name.split(".")[0];a(ne.charAt(0).toUpperCase()+ne.slice(1))}}},O=()=>{r.current&&(r.current.value="",r.current.click())},B=L=>{var U;const ee=(U=L.target.files)==null?void 0:U[0];if(ee){const K=URL.createObjectURL(ee);j("/create-video",{state:{file:ee,preview:K}})}},q=L=>new Promise((ee,U)=>{const K=document.createElement("video");K.preload="metadata",K.src=URL.createObjectURL(L),K.muted=!0,K.playsInline=!0,K.onloadedmetadata=()=>{const D=Math.round(K.duration);if(D>300){p({title:"Video Too Long",description:"Please select a video that is 5 minutes or less.",variant:"destructive"}),s(null),m(null),U(new Error("Video duration exceeds 5 minutes"));return}ee(D)},K.onerror=D=>{console.error("Video metadata extraction error:",D),p({title:"Failed to Load Video",description:"Could not read video metadata. This may happen with unsupported formats or corrupted files. Try a different video, preferably one recorded with your phone camera (mp4, mov, m4v, 3gp).",variant:"destructive"}),s(null),m(null),U(new Error("Failed to load video for metadata extraction"))}}),X=L=>new Promise((ee,U)=>{const K=document.createElement("video");K.preload="metadata",K.src=URL.createObjectURL(L),K.muted=!0,K.playsInline=!0,K.onloadedmetadata=()=>{const D=Math.min(1,K.duration*.25);K.currentTime=D},K.onseeked=()=>{const D=document.createElement("canvas"),Q=D.getContext("2d");D.width=320,D.height=568,Q?(Q.drawImage(K,0,0,D.width,D.height),D.toBlob(ne=>{ne?ee(ne):U(new Error("Failed to generate thumbnail"))},"image/jpeg",.8)):U(new Error("Failed to get canvas context"))},K.onerror=D=>U(new Error("Failed to load video for thumbnail generation"))}),Z=async()=>{if(!n||!b||!o.trim()){p({title:"Missing Information",description:"Please select a file and add a title",variant:"destructive"});return}f(!0);try{let L=0,ee="";if(n.type.startsWith("video/")){if(L=await q(n),!Number.isFinite(L)||L<=0){p({title:"Invalid Video Duration",description:"Could not determine video duration. Please try a different video.",variant:"destructive"}),f(!1);return}if(w){const fe=`${b.id}/thumbnails/cover_${Date.now()}.jpg`,{error:de}=await N.storage.from("limeytt-uploads").upload(fe,w);de?p({title:"Cover upload failed",description:de.message,variant:"destructive"}):ee=fe}else try{const fe=await X(n),de=new File([fe],"thumbnail.jpg",{type:"image/jpeg"}),ce=`${b.id}/thumbnails/${Date.now()}.jpg`,{error:xe}=await N.storage.from("limeytt-uploads").upload(ce,de);xe||(ee=ce)}catch(fe){console.warn("Failed to generate thumbnail:",fe)}}else if(n.type.startsWith("image/"))if(w){const fe=`${b.id}/thumbnails/cover_${Date.now()}.jpg`,{error:de}=await N.storage.from("limeytt-uploads").upload(fe,w);de||(ee=fe)}else{const fe=`${b.id}/thumbnails/img_${Date.now()}.jpg`;try{const de=document.createElement("canvas"),ce=de.getContext("2d"),xe=new Image;await new Promise((T,A)=>{xe.onload=T,xe.onerror=A,xe.src=URL.createObjectURL(n)}),de.width=320,de.height=568,ce&&(ce.drawImage(xe,0,0,de.width,de.height),de.toBlob(async T=>{if(T){const A=new File([T],"thumbnail.jpg",{type:"image/jpeg"}),{error:G}=await N.storage.from("limeytt-uploads").upload(fe,A);G||(ee=fe)}},"image/jpeg",.8))}catch(de){console.warn("Failed to generate image thumbnail:",de)}}const U=n.name.split(".").pop(),K=`${b.id}/${Date.now()}.${U}`,{data:D,error:Q}=await N.storage.from("limeytt-uploads").upload(K,n);if(Q){if(Q.message&&Q.message.toLowerCase().includes("maximum allowed size")){p({title:"File Too Large",description:"Your video is too large. The maximum allowed size is 50 MB.",variant:"destructive"}),f(!1);return}throw Q}const{data:{publicUrl:ne}}=N.storage.from("limeytt-uploads").getPublicUrl(K),{data:oe,error:he}=await N.from("profiles").select("username, avatar_url").eq("user_id",b.id).single();if(he||!oe)throw new Error("Could not fetch user profile for video upload.");const{data:je,error:Ce}=await N.from("videos").insert({title:o,description:l,video_url:ne,thumbnail_url:ee,duration:L,user_id:b.id,category:x,username:oe.username,avatar_url:oe.avatar_url}).select();if(Ce)throw console.error("Database error details:",{code:Ce.code,message:Ce.message,details:Ce.details,hint:Ce.hint}),Ce;p({title:"Upload Successful! 🎉",description:"Your content has been uploaded to Limey",className:"bg-green-600 text-white border-green-700"}),s(null),a(""),c(""),m(null),g(null),_(null)}catch(L){console.error("Upload error:",L);let ee="Something went wrong";L.message?ee=L.message:L.code==="23503"?ee="User profile not found. Please try logging out and back in.":L.code==="23505"?ee="A video with this title already exists. Please choose a different title.":L.code==="42501"&&(ee="Permission denied. Please check your account status."),p({title:"Upload Failed",description:ee,variant:"destructive"})}finally{f(!1)}};return b?i.jsxs("div",{className:"min-h-screen bg-background pb-20 pt-24",children:[i.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10 p-4",children:i.jsx("div",{className:"flex items-center",children:i.jsx("span",{className:"text-2xl font-black text-white tracking-wider logo-text-glow",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:"900",letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))"},children:"Upload"})})}),i.jsxs("div",{className:"p-4 max-w-2xl mx-auto",children:[i.jsx(De,{className:"p-8 border-2 border-dashed border-border hover:border-primary transition-colors",children:i.jsx("div",{className:"text-center",children:h?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"mb-2 w-full max-w-xs mx-auto aspect-[9/16] bg-black rounded-lg overflow-hidden flex items-center justify-center",children:n!=null&&n.type.startsWith("video/")?i.jsx("video",{src:h,className:"w-full h-full object-cover",controls:!0}):i.jsx("img",{src:h,alt:"Preview",className:"w-full h-full object-cover"})}),i.jsxs("p",{className:"text-sm text-muted-foreground mt-2 text-center",children:[n==null?void 0:n.name," (",(((n==null?void 0:n.size)||0)/1024/1024).toFixed(2)," MB)"]}),i.jsx("input",{type:"file",accept:"video/*,image/*",className:"hidden",ref:t,onChange:L=>E(L)}),i.jsx("div",{className:"flex justify-center mt-4",children:i.jsx(H,{variant:"outline",onClick:()=>{var L;t.current&&(t.current.value=""),(L=t.current)==null||L.click()},children:"Change File"})})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("span",{className:"text-2xl",children:"📁"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Create or Upload Your Content"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Use the Create button to record a new video or take a photo, or Upload to select an existing video or image to share with the Limey community."})]}),i.jsx("input",{type:"file",accept:"video/*,image/*",capture:"environment",className:"hidden",ref:r,onChange:B}),i.jsx("input",{type:"file",accept:"video/*,image/*",onChange:L=>E(L),className:"hidden",id:"file-upload"}),i.jsxs("div",{className:"flex gap-3 justify-center",children:[i.jsxs(H,{variant:"neon",className:"flex items-center gap-2",onClick:O,children:[i.jsx(eE,{size:18}),"Create"]}),i.jsx("label",{htmlFor:"file-upload",children:i.jsx(H,{variant:"neon",asChild:!0,className:"cursor-pointer flex items-center gap-2",children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Ms,{size:18}),"Upload"]})})})]})]})})}),n&&i.jsx(De,{className:"mt-6 p-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Cover Image"}),i.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[i.jsx("div",{className:"w-24 h-36 bg-black rounded overflow-hidden flex items-center justify-center border border-border",children:v?i.jsx("img",{src:v,alt:"Cover Preview",className:"w-full h-full object-cover"}):h?i.jsx("video",{src:h,className:"w-full h-full object-cover"}):i.jsx("span",{className:"text-white text-xs",children:"No Cover"})}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx("input",{type:"file",accept:"image/*",className:"hidden",id:"cover-image-input",onChange:L=>{var U;const ee=(U=L.target.files)==null?void 0:U[0];ee&&(g(ee),_(URL.createObjectURL(ee)))}}),i.jsx("label",{htmlFor:"cover-image-input",children:i.jsx(H,{variant:"outline",className:"cursor-pointer",asChild:!0,children:i.jsx("span",{children:"Choose Cover Image"})})}),w&&i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>{g(null),_(null)},children:"Use Default Thumbnail"})]})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Choose a custom cover image or use the default video thumbnail."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Title *"}),i.jsx(rt,{placeholder:"Give your content a catchy title...",value:o,onChange:L=>a(L.target.value),maxLength:100}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[o.length,"/100 characters"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Category"}),i.jsxs("select",{className:"w-full border rounded px-3 py-2 bg-background text-foreground",value:x||"All",onChange:L=>y(L.target.value),required:!0,children:[i.jsx("option",{value:"All",children:"All"}),i.jsx("option",{value:"Anime",children:"Anime"}),i.jsx("option",{value:"Bar Limes",children:"Bar Limes"}),i.jsx("option",{value:"Cartoon",children:"Cartoon"}),i.jsx("option",{value:"Carnival",children:"Carnival"}),i.jsx("option",{value:"Comedy",children:"Comedy"}),i.jsx("option",{value:"Dance",children:"Dance"}),i.jsx("option",{value:"Dancehall",children:"Dancehall"}),i.jsx("option",{value:"DIY Projects",children:"DIY Projects"}),i.jsx("option",{value:"Educational",children:"Educational"}),i.jsx("option",{value:"Events",children:"Events"}),i.jsx("option",{value:"Fete",children:"Fete"}),i.jsx("option",{value:"Funny Vids",children:"Funny Vids"}),i.jsx("option",{value:"HOW TOs",children:"HOW TOs"}),i.jsx("option",{value:"Local News",children:"Local News"}),i.jsx("option",{value:"Music Vids",children:"Music Vids"}),i.jsx("option",{value:"Parties",children:"Parties"}),i.jsx("option",{value:"Soca",children:"Soca"}),i.jsx("option",{value:"Trini Celebs",children:"Trini Celebs"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Description"}),i.jsx(ji,{placeholder:"Tell viewers about your content...",value:l,onChange:L=>c(L.target.value),maxLength:500,rows:4}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[l.length,"/500 characters"]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[n.type.startsWith("video/")&&i.jsx(Dt,{variant:"secondary",children:"🎬 Video"}),n.type.startsWith("image/")&&i.jsx(Dt,{variant:"secondary",children:"📷 Image"}),n.type.startsWith("audio/")&&i.jsx(Dt,{variant:"secondary",children:"🎵 Audio"}),i.jsx(Dt,{variant:"outline",children:"Trinidad & Tobago"})]}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsx(H,{variant:"outline",onClick:()=>{s(null),m(null),a(""),c("")},disabled:d,children:"Cancel"}),i.jsx(H,{variant:"neon",onClick:Z,disabled:d||!o.trim(),className:"flex-1",children:d?"Uploading...":"Share to Limey 🚀"})]})]})}),i.jsxs(De,{className:"mt-6 p-4 bg-muted/50",children:[i.jsx("h4",{className:"font-medium text-foreground mb-2 text-center",children:"📝 Upload Tips"}),i.jsxs("ul",{className:"text-sm text-muted-foreground space-y-4 text-center",children:[i.jsxs("li",{children:["• ",i.jsx("b",{children:"Max video duration:"})," 5 minutes"]}),i.jsxs("li",{children:["• ",i.jsx("b",{children:"Max file size:"})," 50 MB"]}),i.jsxs("li",{children:["• ",i.jsx("b",{children:"Supported video formats:"})," mp4, mov, webm, 3gp, 3gpp2, avi, mpeg, m4v, hevc, h264"]}),i.jsxs("li",{children:["• ",i.jsx("b",{children:"Supported image formats:"})," jpeg, jpg, png, gif, webp, heic, heif"]}),i.jsxs("li",{children:["• ",i.jsx("b",{children:"iPhone users:"})," All iPhone camera formats supported (mov, mp4, m4v, heic, heif)"]}),i.jsxs("li",{children:["• ",i.jsx("b",{children:"Android users:"})," All standard Android formats supported (mp4, 3gp, jpeg, png)"]}),i.jsxs("li",{children:["• If your video is too large, use free apps like ",i.jsx("b",{children:"CapCut"}),", ",i.jsx("b",{children:"InShot"}),", or your phone's built-in editor to compress the video and maintain quality before uploading."]}),i.jsx("li",{children:"• Keep videos under 60 seconds for best engagement"}),i.jsx("li",{children:"• Use good lighting and clear audio"}),i.jsx("li",{children:"• Add hashtags in your description to reach more viewers"}),i.jsx("li",{children:"• Upload during peak hours (6-9 PM) for maximum views"})]})]})]}),i.jsx(mr,{})]}):i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-primary mb-4",children:"Please Sign In"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"You need to be signed in to upload content."}),i.jsx(H,{onClick:()=>window.location.href="/",variant:"neon",children:"Go to Sign In"})]})})};var Up="Switch",[GI,A3]=Us(Up),[YI,ZI]=GI(Up),Ej=u.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:o,required:a,disabled:l,value:c="on",onCheckedChange:d,form:f,...h}=e,[m,x]=u.useState(null),y=st(t,v=>x(v)),p=u.useRef(!1),b=m?f||!!m.closest("form"):!0,[w=!1,g]=Rs({prop:s,defaultProp:o,onChange:d});return i.jsxs(YI,{scope:r,checked:w,disabled:l,children:[i.jsx(Ie.button,{type:"button",role:"switch","aria-checked":w,"aria-required":a,"data-state":Rj(w),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:y,onClick:Pe(e.onClick,v=>{g(_=>!_),b&&(p.current=v.isPropagationStopped(),p.current||v.stopPropagation())})}),b&&i.jsx(KI,{control:m,bubbles:!p.current,name:n,value:c,checked:w,required:a,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});Ej.displayName=Up;var Pj="SwitchThumb",Tj=u.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,s=ZI(Pj,r);return i.jsx(Ie.span,{"data-state":Rj(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})});Tj.displayName=Pj;var KI=e=>{const{control:t,checked:r,bubbles:n=!0,...s}=e,o=u.useRef(null),a=f_(r),l=wb(t);return u.useEffect(()=>{const c=o.current,d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(a!==r&&h){const m=new Event("click",{bubbles:n});h.call(c,r),c.dispatchEvent(m)}},[a,r,n]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:o,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Rj(e){return e?"checked":"unchecked"}var Aj=Ej,XI=Tj;const Mj=u.forwardRef(({className:e,...t},r)=>i.jsx(Aj,{className:Fe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:i.jsx(XI,{className:Fe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Mj.displayName=Aj.displayName;var QI="Label",Dj=u.forwardRef((e,t)=>i.jsx(Ie.label,{...e,ref:t,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Dj.displayName=QI;var Ij=Dj;const JI=wl("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ri=u.forwardRef(({className:e,...t},r)=>i.jsx(Ij,{ref:r,className:Fe(JI(),e),...t}));ri.displayName=Ij.displayName;const eO=()=>{const{user:e,signOut:t}=it(),r=ot(),[n,s]=u.useState(null),[o,a]=u.useState(!0),[l,c]=u.useState(!1),[d,f]=u.useState(""),[h,m]=u.useState(""),[x,y]=u.useState(""),[p,b]=u.useState(!1),[w,g]=u.useState(!1),[v,_]=u.useState(!1),[j,k]=u.useState(!1);u.useState(!1);const[C,E]=u.useState(!1),[O,B]=u.useState(!1),[q,X]=u.useState(!1);u.useEffect(()=>{Z()},[e]);const Z=async()=>{if(e)try{const{data:K,error:D}=await N.from("user_settings").select("*").eq("user_id",e.id).single();if(D&&D.code!=="PGRST116")throw D;s(K||{notification_settings:{},privacy_settings:{private_account:!1},account_settings:{dark_mode:!1}})}catch(K){console.error("Error fetching settings:",K)}finally{a(!1)}},L=K=>{K?(X(!0),B(!0)):ee(!1)},ee=async K=>{if(e){E(!0);try{const{error:D}=await N.from("profiles").update({deactivated:K}).eq("user_id",e.id);if(D)throw D;K||ei({title:"Account reactivated",description:"Your account is now active.",className:"bg-green-600 text-white border-green-700"}),K&&(await t(),r("/"))}catch(D){ei({title:"Error",description:D.message||"Failed to update account status",variant:"destructive"})}finally{E(!1),B(!1),X(!1)}}},U=async()=>{if(e){if(h!==x){ei({title:"Error",description:"New passwords do not match",variant:"destructive"});return}if(h.length<6){ei({title:"Error",description:"Password must be at least 6 characters long",variant:"destructive"});return}k(!0);try{const{error:K}=await N.auth.updateUser({password:h});if(K)throw K;ei({title:"Password updated",description:"Your password has been changed successfully",className:"bg-green-600 text-white border-green-700"}),f(""),m(""),y(""),c(!1)}catch(K){ei({title:"Error",description:K.message||"Failed to update password",variant:"destructive"})}finally{k(!1)}}};return o?i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):i.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[i.jsx("div",{className:"sticky top-0 z-10 bg-background border-b border-border p-4",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>r(-1),children:i.jsx(Bn,{size:20})}),i.jsx("h1",{className:"text-2xl font-black text-primary tracking-wider logo-text-glow",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:"900",letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))"},children:"Settings"})]})}),i.jsxs("div",{className:"p-4 space-y-4",children:[i.jsxs(De,{children:[i.jsx(qi,{children:i.jsx(Hi,{children:"Notifications"})}),i.jsx(Gi,{children:i.jsx("p",{className:"text-sm text-muted-foreground",children:"No notification settings available."})})]}),i.jsxs(De,{children:[i.jsx(qi,{children:i.jsx(Hi,{children:"Security"})}),i.jsxs(Gi,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ri,{children:"Email"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:e==null?void 0:e.email})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ri,{children:"Password"}),i.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>c(!l),children:[i.jsx(sE,{size:16,className:"mr-2"}),"Edit"]})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"********"})]}),l&&i.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ri,{htmlFor:"oldPassword",children:"Current Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(rt,{id:"oldPassword",type:p?"text":"password",value:d,onChange:K=>f(K.target.value),placeholder:"Enter current password"}),i.jsx(H,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>b(!p),children:p?i.jsx(ho,{size:16}):i.jsx(jr,{size:16})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ri,{htmlFor:"newPassword",children:"New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(rt,{id:"newPassword",type:w?"text":"password",value:h,onChange:K=>m(K.target.value),placeholder:"Enter new password"}),i.jsx(H,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>g(!w),children:w?i.jsx(ho,{size:16}):i.jsx(jr,{size:16})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ri,{htmlFor:"confirmPassword",children:"Confirm New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(rt,{id:"confirmPassword",type:v?"text":"password",value:x,onChange:K=>y(K.target.value),placeholder:"Confirm new password"}),i.jsx(H,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>_(!v),children:v?i.jsx(ho,{size:16}):i.jsx(jr,{size:16})})]})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(H,{onClick:U,disabled:j||!d||!h||!x,className:"flex-1",children:j?"Updating...":"Update Password"}),i.jsx(H,{variant:"outline",onClick:()=>{c(!1),f(""),m(""),y("")},className:"flex-1",children:"Cancel"})]})]})]})]}),i.jsxs(De,{children:[i.jsx(qi,{children:i.jsx(Hi,{children:"Privacy"})}),i.jsx(Gi,{children:i.jsx("p",{className:"text-sm text-muted-foreground",children:"Privacy settings will be available here in future updates."})})]}),i.jsxs(De,{children:[i.jsx(qi,{children:i.jsx(Hi,{children:"Account Management"})}),i.jsx(Gi,{className:"space-y-4",children:i.jsxs("div",{className:"flex items-center justify-between mt-4",children:[i.jsx(ri,{htmlFor:"deactivate",children:"Deactivate Account"}),i.jsx(Mj,{id:"deactivate",checked:(n==null?void 0:n.deactivated)||!1,onCheckedChange:L,disabled:C})]})})]}),i.jsxs(De,{children:[i.jsx(qi,{children:i.jsx(Hi,{children:"Sign Out"})}),i.jsx(Gi,{children:i.jsx(H,{onClick:t,variant:"outline",className:"w-full",children:"Sign Out"})})]})]}),O&&i.jsx("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-background/95",children:i.jsxs("div",{className:"max-w-md w-full bg-card rounded-lg shadow-lg p-8 flex flex-col items-center",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4 text-primary",children:"Confirm Deactivation"}),i.jsx("p",{className:"text-muted-foreground mb-8 text-center",children:"Are you sure you want to deactivate your account? You will be logged out and your profile and videos will be hidden from others until you reactivate."}),i.jsxs("div",{className:"flex w-full gap-4",children:[i.jsx(H,{onClick:()=>ee(!0),className:"flex-1",children:"OK"}),i.jsx(H,{onClick:()=>{B(!1),X(!1)},variant:"outline",className:"flex-1",children:"Cancel"})]})]})}),i.jsx(mr,{})]})};var Vp="Popover",[Oj,M3]=Us(Vp,[Go]),El=Go(),[tO,Hs]=Oj(Vp),Lj=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:a=!1}=e,l=El(t),c=u.useRef(null),[d,f]=u.useState(!1),[h=!1,m]=Rs({prop:n,defaultProp:s,onChange:o});return i.jsx(Pb,{...l,children:i.jsx(tO,{scope:t,contentId:zn(),triggerRef:c,open:h,onOpenChange:m,onOpenToggle:u.useCallback(()=>m(x=>!x),[m]),hasCustomAnchor:d,onCustomAnchorAdd:u.useCallback(()=>f(!0),[]),onCustomAnchorRemove:u.useCallback(()=>f(!1),[]),modal:a,children:r})})};Lj.displayName=Vp;var Fj="PopoverAnchor",rO=u.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Hs(Fj,r),o=El(r),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=s;return u.useEffect(()=>(a(),()=>l()),[a,l]),i.jsx(Id,{...o,...n,ref:t})});rO.displayName=Fj;var zj="PopoverTrigger",nO=u.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Hs(zj,r),o=El(r),a=st(t,s.triggerRef),l=i.jsx(Ie.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Bj(s.open),...n,ref:a,onClick:Pe(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:i.jsx(Id,{asChild:!0,...o,children:l})});nO.displayName=zj;var Wp="PopoverPortal",[sO,iO]=Oj(Wp,{forceMount:void 0}),$j=e=>{const{__scopePopover:t,forceMount:r,children:n,container:s}=e,o=Hs(Wp,t);return i.jsx(sO,{scope:t,forceMount:r,children:i.jsx(Yn,{present:r||o.open,children:i.jsx(vl,{asChild:!0,container:s,children:n})})})};$j.displayName=Wp;var Fo="PopoverContent",Uj=u.forwardRef((e,t)=>{const r=iO(Fo,e.__scopePopover),{forceMount:n=r.forceMount,...s}=e,o=Hs(Fo,e.__scopePopover);return i.jsx(Yn,{present:n||o.open,children:o.modal?i.jsx(oO,{...s,ref:t}):i.jsx(aO,{...s,ref:t})})});Uj.displayName=Fo;var oO=u.forwardRef((e,t)=>{const r=Hs(Fo,e.__scopePopover),n=u.useRef(null),s=st(t,n),o=u.useRef(!1);return u.useEffect(()=>{const a=n.current;if(a)return Dp(a)},[]),i.jsx(eu,{as:Ts,allowPinchZoom:!0,children:i.jsx(Vj,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Pe(e.onCloseAutoFocus,a=>{var l;a.preventDefault(),o.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Pe(e.onPointerDownOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;o.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Pe(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),aO=u.forwardRef((e,t)=>{const r=Hs(Fo,e.__scopePopover),n=u.useRef(!1),s=u.useRef(!1);return i.jsx(Vj,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,o),o.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;((d=r.triggerRef.current)==null?void 0:d.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),Vj=u.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:f,...h}=e,m=Hs(Fo,r),x=El(r);return Mp(),i.jsx(Qd,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(Wo,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:i.jsx(fp,{"data-state":Bj(m.open),role:"dialog",id:m.contentId,...x,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Wj="PopoverClose",lO=u.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Hs(Wj,r);return i.jsx(Ie.button,{type:"button",...n,ref:t,onClick:Pe(e.onClick,()=>s.onOpenChange(!1))})});lO.displayName=Wj;var cO="PopoverArrow",dO=u.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=El(r);return i.jsx(hp,{...s,...n,ref:t})});dO.displayName=cO;function Bj(e){return e?"open":"closed"}var uO=Lj,fO=$j,qj=Uj;const hO=uO,mO=u.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},s)=>i.jsx(fO,{children:i.jsx(qj,{ref:s,align:t,sideOffset:r,className:Fe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));mO.displayName=qj.displayName;var Hx=!1,si,qh,Hh,Ec,Pc,Hj,Tc,Gh,Yh,Zh,Gj,Kh,Xh,Yj,Zj;function gr(){if(!Hx){Hx=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),r=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(Kh=/\b(iPhone|iP[ao]d)/.exec(e),Xh=/\b(iP[ao]d)/.exec(e),Zh=/Android/i.exec(e),Yj=/FBAN\/\w+;/i.exec(e),Zj=/Mobile/i.exec(e),Gj=!!/Win64/.exec(e),t){si=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,si&&document&&document.documentMode&&(si=document.documentMode);var n=/(?:Trident\/(\d+.\d+))/.exec(e);Hj=n?parseFloat(n[1])+4:si,qh=t[2]?parseFloat(t[2]):NaN,Hh=t[3]?parseFloat(t[3]):NaN,Ec=t[4]?parseFloat(t[4]):NaN,Ec?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),Pc=t&&t[1]?parseFloat(t[1]):NaN):Pc=NaN}else si=qh=Hh=Pc=Ec=NaN;if(r){if(r[1]){var s=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);Tc=s?parseFloat(s[1].replace("_",".")):!0}else Tc=!1;Gh=!!r[2],Yh=!!r[3]}else Tc=Gh=Yh=!1}}var Qh={ie:function(){return gr()||si},ieCompatibilityMode:function(){return gr()||Hj>si},ie64:function(){return Qh.ie()&&Gj},firefox:function(){return gr()||qh},opera:function(){return gr()||Hh},webkit:function(){return gr()||Ec},safari:function(){return Qh.webkit()},chrome:function(){return gr()||Pc},windows:function(){return gr()||Gh},osx:function(){return gr()||Tc},linux:function(){return gr()||Yh},iphone:function(){return gr()||Kh},mobile:function(){return gr()||Kh||Xh||Zh||Zj},nativeApp:function(){return gr()||Yj},android:function(){return gr()||Zh},ipad:function(){return gr()||Xh}},pO=Qh,lc=!!(typeof window<"u"&&window.document&&window.document.createElement),gO={canUseDOM:lc,canUseWorkers:typeof Worker<"u",canUseEventListeners:lc&&!!(window.addEventListener||window.attachEvent),canUseViewport:lc&&!!window.screen,isInWorker:!lc},vO=gO,Kj=vO,Xj;Kj.canUseDOM&&(Xj=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function xO(e,t){if(!Kj.canUseDOM||t&&!("addEventListener"in document))return!1;var r="on"+e,n=r in document;if(!n){var s=document.createElement("div");s.setAttribute(r,"return;"),n=typeof s[r]=="function"}return!n&&Xj&&e==="wheel"&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}var wO=xO,yO=pO,bO=wO,Gx=10,Yx=40,Zx=800;function Qj(e){var t=0,r=0,n=0,s=0;return"detail"in e&&(r=e.detail),"wheelDelta"in e&&(r=-e.wheelDelta/120),"wheelDeltaY"in e&&(r=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=r,r=0),n=t*Gx,s=r*Gx,"deltaY"in e&&(s=e.deltaY),"deltaX"in e&&(n=e.deltaX),(n||s)&&e.deltaMode&&(e.deltaMode==1?(n*=Yx,s*=Yx):(n*=Zx,s*=Zx)),n&&!t&&(t=n<1?-1:1),s&&!r&&(r=s<1?-1:1),{spinX:t,spinY:r,pixelX:n,pixelY:s}}Qj.getEventType=function(){return yO.firefox()?"DOMMouseScroll":bO("wheel")?"wheel":"mousewheel"};var _O=Qj,jO=_O;const NO=Jh(jO);function SO(e,t,r,n,s,o){o===void 0&&(o=0);var a=zo(e,t,o),l=a.width,c=a.height,d=Math.min(l,r),f=Math.min(c,n);return d>f*s?{width:f*s,height:f}:{width:d,height:d/s}}function kO(e){return e.width>e.height?e.width/e.naturalWidth:e.height/e.naturalHeight}function ha(e,t,r,n,s){s===void 0&&(s=0);var o=zo(t.width,t.height,s),a=o.width,l=o.height;return{x:Kx(e.x,a,r.width,n),y:Kx(e.y,l,r.height,n)}}function Kx(e,t,r,n){var s=t*n/2-r/2;return lu(e,-s,s)}function Xx(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function Qx(e,t){return Math.atan2(t.y-e.y,t.x-e.x)*180/Math.PI}function CO(e,t,r,n,s,o,a){o===void 0&&(o=0),a===void 0&&(a=!0);var l=a?EO:PO,c=zo(t.width,t.height,o),d=zo(t.naturalWidth,t.naturalHeight,o),f={x:l(100,((c.width-r.width/s)/2-e.x/s)/c.width*100),y:l(100,((c.height-r.height/s)/2-e.y/s)/c.height*100),width:l(100,r.width/c.width*100/s),height:l(100,r.height/c.height*100/s)},h=Math.round(l(d.width,f.width*d.width/100)),m=Math.round(l(d.height,f.height*d.height/100)),x=d.width>=d.height*n,y=x?{width:Math.round(m*n),height:m}:{width:h,height:Math.round(h/n)},p=dt(dt({},y),{x:Math.round(l(d.width-y.width,f.x*d.width/100)),y:Math.round(l(d.height-y.height,f.y*d.height/100))});return{croppedAreaPercentages:f,croppedAreaPixels:p}}function EO(e,t){return Math.min(e,Math.max(0,t))}function PO(e,t){return t}function TO(e,t,r,n,s,o){var a=zo(t.width,t.height,r),l=lu(n.width/a.width*(100/e.width),s,o),c={x:l*a.width/2-n.width/2-a.width*l*(e.x/100),y:l*a.height/2-n.height/2-a.height*l*(e.y/100)};return{crop:c,zoom:l}}function RO(e,t,r){var n=kO(t);return r.height>r.width?r.height/(e.height*n):r.width/(e.width*n)}function AO(e,t,r,n,s,o){r===void 0&&(r=0);var a=zo(t.naturalWidth,t.naturalHeight,r),l=lu(RO(e,t,n),s,o),c=n.height>n.width?n.height/e.height:n.width/e.width,d={x:((a.width-e.width)/2-e.x)*c,y:((a.height-e.height)/2-e.y)*c};return{crop:d,zoom:l}}function Jx(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function MO(e){return e*Math.PI/180}function zo(e,t,r){var n=MO(r);return{width:Math.abs(Math.cos(n)*e)+Math.abs(Math.sin(n)*t),height:Math.abs(Math.sin(n)*e)+Math.abs(Math.cos(n)*t)}}function lu(e,t,r){return Math.min(Math.max(e,t),r)}function cc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(r){return typeof r=="string"&&r.length>0}).join(" ").trim()}var DO=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,IO=1,OO=3,LO=1,FO=function(e){wD(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.cropperRef=u.createRef(),r.imageRef=u.createRef(),r.videoRef=u.createRef(),r.containerPosition={x:0,y:0},r.containerRef=null,r.styleRef=null,r.containerRect=null,r.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},r.dragStartPosition={x:0,y:0},r.dragStartCrop={x:0,y:0},r.gestureZoomStart=0,r.gestureRotationStart=0,r.isTouching=!1,r.lastPinchDistance=0,r.lastPinchRotation=0,r.rafDragTimeout=null,r.rafPinchTimeout=null,r.wheelTimer=null,r.currentDoc=typeof document<"u"?document:null,r.currentWindow=typeof window<"u"?window:null,r.resizeObserver=null,r.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},r.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!r.containerRef)){var n=!0;r.resizeObserver=new window.ResizeObserver(function(s){if(n){n=!1;return}r.computeSizes()}),r.resizeObserver.observe(r.containerRef)}},r.preventZoomSafari=function(n){return n.preventDefault()},r.cleanEvents=function(){r.currentDoc&&(r.currentDoc.removeEventListener("mousemove",r.onMouseMove),r.currentDoc.removeEventListener("mouseup",r.onDragStopped),r.currentDoc.removeEventListener("touchmove",r.onTouchMove),r.currentDoc.removeEventListener("touchend",r.onDragStopped),r.currentDoc.removeEventListener("gesturechange",r.onGestureChange),r.currentDoc.removeEventListener("gestureend",r.onGestureEnd),r.currentDoc.removeEventListener("scroll",r.onScroll))},r.clearScrollEvent=function(){r.containerRef&&r.containerRef.removeEventListener("wheel",r.onWheel),r.wheelTimer&&clearTimeout(r.wheelTimer)},r.onMediaLoad=function(){var n=r.computeSizes();n&&(r.emitCropData(),r.setInitialCrop(n)),r.props.onMediaLoaded&&r.props.onMediaLoaded(r.mediaSize)},r.setInitialCrop=function(n){if(r.props.initialCroppedAreaPercentages){var s=TO(r.props.initialCroppedAreaPercentages,r.mediaSize,r.props.rotation,n,r.props.minZoom,r.props.maxZoom),o=s.crop,a=s.zoom;r.props.onCropChange(o),r.props.onZoomChange&&r.props.onZoomChange(a)}else if(r.props.initialCroppedAreaPixels){var l=AO(r.props.initialCroppedAreaPixels,r.mediaSize,r.props.rotation,n,r.props.minZoom,r.props.maxZoom),o=l.crop,a=l.zoom;r.props.onCropChange(o),r.props.onZoomChange&&r.props.onZoomChange(a)}},r.computeSizes=function(){var n,s,o,a,l,c,d=r.imageRef.current||r.videoRef.current;if(d&&r.containerRef){r.containerRect=r.containerRef.getBoundingClientRect(),r.saveContainerPosition();var f=r.containerRect.width/r.containerRect.height,h=((n=r.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((s=r.videoRef.current)===null||s===void 0?void 0:s.videoWidth)||0,m=((o=r.imageRef.current)===null||o===void 0?void 0:o.naturalHeight)||((a=r.videoRef.current)===null||a===void 0?void 0:a.videoHeight)||0,x=d.offsetWidth<h||d.offsetHeight<m,y=h/m,p=void 0;if(x)switch(r.state.mediaObjectFit){default:case"contain":p=f>y?{width:r.containerRect.height*y,height:r.containerRect.height}:{width:r.containerRect.width,height:r.containerRect.width/y};break;case"horizontal-cover":p={width:r.containerRect.width,height:r.containerRect.width/y};break;case"vertical-cover":p={width:r.containerRect.height*y,height:r.containerRect.height};break}else p={width:d.offsetWidth,height:d.offsetHeight};r.mediaSize=dt(dt({},p),{naturalWidth:h,naturalHeight:m}),r.props.setMediaSize&&r.props.setMediaSize(r.mediaSize);var b=r.props.cropSize?r.props.cropSize:SO(r.mediaSize.width,r.mediaSize.height,r.containerRect.width,r.containerRect.height,r.props.aspect,r.props.rotation);return(((l=r.state.cropSize)===null||l===void 0?void 0:l.height)!==b.height||((c=r.state.cropSize)===null||c===void 0?void 0:c.width)!==b.width)&&r.props.onCropSizeChange&&r.props.onCropSizeChange(b),r.setState({cropSize:b},r.recomputeCropPosition),r.props.setCropSize&&r.props.setCropSize(b),b}},r.saveContainerPosition=function(){if(r.containerRef){var n=r.containerRef.getBoundingClientRect();r.containerPosition={x:n.left,y:n.top}}},r.onMouseDown=function(n){r.currentDoc&&(n.preventDefault(),r.currentDoc.addEventListener("mousemove",r.onMouseMove),r.currentDoc.addEventListener("mouseup",r.onDragStopped),r.saveContainerPosition(),r.onDragStart(t.getMousePoint(n)))},r.onMouseMove=function(n){return r.onDrag(t.getMousePoint(n))},r.onScroll=function(n){r.currentDoc&&(n.preventDefault(),r.saveContainerPosition())},r.onTouchStart=function(n){r.currentDoc&&(r.isTouching=!0,!(r.props.onTouchRequest&&!r.props.onTouchRequest(n))&&(r.currentDoc.addEventListener("touchmove",r.onTouchMove,{passive:!1}),r.currentDoc.addEventListener("touchend",r.onDragStopped),r.saveContainerPosition(),n.touches.length===2?r.onPinchStart(n):n.touches.length===1&&r.onDragStart(t.getTouchPoint(n.touches[0]))))},r.onTouchMove=function(n){n.preventDefault(),n.touches.length===2?r.onPinchMove(n):n.touches.length===1&&r.onDrag(t.getTouchPoint(n.touches[0]))},r.onGestureStart=function(n){r.currentDoc&&(n.preventDefault(),r.currentDoc.addEventListener("gesturechange",r.onGestureChange),r.currentDoc.addEventListener("gestureend",r.onGestureEnd),r.gestureZoomStart=r.props.zoom,r.gestureRotationStart=r.props.rotation)},r.onGestureChange=function(n){if(n.preventDefault(),!r.isTouching){var s=t.getMousePoint(n),o=r.gestureZoomStart-1+n.scale;if(r.setNewZoom(o,s,{shouldUpdatePosition:!0}),r.props.onRotationChange){var a=r.gestureRotationStart+n.rotation;r.props.onRotationChange(a)}}},r.onGestureEnd=function(n){r.cleanEvents()},r.onDragStart=function(n){var s,o,a=n.x,l=n.y;r.dragStartPosition={x:a,y:l},r.dragStartCrop=dt({},r.props.crop),(o=(s=r.props).onInteractionStart)===null||o===void 0||o.call(s)},r.onDrag=function(n){var s=n.x,o=n.y;r.currentWindow&&(r.rafDragTimeout&&r.currentWindow.cancelAnimationFrame(r.rafDragTimeout),r.rafDragTimeout=r.currentWindow.requestAnimationFrame(function(){if(r.state.cropSize&&!(s===void 0||o===void 0)){var a=s-r.dragStartPosition.x,l=o-r.dragStartPosition.y,c={x:r.dragStartCrop.x+a,y:r.dragStartCrop.y+l},d=r.props.restrictPosition?ha(c,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):c;r.props.onCropChange(d)}}))},r.onDragStopped=function(){var n,s;r.isTouching=!1,r.cleanEvents(),r.emitCropData(),(s=(n=r.props).onInteractionEnd)===null||s===void 0||s.call(n)},r.onWheel=function(n){if(r.currentWindow&&!(r.props.onWheelRequest&&!r.props.onWheelRequest(n))){n.preventDefault();var s=t.getMousePoint(n),o=NO(n).pixelY,a=r.props.zoom-o*r.props.zoomSpeed/200;r.setNewZoom(a,s,{shouldUpdatePosition:!0}),r.state.hasWheelJustStarted||r.setState({hasWheelJustStarted:!0},function(){var l,c;return(c=(l=r.props).onInteractionStart)===null||c===void 0?void 0:c.call(l)}),r.wheelTimer&&clearTimeout(r.wheelTimer),r.wheelTimer=r.currentWindow.setTimeout(function(){return r.setState({hasWheelJustStarted:!1},function(){var l,c;return(c=(l=r.props).onInteractionEnd)===null||c===void 0?void 0:c.call(l)})},250)}},r.getPointOnContainer=function(n,s){var o=n.x,a=n.y;if(!r.containerRect)throw new Error("The Cropper is not mounted");return{x:r.containerRect.width/2-(o-s.x),y:r.containerRect.height/2-(a-s.y)}},r.getPointOnMedia=function(n){var s=n.x,o=n.y,a=r.props,l=a.crop,c=a.zoom;return{x:(s+l.x)/c,y:(o+l.y)/c}},r.setNewZoom=function(n,s,o){var a=o===void 0?{}:o,l=a.shouldUpdatePosition,c=l===void 0?!0:l;if(!(!r.state.cropSize||!r.props.onZoomChange)){var d=lu(n,r.props.minZoom,r.props.maxZoom);if(c){var f=r.getPointOnContainer(s,r.containerPosition),h=r.getPointOnMedia(f),m={x:h.x*d-f.x,y:h.y*d-f.y},x=r.props.restrictPosition?ha(m,r.mediaSize,r.state.cropSize,d,r.props.rotation):m;r.props.onCropChange(x)}r.props.onZoomChange(d)}},r.getCropData=function(){if(!r.state.cropSize)return null;var n=r.props.restrictPosition?ha(r.props.crop,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):r.props.crop;return CO(n,r.mediaSize,r.state.cropSize,r.getAspect(),r.props.zoom,r.props.rotation,r.props.restrictPosition)},r.emitCropData=function(){var n=r.getCropData();if(n){var s=n.croppedAreaPercentages,o=n.croppedAreaPixels;r.props.onCropComplete&&r.props.onCropComplete(s,o),r.props.onCropAreaChange&&r.props.onCropAreaChange(s,o)}},r.emitCropAreaChange=function(){var n=r.getCropData();if(n){var s=n.croppedAreaPercentages,o=n.croppedAreaPixels;r.props.onCropAreaChange&&r.props.onCropAreaChange(s,o)}},r.recomputeCropPosition=function(){if(r.state.cropSize){var n=r.props.restrictPosition?ha(r.props.crop,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):r.props.crop;r.props.onCropChange(n),r.emitCropData()}},r.onKeyDown=function(n){var s,o,a=r.props,l=a.crop,c=a.onCropChange,d=a.keyboardStep,f=a.zoom,h=a.rotation,m=d;if(r.state.cropSize){n.shiftKey&&(m*=.2);var x=dt({},l);switch(n.key){case"ArrowUp":x.y-=m,n.preventDefault();break;case"ArrowDown":x.y+=m,n.preventDefault();break;case"ArrowLeft":x.x-=m,n.preventDefault();break;case"ArrowRight":x.x+=m,n.preventDefault();break;default:return}r.props.restrictPosition&&(x=ha(x,r.mediaSize,r.state.cropSize,f,h)),n.repeat||(o=(s=r.props).onInteractionStart)===null||o===void 0||o.call(s),c(x)}},r.onKeyUp=function(n){var s,o;switch(n.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":n.preventDefault();break;default:return}r.emitCropData(),(o=(s=r.props).onInteractionEnd)===null||o===void 0||o.call(s)},r}return t.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=DO,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},t.prototype.componentWillUnmount=function(){var r,n;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(r=this.resizeObserver)===null||r===void 0||r.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((n=this.styleRef.parentNode)===null||n===void 0||n.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},t.prototype.componentDidUpdate=function(r){var n,s,o,a,l,c,d,f,h;r.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):r.aspect!==this.props.aspect?this.computeSizes():r.objectFit!==this.props.objectFit?this.computeSizes():r.zoom!==this.props.zoom?this.recomputeCropPosition():((n=r.cropSize)===null||n===void 0?void 0:n.height)!==((s=this.props.cropSize)===null||s===void 0?void 0:s.height)||((o=r.cropSize)===null||o===void 0?void 0:o.width)!==((a=this.props.cropSize)===null||a===void 0?void 0:a.width)?this.computeSizes():(((l=r.crop)===null||l===void 0?void 0:l.x)!==((c=this.props.crop)===null||c===void 0?void 0:c.x)||((d=r.crop)===null||d===void 0?void 0:d.y)!==((f=this.props.crop)===null||f===void 0?void 0:f.y))&&this.emitCropAreaChange(),r.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),r.video!==this.props.video&&((h=this.videoRef.current)===null||h===void 0||h.load());var m=this.getObjectFit();m!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:m},this.computeSizes)},t.prototype.getAspect=function(){var r=this.props,n=r.cropSize,s=r.aspect;return n?n.width/n.height:s},t.prototype.getObjectFit=function(){var r,n,s,o;if(this.props.objectFit==="cover"){var a=this.imageRef.current||this.videoRef.current;if(a&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var l=this.containerRect.width/this.containerRect.height,c=((r=this.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((n=this.videoRef.current)===null||n===void 0?void 0:n.videoWidth)||0,d=((s=this.imageRef.current)===null||s===void 0?void 0:s.naturalHeight)||((o=this.videoRef.current)===null||o===void 0?void 0:o.videoHeight)||0,f=c/d;return f<l?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},t.prototype.onPinchStart=function(r){var n=t.getTouchPoint(r.touches[0]),s=t.getTouchPoint(r.touches[1]);this.lastPinchDistance=Xx(n,s),this.lastPinchRotation=Qx(n,s),this.onDragStart(Jx(n,s))},t.prototype.onPinchMove=function(r){var n=this;if(!(!this.currentDoc||!this.currentWindow)){var s=t.getTouchPoint(r.touches[0]),o=t.getTouchPoint(r.touches[1]),a=Jx(s,o);this.onDrag(a),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var l=Xx(s,o),c=n.props.zoom*(l/n.lastPinchDistance);n.setNewZoom(c,a,{shouldUpdatePosition:!1}),n.lastPinchDistance=l;var d=Qx(s,o),f=n.props.rotation+(d-n.lastPinchRotation);n.props.onRotationChange&&n.props.onRotationChange(f),n.lastPinchRotation=d})}},t.prototype.render=function(){var r=this,n,s=this.props,o=s.image,a=s.video,l=s.mediaProps,c=s.cropperProps,d=s.transform,f=s.crop,h=f.x,m=f.y,x=s.rotation,y=s.zoom,p=s.cropShape,b=s.showGrid,w=s.style,g=w.containerStyle,v=w.cropAreaStyle,_=w.mediaStyle,j=s.classes,k=j.containerClassName,C=j.cropAreaClassName,E=j.mediaClassName,O=(n=this.state.mediaObjectFit)!==null&&n!==void 0?n:this.getObjectFit();return u.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(q){return r.containerRef=q},"data-testid":"container",style:g,className:cc("reactEasyCrop_Container",k)},o?u.createElement("img",dt({alt:"",className:cc("reactEasyCrop_Image",O==="contain"&&"reactEasyCrop_Contain",O==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",O==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",E)},l,{src:o,ref:this.imageRef,style:dt(dt({},_),{transform:d||"translate(".concat(h,"px, ").concat(m,"px) rotate(").concat(x,"deg) scale(").concat(y,")")}),onLoad:this.onMediaLoad})):a&&u.createElement("video",dt({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:cc("reactEasyCrop_Video",O==="contain"&&"reactEasyCrop_Contain",O==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",O==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",E)},l,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:dt(dt({},_),{transform:d||"translate(".concat(h,"px, ").concat(m,"px) rotate(").concat(x,"deg) scale(").concat(y,")")}),controls:!1}),(Array.isArray(a)?a:[{src:a}]).map(function(B){return u.createElement("source",dt({key:B.src},B))})),this.state.cropSize&&u.createElement("div",dt({ref:this.cropperRef,style:dt(dt({},v),{width:this.state.cropSize.width,height:this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:cc("reactEasyCrop_CropArea",p==="round"&&"reactEasyCrop_CropAreaRound",b&&"reactEasyCrop_CropAreaGrid",C)},c)))},t.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:OO,minZoom:IO,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:LO},t.getMousePoint=function(r){return{x:Number(r.clientX),y:Number(r.clientY)}},t.getTouchPoint=function(r){return{x:Number(r.clientX),y:Number(r.clientY)}},t}(u.Component);const zO=bj,$O=_j,Jj=u.forwardRef(({className:e,...t},r)=>i.jsx(su,{ref:r,className:Fe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Jj.displayName=su.displayName;const UO=u.forwardRef(({className:e,children:t,...r},n)=>i.jsxs($O,{children:[i.jsx(Jj,{}),i.jsxs(iu,{ref:n,className:Fe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,i.jsxs(jj,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(Nr,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));UO.displayName=iu.displayName;const VO=u.forwardRef(({className:e,...t},r)=>i.jsx(ou,{ref:r,className:Fe("text-lg font-semibold leading-none tracking-tight",e),...t}));VO.displayName=ou.displayName;const WO=u.forwardRef(({className:e,...t},r)=>i.jsx(au,{ref:r,className:Fe("text-sm text-muted-foreground",e),...t}));WO.displayName=au.displayName;const BO=()=>{var Ce;const{user:e}=it(),[t,r]=u.useState(""),[n,s]=u.useState(""),[o,a]=u.useState(""),[l,c]=u.useState(""),[d,f]=u.useState(null),[h,m]=u.useState(!1),[x,y]=u.useState(null),[p,b]=u.useState({x:0,y:0}),[w,g]=u.useState(1),[v,_]=u.useState(null),[j,k]=u.useState(!1),[C,E]=u.useState(!1),[O,B]=u.useState(!1),[q,X]=u.useState("idle"),[Z,L]=u.useState(null),ee=u.useRef(null),{toast:U}=$t(),K=ot();u.useEffect(()=>{(async()=>{if(!e)return;const{data:de,error:ce}=await N.from("profiles").select("*").eq("user_id",e.id).single();!ce&&de&&(r(de.username||""),s(de.username||""),a(de.display_name||""),c(de.bio||""),f(de.avatar_url||null))})()},[e]);const D=fe=>{var xe;const de=(xe=fe.target.files)==null?void 0:xe[0];if(!de)return;const ce=new FileReader;ce.onload=()=>{y(ce.result),k(!0)},ce.readAsDataURL(de),ee.current&&(ee.current.value="")},Q=(fe,de)=>{_(de)},ne=async()=>{if(!(!x||!e||!v)){m(!0);try{const fe=await UE(x,v),de=`avatars/${e.id}/profile.jpg`;await N.storage.from("limeytt-uploads").remove([de]);const{error:ce}=await N.storage.from("limeytt-uploads").upload(de,fe,{upsert:!0});if(ce)U({title:"Failed to upload photo",variant:"destructive"});else{const{data:xe}=N.storage.from("limeytt-uploads").getPublicUrl(de);f(xe.publicUrl+"?t="+Date.now()),U({title:"Profile photo updated!"})}}catch{U({title:"Failed to crop photo",variant:"destructive"})}m(!1),k(!1),y(null)}},oe=()=>{k(!1),y(null)},he=async()=>{if(!e||!window.confirm("Are you sure you want to remove your profile photo?"))return;const fe=`avatars/${e.id}/profile.jpg`;await N.storage.from("limeytt-uploads").remove([fe]),f(null),U({title:"Profile photo removed"})},je=async()=>{if(!e)return;const{error:fe}=await N.from("profiles").update({username:t,display_name:o,bio:l,avatar_url:d}).eq("user_id",e.id);fe?U({title:"Failed to update profile",variant:"destructive"}):(U({title:"Profile updated!"}),K("/profile"))};return u.useEffect(()=>{if(Z&&clearTimeout(Z),t===n){X("idle");return}if(t.length<3){X("idle");return}if(!/^[a-zA-Z0-9_]+$/.test(t)){X("idle");return}X("checking");const de=setTimeout(async()=>{try{const{data:ce,error:xe}=await N.rpc("is_username_available",{username_to_check:t});if(xe){console.error("Error checking username:",xe),X("idle");return}X(ce?"available":"taken")}catch(ce){console.error("Error checking username:",ce),X("idle")}},500);return L(de),()=>{de&&clearTimeout(de)}},[t,n]),i.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[i.jsx("div",{className:"sticky top-0 z-10 bg-background border-b border-border p-4",children:i.jsx("h1",{className:"text-2xl font-bold text-primary",children:"Edit Profile"})}),i.jsx("div",{className:"p-4 max-w-lg mx-auto",children:i.jsxs(De,{className:"p-6 flex flex-col items-center",children:[i.jsx("div",{className:"relative mb-6",children:i.jsxs(hO,{open:C,onOpenChange:E,children:[i.jsxs("div",{className:"w-28 h-28 rounded-full overflow-hidden border-2 border-primary flex items-center justify-center group",tabIndex:0,role:"button","aria-label":"Profile photo menu",onClick:fe=>{fe.target===fe.currentTarget&&B(!0)},children:[d?i.jsx("img",{src:d,alt:"Profile",className:"w-28 h-28 object-cover"}):i.jsx("div",{className:"w-28 h-28 bg-primary/20 flex items-center justify-center text-4xl font-bold text-primary",children:(Ce=e==null?void 0:e.email)==null?void 0:Ce.charAt(0).toUpperCase()}),i.jsx(H,{variant:"ghost",size:"icon",className:"absolute bottom-1 right-1 w-8 h-8 p-0 flex items-center justify-center bg-white/80 hover:bg-white border border-primary shadow",onClick:fe=>{fe.stopPropagation(),E(!0)},"aria-label":"Edit profile photo",style:{borderRadius:"50%"},children:i.jsx("span",{role:"img","aria-label":"camera",style:{fontSize:18},children:"📷"})}),i.jsx("input",{ref:ee,type:"file",accept:"image/*",className:"hidden",onChange:D})]}),C&&i.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/30",onClick:()=>E(!1),children:i.jsxs("div",{className:"bg-white border rounded shadow-lg flex flex-col min-w-[140px] z-50",onClick:fe=>fe.stopPropagation(),children:[i.jsx("button",{className:"px-4 py-2 hover:bg-gray-100 text-left font-bold text-black",onClick:()=>{B(!0),E(!1)},children:"View"}),i.jsx("button",{className:"px-4 py-2 hover:bg-gray-100 text-left font-bold text-black",onClick:()=>{var fe;(fe=ee.current)==null||fe.click(),E(!1)},children:h?"Uploading...":"Change"}),i.jsx("button",{className:"px-4 py-2 hover:bg-red-100 text-left text-red-600",onClick:()=>{E(!1),he()},children:"Remove"})]})})]})}),O&&d?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",onClick:()=>B(!1),children:i.jsxs("div",{className:"relative",children:[i.jsx("button",{className:"absolute top-2 right-2 text-white text-2xl bg-black/60 rounded-full w-8 h-8 flex items-center justify-center z-10",onClick:fe=>{fe.stopPropagation(),B(!1)},"aria-label":"Close",children:"×"}),i.jsx("img",{src:d,alt:"Profile",className:"max-w-xs max-h-[80vh] rounded-lg border-2 border-primary bg-white",onClick:fe=>fe.stopPropagation()})]})}):null,i.jsx(zO,{open:j,onOpenChange:k,children:j&&i.jsxs("div",{className:"fixed inset-0 z-50 bg-black flex flex-col",children:[i.jsx("div",{className:"p-4 bg-black text-white",children:i.jsx("h2",{className:"text-xl font-bold text-center",children:"Crop Profile Photo"})}),i.jsx("div",{className:"flex-1 flex items-center justify-center bg-black",children:i.jsx("div",{className:"relative w-full h-full max-w-md max-h-md",children:i.jsx(FO,{image:x,crop:p,zoom:w,aspect:1,onCropChange:b,onZoomChange:g,onCropComplete:Q,objectFit:"contain"})})}),i.jsxs("div",{className:"p-4 pb-24 bg-black border-t border-white/10 flex justify-between",children:[i.jsx(H,{onClick:oe,variant:"outline",className:"flex-1 mr-2",children:"Cancel"}),i.jsx(H,{onClick:ne,variant:"neon",disabled:h,className:"flex-1 ml-2",children:h?"Uploading...":"Upload"})]})]})}),i.jsx(rt,{className:"mb-4",placeholder:"Username",value:t,onChange:fe=>r(fe.target.value)}),q==="checking"&&i.jsx("p",{className:"text-sm text-muted-foreground",children:"Checking username..."}),q==="available"&&i.jsx("p",{className:"text-sm text-green-600",children:"Username is available!"}),q==="taken"&&i.jsx("p",{className:"text-sm text-red-600",children:"Username is already taken."}),i.jsx(rt,{className:"mb-4",placeholder:"Display Name",value:o,onChange:fe=>a(fe.target.value)}),i.jsx(ji,{className:"mb-4",placeholder:"Bio",value:l,onChange:fe=>c(fe.target.value),maxLength:200}),i.jsx(H,{variant:"neon",className:"w-full mb-3",onClick:je,disabled:h,children:h?"Saving...":"Save Changes"}),i.jsx(H,{variant:"outline",className:"w-full",onClick:()=>K("/profile"),children:"Cancel"})]})}),i.jsx(mr,{})]})},qO=({src:e,className:t,globalMuted:r,...n})=>{const s=u.useRef(null),[o,a]=u.useState(!1),[l,c]=u.useState(!1),d=u.useRef(null),f=async()=>{try{"wakeLock"in navigator&&(d.current=await navigator.wakeLock.request("screen"))}catch(x){console.error("Failed to request wake lock:",x)}},h=async()=>{if(d.current)try{await d.current.release(),d.current=null}catch(x){console.error("Failed to release wake lock:",x)}};u.useEffect(()=>{const x=s.current;if(!x)return;x.muted=r;const y=new window.IntersectionObserver(([p])=>{p.isIntersecting&&p.intersectionRatio>=.5?(a(!0),x.play()):(a(!1),x.pause(),x.currentTime=0)},{threshold:.5});return y.observe(x),()=>{y.unobserve(x)}},[r]),u.useEffect(()=>{s.current&&(s.current.muted=r)},[r]),u.useEffect(()=>{const x=s.current;if(!x)return;const y=()=>{c(!0),f()},p=()=>{c(!1),h()};return x.addEventListener("play",y),x.addEventListener("pause",p),()=>{x.removeEventListener("play",y),x.removeEventListener("pause",p),h()}},[]);const m=()=>{s.current&&(l?s.current.pause():s.current.play())};return i.jsxs("div",{className:"relative w-full h-full",children:[i.jsx("video",{ref:s,src:e,loop:!0,muted:r,playsInline:!0,className:t,...n}),o&&!l&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20",children:i.jsx(H,{variant:"ghost",className:"w-16 h-16 rounded-full bg-white/20 hover:bg-white/30 text-white",onClick:x=>{x.stopPropagation(),m()},"data-control":!0,children:i.jsx(Mo,{size:32,className:"ml-1"})})})]})},HO=()=>{var G,V;const[e,t]=u.useState([]),[r,n]=u.useState(!0),[s,o]=u.useState(null),[a,l]=u.useState({}),[c,d]=u.useState({}),[f,h]=u.useState({}),[m,x]=u.useState({}),[y,p]=u.useState({}),[b,w]=u.useState({}),[g,v]=u.useState({}),[_,j]=u.useState(!1),[k,C]=u.useState(!1),[E,O]=u.useState(null),[B,q]=u.useState(null),[X,Z]=u.useState({}),L=u.useRef(null),ee=ot(),{user:U}=it();$t(),u.useEffect(()=>{const S=document.createElement("style");return S.textContent=`
      @keyframes fire-glow {
        0%, 100% { 
          filter: drop-shadow(0 0 5px #ff6b35) drop-shadow(0 0 10px #ff8c42) drop-shadow(0 0 15px #ffa726);
          transform: rotate(-1deg) scale(1);
        }
        25% { 
          filter: drop-shadow(0 0 8px #ff5722) drop-shadow(0 0 15px #ff7043) drop-shadow(0 0 20px #ffab40);
          transform: rotate(1deg) scale(1.05);
        }
        50% { 
          filter: drop-shadow(0 0 6px #ff6b35) drop-shadow(0 0 12px #ff8c42) drop-shadow(0 0 18px #ffa726);
          transform: rotate(-0.5deg) scale(1.02);
        }
        75% { 
          filter: drop-shadow(0 0 9px #ff5722) drop-shadow(0 0 16px #ff7043) drop-shadow(0 0 22px #ffab40);
          transform: rotate(0.5deg) scale(1.03);
        }
      }
      
      .animate-fire {
        animation: fire-glow 2s ease-in-out infinite;
        display: inline-block;
        transform-origin: center bottom;
      }
    `,document.head.appendChild(S),()=>{document.head.removeChild(S)}},[]),u.useEffect(()=>{K()},[U]),u.useEffect(()=>{if(!U)return;const S=N.channel("friends_comments_realtime").on("postgres_changes",{event:"*",schema:"public",table:"comments"},async z=>{z.new&&z.new.video_id&&!z.new.parent_id?Z(M=>({...M,[z.new.video_id]:(M[z.new.video_id]||0)+1})):z.old&&z.old.video_id&&!z.old.parent_id&&Z(M=>({...M,[z.old.video_id]:Math.max((M[z.old.video_id]||0)-1,0)}))}).subscribe();return()=>{N.removeChannel(S)}},[U]);const K=async()=>{if(U)try{n(!0),o(null);const{data:S,error:z}=await N.from("follows").select("following_id").eq("follower_id",U.id);if(z){console.error("Error fetching follows:",z),o("Failed to load videos. Please try again.");return}if(!S||S.length===0){t([]);return}const M=S.map(Se=>Se.following_id),{data:R,error:I}=await N.from("videos").select(`
          id, 
          title, 
          description,
          video_url, 
          thumbnail_url, 
          duration, 
          user_id, 
          created_at,
          view_count,
          like_count,
          share_count,
          save_count
        `).in("user_id",M).order("created_at",{ascending:!1}).limit(100);if(I){console.error("Error fetching videos:",I),o("Failed to load videos. Please try again.");return}if(!R||R.length===0){t([]);return}const $=[...new Set(R.map(Se=>Se.user_id))],{data:te,error:re}=await N.from("profiles").select("user_id, username, avatar_url, deactivated").in("user_id",$);re&&console.error("Error fetching profiles:",re);const Y=new Map;(te||[]).forEach(Se=>Y.set(Se.user_id,Se));const be=R.map(Se=>{const Le=Y.get(Se.user_id);return{...Se,profiles:Le?{username:Le.username,avatar_url:Le.avatar_url,deactivated:Le.deactivated,user_id:Le.user_id}:null,avatar_url:Le==null?void 0:Le.avatar_url}}).filter(Se=>Se.profiles&&!Se.profiles.deactivated),_e={},Ee={},We={},ke={};be.forEach(Se=>{_e[Se.id]=Se.like_count||0,Ee[Se.id]=Se.share_count||0,We[Se.id]=Se.save_count||0,ke[Se.id]=Se.view_count||0}),h(Se=>({...Se,..._e})),x(Se=>({...Se,...Ee})),p(Se=>({...Se,...We})),w(Se=>({...Se,...ke})),t(be),await D(be),await Q(be),await ne(be),await oe(be),await he(be)}catch(S){console.error("Error in fetchFriendsVideos:",S),o("Failed to load videos. Please try again.")}finally{n(!1)}},D=async S=>{if(U)try{const z=S.map($=>$.user_id).filter($=>$!==U.id);if(z.length===0)return;const{data:M}=await N.from("follows").select("following_id").eq("follower_id",U.id).in("following_id",z),R=new Set((M==null?void 0:M.map($=>$.following_id))||[]),I={};S.forEach($=>{$.user_id!==U.id&&(I[$.user_id]=R.has($.user_id))}),l($=>({...$,...I}))}catch(z){console.error("Error checking follow status:",z)}},Q=async S=>{if(U)try{const z=S.map($=>$.id);if(z.length===0)return;const M=new Set,R=5;for(let $=0;$<z.length;$+=R){const te=z.slice($,$+R);await Promise.all(te.map(async re=>{try{const{data:Y,error:me}=await N.from("video_likes").select("id").eq("video_id",re).eq("user_id",U.id);!me&&Y&&Y.length>0&&M.add(re)}catch(Y){console.error(`Error checking like for video ${re}:`,Y)}}))}const I={};S.forEach($=>{I[$.id]=M.has($.id)}),d($=>({...$,...I}))}catch(z){console.error("Error checking like status:",z)}},ne=async S=>{try{const z={};for(const M of S)try{const{data:R,error:I}=await N.rpc("get_genuine_view_count",{video_uuid:M.id});!I&&typeof R=="number"?z[M.id]=R:z[M.id]=M.view_count||0}catch(R){console.error(`Error getting view count for video ${M.id}:`,R),z[M.id]=M.view_count||0}w(M=>({...M,...z}))}catch(z){console.error("Error checking view counts:",z)}},oe=async S=>{if(!(!U||S.length===0))try{const z=S.map(te=>te.id),R=(await N.from("saved_videos").select("video_id").eq("user_id",U.id).in("video_id",z)).data||[],I=new Set(R.map(te=>te.video_id)),$={};S.forEach(te=>{te&&te.id&&($[te.id]=I.has(te.id))}),v($)}catch(z){console.error("Error checking saved status:",z)}},he=async S=>{var z;if(!(!S||S.length===0))try{const M=S.map(te=>te.id),{data:R,error:I}=await N.from("comments").select("video_id").in("video_id",M).is("parent_id",null);if(I){if((z=I.message)!=null&&z.includes('relation "comments" does not exist')){const te={};S.forEach(re=>{te[re.id]=0}),Z(te);return}console.error("Error fetching comment counts:",I);return}const $={};S.forEach(te=>{$[te.id]=0}),R&&R.forEach(te=>{$[te.video_id]=($[te.video_id]||0)+1}),Z($)}catch(M){console.error("Error checking comment counts:",M)}},je=async(S,z)=>{if(U)try{const{data:M}=await N.from("follows").select("*").eq("follower_id",U.id).eq("following_id",S).single();if(M)return await N.from("follows").delete().eq("follower_id",U.id).eq("following_id",S),l(R=>({...R,[S]:!1})),!1;{const{error:R}=await N.from("follows").insert({follower_id:U.id,following_id:S});return R?(R&&R.code!=="23505"&&console.error("Error following:",R),!1):(l(I=>({...I,[S]:!0})),!0)}}catch(M){return console.error("Error following/unfollowing:",M),a[S]||!1}},Ce=async S=>{if(U)try{const z=c[S]||!1,M=f[S]||0;d($=>({...$,[S]:!z})),h($=>({...$,[S]:z?Math.max(0,M-1):M+1}));const{data:R,error:I}=await N.rpc("toggle_video_like",{video_uuid:S});if(I){console.error("Error toggling like:",I),d($=>({...$,[S]:z})),h($=>({...$,[S]:M}));return}}catch(z){console.error("Error handling like:",z)}},fe=async S=>{if(U)try{if(g[S]){const{error:z}=await N.from("saved_videos").delete().eq("user_id",U.id).eq("video_id",S);if(z)throw z;v(M=>({...M,[S]:!1})),p(M=>({...M,[S]:Math.max((M[S]||0)-1,0)}))}else{const{error:z}=await N.from("saved_videos").insert({user_id:U.id,video_id:S});if(z)throw z;v(M=>({...M,[S]:!0})),p(M=>({...M,[S]:(M[S]||0)+1}))}}catch(z){console.error("Error saving/unsaving video:",z),v(M=>({...M,[S]:!M[S]}))}},de=async S=>{try{const{error:z}=await N.from("videos").update({share_count:(S.share_count||0)+1}).eq("id",S.id);z||x(M=>({...M,[S.id]:(M[S.id]||0)+1}))}catch(z){console.error("Error incrementing share count:",z)}O(S),C(!0)},ce=S=>S<1e3?S.toString():S<1e6?(S/1e3).toFixed(1)+"K":(S/1e6).toFixed(1)+"M",xe=S=>{var z;return(z=S.profiles)!=null&&z.username?S.profiles.username:S.username?S.username:S.user_id?`user_${S.user_id.replace(/[^a-zA-Z0-9]/g,"").slice(0,8)}`:"unknown_user"},T=S=>{const z=xe(S);return U&&S.user_id===U.id?"/profile":`/profile/${z}`},A=S=>S.split(/(#[\w-]+)/g).map((z,M)=>/^#[\w-]+$/.test(z)?i.jsx("button",{className:"text-lime-400 hover:underline font-semibold",onClick:R=>{R.stopPropagation()},children:z},M):z);return i.jsxs("div",{className:"min-h-screen bg-black",children:[i.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10 p-2",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-2xl font-black text-white tracking-wider logo-text-glow",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:"900",letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))"},children:"Friends"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>ee("/trending"),className:"text-white hover:bg-white/10","aria-label":"Trending",children:i.jsx("span",{className:"animate-fire text-xl",children:"🔥"})}),i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>ee("/live"),className:"text-white hover:bg-white/10","aria-label":"Live",children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),i.jsx("span",{className:"text-sm font-medium",children:"LIVE"})]})}),i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>ee("/settings"),className:"text-white hover:bg-white/10",children:i.jsx(Rd,{size:16})})]})]})}),i.jsx("div",{className:"fixed top-20 right-4 z-40",children:i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>j(S=>!S),"aria-label":"Toggle Global Mute",className:"w-12 h-12 rounded-full p-0 text-white hover:bg-white/10",children:_?i.jsx(rp,{size:24,className:"text-white"}):i.jsx(tp,{size:24,className:"text-white"})})}),i.jsx("div",{ref:L,className:"h-screen overflow-y-auto snap-y snap-mandatory",style:{scrollSnapType:"y mandatory"},children:r?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):s?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("p",{className:"text-red-400 mb-4",children:s}),i.jsx(H,{onClick:K,variant:"outline",className:"text-white border-white/20 hover:bg-white/10",children:"Try Again"})]}):e.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(hh,{size:32,className:"text-white"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2 text-white",children:"No videos available"}),i.jsx("p",{className:"text-white/70 mb-4",children:"No videos have been posted yet."}),i.jsx(H,{onClick:()=>ee("/"),variant:"default",className:"bg-white text-black hover:bg-white/90",children:"Discover Videos"})]}):i.jsx("div",{className:"space-y-0",children:e.map(S=>i.jsxs("div",{"data-video-id":S.id,className:"relative h-screen snap-start snap-always flex items-center justify-center",onClick:z=>{const M=["button[data-control]"];let R=z.target;for(;R&&R!==z.currentTarget;){if(M.some($=>R.matches($)))return;R=R.parentElement}const I=z.currentTarget.querySelector("video");I&&(I.paused?I.play():I.pause())},children:[i.jsx("div",{className:"absolute top-0 left-0 right-0 h-16 bg-black z-10"}),i.jsx("div",{className:"absolute inset-0 top-16 bottom-32 overflow-hidden",children:i.jsx(qO,{src:S.video_url,className:"w-full h-full object-cover",globalMuted:_})}),i.jsx("div",{className:"absolute bottom-32 left-0 right-0 h-[1px] bg-white/20 z-10"}),i.jsx("div",{className:"absolute bottom-16 left-0 right-0 h-16 bg-black z-10"}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-black z-10"}),i.jsx("div",{className:"absolute bottom-16 left-0 right-0 p-4 text-white z-20",children:i.jsxs("div",{className:"flex justify-between items-end",children:[i.jsx("div",{className:"flex-1 mr-4 space-y-3",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-white font-semibold text-base leading-tight",children:S.title}),S.description&&i.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:A(S.description)})]})}),i.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[i.jsx("div",{className:"flex flex-col items-center",children:i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:z=>{z.stopPropagation(),ee(T(S))},className:"hover:opacity-80 transition-opacity","aria-label":`View ${xe(S)}'s profile`,"data-control":!0,children:i.jsxs(ut,{className:"w-12 h-12 rounded-full",children:[i.jsx(ft,{src:S.avatar_url||void 0,alt:xe(S)}),i.jsx(ht,{children:xe(S).charAt(0).toUpperCase()})]})}),U&&S.user_id!==U.id&&i.jsx("button",{onClick:async z=>{z.stopPropagation(),await je(S.user_id,xe(S))},className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-6 h-6 bg-red-600 rounded-full flex items-center justify-center shadow-lg hover:bg-red-700 transition-colors","data-control":!0,children:a[S.user_id]?i.jsx("span",{className:"text-white font-bold text-sm",children:"✓"}):i.jsx(Ms,{size:14,className:"text-white"})})]})}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("button",{onClick:z=>{z.stopPropagation(),Ce(S.id)},className:"p-0 bg-transparent border-none","data-control":!0,children:i.jsx(As,{size:28,className:`${c[S.id]?"text-red-500 fill-red-500":"text-white fill-white"} transition-colors`})}),i.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:f[S.id]||0})]}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("button",{onClick:z=>{z.stopPropagation(),q(S.id)},className:"p-0 bg-transparent border-none","data-control":!0,children:i.jsx(tl,{size:28,className:"text-white fill-white transition-colors"})}),i.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:X[S.id]||0})]}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(jr,{size:28,className:"text-white"}),i.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:ce(b[S.id]||0)})]}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("button",{onClick:z=>{z.stopPropagation(),fe(S.id)},className:"p-0 bg-transparent border-none","data-control":!0,children:i.jsx(el,{size:28,className:`${g[S.id]?"text-yellow-500 fill-yellow-500":"text-white fill-white"} transition-colors`})}),i.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:y[S.id]||0})]}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("button",{onClick:z=>{z.stopPropagation(),de(S)},className:"p-0 bg-transparent border-none","data-control":!0,children:i.jsx(Do,{size:28,className:"text-white fill-white"})}),i.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:m[S.id]||0})]})]})]})})]},S.id))})}),i.jsx(mr,{}),B&&i.jsx(cl,{isOpen:!!B,onClose:()=>q(null),videoId:B,videoTitle:(G=e.find(S=>S.id===B))==null?void 0:G.title,onCommentCountChange:(S,z)=>{Z(M=>({...M,[S]:z}))}}),E&&i.jsx(Pp,{isOpen:k,onClose:()=>{C(!1),O(null)},video:E}),B&&i.jsx(cl,{isOpen:!!B,onClose:()=>q(null),videoId:B,videoTitle:(V=e.find(S=>S.id===B))==null?void 0:V.title,onCommentCountChange:(S,z)=>{Z(M=>({...M,[S]:z}))}})]})},GO=()=>{var ce,xe;const{user:e,isAdmin:t,loading:r}=it(),n=ot(),[s,o]=u.useState([]),[a,l]=u.useState([]),[c,d]=u.useState(!0),[f,h]=u.useState(!1),[m,x]=u.useState(null),[y,p]=u.useState({}),{inboxUnreadCount:b,systemUnreadCount:w,refreshCounts:g}=Cp(),[v,_]=u.useState(!1),[j,k]=u.useState(null),[C,E]=u.useState(!1),[O,B]=u.useState(null),{toast:q}=$t();u.useEffect(()=>{!r&&t&&n("/profile")},[t,r,n]),u.useEffect(()=>{if(e){L(),Z();const T=ee();let A=null;return t||(A=U()),()=>{T(),A&&A()}}},[e,t]);const X=async T=>{if(!(!e||T.length===0))try{const A=T.map(M=>M.id),{data:G,error:V}=await N.from("messages").select("chat_id").in("chat_id",A).eq("receiver_id",e.id).eq("read_by_receiver",!1).eq("deleted_for_receiver",!1).eq("deleted_for_everyone",!1);if(V){console.error("Error fetching chat unread counts:",V);return}const S=G,z={};S==null||S.forEach(M=>{z[M.chat_id]=(z[M.chat_id]||0)+1}),p(z)}catch(A){console.error("Error fetching chat unread counts:",A)}},Z=async()=>{if(e){if(t){l([]),h(!1);return}try{h(!0);let{data:T,error:A}=await N.from("system_notifications").select("*").eq("to_user_id",e.id).order("created_at",{ascending:!1}).limit(50);if(!A&&T){const G=T.map(V=>V.from_user_id).filter(Boolean);if(G.length>0){const{data:V}=await N.from("profiles").select("user_id, username, avatar_url").in("user_id",G);T=T.map(S=>({...S,from_user:(V==null?void 0:V.find(z=>z.user_id===S.from_user_id))||null}))}}A?console.error("Error fetching system notifications:",A):(l(T||[]),g())}catch(T){console.error("Error fetching system notifications:",T)}finally{h(!1)}}};u.useEffect(()=>{const T=A=>{A.target.closest("[data-dropdown]")||x(null)};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[]);const L=async()=>{try{d(!0);const{data:T,error:A}=await N.from("chats").select(`*,
          sender:profiles!chats_sender_id_fkey(username, avatar_url, deactivated),
          receiver:profiles!chats_receiver_id_fkey(username, avatar_url, deactivated)
        `).or(`sender_id.eq.${e==null?void 0:e.id},receiver_id.eq.${e==null?void 0:e.id}`).order("updated_at",{ascending:!1}),G=T;if(A)console.error("Error fetching chats:",A),q({title:"Error loading chats",description:"Please try refreshing the page",variant:"destructive"});else{const V=(G||[]).filter(R=>{var I,$;return!((I=R.sender)!=null&&I.deactivated||($=R.receiver)!=null&&$.deactivated||R.sender_id===(e==null?void 0:e.id)&&R.deleted_for_sender||R.receiver_id===(e==null?void 0:e.id)&&R.deleted_for_receiver)});console.log("Filtered chats:",V.length,"out of",(G==null?void 0:G.length)||0),o(V);const S=V.map(R=>R.id);let z=[];if(S.length>0){const{data:R,error:I}=await N.from("messages").select("*").in("chat_id",S).order("created_at",{ascending:!1}).limit(S.length*5);!I&&R&&(z=R)}const M=V.map(R=>{const I=z.filter(te=>te.chat_id===R.id);let $=null;for(const te of I){const re=te.sender_id===(e==null?void 0:e.id),Y=te.deleted_for_everyone===!0,me=re&&te.deleted_for_sender===!0,be=!re&&te.deleted_for_receiver===!0;if(!Y&&!me&&!be){$=te;break}}return{...R,last_visible_message:$}});o(M),M.length>0&&setTimeout(()=>{X(M)},100)}}catch(T){console.error("Error fetching chats:",T),q({title:"Error loading chats",description:"Please try refreshing the page",variant:"destructive"})}finally{d(!1)}},ee=()=>{console.log("Setting up real-time subscription for chats");const T=N.channel(`chats_${e==null?void 0:e.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"chats"},async A=>{console.log("New chat created:",A.new),o(S=>S.some(R=>R.id===A.new.id)||A.new.sender_id===(e==null?void 0:e.id)&&A.new.deleted_for_sender||A.new.receiver_id===(e==null?void 0:e.id)&&A.new.deleted_for_receiver?S:[A.new,...S]);const{data:G,error:V}=await N.from("chats").select(`
            *,
            sender:profiles!chats_sender_id_fkey(username, avatar_url),
            receiver:profiles!chats_receiver_id_fkey(username, avatar_url)
          `).eq("id",A.new.id).single();G&&o(S=>{const z=S.filter(M=>M.id!==G.id);return[G,...z]})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"chats"},A=>{console.log("Chat updated:",A.new);const G=A.new;(G.sender_id===(e==null?void 0:e.id)||G.receiver_id===(e==null?void 0:e.id))&&o(V=>{if(G.sender_id===(e==null?void 0:e.id)&&G.deleted_for_sender||G.receiver_id===(e==null?void 0:e.id)&&G.deleted_for_receiver)return console.log("Removing deleted chat from UI:",G.id),V.filter(M=>M.id!==G.id);const z=V.findIndex(M=>M.id===G.id);if(z>=0){const M=[...V];return M[z]={...M[z],...G},M.sort((R,I)=>new Date(I.updated_at).getTime()-new Date(R.updated_at).getTime())}else return L(),V})}).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`receiver_id=eq.${e==null?void 0:e.id}`},async A=>{console.log("New message received:",A.new),p(G=>({...G,[A.new.chat_id]:(G[A.new.chat_id]||0)+1})),await K(A.new.chat_id)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`receiver_id=eq.${e==null?void 0:e.id}`},async A=>{A.new.read_by_receiver&&!A.old.read_by_receiver&&(p(G=>({...G,[A.new.chat_id]:Math.max(0,(G[A.new.chat_id]||0)-1)})),setTimeout(()=>g(),100))}).subscribe(A=>{console.log("Chats subscription status:",A),A==="SUBSCRIBED"&&console.log("Successfully subscribed to real-time chats and messages")});return()=>{console.log("Cleaning up chats subscription"),T.unsubscribe()}},U=()=>{console.log("Setting up real-time subscription for system notifications");const T=N.channel(`system_notifications_${e==null?void 0:e.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"system_notifications",filter:`to_user_id=eq.${e==null?void 0:e.id}`},async A=>{var z;console.log("New system notification received:",A.new);const{data:G,error:V}=await N.from("system_notifications").select("*").eq("id",A.new.id).single();let S=G;if(G&&G.from_user_id){const{data:M}=await N.from("profiles").select("username, avatar_url").eq("user_id",G.from_user_id).single();S={...G,from_user:M}}S&&!V&&(l(M=>[S,...M]),S.type==="follow"?q({title:"New Follower!",description:`${((z=S.from_user)==null?void 0:z.username)||"Someone"} started following you`,className:"bg-blue-600 text-white border-blue-700"}):S.type==="like"&&q({title:"Video Liked!",description:S.message,className:"bg-red-600 text-white border-red-700"}))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"system_notifications",filter:`to_user_id=eq.${e==null?void 0:e.id}`},A=>{console.log("System notification updated:",A.new),l(G=>G.map(V=>V.id===A.new.id?{...V,...A.new}:V)),A.new.read!==A.old.read&&g()}).subscribe(A=>{console.log("System notifications subscription status:",A),A==="SUBSCRIBED"&&console.log("Successfully subscribed to real-time system notifications")});return()=>{console.log("Cleaning up system notifications subscription"),T.unsubscribe()}},K=async T=>{try{const{data:A,error:G}=await N.from("messages").select("*").eq("chat_id",T).order("created_at",{ascending:!1}).limit(5);if(G||!A)return;let V=null;for(const S of A){const z=S.sender_id===(e==null?void 0:e.id),M=S.deleted_for_everyone===!0,R=z&&S.deleted_for_sender===!0,I=!z&&S.deleted_for_receiver===!0;if(!M&&!R&&!I){V=S;break}}o(S=>S.map(z=>z.id===T?{...z,last_visible_message:V}:z))}catch(A){console.error("Error updating last message for chat:",A)}},D=T=>!T||!e?null:T.sender_id===e.id?T.receiver:T.sender,Q=T=>{const A=T.last_visible_message;return A?A.content===""||A.content==null?"Message deleted":A.content.length>50?A.content.substring(0,50)+"...":A.content:"No messages yet"},ne=T=>{const A=new Date(T),V=(new Date().getTime()-A.getTime())/(1e3*60);return V<1?"now":V<60?`${Math.floor(V)}m ago`:V<1440?`${Math.floor(V/60)}h ago`:`${Math.floor(V/1440)}d ago`},oe=async T=>{const A=s.find(G=>G.id===T);if(A){if(A.sender_id!==(e==null?void 0:e.id)){q({title:"Not allowed",description:"Only the creator of the chat can delete.",variant:"destructive"}),x(null);return}k({type:"deleteChat",chatId:T}),_(!0),x(null)}},he=async T=>{p(A=>({...A,[T]:0})),n(`/chat/${T}`),x(null);try{const{error:A}=await N.rpc("mark_messages_as_read",{chat_id_param:T,user_id_param:e==null?void 0:e.id});A?console.error("Error marking messages as read:",A):setTimeout(()=>g(),200)}catch(A){console.error("Error marking messages as read:",A)}},je=async()=>{if(!(!e||!j))try{const{chatId:T}=j,A=s.find(V=>V.id===T);if(!A)return;if(A.sender_id!==(e==null?void 0:e.id)){q({title:"Not allowed",description:"Only the creator of the chat can delete.",variant:"destructive"});return}console.log("Deleting chat:",T),o(V=>V.filter(S=>S.id!==T));const{error:G}=await N.from("chats").update({deleted_for_sender:!0,deleted_for_receiver:!0,updated_at:new Date().toISOString()}).eq("id",T);G?(console.error("Error deleting chat:",G),L(),q({title:"Failed to delete chat",description:G.message||"Please try again.",variant:"destructive"})):q({title:"Chat deleted",description:"The chat has been removed from both inboxes.",variant:"default"})}catch(T){console.error("Error deleting chat:",T),q({title:"Failed to delete chat",description:"An unexpected error occurred.",variant:"destructive"})}finally{_(!1),k(null)}},Ce=async T=>{var A,G;await fe(T.id),T.type==="admin"?(B(T),E(!0)):(T.type==="comment_reply"||T.type==="video_comment")&&T.video_id?n("/",{state:{showCommentsForVideo:T.video_id}}):T.type==="follow"&&((A=T.from_user)!=null&&A.username)?n(`/profile/${T.from_user.username}`):T.type==="like"&&((G=T.from_user)!=null&&G.username)&&n(`/profile/${T.from_user.username}`)},fe=async T=>{try{const{error:A}=await N.from("system_notifications").update({read:!0}).eq("id",T);A||(l(G=>G.map(V=>V.id===T?{...V,read:!0}:V)),g())}catch(A){console.error("Error marking notification as read:",A)}},de=T=>{switch(T){case"like":return i.jsx(As,{size:16,className:"text-red-400"});case"follow":return i.jsx(oE,{size:16,className:"text-blue-400"});case"admin":return i.jsx(Da,{size:16,className:"text-yellow-400"});default:return i.jsx(Aa,{size:16,className:"text-gray-400"})}};return r||t?i.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):i.jsxs("div",{className:"min-h-screen bg-black text-white",children:[i.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-2xl font-black text-white tracking-wider logo-text-glow",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:"900",letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))"},children:"Messages"}),i.jsx("div",{style:{width:40}})]})}),i.jsx("div",{className:"pt-20 pb-24",children:i.jsxs(Xd,{defaultValue:"inbox",className:"w-full",children:[i.jsxs(kl,{className:`mx-4 mb-4 max-w-md ${t?"grid grid-cols-1":"grid grid-cols-2"}`,children:[i.jsxs(sr,{value:"inbox",className:"flex items-center gap-2",children:[i.jsx(Ma,{size:16}),"Inbox",b>0&&i.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full min-w-[18px] h-[18px] flex items-center justify-center font-bold ml-1",children:b>99?"99+":b})]}),!t&&i.jsxs(sr,{value:"system",className:"flex items-center gap-2",onClick:Z,children:[i.jsx(Aa,{size:16}),"System",w>0&&i.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full min-w-[18px] h-[18px] flex items-center justify-center font-bold ml-1",children:w>99?"99+":w})]})]}),i.jsx(sn,{value:"inbox",children:c?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):s.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Ma,{size:24})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No messages yet"}),i.jsx("p",{className:"text-white/70 mb-4",children:"Start a conversation with someone!"}),i.jsx(H,{variant:"outline",onClick:L,className:"border-white/20 text-white hover:bg-white/10",children:"Refresh"})]}):i.jsx("div",{className:"space-y-0",children:s.map(T=>{var G;const A=D(T);return A?i.jsxs("div",{className:"flex items-center p-4 border-b border-white/10 hover:bg-white/5 cursor-pointer transition-colors",onClick:()=>he(T.id),children:[i.jsxs("div",{className:"relative mr-3",children:[i.jsxs(ut,{className:"w-12 h-12",children:[i.jsx(ft,{src:A.avatar_url,alt:A.username}),i.jsx(ht,{className:"bg-white/10 text-white",children:((G=A.username)==null?void 0:G.charAt(0).toUpperCase())||"U"})]}),y[T.id]>0&&i.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full min-w-[18px] h-[18px] flex items-center justify-center font-bold",children:y[T.id]>99?"99+":y[T.id]})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsxs("h3",{className:"font-semibold text-white truncate",children:["@",A.username||"unknown"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-white/60 flex-shrink-0",children:ne(T.updated_at)}),y[T.id]>0&&i.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]}),i.jsx("p",{className:"text-sm text-white/70 truncate",children:Q(T)})]}),i.jsxs("div",{className:"relative ml-2",children:[i.jsx(H,{variant:"ghost",size:"sm",onClick:V=>{V.stopPropagation(),x(m===T.id?null:T.id)},className:"text-white/60 hover:text-white p-2",children:i.jsx(pi,{size:16})}),m===T.id&&i.jsxs("div",{className:"absolute top-full right-0 mt-2 bg-black/90 rounded-lg shadow-lg z-10 min-w-[140px] border border-white/10","data-dropdown":!0,children:[i.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 flex items-center gap-2 text-white",onClick:V=>{V.stopPropagation(),he(T.id)},children:[i.jsx(Ma,{size:14}),"Open Chat"]}),T.sender_id===(e==null?void 0:e.id)?i.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 text-red-400 flex items-center gap-2",onClick:V=>{V.stopPropagation(),oe(T.id)},children:[i.jsx(Iv,{size:14}),"Delete Chat"]}):i.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 text-red-400 flex items-center gap-2",onClick:V=>{V.stopPropagation(),q({title:"Not allowed",description:"Only the creator of the chat can delete.",variant:"destructive"}),x(null)},children:[i.jsx(Iv,{size:14}),"Delete Chat"]})]})]})]},T.id):null})})}),!t&&i.jsx(sn,{value:"system",children:f?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):a.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Aa,{size:24})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No notifications"}),i.jsx("p",{className:"text-white/70",children:"System notifications will appear here"})]}):i.jsx("div",{className:"space-y-0",children:a.map(T=>{var A;return i.jsxs("div",{className:`flex items-center p-4 border-b border-white/10 hover:bg-white/5 cursor-pointer transition-colors ${T.read?"":"bg-blue-900/20"}`,onClick:()=>Ce(T),children:[i.jsx("div",{className:"mr-3",children:de(T.type)}),T.from_user&&i.jsx("div",{className:"relative mr-3",children:i.jsxs(ut,{className:"w-10 h-10",children:[i.jsx(ft,{src:T.from_user.avatar_url,alt:T.from_user.username}),i.jsx(ht,{className:"bg-white/10 text-white",children:((A=T.from_user.username)==null?void 0:A.charAt(0).toUpperCase())||"U"})]})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("h3",{className:"font-semibold text-white truncate",children:T.title}),i.jsx("span",{className:"text-xs text-white/60 flex-shrink-0 ml-2",children:ne(T.created_at)})]}),i.jsx("p",{className:"text-sm text-white/60",children:"Click to view full message"})]}),!T.read&&i.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full ml-2"})]},T.id)})})})]})}),v&&i.jsx("div",{className:"fixed inset-0 bg-black flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-black/90 rounded-lg p-6 max-w-sm mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4 text-center",children:"Are you sure you want to delete this chat?"}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx(H,{onClick:()=>{_(!1),k(null)},variant:"outline",className:"flex-1",children:"Cancel"}),i.jsx(H,{onClick:je,variant:"destructive",className:"flex-1",children:"OK"})]})]})}),C&&O&&i.jsx("div",{className:"fixed inset-0 z-50 bg-black flex flex-col",onClick:()=>E(!1),children:i.jsxs("div",{className:"flex-1 flex flex-col",onClick:T=>T.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-yellow-600 rounded-full flex items-center justify-center",children:i.jsx(Da,{size:20,className:"text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-white",children:"System Notification"}),i.jsx("p",{className:"text-sm text-white/60",children:ne(O.created_at)})]})]}),i.jsx(H,{variant:"ghost",size:"icon",onClick:()=>E(!1),className:"text-white hover:bg-white/10",children:i.jsx(Nr,{size:20})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-white/70 block mb-2",children:"Title"}),i.jsx("p",{className:"text-white font-semibold text-lg",children:O.title})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-white/70 block mb-2",children:"Message"}),i.jsx("div",{className:"bg-black/40 border border-white/10 rounded-lg p-4",children:i.jsx("p",{className:"text-white/90 leading-relaxed whitespace-pre-wrap",children:((xe=(ce=O.message)==null?void 0:ce.replace(/^\[ALL_USERS\]\s*/,""))==null?void 0:xe.replace(/^\[TO:[^\]]+\]\s*/,""))||O.message})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-white/70 block mb-2",children:"From"}),i.jsx("div",{className:"bg-black/40 border border-white/10 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 bg-yellow-600 rounded-full flex items-center justify-center",children:i.jsx(Da,{size:16,className:"text-white"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white font-medium",children:"System Administrator"}),i.jsx("p",{className:"text-white/60 text-sm",children:"Official notification"})]})]})})]})]}),i.jsx("div",{className:"p-4 border-t border-white/10",children:i.jsx(H,{onClick:()=>E(!1),className:"w-full bg-white/10 hover:bg-white/20 text-white border-white/20 h-12 text-lg",variant:"outline",children:"Got it"})})]})}),i.jsx(mr,{})]})},YO=()=>{var z;const{chatId:e,userId:t}=_l(),r=ot(),{user:n}=it(),{refreshCounts:s}=Cp(),[o,a]=u.useState([]),l=M=>{const R=new Set;return M.filter(I=>R.has(I.id)?(console.log("Removing duplicate message:",I.id),!1):(R.add(I.id),!0)).sort((I,$)=>new Date(I.created_at).getTime()-new Date($.created_at).getTime())},[c,d]=u.useState(null),[f,h]=u.useState(""),[m,x]=u.useState(!0),[y,p]=u.useState(!1),b=u.useRef(null),w=u.useRef(null),[g,v]=u.useState(null),[_,j]=u.useState(!1);u.useState(null);const[k,C]=u.useState(!1),[E,O]=u.useState(!1),B=u.useRef(null),[q,X]=u.useState(!0),{toast:Z}=$t(),[L,ee]=u.useState(!1),[U,K]=u.useState(null);u.useEffect(()=>{if(console.log("=== CHAT USEFFECT RUNNING ==="),console.log("user:",n==null?void 0:n.id),console.log("chatId:",e),console.log("paramUserId:",t),n)if(e){console.log("Setting up chat with chatId:",e),D(),Q(),console.log("About to set up real-time subscription...");const M=ne(),R=V();return()=>{console.log("Cleaning up chat subscriptions"),M(),R(),B.current&&clearTimeout(B.current)}}else t&&(async()=>{console.log("Starting new chat with user:",t);const{data:M,error:R}=await N.from("chats").select("*").or(`and(sender_id.eq.${n.id},receiver_id.eq.${t}),and(sender_id.eq.${t},receiver_id.eq.${n.id})`);if(R){console.error("Error checking for existing chat:",R),Z({title:"Failed to check for existing chat",description:R.message,variant:"destructive"});return}console.log("All existing chats found:",M);const I=M==null?void 0:M.find(re=>re.sender_id===n.id&&re.receiver_id===t||re.sender_id===t&&re.receiver_id===n.id);let $=!0,te=null;if(I){const re=I.sender_id===n.id&&I.deleted_for_sender||I.receiver_id===n.id&&I.deleted_for_receiver;console.log(`Existing chat found: ${I.id}, deleted_for_user: ${re}`),re?(console.log("Existing chat is deleted for current user, will create new chat"),$=!0):(te=I,$=!1,console.log("Reusing existing non-deleted chat:",te))}else console.log("No existing chat found, will create new chat"),$=!0;if($){console.log("Creating new chat");const{data:re,error:Y}=await N.from("chats").insert({sender_id:n.id,receiver_id:t}).select().single();if(Y){Z({title:"Failed to start chat",description:Y.message,variant:"destructive"});return}te=re,console.log("New chat created:",te)}r(`/chat/${te.id}`,{replace:!0})})()},[e,n,t]),u.useEffect(()=>{console.log("Messages state changed, count:",o.length),o.length>0&&q&&oe()},[o,q]),u.useEffect(()=>{const M=R=>{R.target.closest("[data-dropdown]")||(v(null),j(!1))};return document.addEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}},[]);const D=async()=>{try{console.log("Fetching chat with ID:",e);const{data:M,error:R}=await N.from("chats").select(`
          *,
          sender:profiles!chats_sender_id_fkey(username, avatar_url),
          receiver:profiles!chats_receiver_id_fkey(username, avatar_url)
        `).eq("id",e).single();if(R){console.error("Error fetching chat:",R),r("/inbox");return}if(M.sender_id===(n==null?void 0:n.id)&&M.deleted_for_sender||M.receiver_id===(n==null?void 0:n.id)&&M.deleted_for_receiver){console.log("Chat has been deleted by current user, redirecting to inbox"),r("/inbox");return}console.log("Chat data:",M),d(M);try{await N.rpc("mark_messages_as_read",{chat_id_param:e,user_id_param:n==null?void 0:n.id}),s()}catch($){console.error("Error marking messages as read:",$)}}catch(M){console.error("Error fetching chat:",M),r("/inbox")}},Q=async()=>{try{console.log("Fetching messages for chatId:",e);const{data:M,error:R}=await N.from("chats").select("*").eq("id",e).single();if(R){console.error("Chat access error:",R),r("/inbox");return}if(M.sender_id===(n==null?void 0:n.id)&&M.deleted_for_sender||M.receiver_id===(n==null?void 0:n.id)&&M.deleted_for_receiver){console.log("Chat has been deleted by current user, redirecting to inbox"),r("/inbox");return}console.log("Chat access confirmed:",M);const{data:$,error:te}=await N.from("messages").select("*").eq("chat_id",e).order("created_at",{ascending:!0});if(te)console.error("Error fetching messages:",te);else{console.log("Messages data:",$);const re=l($||[]);console.log("Unique messages after deduplication:",re.length),a(re)}}catch(M){console.error("Error fetching messages:",M)}finally{x(!1)}},ne=()=>{console.log("Setting up real-time subscription for chat:",e);const M=`messages_${e}_${Date.now()}`;console.log("Channel name:",M);const R=N.channel(`all_messages_${Date.now()}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},$=>{console.log("=== ALL MESSAGES SUBSCRIPTION ==="),console.log("New message received (all messages):",$.new),console.log("Message chat ID:",$.new.chat_id),console.log("Current chat ID:",e),$.new.chat_id===e&&console.log("This message belongs to current chat!")}).subscribe($=>{console.log("All messages subscription status:",$)}),I=N.channel(M).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`chat_id=eq.${e}`},$=>{console.log("=== REAL-TIME MESSAGE RECEIVED ==="),console.log("New message received via real-time:",$.new),console.log("Current messages count before adding:",o.length),console.log("Chat ID from subscription:",e),console.log("Message chat ID:",$.new.chat_id),a(te=>{const re=[...te,$.new],Y=l(re);return console.log("Adding new message via real-time, total unique messages:",Y.length),Y})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`chat_id=eq.${e}`},$=>{console.log("Message updated via real-time:",$.new),a(te=>te.map(re=>re.id===$.new.id?$.new:re))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"messages",filter:`chat_id=eq.${e}`},$=>{console.log("Message deleted via real-time:",$.old),a(te=>te.filter(re=>re.id!==$.old.id))}).subscribe($=>{console.log("Subscription status:",$),$==="SUBSCRIBED"?console.log("Successfully subscribed to real-time messages for chat:",e):$==="CHANNEL_ERROR"?console.error("Channel error for chat:",e):$==="TIMED_OUT"&&console.error("Subscription timed out for chat:",e)});return()=>{console.log("Cleaning up subscription for chat:",e),I.unsubscribe(),R.unsubscribe()}},oe=()=>{b.current&&b.current.scrollIntoView({behavior:"smooth"})},he=M=>{const R=M.currentTarget,$=R.scrollHeight-R.scrollTop-R.clientHeight<100;X($)},je=async()=>{if(!f.trim()||!n||!c){c||Z({title:"Chat not loaded",description:"Please wait for the chat to load before sending a message.",variant:"destructive"});return}console.log("Sending message:",f.trim());const M=c.sender_id===n.id?c.receiver_id:c.sender_id;if(M===n.id){console.error("Cannot send message to yourself!");return}C(!1),G(!1),B.current&&clearTimeout(B.current),p(!0);const R=f.trim();h("");try{console.log("Attempting to send message with data:",{chat_id:e,sender_id:n.id,receiver_id:M,content:f.trim()});const{data:I,error:$}=await N.from("messages").insert({chat_id:e,sender_id:n.id,receiver_id:M,content:R}).select().single();$?(console.error("Error sending message:",$),Z({title:"Failed to send message",description:$.message||"Please try again.",variant:"destructive"})):(console.log("Message sent successfully:",I),console.log("Current messages count before adding:",o.length),a(te=>{const re=[...te,I],Y=l(re);return console.log("Adding sent message to local state, total unique messages:",Y.length),Y}),await N.from("chats").update({last_message:R,updated_at:new Date().toISOString()}).eq("id",e),X(!0),setTimeout(()=>oe(),100))}catch(I){console.error("Error sending message:",I),Z({title:"Failed to send message",description:I instanceof Error?I.message:"An unexpected error occurred",variant:"destructive"})}finally{p(!1)}},Ce=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),je())},fe=async M=>{try{await navigator.clipboard.writeText(M),console.log("Message copied to clipboard:",M),v(null),Z({title:"Message copied",description:"Message copied to clipboard."})}catch(R){console.error("Error copying message:",R);const I=document.createElement("textarea");I.value=M,document.body.appendChild(I),I.select();try{document.execCommand("copy"),console.log("Message copied to clipboard (fallback):",M),v(null),Z({title:"Message copied",description:"Message copied to clipboard."})}catch($){console.error("Fallback copy failed:",$),Z({title:"Failed to copy",description:"Could not copy message to clipboard.",variant:"destructive"})}document.body.removeChild(I)}},de=async(M,R=!1)=>{v(null);const I=o.find($=>$.id===M);if(I){if(I.deleted_for_everyone){Z({title:"Cannot delete",description:"This message has already been deleted for everyone.",variant:"destructive"});return}K({type:R?"deleteForEveryone":"deleteForMe",messageId:M}),ee(!0)}},ce=async()=>{if(!(!n||!U))try{const{type:M,messageId:R,chatId:I}=U;if(M==="deleteChat"){if((c==null?void 0:c.sender_id)!==(n==null?void 0:n.id)){Z({title:"Not allowed",description:"Only the person who started the chat can delete it.",variant:"destructive"});return}console.log("Deleting chat for both users:",I);const{error:$}=await N.from("chats").update({deleted_for_sender:!0,deleted_for_receiver:!0}).eq("id",I);$?(console.error("Error deleting chat:",$),Z({title:"Failed to delete chat",description:$.message||"Please try again.",variant:"destructive"})):(Z({title:"Chat deleted",description:"The chat has been removed from both inboxes.",variant:"default"}),r("/inbox"))}else{const $=M==="deleteForEveryone",te=o.find(re=>re.id===R);if(!te){Z({title:"Message not found",description:"The message could not be found.",variant:"destructive"});return}if(te.deleted_for_everyone){Z({title:"Cannot delete",description:"This message has already been deleted for everyone.",variant:"destructive"});return}if($){const{error:re}=await N.from("messages").update({deleted_for_everyone:!0}).eq("id",R);if(re){console.error("Error deleting message for everyone:",re),Z({title:"Failed to delete message",description:re.message,variant:"destructive"});return}console.log("Message deleted for everyone"),a(Y=>{const me=Y.map(be=>be.id===R?{...be,deleted_for_everyone:!0}:be);return console.log("Updated messages state (delete for everyone):",me),me}),Z({title:"Message deleted for everyone",description:"The message has been removed for all users.",className:"bg-green-600 text-white border-green-700"})}else{const{error:re}=await N.from("messages").update({deleted_for_sender:!0}).eq("id",R);if(re){console.error("Error marking message as deleted for sender:",re),Z({title:"Failed to delete message",description:re.message,variant:"destructive"});return}console.log("Message marked as deleted for sender"),a(Y=>{const me=Y.map(be=>be.id===R?{...be,deleted_for_sender:!0}:be);return console.log("Updated messages state:",me),me}),Z({title:"Message deleted",description:"The message has been removed from your view.",className:"bg-green-600 text-white border-green-700"})}}}catch(M){console.error("Error deleting message:",M),Z({title:"Failed to delete message",description:"An unexpected error occurred.",variant:"destructive"})}finally{ee(!1),K(null)}},xe=()=>!c||!n?null:c.sender_id===n.id?c.receiver&&c.receiver.user_id!==n.id?c.receiver:null:c.receiver_id===n.id&&c.sender&&c.sender.user_id!==n.id?c.sender:null,T=M=>{const R=new Date(M),$=(new Date().getTime()-R.getTime())/(1e3*60);return $<1?"now":$<60?`${Math.floor($)}m ago`:$<1440?`${Math.floor($/60)}h ago`:`${Math.floor($/1440)}d ago`},A=()=>{k||(C(!0),G(!0)),B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{C(!1),G(!1)},3e3)},G=async M=>{if(!n||!e||!c)return;const I=c.sender_id===n.id?{typing_sender:M}:{typing_receiver:M};try{await N.from("chats").update(I).eq("id",e)}catch($){console.error("Error broadcasting typing status:",$)}},V=()=>{const M=N.channel(`typing_${e}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"chats",filter:`id=eq.${e}`},R=>{const I=R.new,$=I.sender_id===(n==null?void 0:n.id);O($?I.typing_receiver===!0:I.typing_sender===!0)}).subscribe();return()=>{M.unsubscribe()}};if(u.useEffect(()=>{!m&&o.length>0&&setTimeout(()=>oe(),100)},[m]),m)return i.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:i.jsx("div",{className:"text-white",children:"Loading chat..."})});if(!e||!c)return i.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:i.jsx("div",{className:"text-white",children:"Chat not found"})});const S=xe();return i.jsxs("div",{className:"min-h-screen bg-black text-white flex flex-col",children:[i.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/90 backdrop-blur-md border-b border-white/10 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>r("/inbox"),children:i.jsx(Bn,{size:20})}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"relative",children:i.jsxs(ut,{className:"w-8 h-8",children:[i.jsx(ft,{src:S==null?void 0:S.avatar_url,alt:S==null?void 0:S.username}),i.jsx(ht,{children:((z=S==null?void 0:S.username)==null?void 0:z.charAt(0).toUpperCase())||"U"})]})}),i.jsx("div",{children:i.jsxs("h2",{className:"font-semibold",children:["@",(S==null?void 0:S.username)||"unknown"]})})]}),i.jsx("div",{className:"w-8"})]})}),i.jsx("div",{ref:w,className:"flex-1 overflow-y-auto px-4 pt-20 pb-40",onScroll:he,children:o.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Ma,{size:24})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No messages yet"}),i.jsx("p",{className:"text-white/70",children:"Start the conversation!"})]}):i.jsxs("div",{className:"space-y-4",children:[o.map((M,R)=>{const I=M.sender_id===(n==null?void 0:n.id),$=M.deleted_for_everyone===!0,te=I&&M.deleted_for_sender===!0,re=!I&&M.deleted_for_receiver===!0,Y=$||te||re,me=M.id||`message-${R}-${M.created_at}`;return(M.deleted_for_sender||M.deleted_for_everyone)&&console.log("Message deletion state:",{id:M.id,deleted_for_sender:M.deleted_for_sender,deleted_for_everyone:M.deleted_for_everyone,isOwnMessage:I,isDeleted:Y}),Y?i.jsx("div",{className:`flex ${I?"justify-end":"justify-start"}`,children:i.jsx("span",{className:"text-xs text-white/40 italic",children:"Message deleted"})},`${me}-deleted`):i.jsx("div",{className:`flex ${I?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:"relative flex items-start",children:[I&&!M.deleted_for_everyone&&i.jsx(H,{variant:"ghost",size:"sm",className:"w-6 h-6 p-0 mr-2 mt-1 text-white/60 hover:text-white",onClick:()=>v(g===M.id?null:M.id),children:i.jsx(pi,{size:16})}),i.jsxs("div",{className:`p-3 rounded-lg ${I?"bg-green-600 text-white":"bg-white/10 text-white"}`,children:[i.jsx("p",{className:"text-sm break-words break-all",children:M.content}),i.jsx("div",{className:"flex justify-end mt-1",children:i.jsx("p",{className:`text-xs ${T(M.created_at)==="now"?"text-green-400 font-medium":"opacity-70"}`,children:T(M.created_at)})})]}),g===M.id&&I&&!M.deleted_for_everyone&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center","data-dropdown":!0,children:i.jsxs("div",{className:"bg-black/90 rounded-lg shadow-lg min-w-[140px] max-w-[90vw] p-4",children:[i.jsxs("button",{className:"w-full px-3 py-2 text-sm hover:bg-white/10 flex flex-row items-center gap-2 rounded text-center justify-center",onClick:()=>fe(M.content),children:[i.jsx(Ky,{size:16}),"Copy"]}),i.jsx("button",{className:"w-full px-3 py-2 text-sm hover:bg-white/10 text-red-400 rounded text-center",onClick:()=>de(M.id,!1),children:"Delete for me"}),i.jsx("button",{className:"w-full px-3 py-2 text-sm hover:bg-white/10 text-red-400 rounded text-center",onClick:()=>de(M.id,!0),children:"Delete for everyone"}),i.jsx("button",{className:"w-full px-3 py-2 text-sm hover:bg-white/10 text-white/70 rounded text-center border-t border-white/10 mt-2 pt-3",onClick:()=>v(null),children:"Cancel"})]})})]})},me)}),i.jsx("div",{ref:b})]})}),i.jsxs("div",{className:"fixed bottom-12 left-0 right-0 p-4 bg-black/90 backdrop-blur-md border-t border-white/10 z-40",children:[E&&i.jsx("div",{className:"mb-2 px-3 py-1 flex justify-center",children:i.jsxs("div",{className:"flex items-center space-x-2 bg-white/10 rounded-full px-3 py-1",children:[i.jsxs("div",{className:"flex space-x-1",children:[i.jsx("div",{className:"w-2 h-2 bg-white/60 rounded-full animate-bounce"}),i.jsx("div",{className:"w-2 h-2 bg-white/60 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),i.jsx("div",{className:"w-2 h-2 bg-white/60 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),i.jsxs("span",{className:"text-xs text-white/60 italic",children:[(S==null?void 0:S.username)||"Someone"," is typing..."]})]})}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(rt,{value:f,onChange:M=>{h(M.target.value),A()},onKeyPress:Ce,placeholder:"Type a message...",className:"flex-1 bg-white/10 border-white/20 text-white placeholder-white/50",disabled:y}),i.jsx(H,{onClick:je,disabled:y||!f.trim()||!c,className:"bg-green-600 hover:bg-green-700 disabled:opacity-50",children:i.jsx(In,{size:16})})]})]}),L&&i.jsx("div",{className:"fixed inset-0 bg-black flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-black/90 rounded-lg p-6 max-w-sm mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4 text-center",children:(U==null?void 0:U.type)==="deleteChat"?"Are you sure you want to delete this chat?":"Are you sure you want to delete this message?"}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx(H,{onClick:()=>{ee(!1),K(null)},variant:"outline",className:"flex-1",children:"Cancel"}),i.jsx(H,{onClick:ce,variant:"destructive",className:"flex-1",children:"OK"})]})]})}),i.jsx(mr,{})]})},ZO=()=>{var p,b;const{username:e}=_l(),t=ot(),{user:r}=it(),[n,s]=u.useState(null),[o,a]=u.useState(""),[l,c]=u.useState(!0),[d,f]=u.useState(!1),{toast:h}=$t();u.useEffect(()=>{e&&r&&m()},[e,r]);const m=async()=>{try{c(!0),console.log("Fetching receiver profile for username:",e);const{data:w,error:g}=await N.from("profiles").select("*").eq("username",e).single();g?(console.error("Error fetching receiver:",g),h({title:"User not found",description:"The user you're trying to message doesn't exist",variant:"destructive"}),t("/inbox")):(console.log("Receiver found:",w),s(w),w.user_id===(r==null?void 0:r.id)&&(h({title:"Cannot message yourself",description:"You cannot send a message to yourself",variant:"destructive"}),t("/inbox")))}catch(w){console.error("Error fetching receiver:",w),h({title:"Error loading user",description:"Please try again",variant:"destructive"}),t("/inbox")}finally{c(!1)}},x=async()=>{if(!o.trim()||!r||!n){o.trim()||h({title:"Empty message",description:"Please enter a message before sending",variant:"destructive"});return}f(!0),console.log("Sending message to:",n.username);try{const{data:w,error:g}=await N.from("chats").select("*").or(`and(sender_id.eq.${r.id},receiver_id.eq.${n.user_id}),and(sender_id.eq.${n.user_id},receiver_id.eq.${r.id})`);if(g){console.error("Error checking for existing chat:",g),alert("Failed to check for existing chat: "+g.message);return}const v=(w==null?void 0:w.filter(E=>E.sender_id===r.id?!E.deleted_for_sender:!E.deleted_for_receiver))||[],_=v.length>0?v[0]:null;console.log("Found existing chats:",w),console.log("Non-deleted chats:",v),console.log("Using existing chat:",_);let j,k=_;if(k){console.log("Found existing non-deleted chat:",k.id),j=k.id,console.log("Using existing chat:",k.id);const{error:E}=await N.from("chats").update({last_message:o.trim(),updated_at:new Date().toISOString()}).eq("id",j);if(E)throw console.error("Error updating existing chat:",E),E}else{console.log("Creating new chat between",r.id,"and",n.user_id);const{data:E,error:O}=await N.from("chats").insert({sender_id:r.id,receiver_id:n.user_id,last_message:o.trim(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(O){console.error("Error creating chat:",O),alert("Failed to create chat: "+O.message);return}console.log("Created new chat:",E),j=E.id}const{error:C}=await N.from("messages").insert({chat_id:j,sender_id:r.id,receiver_id:n.user_id,content:o.trim(),created_at:new Date().toISOString()});C?(console.error("Error sending message:",C),alert("Failed to send message: "+C.message)):(console.log("Message sent successfully, navigating to chat:",j),t(`/chat/${j}`))}catch(w){console.error("Error sending message:",w),alert("Failed to send message: "+(w instanceof Error?w.message:"An unexpected error occurred"))}finally{f(!1)}},y=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),x())};return l?i.jsx("div",{className:"min-h-screen bg-black flex justify-center items-center",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):n?i.jsxs("div",{className:"min-h-screen bg-black text-white flex flex-col",children:[i.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/90 backdrop-blur-md border-b border-white/10 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>t("/inbox"),children:i.jsx(Bn,{size:20})}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("div",{className:"relative",children:[i.jsxs(ut,{className:"w-8 h-8",children:[i.jsx(ft,{src:n==null?void 0:n.avatar_url,alt:n==null?void 0:n.username}),i.jsx(ht,{className:"bg-white/10 text-white",children:((p=n==null?void 0:n.username)==null?void 0:p.charAt(0).toUpperCase())||"U"})]}),i.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-black"})]}),i.jsxs("div",{children:[i.jsxs("h2",{className:"font-semibold",children:["@",(n==null?void 0:n.username)||"unknown"]}),i.jsx("p",{className:"text-xs text-white/60",children:"Send a message"})]})]}),i.jsx("div",{className:"w-8"})]})}),i.jsx("div",{className:"flex-1 pt-20 pb-32 px-4 flex flex-col justify-center",children:i.jsxs("div",{className:"max-w-md mx-auto w-full space-y-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-20 h-20 mx-auto mb-4",children:i.jsxs(ut,{className:"w-full h-full",children:[i.jsx(ft,{src:n==null?void 0:n.avatar_url,alt:n==null?void 0:n.username}),i.jsx(ht,{className:"bg-white/10 text-white text-2xl",children:((b=n==null?void 0:n.username)==null?void 0:b.charAt(0).toUpperCase())||"U"})]})}),i.jsxs("h3",{className:"text-xl font-semibold mb-2",children:["Send a message to @",(n==null?void 0:n.username)||"unknown"]}),i.jsx("p",{className:"text-white/60 text-sm",children:"Start a conversation"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(rt,{value:o,onChange:w=>a(w.target.value),onKeyPress:y,placeholder:"Type your message...",className:"w-full bg-white/10 border-white/20 text-white placeholder-white/50 pr-12",disabled:d,maxLength:1e3}),i.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-xs text-white/40",children:[o.length,"/1000"]})]}),i.jsx(H,{onClick:x,disabled:d||!o.trim(),className:"w-full bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d?i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),i.jsx("span",{children:"Sending..."})]}):i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(In,{size:16}),i.jsx("span",{children:"Send Message"})]})})]})]})}),i.jsx(mr,{})]}):i.jsxs("div",{className:"min-h-screen bg-black text-white flex flex-col items-center justify-center",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"User not found"}),i.jsx(H,{onClick:()=>t("/inbox"),variant:"outline",children:"Back to Messages"})]})},KO=()=>{const e=un();return u.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),i.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),i.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},eN=()=>{const e=localStorage.getItem("wp_jwt_validated");return localStorage.getItem("wp_jwt_token"),e==="true"},XO=()=>({validated:localStorage.getItem("wp_jwt_validated"),validationTime:localStorage.getItem("wp_jwt_validation_time"),isValid:eN(),note:"JWT validation does not expire - valid until logout"});function QO(){const[e,t]=u.useState(!1),[r,n]=u.useState(""),s=ot(),{toast:o}=$t(),{user:a,signOut:l}=it(),{loading:c,linked:d,refresh:f}=Op(a==null?void 0:a.id),[h,m]=u.useState(!1),[x,y]=u.useState(""),[p,b]=u.useState(!1),[w,g]=u.useState(!1),v=u.useRef(!1);u.useEffect(()=>{const j=async()=>{if(a!=null&&a.id){const{data:C}=await Yd(a.id);C?(m(!0),y("")):(m(!1),y(""))}},k=()=>{const C=eN(),E=localStorage.getItem("wp_jwt_token");b(C),console.log("=== JWT Validation Debug ==="),console.log("JWT Validation Info:",XO()),console.log("JWT Validated:",C),console.log("Stored Token Present:",!!E),console.log("Token Length:",(E==null?void 0:E.length)||0),console.log("Raw validation value:",localStorage.getItem("wp_jwt_validated")),console.log("Validation time:",localStorage.getItem("wp_jwt_validation_time")),console.log("=== End Debug ===")};return j(),k(),()=>{v.current=!1}},[a]);const _=async()=>{var j,k,C,E,O;if(!p){n("Authentication required. Please log out and log back in.");return}if(e||w||v.current){console.log("Link already in progress or completed, ignoring click");return}v.current=!0,t(!0),n("");try{if(console.log("Starting quick link process..."),d){console.log("Wallet already linked, redirecting to wallet page"),g(!0),o({title:"Wallet already linked!",description:"Redirecting to wallet..."}),v.current=!1,s("/wallet");return}if(console.log("JWT validation passed - checking token availability..."),!localStorage.getItem("wp_jwt_token")){console.log("Token missing but validation passed - user needs to re-login for fresh token"),n("Since your wallet was unlinked, for security purposes you will need to sign out and sign in again before relinking your account."),v.current=!1,t(!1);return}console.log("Token available - attempting TrinEPay wallet link...");try{await L1({email:(a==null?void 0:a.email)||"",password:"",passcode:""}),console.log("TrinEPay wallet link successful")}catch(q){console.error("TrinEPay wallet link failed:",q),(j=q.message)!=null&&j.includes("authentication")||(k=q.message)!=null&&k.includes("Not authenticated")||(C=q.message)!=null&&C.includes("credentials")?n("Authentication session expired. Please log out and log back in to refresh your authentication."):n(`Wallet linking failed: ${q.message||"Unknown error"}`),v.current=!1,t(!1);return}if(a!=null&&a.id){console.log("Inserting wallet link into Supabase for user:",a.id);try{const{error:q}=await S1(a.id);if(q)if(console.error("Supabase wallet link error:",q),q.status===406||(E=q.message)!=null&&E.includes("406"))console.log("Ignoring 406 error, TrinEPay linking was successful");else{n(`Database error: ${q.message||"Failed to link wallet in database"}`),v.current=!1,t(!1);return}console.log("Supabase wallet link completed")}catch(q){if(console.error("Supabase wallet link exception:",q),q.status===406||(O=q.message)!=null&&O.includes("406"))console.log("Ignoring 406 exception, TrinEPay linking was successful");else{n(`Database error: ${q.message||"Failed to link wallet in database"}`),v.current=!1,t(!1);return}}}console.log("Wallet linking completed successfully"),g(!0),console.log("Token before refresh:",!!localStorage.getItem("wp_jwt_token")),o({title:"Wallet linked successfully!",description:"Redirecting to wallet..."}),f(),console.log("Token after refresh:",!!localStorage.getItem("wp_jwt_token")),s("/wallet")}catch(B){console.error("Quick link error:",B),n(`Failed to link wallet: ${B.message||"Unknown error"}`)}finally{v.current=!1,t(!1)}};return h?i.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:i.jsxs("div",{className:"bg-black/90 p-6 rounded-lg w-full max-w-xs border border-white/10 text-center text-white",children:[i.jsx("h2",{className:"text-lg font-bold mb-4",children:"Wallet Already Linked"}),i.jsx("div",{className:"mb-4",children:"Your account is already linked to TrinEPay with email:"}),i.jsx("div",{className:"mb-4 font-semibold",children:x}),i.jsx(H,{className:"w-full",onClick:()=>s("/profile"),children:"Back to Profile"})]})}):i.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:i.jsxs("div",{className:"bg-black/90 p-6 rounded-lg w-full max-w-xs border border-white/10",children:[i.jsx("h2",{className:"text-lg font-bold text-white mb-4 text-center",children:"Link TrinEPay Account"}),i.jsxs("div",{className:"mb-4 p-2 bg-gray-800 rounded text-xs text-gray-300",children:[i.jsxs("div",{children:["JWT Validated: ",p?"✅ Yes":"❌ No"]}),i.jsxs("div",{children:["User Email: ",(a==null?void 0:a.email)||"None"]}),i.jsxs("div",{children:["Already Linked: ",h?"Yes":"No"]}),i.jsxs("div",{children:["Status Loading: ",c?"Yes":"No"]})]}),p&&i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"mb-4 p-3 bg-green-900/20 border border-green-500/20 rounded-lg",children:[i.jsx("div",{className:"text-green-400 text-sm mb-2",children:"✓ Authentication Verified"}),i.jsx("div",{className:"text-white/70 text-xs",children:"Your TrinEPay credentials were verified during login"})]}),i.jsxs("div",{className:"mb-4 text-white/80 text-sm",children:["Link to: ",i.jsx("span",{className:"font-semibold",children:a==null?void 0:a.email})]}),r&&i.jsx("div",{className:"text-red-400 mb-4 text-center text-sm",children:r}),r.includes("Since your wallet was unlinked")?i.jsx(H,{onClick:async()=>{await l(),s("/login")},className:"w-full mb-3 bg-yellow-600 hover:bg-yellow-700",disabled:e,children:"Log Out & Log Back In"}):i.jsx(H,{onClick:_,className:"w-full mb-3 bg-green-600 hover:bg-green-700",disabled:e||w,children:w?"Success! Redirecting...":e?"Linking...":"Link Wallet"})]}),!p&&i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"mb-4 p-4 bg-red-900/20 border border-red-500/20 rounded-lg",children:[i.jsx("div",{className:"text-red-400 text-lg mb-3",children:"🔒 Authentication Required"}),i.jsx("div",{className:"text-white/90 text-sm mb-3 leading-relaxed",children:"To link your wallet securely, your Limey and TrinEPay accounts must have matching credentials. If they don't match yet, or if you haven't logged in recently:"}),i.jsxs("div",{className:"text-left text-white/80 text-sm space-y-2 mb-4",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-yellow-400 font-bold",children:"1."}),i.jsxs("span",{children:["Update your Limey ",i.jsx("strong",{children:"OR"})," TrinEPay account so both have the same email and password"]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-yellow-400 font-bold",children:"2."}),i.jsx("span",{children:"Log out of Limey completely"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-yellow-400 font-bold",children:"3."}),i.jsx("span",{children:"Log back in with the matching credentials"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-yellow-400 font-bold",children:"4."}),i.jsx("span",{children:"Return here to link your wallet"})]})]}),i.jsx("div",{className:"text-white/60 text-xs italic",children:"This ensures secure wallet linking and prevents authentication issues."})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(H,{onClick:()=>s("/settings"),className:"w-full bg-blue-600 hover:bg-blue-700",children:"Update Limey Account"}),i.jsx(H,{onClick:()=>window.open("https://theronm18.sg-host.com/manage-account/edit-account/","_blank"),variant:"outline",className:"w-full border-white/20 text-white hover:bg-white/10",children:"Update TrinEPay Account"}),i.jsx(H,{onClick:async()=>{await l(),s("/login")},variant:"outline",className:"w-full border-yellow-500/20 text-yellow-400 hover:bg-yellow-500/10",children:"Log Out & Log Back In"})]})]}),i.jsx(H,{type:"button",className:"w-full mt-2",variant:"ghost",onClick:()=>s("/profile"),disabled:e,children:"Cancel"})]})})}function JO(){const[e,t]=u.useState(""),[r,n]=u.useState(!1),[s,o]=u.useState(null),[a,l]=u.useState(null);u.useState(null);const[c,d]=u.useState(0),[f,h]=u.useState({per_transaction_limit:5e3,max_wallet_balance:2e4,max_monthly_transactions:2e4,user_role:"customer"}),[m,x]=u.useState(null),[y,p]=u.useState(null),[b,w]=u.useState([]);u.useState(!1);const g=ot(),{user:v,loading:_}=it(),{loading:j,linked:k,refresh:C}=Op(v==null?void 0:v.id),E=async()=>{if(v){n(!0);try{const{data:q,error:X}=await Yd(v.id);q&&q.wallet_email?(x(!0),p(q.wallet_email)):x(!1);const Z=await Nn(v.id);d(Z);try{await V1(v.id),console.log("Auto-synced balance to WordPress:",Z)}catch(K){console.warn("Auto-sync failed on wallet load:",K)}const L=await O1();L&&h(L);const{data:ee,error:U}=await N.from("trincredits_transactions").select("*").eq("user_id",v.id).order("created_at",{ascending:!1});U?console.error("Error fetching transactions:",U):w(ee)}catch(q){o(q.message)}finally{n(!1)}}};u.useEffect(()=>{E()},[v]);const O=async q=>{q.preventDefault(),n(!0),o(null),l(null);const X=parseFloat(e);if(isNaN(X)||X<=0){o("Please enter a valid amount"),n(!1);return}if(b.filter(L=>L.transaction_type==="withdrawal"&&new Date(L.created_at).getMonth()===new Date().getMonth()).reduce((L,ee)=>L+ee.amount,0)+X>f.max_monthly_transactions){o(`This transaction would exceed your monthly debit transaction limit of TT${f.max_monthly_transactions.toLocaleString()}`),n(!1);return}if(c+X>f.max_wallet_balance){o(`This transaction would exceed your maximum wallet balance of TT${f.max_wallet_balance.toLocaleString()}`),n(!1);return}if(X>f.per_transaction_limit){o(`Maximum per transaction for your TrinEPay account type is TT${f.per_transaction_limit.toLocaleString()}`),n(!1);return}try{const L=await F1({amount:X});await _i({userId:v.id,transactionType:"deposit",amount:X,description:"Deposit from TrinEPay",referenceId:L.transaction_id||L.id}),l("Deposit successful!"),t(""),E()}catch(L){o(L.message||"Failed to deposit")}finally{n(!1)}},B=async q=>{q.preventDefault(),n(!0),o(null),l(null);const X=parseFloat(e);if(isNaN(X)||X<=0){o("Please enter a valid amount"),n(!1);return}if(X>c){o("Insufficient Wallet Bal balance"),n(!1);return}if(X>f.per_transaction_limit){o(`Maximum per transaction for your TrinEPay account type is TT${f.per_transaction_limit.toLocaleString()}`),n(!1);return}try{const Z=await z1({amount:X});await _i({userId:v.id,transactionType:"withdrawal",amount:X,description:"Withdrawal to TrinEPay",referenceId:Z.transaction_id||Z.id}),l("Withdrawal successful!"),t(""),E()}catch(Z){o(Z.message||"Failed to withdraw")}finally{n(!1)}};return j?i.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center text-white",children:"Loading..."}):k?i.jsxs("div",{className:"min-h-screen bg-black text-white",children:[i.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-2xl font-black text-white tracking-wider logo-text-glow",children:"Wallet"}),i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>g("/profile"),children:"← Back"})]})}),i.jsxs("div",{className:"pt-20 p-4",children:[i.jsxs("div",{className:"bg-black/90 p-6 rounded-lg w-full max-w-md mx-auto border border-white/10",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("div",{className:"text-lg",children:"Available in Limey"}),i.jsxs("div",{className:"text-3xl font-bold",children:["TT$",c.toFixed(2)]}),y&&i.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:["TrinEPay Email: ",y]}),i.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["Max per transaction: TT$",f.per_transaction_limit.toLocaleString()]}),i.jsxs("div",{className:"text-xs text-gray-400",children:["Max wallet balance: TT$",f.max_wallet_balance.toLocaleString()]}),i.jsxs("div",{className:"text-xs text-gray-400",children:["Monthly limit: TT$",f.max_monthly_transactions.toLocaleString()]})]}),i.jsxs(Xd,{defaultValue:"deposit",className:"w-full",children:[i.jsxs(kl,{className:"grid w-full grid-cols-2",children:[i.jsx(sr,{value:"deposit",children:"Deposit"}),i.jsx(sr,{value:"withdraw",children:"Withdraw"})]}),i.jsx(sn,{value:"deposit",children:i.jsxs("form",{onSubmit:O,className:"space-y-4 mt-4",children:[i.jsx("input",{className:"w-full p-2 rounded bg-white text-black text-center font-semibold",type:"number",min:"100",max:"25000",step:"0.01",placeholder:"Amount (TT$100 - TT$25,000)",value:e,onChange:q=>t(q.target.value),required:!0}),i.jsx(H,{type:"submit",className:"w-full",disabled:r,children:r?"Processing...":"Deposit"})]})}),i.jsx(sn,{value:"withdraw",children:i.jsxs("form",{onSubmit:B,className:"space-y-4 mt-4",children:[i.jsx("input",{className:"w-full p-2 rounded bg-white text-black text-center font-semibold",type:"number",min:"100",max:"25000",step:"0.01",placeholder:"Amount (TT$100 - TT$25,000)",value:e,onChange:q=>t(q.target.value),required:!0}),i.jsx(H,{type:"submit",className:"w-full",disabled:r,children:r?"Processing...":"Withdraw"})]})})]}),s&&i.jsx("div",{className:"text-red-400 mt-2 text-center",children:s}),a&&i.jsx("div",{className:"text-green-400 mt-2 text-center",children:a})]}),i.jsxs("div",{className:"mt-8",children:[i.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Transaction History"}),i.jsx("div",{className:"space-y-2",children:b.map(q=>i.jsxs("div",{className:"bg-black/90 p-4 rounded-lg border border-white/10 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:q.description||q.transaction_type}),i.jsx("div",{className:"text-sm text-gray-400",children:new Date(q.created_at).toLocaleString()})]}),i.jsxs("div",{className:`font-bold ${q.transaction_type==="deposit"?"text-green-400":"text-red-400"}`,children:[q.transaction_type==="deposit"?"+":"-","TT$",q.amount.toFixed(2)]})]},q.id))})]})]})]}):i.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:i.jsxs("div",{className:"bg-black/90 p-6 rounded-lg w-full max-w-xs border border-white/10 mt-20 text-center text-white",children:[i.jsx("div",{className:"mb-4",children:"Your account is not linked to TrinEPay."}),i.jsx(H,{onClick:()=>g("/wallet/link"),children:"Link TrinEPay Account"})]})})}const e3=({open:e,onClose:t,onVideoCaptured:r})=>{const n=u.useRef(null),[s,o]=u.useState(!1);u.useEffect(()=>{e&&n.current&&!s&&(n.current.value="",n.current.click(),o(!0)),e||o(!1)},[e]);const a=l=>{var d;const c=(d=l.target.files)==null?void 0:d[0];c&&r(c,URL.createObjectURL(c)),t()};return e?i.jsx("input",{ref:n,type:"file",accept:"video/*",capture:"environment",style:{display:"none"},onChange:a}):null},t3=e=>new Promise((t,r)=>{const n=document.createElement("video");n.preload="metadata",n.src=URL.createObjectURL(e),n.muted=!0,n.playsInline=!0,n.onloadedmetadata=()=>{const s=Math.round(n.duration);if(s>300){r(new Error("Video duration exceeds 5 minutes"));return}t(s)},n.onerror=s=>{r(new Error("Failed to load video for metadata extraction"))}}),r3=e=>new Promise((t,r)=>{const n=document.createElement("video");n.preload="metadata",n.src=URL.createObjectURL(e),n.muted=!0,n.playsInline=!0,n.onloadedmetadata=()=>{const s=Math.min(1,n.duration*.25);n.currentTime=s},n.onseeked=()=>{const s=document.createElement("canvas"),o=s.getContext("2d");s.width=320,s.height=568,o?(o.drawImage(n,0,0,s.width,s.height),s.toBlob(a=>{a?t(a):r(new Error("Failed to generate thumbnail"))},"image/jpeg",.8)):r(new Error("Failed to get canvas context"))},n.onerror=s=>r(new Error("Failed to load video for thumbnail generation"))}),n3=()=>{u.useRef(null);const[e,t]=u.useState(null),[r,n]=u.useState(null),[s,o]=u.useState(""),[a,l]=u.useState(""),[c,d]=u.useState(!1),[f,h]=u.useState("All"),[m,x]=u.useState(null),[y,p]=u.useState(null),[b,w]=u.useState(!1),{user:g}=it(),{toast:v}=$t(),_=un(),j=ot();u.useEffect(()=>{_.state&&_.state.file&&_.state.preview?(t(_.state.file),n(_.state.preview)):j("/upload")},[_.state,j]);const k=()=>{w(!0)},C=(O,B)=>{t(O),n(B),x(null),p(null),w(!1)},E=async()=>{if(!e||!g||!s.trim()){v({title:"Missing Information",description:"Please record a video and add a title",variant:"destructive"});return}d(!0);try{let O=0,B="";try{if(O=await t3(e),!Number.isFinite(O)||O<=0){v({title:"Invalid Video Duration",description:"Could not determine video duration. Please try a different video.",variant:"destructive"}),d(!1);return}}catch(ne){console.warn("Failed to extract duration:",ne),v({title:"Video Duration Issue",description:"Could not determine video duration. Continuing with upload.",variant:"warning"})}if(m){const ne=`${g.id}/thumbnails/cover_${Date.now()}.jpg`,{error:oe}=await N.storage.from("limeytt-uploads").upload(ne,m);oe?v({title:"Cover upload failed",description:oe.message,variant:"destructive"}):B=ne}else try{const ne=await r3(e),oe=new File([ne],"thumbnail.jpg",{type:"image/jpeg"}),he=`${g.id}/thumbnails/${Date.now()}.jpg`,{error:je}=await N.storage.from("limeytt-uploads").upload(he,oe);je||(B=he)}catch(ne){console.warn("Failed to generate thumbnail:",ne)}const q=e.name.split(".").pop(),X=`${g.id}/${Date.now()}.${q}`,{data:Z,error:L}=await N.storage.from("limeytt-uploads").upload(X,e);if(L){v({title:"File Too Large",description:"Your video is too large. The maximum allowed size is 50 MB.",variant:"destructive"}),d(!1);return}const{data:{publicUrl:ee}}=N.storage.from("limeytt-uploads").getPublicUrl(X),{data:U,error:K}=await N.from("profiles").select("username, avatar_url").eq("user_id",g.id).single();if(K||!U)throw new Error("Could not fetch user profile for video upload.");const{data:D,error:Q}=await N.from("videos").insert({title:s,description:a,video_url:ee,thumbnail_url:B,duration:O,user_id:g.id,category:f,username:U.username,avatar_url:U.avatar_url}).select();if(Q)throw Q;v({title:"Upload Successful! 🎉",description:"Your content has been uploaded to Limey",className:"bg-green-600 text-white border-green-700"}),t(null),n(null),o(""),l(""),h("All"),x(null),p(null),j("/upload")}catch(O){v({title:"Upload Failed",description:O.message||"Something went wrong",variant:"destructive"})}finally{d(!1)}};return i.jsxs("div",{className:"min-h-screen bg-background pb-20 pt-8",children:[i.jsx("div",{className:"max-w-2xl mx-auto p-4",children:r?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-full max-w-xs mx-auto aspect-[9/16] bg-black rounded-lg overflow-hidden flex items-center justify-center mb-4",children:i.jsx("video",{src:r,controls:!0,autoPlay:!0,loop:!0,className:"w-full h-full object-cover"})}),i.jsx("div",{className:"flex justify-center mt-4",children:i.jsx(H,{variant:"outline",onClick:k,children:"Recapture"})}),i.jsx(e3,{open:b,onClose:()=>w(!1),onVideoCaptured:C})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-64 border-2 border-dashed border-gray-400 rounded-lg",children:[i.jsx(H,{variant:"neon",onClick:k,children:"Go Back"}),i.jsx("p",{className:"text-muted-foreground mt-2",children:"No video found. Please record a video first."})]})}),r&&i.jsx(De,{className:"mt-6 p-6 max-w-md mx-auto",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Cover Image"}),i.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[i.jsx("div",{className:"w-24 h-36 bg-black rounded overflow-hidden flex items-center justify-center border border-border",children:y?i.jsx("img",{src:y,alt:"Cover Preview",className:"w-full h-full object-cover"}):r?i.jsx("video",{src:r,className:"w-full h-full object-cover"}):i.jsx("span",{className:"text-white text-xs",children:"No Cover"})}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx("input",{type:"file",accept:"image/*",className:"hidden",id:"cover-image-input",onChange:O=>{var q;const B=(q=O.target.files)==null?void 0:q[0];B&&(x(B),p(URL.createObjectURL(B)))}}),i.jsx("label",{htmlFor:"cover-image-input",children:i.jsx(H,{variant:"outline",asChild:!0,className:"cursor-pointer",children:i.jsx("span",{children:"Choose Cover Image"})})}),m&&i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>{x(null),p(null)},children:"Use Default Thumbnail"})]})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Choose a custom cover image or use the default video thumbnail."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Title *"}),i.jsx(rt,{placeholder:"Give your content a catchy title...",value:s,onChange:O=>o(O.target.value),maxLength:100}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[s.length,"/100 characters"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Category"}),i.jsxs("select",{className:"w-full border rounded px-3 py-2 bg-background text-foreground",value:f||"All",onChange:O=>h(O.target.value),required:!0,children:[i.jsx("option",{value:"All",children:"All"}),i.jsx("option",{value:"Anime",children:"Anime"}),i.jsx("option",{value:"Bar Limes",children:"Bar Limes"}),i.jsx("option",{value:"Cartoon",children:"Cartoon"}),i.jsx("option",{value:"Carnival",children:"Carnival"}),i.jsx("option",{value:"Comedy",children:"Comedy"}),i.jsx("option",{value:"Dance",children:"Dance"}),i.jsx("option",{value:"Dancehall",children:"Dancehall"}),i.jsx("option",{value:"DIY Projects",children:"DIY Projects"}),i.jsx("option",{value:"Educational",children:"Educational"}),i.jsx("option",{value:"Events",children:"Events"}),i.jsx("option",{value:"Fete",children:"Fete"}),i.jsx("option",{value:"Funny Vids",children:"Funny Vids"}),i.jsx("option",{value:"HOW TOs",children:"HOW TOs"}),i.jsx("option",{value:"Local News",children:"Local News"}),i.jsx("option",{value:"Music Vids",children:"Music Vids"}),i.jsx("option",{value:"Parties",children:"Parties"}),i.jsx("option",{value:"Soca",children:"Soca"}),i.jsx("option",{value:"Trini Celebs",children:"Trini Celebs"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Description"}),i.jsx(ji,{placeholder:"Tell viewers about your content...",value:a,onChange:O=>l(O.target.value),maxLength:500,rows:4}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[a.length,"/500 characters"]})]}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsx(H,{variant:"outline",onClick:()=>j("/upload"),disabled:c,children:"Cancel"}),i.jsx(H,{variant:"neon",onClick:E,disabled:c||!s.trim(),className:"flex-1",children:c?"Uploading...":"Share to Limey 🚀"})]})]})})]})},s3=()=>{const{user:e,signOut:t}=it(),r=ot(),[n,s]=u.useState(!1),o=async()=>{e&&(s(!0),await N.from("profiles").update({deactivated:!1}).eq("user_id",e.id),s(!1),r("/"))};return u.useEffect(()=>{e||r("/login")},[e,r]),i.jsx("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-background",children:i.jsxs("div",{className:"max-w-md w-full bg-card rounded-lg shadow-lg p-8 flex flex-col items-center",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4 text-primary",children:"Account Deactivated"}),i.jsx("p",{className:"text-muted-foreground mb-8 text-center",children:"Your account is currently deactivated. To use Limey, please reactivate your account below."}),i.jsx(H,{onClick:o,disabled:n,className:"w-full mb-4",children:n?"Reactivating...":"Reactivate Account"}),i.jsx(H,{onClick:t,variant:"outline",className:"w-full",children:"Sign Out"})]})})},i3=()=>{var w;const{videoId:e}=_l(),t=ot(),{user:r}=it(),[n,s]=u.useState(null),[o,a]=u.useState(!0),[l,c]=u.useState(null),[d,f]=u.useState(0);u.useEffect(()=>{e&&(m(),h())},[e]);const h=async()=>{try{console.log("Testing video table access...");const{data:g,error:v}=await N.from("videos").select("id, title").limit(5);if(console.log("All videos test:",{allVideos:g,allError:v}),g&&g.length>0){console.log("Video table accessible. Sample videos:",g);const _=g.find(j=>j.id===e);if(_)console.log("Target video found in sample:",_);else{console.log("Target video NOT found in sample. Checking if it exists...");const{data:j,error:k}=await N.from("videos").select("id, title, user_id").eq("id",e);console.log("Specific video check:",{specificVideo:j,specificError:k})}}}catch(g){console.error("Error testing video query:",g)}};u.useEffect(()=>{if(n){const{generateVideoMetaTags:g}=require("@/utils/shareUtils"),v=g(n,d);document.title=v.title;const _=(k,C)=>{let E=document.querySelector(`meta[property="${k}"]`);E||(E=document.createElement("meta"),E.setAttribute("property",k),document.head.appendChild(E)),E.setAttribute("content",C)},j=(k,C)=>{let E=document.querySelector(`meta[name="${k}"]`);E||(E=document.createElement("meta"),E.setAttribute("name",k),document.head.appendChild(E)),E.setAttribute("content",C)};_("og:title",v.title),_("og:description",v.description),_("og:image",v.image),_("og:url",v.url),_("og:type",v.type),_("og:site_name",v.site_name),_("og:video",v.video_url),_("og:video:type",v.video_type),j("twitter:card","player"),j("twitter:title",v.title),j("twitter:description",v.description),j("twitter:image",v.image),j("twitter:creator",v.creator),j("twitter:player",v.video_url),j("twitter:player:width","405"),j("twitter:player:height","720"),j("description",v.description)}},[n,d]);const m=async()=>{try{a(!0),console.log("Fetching video with ID:",e);const{data:g,error:v}=await N.from("videos").select("id, title, description, video_url, thumbnail_url, category, user_id, created_at, like_count, view_count, username").eq("id",e).single();if(console.log("Video query result:",{videoData:g,videoError:v}),v){console.error("Error fetching video:",v),c(`Video not found: ${v.message}`);return}if(!g){console.error("No video data returned"),c("Video not found");return}console.log("Video data found:",g);const{data:_,error:j}=await N.from("profiles").select("username, avatar_url").eq("user_id",g.user_id).single();console.log("Profile query result:",{profileData:_,profileError:j});try{const{data:C,error:E}=await N.rpc("get_genuine_view_count",{video_uuid:e});console.log("View count result:",{genuineCount:C,viewError:E}),f(C||g.view_count||0)}catch(C){console.error("Error getting view count:",C),f(g.view_count||0)}const k={...g,profiles:_,username:_==null?void 0:_.username};console.log("Final video object:",k),s(k)}catch(g){console.error("Error fetching video:",g),c(`Failed to load video: ${g instanceof Error?g.message:"Unknown error"}`)}finally{a(!1)}},x=()=>{t(r?`/?video=${e}`:`/login?returnTo=${encodeURIComponent(`/?video=${e}`)}`)},y=()=>{t(`/?video=${e}`)},p=async()=>{if(!n)return;const g=`${window.location.origin}/video/${n.id}`;try{await navigator.share({title:n.title,text:n.description||`Check out this video by @${n.username||"user"}`,url:g})}catch{navigator.clipboard.writeText(g)}},b=g=>g<1e3?g.toString():g<1e6?(g/1e3).toFixed(1)+"K":(g/1e6).toFixed(1)+"M";return o?i.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:i.jsx("div",{className:"text-white",children:"Loading video..."})}):l||!n?i.jsx("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center text-white",children:i.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Video not found"}),i.jsx("p",{className:"text-white/70 mb-4",children:"This video may have been removed or is no longer available."}),l&&i.jsxs("div",{className:"bg-red-900/20 border border-red-500/20 rounded-lg p-4 mb-6",children:[i.jsxs("p",{className:"text-red-400 text-sm",children:["Debug info: ",l]}),i.jsxs("p",{className:"text-red-400 text-xs mt-2",children:["Video ID: ",e]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(H,{onClick:y,className:"w-full bg-green-600 hover:bg-green-700",children:"Try to Find in Feed"}),i.jsx(H,{onClick:()=>t("/"),variant:"outline",className:"w-full border-white/20 text-white hover:bg-white/10",children:"Go to Home Feed"})]})]})}):i.jsxs("div",{className:"min-h-screen bg-black text-white",children:[i.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/90 backdrop-blur-md border-b border-white/10 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-2xl font-black text-white tracking-wider logo-text-glow",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:"900",letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))"},children:"Limey"}),i.jsx(H,{onClick:p,variant:"ghost",size:"sm",className:"text-white hover:bg-white/10",children:i.jsx(Do,{size:20})})]})}),i.jsx("div",{className:"pt-20 px-4",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsxs("div",{className:"relative aspect-[9/16] bg-black rounded-lg overflow-hidden mb-4",children:[n.thumbnail_url?i.jsx("img",{src:n.thumbnail_url.startsWith("http")?n.thumbnail_url:N.storage.from("limeytt-uploads").getPublicUrl(n.thumbnail_url).data.publicUrl,alt:n.title,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-gray-800 flex items-center justify-center",children:i.jsx(Mo,{size:48,className:"text-white/50"})}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:i.jsx("div",{className:"w-16 h-16 rounded-full bg-white/20 flex items-center justify-center",children:i.jsx(Mo,{size:24,className:"text-white ml-1"})})}),i.jsxs("div",{className:"absolute bottom-4 left-4 flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-1 bg-black/70 rounded-full px-2 py-1",children:[i.jsx(As,{size:16,className:"text-white"}),i.jsx("span",{className:"text-xs text-white font-semibold",children:n.like_count||0})]}),i.jsxs("div",{className:"flex items-center gap-1 bg-black/70 rounded-full px-2 py-1",children:[i.jsx(jr,{size:16,className:"text-white"}),i.jsx("span",{className:"text-xs text-white font-semibold",children:b(d)})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(ut,{className:"w-12 h-12",children:[i.jsx(ft,{src:(w=n.profiles)==null?void 0:w.avatar_url,alt:n.username}),i.jsx(ht,{children:(n.username||"U").charAt(0).toUpperCase()})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"font-semibold",children:["@",n.username||"user"]}),i.jsx("p",{className:"text-sm text-white/70",children:"Creator"})]})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold mb-2",children:n.title}),n.description&&i.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:n.description})]}),n.category&&i.jsx("div",{className:"inline-block bg-white/10 rounded-full px-3 py-1",children:i.jsx("span",{className:"text-sm text-white/80",children:n.category})})]}),i.jsx("div",{className:"mt-8",children:i.jsx(H,{onClick:x,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3",size:"lg",children:r?"Watch in App":"Sign in to Watch"})}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx("p",{className:"text-white/70 text-sm",children:"Join Limey to discover more amazing videos"})})]})})]})},o3=()=>{const e=ot(),{user:t}=it(),{toast:r}=$t(),[n]=yp(),[s,o]=u.useState(null),[a,l]=u.useState(null),[c,d]=u.useState(0),[f,h]=u.useState(""),[m,x]=u.useState(""),[y,p]=u.useState(""),[b,w]=u.useState(""),[g,v]=u.useState(""),[_,j]=u.useState(""),[k,C]=u.useState(""),[E,O]=u.useState(1),[B,q]=u.useState(0),[X,Z]=u.useState(!1),[L,ee]=u.useState(!1),[U,K]=u.useState(0),[D,Q]=u.useState(30),[ne,oe]=u.useState(null),he=u.useRef(null),je=u.useRef(null);u.useEffect(()=>{if(t){Ce();const R=n.get("draft");R&&fe(R)}},[t,n]);const Ce=async()=>{try{const R=await Nn((t==null?void 0:t.id)||"");q(R)}catch(R){console.error("Error loading wallet balance:",R),q(0)}},fe=async R=>{try{Z(!0);const{data:I,error:$}=await N.from("sponsored_ads").select("*").eq("id",R).eq("user_id",t==null?void 0:t.id).eq("status","draft").single();if($||!I){r({title:"Draft Not Found",description:"Could not load the draft. It may have been deleted.",variant:"destructive"});return}if(h(I.title||""),x(I.description||""),p(I.business_name||""),w(I.contact_number||""),v(I.website_url||""),j(I.support_email||""),C(I.price_info||""),O(I.boost_duration),d(I.duration||0),oe(R),I.video_url){l(I.video_url);const te=new File([""],"existing-video.mp4",{type:"video/mp4"});o(te)}r({title:"Draft Loaded",description:"Continue editing your ad campaign",className:"bg-blue-600 text-white border-blue-700"})}catch(I){console.error("Error loading draft:",I),r({title:"Error Loading Draft",description:"Could not load the draft. Please try again.",variant:"destructive"})}finally{Z(!1)}},de=R=>{var re;const I=(re=R.target.files)==null?void 0:re[0];if(!I)return;if(console.log("Video file selected:",I.name,"Size:",I.size,"Type:",I.type),!I.type.startsWith("video/")){r({title:"Invalid File Type",description:"Please select a video file",variant:"destructive"});return}if(I.size>100*1024*1024){r({title:"File Too Large",description:"Video file must be under 100MB",variant:"destructive"});return}o(I);const $=URL.createObjectURL(I);l($),console.log("Video preview URL created:",$);const te=document.createElement("video");te.src=$,te.muted=!0,te.playsInline=!0,te.preload="metadata",te.onloadedmetadata=()=>{const Y=Math.round(te.duration);console.log("Video duration loaded:",Y),d(Y),Y>30?(ee(!0),K(0),Q(Math.min(30,Y))):(ee(!1),K(0),Q(Y))},te.onerror=Y=>{console.error("Error loading video metadata:",Y),r({title:"Video Error",description:"Could not load video metadata. Please try a different video.",variant:"destructive"})},te.load(),R.target.value=""},ce=async()=>{if(!(!s||!a))try{Z(!0);const R=document.createElement("video");R.src=a,await new Promise(te=>{R.onloadedmetadata=te});const I=document.createElement("canvas");if(!I.getContext("2d"))throw new Error("Could not get canvas context");I.width=R.videoWidth,I.height=R.videoHeight,d(D-U),ee(!1),r({title:"Video Trimmed",description:`Video trimmed to ${D-U} seconds`})}catch(R){console.error("Error trimming video:",R),r({title:"Trim Failed",description:"Could not trim video. Please try again.",variant:"destructive"})}finally{Z(!1)}},xe=async R=>{try{if(console.log("Starting video upload:",{fileName:R.name,fileSize:R.size,fileType:R.type,userId:t==null?void 0:t.id}),R.name==="existing-video.mp4"&&R.size===0&&a)return console.log("Using existing video URL:",a),a;if(!R||R.size===0)return console.error("Invalid file provided for upload:",{file:R,hasFile:!!R,fileSize:R==null?void 0:R.size,fileName:R==null?void 0:R.name}),null;const I=R.name.split(".").pop(),$=`${t==null?void 0:t.id}/sponsored/${Date.now()}.${I}`;console.log("Uploading to storage with filename:",$);const{data:te,error:re}=await N.storage.from("limeytt-uploads").upload($,R);if(re)return console.error("Supabase storage upload error:",re),null;console.log("Upload successful, getting public URL");const{data:{publicUrl:Y}}=N.storage.from("limeytt-uploads").getPublicUrl($);return console.log("Video uploaded successfully:",Y),Y}catch(I){return console.error("Exception in uploadVideoToStorage:",I),null}},T=async R=>{try{if(ne&&(s==null?void 0:s.name)==="existing-video.mp4"&&(s==null?void 0:s.size)===0)return null;console.log("Starting thumbnail generation for:",R);const I=document.createElement("video");I.src=R,I.muted=!0,I.playsInline=!0,I.preload="metadata",!R.startsWith("blob:")&&!R.includes(window.location.hostname)&&(I.crossOrigin="anonymous"),await new Promise((Y,me)=>{const be=setTimeout(()=>{me(new Error("Video loading timeout"))},1e4);I.onloadedmetadata=()=>{clearTimeout(be),console.log("Video metadata loaded, duration:",I.duration),Y(I)},I.onerror=_e=>{clearTimeout(be),console.error("Video loading error:",_e),me(new Error("Failed to load video"))},I.load()});const $=Math.min(1,I.duration*.1);I.currentTime=$,await new Promise((Y,me)=>{const be=setTimeout(()=>{me(new Error("Video seek timeout"))},5e3);I.onseeked=()=>{clearTimeout(be),console.log("Video seeked to:",$),Y(I)},I.onerror=_e=>{clearTimeout(be),console.error("Video seek error:",_e),me(new Error("Failed to seek video"))}});const te=document.createElement("canvas");te.width=320,te.height=568;const re=te.getContext("2d");if(!re)throw new Error("Could not get canvas context");return re.drawImage(I,0,0,te.width,te.height),console.log("Video frame drawn to canvas"),new Promise(Y=>{te.toBlob(async me=>{if(!me){console.error("Failed to create thumbnail blob"),Y(null);return}console.log("Thumbnail blob created, size:",me.size);try{const be=new File([me],"thumbnail.jpg",{type:"image/jpeg"}),Ee=`${t==null?void 0:t.id}/sponsored/thumbnails/${Date.now()}.jpg`;console.log("Uploading thumbnail to:",Ee);const{data:We,error:ke}=await N.storage.from("limeytt-uploads").upload(Ee,be);if(ke){console.error("Error uploading thumbnail:",ke),Y(null);return}const{data:{publicUrl:Se}}=N.storage.from("limeytt-uploads").getPublicUrl(Ee);console.log("Thumbnail uploaded successfully:",Se),Y(Se)}catch(be){console.error("Error in thumbnail upload process:",be),Y(null)}},"image/jpeg",.9)})}catch(I){return console.error("Error generating thumbnail:",I),null}},A=async()=>{if(!ne){o(null),l(null),h(""),x(""),p(""),w(""),v(""),j(""),C(""),d(0),O(1),ee(!1),K(0),Q(30),r({title:"Form Cleared",description:"All form data has been cleared.",className:"bg-blue-600 text-white border-blue-700"});return}try{Z(!0);const{error:R}=await N.from("sponsored_ads").delete().eq("id",ne).eq("user_id",t==null?void 0:t.id);if(R)throw new Error(R.message);r({title:"Draft Deleted",description:"Your draft has been deleted successfully.",className:"bg-red-600 text-white border-red-700"}),e("/profile")}catch(R){console.error("Error deleting draft:",R),r({title:"Delete Failed",description:R instanceof Error?R.message:"Could not delete draft. Please try again.",variant:"destructive"})}finally{Z(!1)}},G=async()=>{if(!s||!f.trim()){r({title:"Missing Information",description:"Please add a video and title to save as draft",variant:"destructive"});return}try{Z(!0);const R=await xe(s);if(!R)throw new Error("Failed to upload video");let I=null;try{I=await T(R),I||console.log("Thumbnail generation returned null, will proceed without thumbnail")}catch($){console.error("Thumbnail generation failed:",$)}if(ne){const{data:$}=await N.from("sponsored_ads").select("thumbnail_url").eq("id",ne).single(),te=I||($==null?void 0:$.thumbnail_url),{error:re}=await N.from("sponsored_ads").update({title:f,description:m,video_url:R,thumbnail_url:te,duration:c,business_name:y,contact_number:b,website_url:g,support_email:_,price_info:k,boost_duration:E,status:"draft",updated_at:new Date().toISOString()}).eq("id",ne);if(re)throw new Error(re.message||"Failed to update draft");r({title:"Draft Updated! 📝",description:"Your draft has been updated and saved to My Ads tab.",className:"bg-blue-600 text-white border-blue-700"})}else{const{success:$,error:te}=await of({title:f,description:m,video_url:R,thumbnail_url:I||void 0,duration:c,business_name:y,contact_number:b,website_url:g,support_email:_,price_info:k,boost_duration:E,user_id:(t==null?void 0:t.id)||"",status:"draft"});if(!$)throw new Error(te||"Failed to save draft");r({title:"Draft Saved! 📝",description:"Your ad has been saved as a draft in My Ads tab.",className:"bg-blue-600 text-white border-blue-700"})}e("/profile")}catch(R){console.error("Error saving draft:",R),r({title:"Save Failed",description:R instanceof Error?R.message:"Could not save draft. Please try again.",variant:"destructive"})}finally{Z(!1)}},V=async()=>{if(!s||!f.trim())return r({title:"Missing Information",description:"Please add a video and title to save as draft",variant:"destructive"}),!1;try{if(Z(!0),console.log("handleSaveToDrafts - Starting save process"),console.log("Video file state:",{videoFile:s?{name:s.name,size:s.size,type:s.type}:null,videoPreview:a,editingDraftId:ne}),!s)throw new Error("No video file selected");const R=await xe(s);if(!R)throw new Error("Failed to upload video");const I=await T(R),{success:$,adId:te,error:re}=await of({title:f,description:m,video_url:R,thumbnail_url:I||void 0,duration:c,business_name:y,contact_number:b,website_url:g,support_email:_,price_info:k,boost_duration:E,user_id:(t==null?void 0:t.id)||"",status:"draft"});if(!$||!te)throw new Error(re||"Failed to save draft");return r({title:"Draft Saved! 📝",description:"Your ad has been saved as a draft. Add funds to your wallet to submit for approval.",className:"bg-blue-600 text-white border-blue-700"}),!0}catch(R){return console.error("Error saving draft:",R),r({title:"Failed to Save Draft",description:R instanceof Error?R.message:"Could not save draft. Please try again.",variant:"destructive"}),!1}finally{Z(!1)}},S=async()=>{if(!s||!f.trim()){r({title:"Missing Information",description:"Please add a video and title",variant:"destructive"});return}const R=wa[E];if(B<R){await V()&&e("/profile");return}try{Z(!0);const I=await U1((t==null?void 0:t.id)||"",R);if(!I.success)throw new Error(I.error||"Failed to deduct payment from wallet");if(console.log("handleBoostSubmit - Starting boost submission"),console.log("Video file state:",{videoFile:s?{name:s.name,size:s.size,type:s.type}:null,videoPreview:a,editingDraftId:ne}),!s)throw new Error("No video file selected");const $=await xe(s);if(!$){const{recordTrincreditsTransaction:_e}=await Ir(async()=>{const{recordTrincreditsTransaction:Ee}=await Promise.resolve().then(()=>dd);return{recordTrincreditsTransaction:Ee}},void 0);throw await _e({userId:(t==null?void 0:t.id)||"",transactionType:"refund",amount:R,description:"Boost Refund - Video Upload Failed",referenceId:`failed_upload_${Date.now()}`}),new Error("Failed to upload video")}let te=null;try{te=await T($),te||console.log("Thumbnail generation returned null, will proceed without thumbnail")}catch(_e){console.error("Thumbnail generation failed:",_e)}let re,Y,me;if(ne){const{data:_e}=await N.from("sponsored_ads").select("thumbnail_url").eq("id",ne).single(),Ee=te||(_e==null?void 0:_e.thumbnail_url),{error:We}=await N.from("sponsored_ads").update({title:f,description:m,video_url:$,thumbnail_url:Ee,duration:c,business_name:y,contact_number:b,website_url:g,support_email:_,price_info:k,boost_duration:E,status:"pending",updated_at:new Date().toISOString()}).eq("id",ne);re=!We,Y=ne,me=We==null?void 0:We.message}else{const _e=await of({title:f,description:m,video_url:$,thumbnail_url:te||void 0,duration:c,business_name:y,contact_number:b,website_url:g,support_email:_,price_info:k,boost_duration:E,user_id:(t==null?void 0:t.id)||"",status:"pending"});re=_e.success,Y=_e.adId,me=_e.error}if(!re||!Y){const{recordTrincreditsTransaction:_e}=await Ir(async()=>{const{recordTrincreditsTransaction:Ee}=await Promise.resolve().then(()=>dd);return{recordTrincreditsTransaction:Ee}},void 0);throw await _e({userId:(t==null?void 0:t.id)||"",transactionType:"refund",amount:R,description:"Boost Refund - Ad Creation Failed",referenceId:`failed_ad_${Date.now()}`}),new Error(me||"Failed to create sponsored ad")}const be=await IM(R,(t==null?void 0:t.id)||"",Y);be.success||console.error("Failed to record boost transaction:",be.error),r({title:ne?"Draft Updated! 🚀":"Boost Submitted! 🚀",description:ne?"Your draft has been updated and submitted for approval":"Your boost campaign has been submitted for approval",className:"bg-green-600 text-white border-green-700"}),e("/profile")}catch(I){console.error("Error submitting boost:",I),r({title:"Boost Failed",description:I instanceof Error?I.message:"Could not submit boost. Please try again.",variant:"destructive"})}finally{Z(!1)}},z=wa[E],M=B>=z;return i.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[i.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:i.jsx(Bn,{size:20,className:"text-white"})}),i.jsx("span",{className:"text-2xl font-black text-white tracking-wider logo-text-glow",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:"900",letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))"},children:ne?"Edit Draft":"Boost"})]}),i.jsx(H,{variant:"outline",size:"sm",onClick:()=>e("/ad-stats"),className:"text-white border-white/50 hover:bg-white/10",children:"My Campaigns"})]})}),i.jsx("div",{className:"pt-24 p-4",children:i.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[i.jsx(De,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"TrinECredits:"}),i.jsxs(Dt,{variant:"secondary",className:"bg-green-900 text-green-400",children:["TT$",B.toFixed(2)]})]})}),i.jsxs(De,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Upload Your 30-Second Ad"}),a?i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"relative w-full max-w-xs mx-auto aspect-[9/16] bg-black rounded-lg overflow-hidden",children:i.jsx("video",{ref:je,src:a,className:"w-full h-full object-cover",controls:!0})}),i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Duration: ",c," seconds"]}),c>30&&i.jsx(Dt,{variant:"destructive",className:"mb-2",children:"Video too long - needs trimming"})]})]}):i.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-8 text-center",children:[i.jsx(iE,{size:48,className:"mx-auto mb-4 text-muted-foreground"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Upload your promotional video (max 30 seconds)"}),i.jsx("input",{type:"file",accept:"video/*,video/mp4,video/mov,video/avi,video/webm",className:"hidden",ref:he,onChange:de}),i.jsx(H,{onClick:()=>{var R;return(R=he.current)==null?void 0:R.click()},children:"Select Video"})]})]}),L&&i.jsxs(De,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Trim Video to 30 Seconds"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Start Time (seconds)"}),i.jsx(rt,{type:"number",min:"0",max:c-1,value:U,onChange:R=>K(Number(R.target.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"End Time (seconds)"}),i.jsx(rt,{type:"number",min:U+1,max:Math.min(U+30,c),value:D,onChange:R=>Q(Number(R.target.value))})]}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Trimmed duration: ",D-U," seconds"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(H,{onClick:ce,disabled:X,children:"Apply Trim"}),i.jsx(H,{variant:"outline",onClick:()=>ee(!1),children:"Cancel"})]})]})]}),i.jsxs(De,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Ad Details"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Ad Title *"}),i.jsx(rt,{placeholder:"Enter your ad title",value:f,onChange:R=>h(R.target.value),maxLength:100})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Ad Description"}),i.jsx(ji,{placeholder:"Describe your product or service",value:m,onChange:R=>x(R.target.value),maxLength:500})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Business Name"}),i.jsx(rt,{placeholder:"Your business name",value:y,onChange:R=>p(R.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Contact Number"}),i.jsx(rt,{placeholder:"Phone number for customers to reach you",value:b,onChange:R=>w(R.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Website URL"}),i.jsx(rt,{placeholder:"https://your-website.com",value:g,onChange:R=>v(R.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Support Email"}),i.jsx(rt,{type:"email",placeholder:"support@your-business.com",value:_,onChange:R=>j(R.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Price Information"}),i.jsx(rt,{placeholder:"e.g., Starting from $50, Free consultation",value:k,onChange:R=>C(R.target.value)})]})]})]}),i.jsxs(De,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Select Boost Duration"}),i.jsx("div",{className:"space-y-3",children:Object.entries(wa).map(([R,I])=>i.jsxs("label",{className:"flex items-center justify-between p-3 border rounded-lg cursor-pointer hover:bg-muted/50",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"radio",name:"duration",value:R,checked:E===Number(R),onChange:$=>O(Number($.target.value)),className:"text-primary"}),i.jsxs("span",{className:"font-medium",children:[R," ",Number(R)===1?"Day":"Days"]})]}),i.jsxs(Dt,{variant:"outline",children:["TT$",I]})]},R))}),i.jsxs("div",{className:"mt-4 p-3 bg-muted/50 rounded-lg",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"font-medium",children:"Total Cost:"}),i.jsxs("span",{className:"text-lg font-bold text-primary",children:["TT$",z.toFixed(2)]})]}),!M&&i.jsxs("p",{className:"text-sm text-destructive mt-2",children:["Insufficient balance. You need TT$",(z-B).toFixed(2)," more."]})]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"flex gap-2 flex-1",children:[i.jsx(H,{onClick:A,disabled:X,variant:"destructive",className:"flex-1",children:ne?"Delete":"Clear"}),i.jsx(H,{onClick:G,disabled:X||!s||!f.trim(),variant:"outline",className:"flex-1",children:X?"Saving...":"Save"})]}),i.jsx(H,{onClick:S,disabled:X||!s||!f.trim(),className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:X?"Submitting...":`Submit Boost - TT$${wa[E]}`})]}),i.jsxs(De,{className:"p-4 bg-muted/50",children:[i.jsx("h4",{className:"font-medium mb-2",children:"💡 Boost Tips"}),i.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[i.jsx("li",{children:"• Keep your video under 30 seconds for maximum impact"}),i.jsx("li",{children:"• Include clear contact information for better results"}),i.jsx("li",{children:"• Your ad will be reviewed before going live"}),i.jsx("li",{children:"• Ads appear randomly in the home feed to reach more users"})]})]})]})}),i.jsx(mr,{})]})},a3=()=>{const e=ot(),{user:t,isAdmin:r}=it(),{toast:n}=$t(),[s,o]=u.useState([]),[a,l]=u.useState(!0),[c,d]=u.useState(null);u.useEffect(()=>{if(!r){e("/");return}f()},[r,e]);const f=async()=>{try{l(!0),console.log("Admin dashboard loading ads...");const _=await OM();console.log("Admin dashboard received ads:",(_==null?void 0:_.length)||0),o(_)}catch(_){console.error("Error loading ads:",_),n({title:"Error",description:"Failed to load sponsored ads",variant:"destructive"})}finally{l(!1)}},h=async _=>{d(_);try{const j=await LM(_);if(j.success)n({title:"Ad Approved",description:"The sponsored ad has been approved and will go live",className:"bg-green-600 text-white border-green-700"}),f();else throw new Error(j.error)}catch{n({title:"Error",description:"Failed to approve ad",variant:"destructive"})}finally{d(null)}},m=async _=>{d(_);try{const j=await FM(_);if(j.success)n({title:"Ad Rejected",description:"The sponsored ad has been rejected",className:"bg-red-600 text-white border-red-700"}),f();else throw new Error(j.error)}catch{n({title:"Error",description:"Failed to reject ad",variant:"destructive"})}finally{d(null)}},x=_=>{switch(_){case"pending":return"bg-yellow-900 text-yellow-400";case"approved":return"bg-blue-900 text-blue-400";case"active":return"bg-green-900 text-green-400";case"expired":return"bg-gray-900 text-gray-400";case"rejected":return"bg-red-900 text-red-400";case"draft":return"bg-purple-900 text-purple-400";default:return"bg-gray-900 text-gray-400"}},y=_=>new Date(_).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),p=()=>s.filter(_=>_.status!=="draft"&&_.status!=="rejected").reduce((_,j)=>_+j.boost_cost,0),b=()=>s.filter(_=>_.status==="active").length,w=()=>s.reduce((_,j)=>_+j.impressions,0),g=()=>s.reduce((_,j)=>_+j.clicks,0),v=_=>s.filter(j=>j.status===_);return r?i.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[i.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10 p-4",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:i.jsx(Bn,{size:20,className:"text-white"})}),i.jsx("span",{className:"text-2xl font-black text-white tracking-wider logo-text-glow",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:"900",letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))"},children:"Admin Dashboard"})]})}),i.jsx("div",{className:"pt-24 p-4",children:i.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsx(De,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ep,{size:20,className:"text-green-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Revenue"}),i.jsxs("p",{className:"text-lg font-bold text-green-400",children:["TT$",p().toFixed(2)]})]})]})}),i.jsx(De,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(vs,{size:20,className:"text-blue-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Ads"}),i.jsx("p",{className:"text-lg font-bold text-blue-400",children:b()})]})]})}),i.jsx(De,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(jr,{size:20,className:"text-purple-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Impressions"}),i.jsx("p",{className:"text-lg font-bold text-purple-400",children:w().toLocaleString()})]})]})}),i.jsx(De,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-orange-400",children:"👆"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Clicks"}),i.jsx("p",{className:"text-lg font-bold text-orange-400",children:g().toLocaleString()})]})]})})]}),i.jsx(De,{className:"p-6",children:i.jsxs(Xd,{defaultValue:"pending",className:"w-full",children:[i.jsxs(kl,{className:"grid w-full grid-cols-5",children:[i.jsxs(sr,{value:"pending",className:"data-[state=active]:bg-green-600 data-[state=active]:text-white",title:"Pending Ads",children:["⏳ ",v("pending").length]}),i.jsxs(sr,{value:"active",className:"data-[state=active]:bg-green-600 data-[state=active]:text-white",title:"Active Ads",children:["🟢 ",v("active").length]}),i.jsxs(sr,{value:"approved",className:"data-[state=active]:bg-green-600 data-[state=active]:text-white",title:"Approved Ads",children:["✅ ",v("approved").length]}),i.jsxs(sr,{value:"expired",className:"data-[state=active]:bg-green-600 data-[state=active]:text-white",title:"Expired Ads",children:["⏰ ",v("expired").length]}),i.jsxs(sr,{value:"rejected",className:"data-[state=active]:bg-green-600 data-[state=active]:text-white",title:"Rejected Ads",children:["❌ ",v("rejected").length]})]}),["pending","active","approved","expired","rejected"].map(_=>i.jsx(sn,{value:_,className:"space-y-4",children:a?i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-muted-foreground",children:"Loading ads..."})}):v(_).length===0?i.jsx("div",{className:"text-center py-8",children:i.jsxs("p",{className:"text-muted-foreground",children:["No ",_," ads found"]})}):v(_).map(j=>{var k;return i.jsx(De,{className:"p-4",children:i.jsxs("div",{className:"flex gap-4",children:[i.jsx("div",{className:"w-24 h-32 bg-black rounded overflow-hidden flex-shrink-0",children:j.thumbnail_url?i.jsx("img",{src:j.thumbnail_url,alt:j.title,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-muted-foreground",children:"No thumbnail"})}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-white",children:j.title}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["by @",((k=j.profiles)==null?void 0:k.username)||"Unknown"]})]}),i.jsx(Dt,{className:x(j.status),children:j.status.toUpperCase()})]}),j.description&&i.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:j.description}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),i.jsxs("span",{className:"ml-1 text-white",children:[j.duration,"s"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Boost:"}),i.jsxs("span",{className:"ml-1 text-white",children:[j.boost_duration," days"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Cost:"}),i.jsxs("span",{className:"ml-1 text-green-400",children:["TT$",j.boost_cost]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Created:"}),i.jsx("span",{className:"ml-1 text-white",children:y(j.created_at)})]})]}),(j.impressions>0||j.clicks>0)&&i.jsxs("div",{className:"flex gap-4 text-xs",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Impressions:"}),i.jsx("span",{className:"ml-1 text-purple-400",children:j.impressions.toLocaleString()})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Clicks:"}),i.jsx("span",{className:"ml-1 text-orange-400",children:j.clicks.toLocaleString()})]}),j.impressions>0&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"CTR:"}),i.jsxs("span",{className:"ml-1 text-blue-400",children:[(j.clicks/j.impressions*100).toFixed(2),"%"]})]})]}),(j.business_name||j.contact_number||j.website_url)&&i.jsxs("div",{className:"text-xs space-y-1 pt-2 border-t border-border",children:[j.business_name&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Business:"}),i.jsx("span",{className:"ml-1 text-white",children:j.business_name})]}),j.contact_number&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Contact:"}),i.jsx("span",{className:"ml-1 text-white",children:j.contact_number})]}),j.website_url&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Website:"}),i.jsx("span",{className:"ml-1 text-blue-400",children:j.website_url})]})]}),j.status==="pending"&&i.jsxs("div",{className:"flex gap-2 pt-2",children:[i.jsxs(H,{size:"sm",variant:"default",onClick:()=>h(j.id),disabled:c===j.id,className:"bg-green-600 hover:bg-green-700",children:[i.jsx(Qm,{size:16,className:"mr-1"}),"Approve"]}),i.jsxs(H,{size:"sm",variant:"destructive",onClick:()=>m(j.id),disabled:c===j.id,children:[i.jsx(Nr,{size:16,className:"mr-1"}),"Reject"]})]})]})]})},j.id)})},_))]})})]})}),i.jsx(mr,{})]}):null},l3=()=>{const e=ot(),{user:t}=it(),{toast:r}=$t(),[n,s]=u.useState([]),[o,a]=u.useState(!0);u.useEffect(()=>{t&&l()},[t]);const l=async()=>{try{a(!0);const b=(await B1((t==null?void 0:t.id)||"")||[]).map(w=>({id:w.id,title:w.title,description:w.description,video_url:w.video_url,thumbnail_url:w.thumbnail_url,duration:w.duration||0,business_name:w.business_name,boost_duration:w.boost_duration,boost_cost:w.boost_cost,campaign_start:w.campaign_start,campaign_end:w.campaign_end,status:w.status,impressions:w.impressions||0,clicks:w.clicks||0,created_at:w.created_at}));s(b)}catch(p){console.error("Error loading ads:",p),r({title:"Error",description:"Failed to load your ad campaigns",variant:"destructive"})}finally{a(!1)}},c=p=>{switch(p){case"pending":return"bg-yellow-900 text-yellow-400";case"approved":return"bg-blue-900 text-blue-400";case"active":return"bg-green-900 text-green-400";case"expired":return"bg-gray-900 text-gray-400";case"rejected":return"bg-red-900 text-red-400";case"draft":return"bg-purple-900 text-purple-400";default:return"bg-gray-900 text-gray-400"}},d=p=>new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),f=(p,b)=>b===0?0:(p/b*100).toFixed(2),h=()=>n.filter(p=>p.status!=="draft"&&p.status!=="rejected").reduce((p,b)=>p+b.boost_cost,0),m=()=>n.reduce((p,b)=>p+b.impressions,0),x=()=>n.reduce((p,b)=>p+b.clicks,0),y=()=>n.filter(p=>p.status==="active").length;return i.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[i.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:i.jsx(Bn,{size:20,className:"text-white"})}),i.jsx("span",{className:"text-2xl font-black text-white tracking-wider logo-text-glow absolute left-1/2 transform -translate-x-1/2",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:"900",letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))"},children:"Ad Stats"}),i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>e("/profile"),className:"p-2",children:i.jsx(Nr,{size:20,className:"text-white"})})]})}),i.jsx("div",{className:"pt-24 p-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsx(De,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ep,{size:20,className:"text-green-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Spent"}),i.jsxs("p",{className:"text-lg font-bold text-green-400",children:["TT$",h().toFixed(2)]})]})]})}),i.jsx(De,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qu,{size:20,className:"text-blue-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Ads"}),i.jsx("p",{className:"text-lg font-bold text-blue-400",children:y()})]})]})}),i.jsx(De,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(jr,{size:20,className:"text-purple-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Impressions"}),i.jsx("p",{className:"text-lg font-bold text-purple-400",children:m().toLocaleString()})]})]})}),i.jsx(De,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xy,{size:20,className:"text-orange-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Clicks"}),i.jsx("p",{className:"text-lg font-bold text-orange-400",children:x().toLocaleString()})]})]})})]}),i.jsxs(De,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-white",children:"My Campaigns"}),i.jsx(H,{variant:"neon",size:"sm",onClick:()=>e("/boost"),children:"Create New Campaign"})]}),o?i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-muted-foreground",children:"Loading your campaigns..."})}):n.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(qu,{size:48,className:"mx-auto mb-4 text-muted-foreground"}),i.jsx("h3",{className:"text-lg font-semibold mb-2 text-white",children:"No campaigns yet"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first boost campaign to start promoting your business"}),i.jsx(H,{variant:"neon",onClick:()=>e("/boost"),children:"Create Campaign"})]}):i.jsx("div",{className:"space-y-4",children:n.map(p=>i.jsx(De,{className:"p-4 cursor-pointer hover:bg-muted/20 transition-colors",onClick:()=>{p.status==="draft"?e(`/boost?draft=${p.id}`):e(`/campaign/${p.id}`)},children:i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"w-20 h-28 bg-black rounded overflow-hidden flex-shrink-0 relative",children:[p.thumbnail_url?i.jsx("img",{src:p.thumbnail_url,alt:p.title,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-muted-foreground",children:i.jsx(qu,{size:24})}),p.status==="draft"&&i.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center",children:i.jsx("div",{className:"bg-purple-600 text-white px-2 py-1 rounded text-xs font-bold",children:"DRAFT"})})]}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-white",children:p.title}),p.business_name&&i.jsx("p",{className:"text-sm text-muted-foreground",children:p.business_name})]}),i.jsx(Dt,{className:c(p.status),children:p.status.toUpperCase()})]}),p.description&&i.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:p.description}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2 text-xs",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),i.jsxs("span",{className:"ml-1 text-white",children:[p.boost_duration," days"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Cost:"}),i.jsxs("span",{className:"ml-1 text-green-400",children:["TT$",p.boost_cost]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Impressions:"}),i.jsx("span",{className:"ml-1 text-purple-400",children:p.impressions.toLocaleString()})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Clicks:"}),i.jsx("span",{className:"ml-1 text-orange-400",children:p.clicks.toLocaleString()})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"CTR:"}),i.jsxs("span",{className:"ml-1 text-blue-400",children:[f(p.clicks,p.impressions),"%"]})]})]}),(p.campaign_start||p.campaign_end)&&i.jsxs("div",{className:"flex gap-4 text-xs",children:[p.campaign_start&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Started:"}),i.jsx("span",{className:"ml-1 text-white",children:d(p.campaign_start)})]}),p.campaign_end&&i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Ends:"}),i.jsx("span",{className:"ml-1 text-white",children:d(p.campaign_end)})]})]}),p.status==="active"&&p.impressions>0&&i.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[i.jsx(vs,{size:16,className:"text-green-400"}),i.jsx("span",{className:"text-sm text-green-400",children:p.impressions>100?"Performing well":"Building momentum"})]})]})]})},p.id))})]}),n.length>0&&i.jsxs(De,{className:"p-4 bg-muted/50",children:[i.jsx("h4",{className:"font-medium mb-2",children:"📈 Performance Tips"}),i.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[i.jsx("li",{children:"• Higher CTR (Click-Through Rate) indicates more engaging content"}),i.jsx("li",{children:"• Active campaigns get more impressions during peak hours (6-9 PM)"}),i.jsx("li",{children:"• Include clear contact information for better conversion"}),i.jsx("li",{children:"• Longer campaigns (7+ days) typically perform better"})]})]})]})}),i.jsx(mr,{})]})},c3=()=>{const e=ot(),{campaignId:t}=_l(),{user:r}=it(),{toast:n}=$t(),[s,o]=u.useState(null),[a,l]=u.useState(!0),[c,d]=u.useState(!1);u.useEffect(()=>{t&&r&&f()},[t,r]);const f=async()=>{try{l(!0);const{data:p,error:b}=await N.from("sponsored_ads").select("*").eq("id",t).eq("user_id",r==null?void 0:r.id).single();if(b){console.error("Error loading campaign:",b),n({title:"Error",description:"Failed to load campaign details",variant:"destructive"}),e("/ad-stats");return}o(p)}catch(p){console.error("Error loading campaign:",p),n({title:"Error",description:"Failed to load campaign details",variant:"destructive"}),e("/ad-stats")}finally{l(!1)}},h=p=>{switch(p){case"pending":return"bg-yellow-900 text-yellow-400";case"approved":return"bg-blue-900 text-blue-400";case"active":return"bg-green-900 text-green-400";case"expired":return"bg-gray-900 text-gray-400";case"rejected":return"bg-red-900 text-red-400";case"draft":return"bg-purple-900 text-purple-400";default:return"bg-gray-900 text-gray-400"}},m=p=>new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),x=(p,b)=>b===0?0:(p/b*100).toFixed(2),y=()=>{const p=document.querySelector("video");p&&(p.paused?(p.play(),d(!0)):(p.pause(),d(!1)))};return a?i.jsx("div",{className:"min-h-screen bg-background pb-20 flex items-center justify-center",children:i.jsx("p",{className:"text-muted-foreground",children:"Loading campaign..."})}):s?i.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[i.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(H,{variant:"ghost",size:"sm",onClick:()=>e("/ad-stats"),className:"p-2",children:i.jsx(Bn,{size:20,className:"text-white"})}),i.jsx("span",{className:"text-2xl font-black text-white tracking-wider logo-text-glow",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:"900",letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))"},children:"Campaign Details"})]}),(s==null?void 0:s.status)==="draft"&&i.jsx(H,{variant:"outline",size:"sm",onClick:()=>e(`/boost?draft=${s.id}`),className:"text-white border-white/50 hover:bg-white/10",children:"Edit"})]})}),i.jsx("div",{className:"pt-24 p-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[i.jsx(De,{className:"p-6",children:i.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[i.jsxs("div",{className:"relative w-full md:w-80 aspect-[9/16] bg-black rounded-lg overflow-hidden",children:[i.jsx("div",{className:"absolute top-4 left-4 z-10",children:i.jsx(Dt,{className:h(s.status),children:s.status.toUpperCase()})}),i.jsx("video",{src:s.video_url,className:"w-full h-full object-cover",controls:!1,onClick:y}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center cursor-pointer",onClick:y,children:i.jsx("div",{className:"bg-black/50 rounded-full p-4",children:c?i.jsx(tE,{size:32,className:"text-white"}):i.jsx(Mo,{size:32,className:"text-white"})})})]}),i.jsxs("div",{className:"flex-1 space-y-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:s.title}),s.description&&i.jsx("p",{className:"text-muted-foreground",children:s.description})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx(ep,{size:20,className:"text-green-400 mx-auto mb-1"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Cost"}),i.jsxs("p",{className:"font-bold text-green-400",children:["TT$",s.boost_cost]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx(YC,{size:20,className:"text-blue-400 mx-auto mb-1"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Duration"}),i.jsxs("p",{className:"font-bold text-blue-400",children:[s.boost_duration," days"]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx(jr,{size:20,className:"text-purple-400 mx-auto mb-1"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Impressions"}),i.jsx("p",{className:"font-bold text-purple-400",children:s.impressions.toLocaleString()})]}),i.jsxs("div",{className:"text-center",children:[i.jsx(Xy,{size:20,className:"text-orange-400 mx-auto mb-1"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Clicks"}),i.jsx("p",{className:"font-bold text-orange-400",children:s.clicks.toLocaleString()})]})]}),s.impressions>0&&i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Click-Through Rate"}),i.jsxs("p",{className:"text-xl font-bold text-primary",children:[x(s.clicks,s.impressions),"%"]})]})]})]})}),(s.business_name||s.contact_number||s.website_url||s.support_email||s.price_info)&&i.jsxs(De,{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Business Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.business_name&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-white mb-1",children:"Business Name"}),i.jsx("p",{className:"text-muted-foreground",children:s.business_name})]}),s.contact_number&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-white mb-1",children:"Contact Number"}),i.jsx("p",{className:"text-muted-foreground",children:s.contact_number})]}),s.website_url&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-white mb-1",children:"Website"}),i.jsx("p",{className:"text-blue-400",children:s.website_url})]}),s.support_email&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-white mb-1",children:"Support Email"}),i.jsx("p",{className:"text-blue-400",children:s.support_email})]}),s.price_info&&i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("h3",{className:"font-medium text-white mb-1",children:"Pricing Information"}),i.jsx("p",{className:"text-muted-foreground",children:s.price_info})]})]})]}),i.jsxs(De,{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Campaign Timeline"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Created:"}),i.jsx("span",{className:"text-white",children:m(s.created_at)})]}),s.campaign_start&&i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Started:"}),i.jsx("span",{className:"text-white",children:m(s.campaign_start)})]}),s.campaign_end&&i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Ends:"}),i.jsx("span",{className:"text-white",children:m(s.campaign_end)})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-muted-foreground",children:"Status:"}),i.jsx(Dt,{className:h(s.status),children:s.status.toUpperCase()})]})]})]}),s.status==="pending"&&i.jsx(De,{className:"p-4 bg-yellow-900/20 border-yellow-600",children:i.jsx("p",{className:"text-yellow-400 text-center",children:"⏳ Your campaign is pending approval. It will go live once approved by our team."})}),s.status==="rejected"&&i.jsx(De,{className:"p-4 bg-red-900/20 border-red-600",children:i.jsx("p",{className:"text-red-400 text-center",children:"❌ Your campaign was rejected. Please review our advertising guidelines and try again."})}),s.status==="approved"&&i.jsx(De,{className:"p-4 bg-blue-900/20 border-blue-600",children:i.jsx("p",{className:"text-blue-400 text-center",children:"✅ Your campaign has been approved and will start running soon!"})}),s.status==="active"&&i.jsx(De,{className:"p-4 bg-green-900/20 border-green-600",children:i.jsx("p",{className:"text-green-400 text-center",children:"🟢 Your campaign is currently active and reaching users!"})}),s.status==="expired"&&i.jsx(De,{className:"p-4 bg-gray-900/20 border-gray-600",children:i.jsx("p",{className:"text-gray-400 text-center",children:"⏰ Your campaign has ended. Create a new campaign to continue promoting your business."})})]})}),i.jsx(mr,{})]}):i.jsx("div",{className:"min-h-screen bg-background pb-20 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Campaign not found"}),i.jsx(H,{onClick:()=>e("/ad-stats"),children:"Back to My Campaigns"})]})})},d3=new fT,u3=()=>i.jsx(mT,{client:d3,children:i.jsx(PA,{children:i.jsxs(WP,{children:[i.jsx(HE,{}),i.jsx(v2,{}),i.jsx(dR,{children:i.jsxs(rR,{children:[i.jsx(lt,{path:"/",element:i.jsx(Ut,{children:i.jsx(VM,{})})}),i.jsx(lt,{path:"/trending",element:i.jsx(Ut,{children:i.jsx(WM,{})})}),i.jsx(lt,{path:"/friends",element:i.jsx(Ut,{children:i.jsx(HO,{})})}),i.jsx(lt,{path:"/live",element:i.jsx(Ut,{children:i.jsx(BM,{})})}),i.jsx(lt,{path:"/upload",element:i.jsx(Ut,{children:i.jsx(HI,{})})}),i.jsx(lt,{path:"/profile",element:i.jsx(Ut,{children:i.jsx(qx,{})})}),i.jsx(lt,{path:"/profile/:username",element:i.jsx(Ut,{children:i.jsx(qx,{})})}),i.jsx(lt,{path:"/settings",element:i.jsx(Ut,{children:i.jsx(eO,{})})}),i.jsx(lt,{path:"/inbox",element:i.jsx(Ut,{children:i.jsx(GO,{})})}),i.jsx(lt,{path:"/chat/:chatId",element:i.jsx(Ut,{children:i.jsx(YO,{})})}),i.jsx(lt,{path:"/message/:username",element:i.jsx(Ut,{children:i.jsx(ZO,{})})}),i.jsx(lt,{path:"/login",element:i.jsx(DA,{})}),i.jsx(lt,{path:"/signup",element:i.jsx(IA,{})}),i.jsx(lt,{path:"/welcome",element:i.jsx(RA,{})}),i.jsx(lt,{path:"/edit-profile",element:i.jsx(BO,{})}),i.jsx(lt,{path:"/wallet/link",element:i.jsx(Ut,{children:i.jsx(QO,{})})}),i.jsx(lt,{path:"/wallet",element:i.jsx(Ut,{children:i.jsx(JO,{})})}),i.jsx(lt,{path:"/create-video",element:i.jsx(Ut,{children:i.jsx(n3,{})})}),i.jsx(lt,{path:"/deactivated",element:i.jsx(s3,{})}),i.jsx(lt,{path:"/video/:videoId",element:i.jsx(i3,{})}),i.jsx(lt,{path:"/boost",element:i.jsx(Ut,{children:i.jsx(o3,{})})}),i.jsx(lt,{path:"/admin",element:i.jsx(Ut,{children:i.jsx(a3,{})})}),i.jsx(lt,{path:"/ad-stats",element:i.jsx(Ut,{children:i.jsx(l3,{})})}),i.jsx(lt,{path:"/campaign/:campaignId",element:i.jsx(Ut,{children:i.jsx(c3,{})})}),i.jsx(lt,{path:"*",element:i.jsx(KO,{})})]})})]})})});_y(document.getElementById("root")).render(i.jsx(u3,{}));
