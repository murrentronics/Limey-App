var Tp=e=>{throw TypeError(e)};var Hu=(e,t,r)=>t.has(e)||Tp("Cannot "+r);var ne=(e,t,r)=>(Hu(e,t,"read from private field"),r?r.call(e):t.get(e)),Ve=(e,t,r)=>t.has(e)?Tp("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Ae=(e,t,r,n)=>(Hu(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Ut=(e,t,r)=>(Hu(e,t,"access private method"),r);var hl=(e,t,r,n)=>({set _(s){Ae(e,t,s,r)},get _(){return ne(e,t,n)}});function Ij(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Ir=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ch(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Oj(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var xx={exports:{}},Kc={},wx={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ya=Symbol.for("react.element"),Dj=Symbol.for("react.portal"),Mj=Symbol.for("react.fragment"),Lj=Symbol.for("react.strict_mode"),Fj=Symbol.for("react.profiler"),$j=Symbol.for("react.provider"),zj=Symbol.for("react.context"),Uj=Symbol.for("react.forward_ref"),Bj=Symbol.for("react.suspense"),Vj=Symbol.for("react.memo"),Wj=Symbol.for("react.lazy"),Rp=Symbol.iterator;function qj(e){return e===null||typeof e!="object"?null:(e=Rp&&e[Rp]||e["@@iterator"],typeof e=="function"?e:null)}var yx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bx=Object.assign,_x={};function Ni(e,t,r){this.props=e,this.context=t,this.refs=_x,this.updater=r||yx}Ni.prototype.isReactComponent={};Ni.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ni.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function jx(){}jx.prototype=Ni.prototype;function Eh(e,t,r){this.props=e,this.context=t,this.refs=_x,this.updater=r||yx}var Ph=Eh.prototype=new jx;Ph.constructor=Eh;bx(Ph,Ni.prototype);Ph.isPureReactComponent=!0;var Ap=Array.isArray,Sx=Object.prototype.hasOwnProperty,Th={current:null},Nx={key:!0,ref:!0,__self:!0,__source:!0};function kx(e,t,r){var n,s={},i=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)Sx.call(t,n)&&!Nx.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Ya,type:e,key:i,ref:a,props:s,_owner:Th.current}}function Hj(e,t){return{$$typeof:Ya,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Rh(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ya}function Kj(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Ip=/\/+/g;function Ku(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Kj(""+e.key):t.toString(36)}function ql(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Ya:case Dj:a=!0}}if(a)return a=e,s=s(a),e=n===""?"."+Ku(a,0):n,Ap(s)?(r="",e!=null&&(r=e.replace(Ip,"$&/")+"/"),ql(s,t,r,"",function(u){return u})):s!=null&&(Rh(s)&&(s=Hj(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Ip,"$&/")+"/")+e)),t.push(s)),1;if(a=0,n=n===""?".":n+":",Ap(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Ku(i,l);a+=ql(i,t,r,c,s)}else if(c=qj(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Ku(i,l++),a+=ql(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function ml(e,t,r){if(e==null)return e;var n=[],s=0;return ql(e,n,"","",function(i){return t.call(r,i,s++)}),n}function Gj(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var tr={current:null},Hl={transition:null},Yj={ReactCurrentDispatcher:tr,ReactCurrentBatchConfig:Hl,ReactCurrentOwner:Th};function Cx(){throw Error("act(...) is not supported in production builds of React.")}De.Children={map:ml,forEach:function(e,t,r){ml(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ml(e,function(){t++}),t},toArray:function(e){return ml(e,function(t){return t})||[]},only:function(e){if(!Rh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};De.Component=Ni;De.Fragment=Mj;De.Profiler=Fj;De.PureComponent=Eh;De.StrictMode=Lj;De.Suspense=Bj;De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yj;De.act=Cx;De.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=bx({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=Th.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Sx.call(t,c)&&!Nx.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Ya,type:e.type,key:s,ref:i,props:n,_owner:a}};De.createContext=function(e){return e={$$typeof:zj,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:$j,_context:e},e.Consumer=e};De.createElement=kx;De.createFactory=function(e){var t=kx.bind(null,e);return t.type=e,t};De.createRef=function(){return{current:null}};De.forwardRef=function(e){return{$$typeof:Uj,render:e}};De.isValidElement=Rh;De.lazy=function(e){return{$$typeof:Wj,_payload:{_status:-1,_result:e},_init:Gj}};De.memo=function(e,t){return{$$typeof:Vj,type:e,compare:t===void 0?null:t}};De.startTransition=function(e){var t=Hl.transition;Hl.transition={};try{e()}finally{Hl.transition=t}};De.unstable_act=Cx;De.useCallback=function(e,t){return tr.current.useCallback(e,t)};De.useContext=function(e){return tr.current.useContext(e)};De.useDebugValue=function(){};De.useDeferredValue=function(e){return tr.current.useDeferredValue(e)};De.useEffect=function(e,t){return tr.current.useEffect(e,t)};De.useId=function(){return tr.current.useId()};De.useImperativeHandle=function(e,t,r){return tr.current.useImperativeHandle(e,t,r)};De.useInsertionEffect=function(e,t){return tr.current.useInsertionEffect(e,t)};De.useLayoutEffect=function(e,t){return tr.current.useLayoutEffect(e,t)};De.useMemo=function(e,t){return tr.current.useMemo(e,t)};De.useReducer=function(e,t,r){return tr.current.useReducer(e,t,r)};De.useRef=function(e){return tr.current.useRef(e)};De.useState=function(e){return tr.current.useState(e)};De.useSyncExternalStore=function(e,t,r){return tr.current.useSyncExternalStore(e,t,r)};De.useTransition=function(){return tr.current.useTransition()};De.version="18.3.1";wx.exports=De;var d=wx.exports;const fe=Ch(d),Ex=Ij({__proto__:null,default:fe},[d]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qj=d,Jj=Symbol.for("react.element"),Xj=Symbol.for("react.fragment"),Zj=Object.prototype.hasOwnProperty,eS=Qj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tS={key:!0,ref:!0,__self:!0,__source:!0};function Px(e,t,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)Zj.call(t,n)&&!tS.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Jj,type:e,key:i,ref:a,props:s,_owner:eS.current}}Kc.Fragment=Xj;Kc.jsx=Px;Kc.jsxs=Px;xx.exports=Kc;var o=xx.exports,Tx={exports:{}},Sr={},Rx={exports:{}},Ax={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,F){var Q=P.length;P.push(F);e:for(;0<Q;){var se=Q-1>>>1,O=P[se];if(0<s(O,F))P[se]=F,P[Q]=O,Q=se;else break e}}function r(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var F=P[0],Q=P.pop();if(Q!==F){P[0]=Q;e:for(var se=0,O=P.length,X=O>>>1;se<X;){var ie=2*(se+1)-1,le=P[ie],T=ie+1,L=P[T];if(0>s(le,Q))T<O&&0>s(L,le)?(P[se]=L,P[T]=Q,se=T):(P[se]=le,P[ie]=Q,se=ie);else if(T<O&&0>s(L,Q))P[se]=L,P[T]=Q,se=T;else break e}}return F}function s(P,F){var Q=P.sortIndex-F.sortIndex;return Q!==0?Q:P.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],f=1,h=null,m=3,g=!1,y=!1,p=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(P){for(var F=r(u);F!==null;){if(F.callback===null)n(u);else if(F.startTime<=P)n(u),F.sortIndex=F.expirationTime,t(c,F);else break;F=r(u)}}function _(P){if(p=!1,x(P),!y)if(r(c)!==null)y=!0,G(j);else{var F=r(u);F!==null&&J(_,F.startTime-P)}}function j(P,F){y=!1,p&&(p=!1,w(k),k=-1),g=!0;var Q=m;try{for(x(F),h=r(c);h!==null&&(!(h.expirationTime>F)||P&&!V());){var se=h.callback;if(typeof se=="function"){h.callback=null,m=h.priorityLevel;var O=se(h.expirationTime<=F);F=e.unstable_now(),typeof O=="function"?h.callback=O:h===r(c)&&n(c),x(F)}else n(c);h=r(c)}if(h!==null)var X=!0;else{var ie=r(u);ie!==null&&J(_,ie.startTime-F),X=!1}return X}finally{h=null,m=Q,g=!1}}var N=!1,S=null,k=-1,U=5,W=-1;function V(){return!(e.unstable_now()-W<U)}function q(){if(S!==null){var P=e.unstable_now();W=P;var F=!0;try{F=S(!0,P)}finally{F?re():(N=!1,S=null)}}else N=!1}var re;if(typeof v=="function")re=function(){v(q)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,ee=$.port2;$.port1.onmessage=q,re=function(){ee.postMessage(null)}}else re=function(){b(q,0)};function G(P){S=P,N||(N=!0,re())}function J(P,F){k=b(function(){P(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){y||g||(y=!0,G(j))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(P){switch(m){case 1:case 2:case 3:var F=3;break;default:F=m}var Q=m;m=F;try{return P()}finally{m=Q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,F){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var Q=m;m=P;try{return F()}finally{m=Q}},e.unstable_scheduleCallback=function(P,F,Q){var se=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?se+Q:se):Q=se,P){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=Q+O,P={id:f++,callback:F,priorityLevel:P,startTime:Q,expirationTime:O,sortIndex:-1},Q>se?(P.sortIndex=Q,t(u,P),r(c)===null&&P===r(u)&&(p?(w(k),k=-1):p=!0,J(_,Q-se))):(P.sortIndex=O,t(c,P),y||g||(y=!0,G(j))),P},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(P){var F=m;return function(){var Q=m;m=F;try{return P.apply(this,arguments)}finally{m=Q}}}})(Ax);Rx.exports=Ax;var rS=Rx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nS=d,jr=rS;function ce(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ix=new Set,_a={};function fo(e,t){ui(e,t),ui(e+"Capture",t)}function ui(e,t){for(_a[e]=t,e=0;e<t.length;e++)Ix.add(t[e])}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wd=Object.prototype.hasOwnProperty,sS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Op={},Dp={};function oS(e){return Wd.call(Dp,e)?!0:Wd.call(Op,e)?!1:sS.test(e)?Dp[e]=!0:(Op[e]=!0,!1)}function iS(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function aS(e,t,r,n){if(t===null||typeof t>"u"||iS(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function rr(e,t,r,n,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var Lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Lt[e]=new rr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Lt[t]=new rr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Lt[e]=new rr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Lt[e]=new rr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Lt[e]=new rr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Lt[e]=new rr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Lt[e]=new rr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Lt[e]=new rr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Lt[e]=new rr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ah=/[\-:]([a-z])/g;function Ih(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ah,Ih);Lt[t]=new rr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ah,Ih);Lt[t]=new rr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ah,Ih);Lt[t]=new rr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Lt[e]=new rr(e,1,!1,e.toLowerCase(),null,!1,!1)});Lt.xlinkHref=new rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Lt[e]=new rr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Oh(e,t,r,n){var s=Lt.hasOwnProperty(t)?Lt[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(aS(t,r,s,n)&&(r=null),n||s===null?oS(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var On=nS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pl=Symbol.for("react.element"),Io=Symbol.for("react.portal"),Oo=Symbol.for("react.fragment"),Dh=Symbol.for("react.strict_mode"),qd=Symbol.for("react.profiler"),Ox=Symbol.for("react.provider"),Dx=Symbol.for("react.context"),Mh=Symbol.for("react.forward_ref"),Hd=Symbol.for("react.suspense"),Kd=Symbol.for("react.suspense_list"),Lh=Symbol.for("react.memo"),qn=Symbol.for("react.lazy"),Mx=Symbol.for("react.offscreen"),Mp=Symbol.iterator;function Ui(e){return e===null||typeof e!="object"?null:(e=Mp&&e[Mp]||e["@@iterator"],typeof e=="function"?e:null)}var ut=Object.assign,Gu;function Zi(e){if(Gu===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Gu=t&&t[1]||""}return`
`+Gu+e}var Yu=!1;function Qu(e,t){if(!e||Yu)return"";Yu=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Yu=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Zi(e):""}function lS(e){switch(e.tag){case 5:return Zi(e.type);case 16:return Zi("Lazy");case 13:return Zi("Suspense");case 19:return Zi("SuspenseList");case 0:case 2:case 15:return e=Qu(e.type,!1),e;case 11:return e=Qu(e.type.render,!1),e;case 1:return e=Qu(e.type,!0),e;default:return""}}function Gd(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Oo:return"Fragment";case Io:return"Portal";case qd:return"Profiler";case Dh:return"StrictMode";case Hd:return"Suspense";case Kd:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Dx:return(e.displayName||"Context")+".Consumer";case Ox:return(e._context.displayName||"Context")+".Provider";case Mh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Lh:return t=e.displayName||null,t!==null?t:Gd(e.type)||"Memo";case qn:t=e._payload,e=e._init;try{return Gd(e(t))}catch{}}return null}function cS(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gd(t);case 8:return t===Dh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ps(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Lx(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function uS(e){var t=Lx(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function gl(e){e._valueTracker||(e._valueTracker=uS(e))}function Fx(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Lx(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function dc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Yd(e,t){var r=t.checked;return ut({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Lp(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ps(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $x(e,t){t=t.checked,t!=null&&Oh(e,"checked",t,!1)}function Qd(e,t){$x(e,t);var r=ps(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Jd(e,t.type,r):t.hasOwnProperty("defaultValue")&&Jd(e,t.type,ps(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Fp(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Jd(e,t,r){(t!=="number"||dc(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ea=Array.isArray;function qo(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ps(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Xd(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ce(91));return ut({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function $p(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ce(92));if(ea(r)){if(1<r.length)throw Error(ce(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ps(r)}}function zx(e,t){var r=ps(t.value),n=ps(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function zp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ux(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ux(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var vl,Bx=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(vl=vl||document.createElement("div"),vl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=vl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ja(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ia={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dS=["Webkit","ms","Moz","O"];Object.keys(ia).forEach(function(e){dS.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ia[t]=ia[e]})});function Vx(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ia.hasOwnProperty(e)&&ia[e]?(""+t).trim():t+"px"}function Wx(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Vx(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var fS=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ef(e,t){if(t){if(fS[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ce(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ce(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ce(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ce(62))}}function tf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rf=null;function Fh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var nf=null,Ho=null,Ko=null;function Up(e){if(e=Xa(e)){if(typeof nf!="function")throw Error(ce(280));var t=e.stateNode;t&&(t=Xc(t),nf(e.stateNode,e.type,t))}}function qx(e){Ho?Ko?Ko.push(e):Ko=[e]:Ho=e}function Hx(){if(Ho){var e=Ho,t=Ko;if(Ko=Ho=null,Up(e),t)for(e=0;e<t.length;e++)Up(t[e])}}function Kx(e,t){return e(t)}function Gx(){}var Ju=!1;function Yx(e,t,r){if(Ju)return e(t,r);Ju=!0;try{return Kx(e,t,r)}finally{Ju=!1,(Ho!==null||Ko!==null)&&(Gx(),Hx())}}function Sa(e,t){var r=e.stateNode;if(r===null)return null;var n=Xc(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ce(231,t,typeof r));return r}var sf=!1;if(kn)try{var Bi={};Object.defineProperty(Bi,"passive",{get:function(){sf=!0}}),window.addEventListener("test",Bi,Bi),window.removeEventListener("test",Bi,Bi)}catch{sf=!1}function hS(e,t,r,n,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(f){this.onError(f)}}var aa=!1,fc=null,hc=!1,of=null,mS={onError:function(e){aa=!0,fc=e}};function pS(e,t,r,n,s,i,a,l,c){aa=!1,fc=null,hS.apply(mS,arguments)}function gS(e,t,r,n,s,i,a,l,c){if(pS.apply(this,arguments),aa){if(aa){var u=fc;aa=!1,fc=null}else throw Error(ce(198));hc||(hc=!0,of=u)}}function ho(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Qx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Bp(e){if(ho(e)!==e)throw Error(ce(188))}function vS(e){var t=e.alternate;if(!t){if(t=ho(e),t===null)throw Error(ce(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Bp(s),e;if(i===n)return Bp(s),t;i=i.sibling}throw Error(ce(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a)throw Error(ce(189))}}if(r.alternate!==n)throw Error(ce(190))}if(r.tag!==3)throw Error(ce(188));return r.stateNode.current===r?e:t}function Jx(e){return e=vS(e),e!==null?Xx(e):null}function Xx(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Xx(e);if(t!==null)return t;e=e.sibling}return null}var Zx=jr.unstable_scheduleCallback,Vp=jr.unstable_cancelCallback,xS=jr.unstable_shouldYield,wS=jr.unstable_requestPaint,mt=jr.unstable_now,yS=jr.unstable_getCurrentPriorityLevel,$h=jr.unstable_ImmediatePriority,e0=jr.unstable_UserBlockingPriority,mc=jr.unstable_NormalPriority,bS=jr.unstable_LowPriority,t0=jr.unstable_IdlePriority,Gc=null,ln=null;function _S(e){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(Gc,e,void 0,(e.current.flags&128)===128)}catch{}}var Kr=Math.clz32?Math.clz32:NS,jS=Math.log,SS=Math.LN2;function NS(e){return e>>>=0,e===0?32:31-(jS(e)/SS|0)|0}var xl=64,wl=4194304;function ta(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pc(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=ta(l):(i&=a,i!==0&&(n=ta(i)))}else a=r&~s,a!==0?n=ta(a):i!==0&&(n=ta(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Kr(t),s=1<<r,n|=e[r],t&=~s;return n}function kS(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CS(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Kr(i),l=1<<a,c=s[a];c===-1?(!(l&r)||l&n)&&(s[a]=kS(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function af(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function r0(){var e=xl;return xl<<=1,!(xl&4194240)&&(xl=64),e}function Xu(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Qa(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kr(t),e[t]=r}function ES(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Kr(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function zh(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Kr(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var He=0;function n0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var s0,Uh,o0,i0,a0,lf=!1,yl=[],is=null,as=null,ls=null,Na=new Map,ka=new Map,Gn=[],PS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wp(e,t){switch(e){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":Na.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ka.delete(t.pointerId)}}function Vi(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Xa(t),t!==null&&Uh(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function TS(e,t,r,n,s){switch(t){case"focusin":return is=Vi(is,e,t,r,n,s),!0;case"dragenter":return as=Vi(as,e,t,r,n,s),!0;case"mouseover":return ls=Vi(ls,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Na.set(i,Vi(Na.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,ka.set(i,Vi(ka.get(i)||null,e,t,r,n,s)),!0}return!1}function l0(e){var t=qs(e.target);if(t!==null){var r=ho(t);if(r!==null){if(t=r.tag,t===13){if(t=Qx(r),t!==null){e.blockedOn=t,a0(e.priority,function(){o0(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Kl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=cf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);rf=n,r.target.dispatchEvent(n),rf=null}else return t=Xa(r),t!==null&&Uh(t),e.blockedOn=r,!1;t.shift()}return!0}function qp(e,t,r){Kl(e)&&r.delete(t)}function RS(){lf=!1,is!==null&&Kl(is)&&(is=null),as!==null&&Kl(as)&&(as=null),ls!==null&&Kl(ls)&&(ls=null),Na.forEach(qp),ka.forEach(qp)}function Wi(e,t){e.blockedOn===t&&(e.blockedOn=null,lf||(lf=!0,jr.unstable_scheduleCallback(jr.unstable_NormalPriority,RS)))}function Ca(e){function t(s){return Wi(s,e)}if(0<yl.length){Wi(yl[0],e);for(var r=1;r<yl.length;r++){var n=yl[r];n.blockedOn===e&&(n.blockedOn=null)}}for(is!==null&&Wi(is,e),as!==null&&Wi(as,e),ls!==null&&Wi(ls,e),Na.forEach(t),ka.forEach(t),r=0;r<Gn.length;r++)n=Gn[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Gn.length&&(r=Gn[0],r.blockedOn===null);)l0(r),r.blockedOn===null&&Gn.shift()}var Go=On.ReactCurrentBatchConfig,gc=!0;function AS(e,t,r,n){var s=He,i=Go.transition;Go.transition=null;try{He=1,Bh(e,t,r,n)}finally{He=s,Go.transition=i}}function IS(e,t,r,n){var s=He,i=Go.transition;Go.transition=null;try{He=4,Bh(e,t,r,n)}finally{He=s,Go.transition=i}}function Bh(e,t,r,n){if(gc){var s=cf(e,t,r,n);if(s===null)ld(e,t,n,vc,r),Wp(e,n);else if(TS(s,e,t,r,n))n.stopPropagation();else if(Wp(e,n),t&4&&-1<PS.indexOf(e)){for(;s!==null;){var i=Xa(s);if(i!==null&&s0(i),i=cf(e,t,r,n),i===null&&ld(e,t,n,vc,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else ld(e,t,n,null,r)}}var vc=null;function cf(e,t,r,n){if(vc=null,e=Fh(n),e=qs(e),e!==null)if(t=ho(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Qx(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vc=e,null}function c0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yS()){case $h:return 1;case e0:return 4;case mc:case bS:return 16;case t0:return 536870912;default:return 16}default:return 16}}var rs=null,Vh=null,Gl=null;function u0(){if(Gl)return Gl;var e,t=Vh,r=t.length,n,s="value"in rs?rs.value:rs.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===s[i-n];n++);return Gl=s.slice(e,1<n?1-n:void 0)}function Yl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bl(){return!0}function Hp(){return!1}function Nr(e){function t(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?bl:Hp,this.isPropagationStopped=Hp,this}return ut(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=bl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=bl)},persist:function(){},isPersistent:bl}),t}var ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wh=Nr(ki),Ja=ut({},ki,{view:0,detail:0}),OS=Nr(Ja),Zu,ed,qi,Yc=ut({},Ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qi&&(qi&&e.type==="mousemove"?(Zu=e.screenX-qi.screenX,ed=e.screenY-qi.screenY):ed=Zu=0,qi=e),Zu)},movementY:function(e){return"movementY"in e?e.movementY:ed}}),Kp=Nr(Yc),DS=ut({},Yc,{dataTransfer:0}),MS=Nr(DS),LS=ut({},Ja,{relatedTarget:0}),td=Nr(LS),FS=ut({},ki,{animationName:0,elapsedTime:0,pseudoElement:0}),$S=Nr(FS),zS=ut({},ki,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),US=Nr(zS),BS=ut({},ki,{data:0}),Gp=Nr(BS),VS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=qS[e])?!!t[e]:!1}function qh(){return HS}var KS=ut({},Ja,{key:function(e){if(e.key){var t=VS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?WS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qh,charCode:function(e){return e.type==="keypress"?Yl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),GS=Nr(KS),YS=ut({},Yc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yp=Nr(YS),QS=ut({},Ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qh}),JS=Nr(QS),XS=ut({},ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZS=Nr(XS),eN=ut({},Yc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),tN=Nr(eN),rN=[9,13,27,32],Hh=kn&&"CompositionEvent"in window,la=null;kn&&"documentMode"in document&&(la=document.documentMode);var nN=kn&&"TextEvent"in window&&!la,d0=kn&&(!Hh||la&&8<la&&11>=la),Qp=" ",Jp=!1;function f0(e,t){switch(e){case"keyup":return rN.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function h0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Do=!1;function sN(e,t){switch(e){case"compositionend":return h0(t);case"keypress":return t.which!==32?null:(Jp=!0,Qp);case"textInput":return e=t.data,e===Qp&&Jp?null:e;default:return null}}function oN(e,t){if(Do)return e==="compositionend"||!Hh&&f0(e,t)?(e=u0(),Gl=Vh=rs=null,Do=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return d0&&t.locale!=="ko"?null:t.data;default:return null}}var iN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!iN[e.type]:t==="textarea"}function m0(e,t,r,n){qx(n),t=xc(t,"onChange"),0<t.length&&(r=new Wh("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var ca=null,Ea=null;function aN(e){N0(e,0)}function Qc(e){var t=Fo(e);if(Fx(t))return e}function lN(e,t){if(e==="change")return t}var p0=!1;if(kn){var rd;if(kn){var nd="oninput"in document;if(!nd){var Zp=document.createElement("div");Zp.setAttribute("oninput","return;"),nd=typeof Zp.oninput=="function"}rd=nd}else rd=!1;p0=rd&&(!document.documentMode||9<document.documentMode)}function eg(){ca&&(ca.detachEvent("onpropertychange",g0),Ea=ca=null)}function g0(e){if(e.propertyName==="value"&&Qc(Ea)){var t=[];m0(t,Ea,e,Fh(e)),Yx(aN,t)}}function cN(e,t,r){e==="focusin"?(eg(),ca=t,Ea=r,ca.attachEvent("onpropertychange",g0)):e==="focusout"&&eg()}function uN(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qc(Ea)}function dN(e,t){if(e==="click")return Qc(t)}function fN(e,t){if(e==="input"||e==="change")return Qc(t)}function hN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Yr=typeof Object.is=="function"?Object.is:hN;function Pa(e,t){if(Yr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Wd.call(t,s)||!Yr(e[s],t[s]))return!1}return!0}function tg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rg(e,t){var r=tg(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=tg(r)}}function v0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?v0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function x0(){for(var e=window,t=dc();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=dc(e.document)}return t}function Kh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function mN(e){var t=x0(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&v0(r.ownerDocument.documentElement,r)){if(n!==null&&Kh(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=rg(r,i);var a=rg(r,n);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pN=kn&&"documentMode"in document&&11>=document.documentMode,Mo=null,uf=null,ua=null,df=!1;function ng(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;df||Mo==null||Mo!==dc(n)||(n=Mo,"selectionStart"in n&&Kh(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ua&&Pa(ua,n)||(ua=n,n=xc(uf,"onSelect"),0<n.length&&(t=new Wh("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Mo)))}function _l(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Lo={animationend:_l("Animation","AnimationEnd"),animationiteration:_l("Animation","AnimationIteration"),animationstart:_l("Animation","AnimationStart"),transitionend:_l("Transition","TransitionEnd")},sd={},w0={};kn&&(w0=document.createElement("div").style,"AnimationEvent"in window||(delete Lo.animationend.animation,delete Lo.animationiteration.animation,delete Lo.animationstart.animation),"TransitionEvent"in window||delete Lo.transitionend.transition);function Jc(e){if(sd[e])return sd[e];if(!Lo[e])return e;var t=Lo[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in w0)return sd[e]=t[r];return e}var y0=Jc("animationend"),b0=Jc("animationiteration"),_0=Jc("animationstart"),j0=Jc("transitionend"),S0=new Map,sg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function js(e,t){S0.set(e,t),fo(t,[e])}for(var od=0;od<sg.length;od++){var id=sg[od],gN=id.toLowerCase(),vN=id[0].toUpperCase()+id.slice(1);js(gN,"on"+vN)}js(y0,"onAnimationEnd");js(b0,"onAnimationIteration");js(_0,"onAnimationStart");js("dblclick","onDoubleClick");js("focusin","onFocus");js("focusout","onBlur");js(j0,"onTransitionEnd");ui("onMouseEnter",["mouseout","mouseover"]);ui("onMouseLeave",["mouseout","mouseover"]);ui("onPointerEnter",["pointerout","pointerover"]);ui("onPointerLeave",["pointerout","pointerover"]);fo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fo("onBeforeInput",["compositionend","keypress","textInput","paste"]);fo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xN=new Set("cancel close invalid load scroll toggle".split(" ").concat(ra));function og(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,gS(n,t,void 0,e),e.currentTarget=null}function N0(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;og(s,l,u),i=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;og(s,l,u),i=c}}}if(hc)throw e=of,hc=!1,of=null,e}function st(e,t){var r=t[gf];r===void 0&&(r=t[gf]=new Set);var n=e+"__bubble";r.has(n)||(k0(t,e,2,!1),r.add(n))}function ad(e,t,r){var n=0;t&&(n|=4),k0(r,e,n,t)}var jl="_reactListening"+Math.random().toString(36).slice(2);function Ta(e){if(!e[jl]){e[jl]=!0,Ix.forEach(function(r){r!=="selectionchange"&&(xN.has(r)||ad(r,!1,e),ad(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[jl]||(t[jl]=!0,ad("selectionchange",!1,t))}}function k0(e,t,r,n){switch(c0(t)){case 1:var s=AS;break;case 4:s=IS;break;default:s=Bh}r=s.bind(null,t,r,e),s=void 0,!sf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function ld(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=qs(l),a===null)return;if(c=a.tag,c===5||c===6){n=i=a;continue e}l=l.parentNode}}n=n.return}Yx(function(){var u=i,f=Fh(r),h=[];e:{var m=S0.get(e);if(m!==void 0){var g=Wh,y=e;switch(e){case"keypress":if(Yl(r)===0)break e;case"keydown":case"keyup":g=GS;break;case"focusin":y="focus",g=td;break;case"focusout":y="blur",g=td;break;case"beforeblur":case"afterblur":g=td;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Kp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=MS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=JS;break;case y0:case b0:case _0:g=$S;break;case j0:g=ZS;break;case"scroll":g=OS;break;case"wheel":g=tN;break;case"copy":case"cut":case"paste":g=US;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Yp}var p=(t&4)!==0,b=!p&&e==="scroll",w=p?m!==null?m+"Capture":null:m;p=[];for(var v=u,x;v!==null;){x=v;var _=x.stateNode;if(x.tag===5&&_!==null&&(x=_,w!==null&&(_=Sa(v,w),_!=null&&p.push(Ra(v,_,x)))),b)break;v=v.return}0<p.length&&(m=new g(m,y,null,r,f),h.push({event:m,listeners:p}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",m&&r!==rf&&(y=r.relatedTarget||r.fromElement)&&(qs(y)||y[Cn]))break e;if((g||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,g?(y=r.relatedTarget||r.toElement,g=u,y=y?qs(y):null,y!==null&&(b=ho(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=u),g!==y)){if(p=Kp,_="onMouseLeave",w="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(p=Yp,_="onPointerLeave",w="onPointerEnter",v="pointer"),b=g==null?m:Fo(g),x=y==null?m:Fo(y),m=new p(_,v+"leave",g,r,f),m.target=b,m.relatedTarget=x,_=null,qs(f)===u&&(p=new p(w,v+"enter",y,r,f),p.target=x,p.relatedTarget=b,_=p),b=_,g&&y)t:{for(p=g,w=y,v=0,x=p;x;x=wo(x))v++;for(x=0,_=w;_;_=wo(_))x++;for(;0<v-x;)p=wo(p),v--;for(;0<x-v;)w=wo(w),x--;for(;v--;){if(p===w||w!==null&&p===w.alternate)break t;p=wo(p),w=wo(w)}p=null}else p=null;g!==null&&ig(h,m,g,p,!1),y!==null&&b!==null&&ig(h,b,y,p,!0)}}e:{if(m=u?Fo(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var j=lN;else if(Xp(m))if(p0)j=fN;else{j=uN;var N=cN}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=dN);if(j&&(j=j(e,u))){m0(h,j,r,f);break e}N&&N(e,m,u),e==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&Jd(m,"number",m.value)}switch(N=u?Fo(u):window,e){case"focusin":(Xp(N)||N.contentEditable==="true")&&(Mo=N,uf=u,ua=null);break;case"focusout":ua=uf=Mo=null;break;case"mousedown":df=!0;break;case"contextmenu":case"mouseup":case"dragend":df=!1,ng(h,r,f);break;case"selectionchange":if(pN)break;case"keydown":case"keyup":ng(h,r,f)}var S;if(Hh)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Do?f0(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(d0&&r.locale!=="ko"&&(Do||k!=="onCompositionStart"?k==="onCompositionEnd"&&Do&&(S=u0()):(rs=f,Vh="value"in rs?rs.value:rs.textContent,Do=!0)),N=xc(u,k),0<N.length&&(k=new Gp(k,e,null,r,f),h.push({event:k,listeners:N}),S?k.data=S:(S=h0(r),S!==null&&(k.data=S)))),(S=nN?sN(e,r):oN(e,r))&&(u=xc(u,"onBeforeInput"),0<u.length&&(f=new Gp("onBeforeInput","beforeinput",null,r,f),h.push({event:f,listeners:u}),f.data=S))}N0(h,t)})}function Ra(e,t,r){return{instance:e,listener:t,currentTarget:r}}function xc(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Sa(e,r),i!=null&&n.unshift(Ra(e,i,s)),i=Sa(e,t),i!=null&&n.push(Ra(e,i,s))),e=e.return}return n}function wo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ig(e,t,r,n,s){for(var i=t._reactName,a=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Sa(r,i),c!=null&&a.unshift(Ra(r,c,l))):s||(c=Sa(r,i),c!=null&&a.push(Ra(r,c,l)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var wN=/\r\n?/g,yN=/\u0000|\uFFFD/g;function ag(e){return(typeof e=="string"?e:""+e).replace(wN,`
`).replace(yN,"")}function Sl(e,t,r){if(t=ag(t),ag(e)!==t&&r)throw Error(ce(425))}function wc(){}var ff=null,hf=null;function mf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pf=typeof setTimeout=="function"?setTimeout:void 0,bN=typeof clearTimeout=="function"?clearTimeout:void 0,lg=typeof Promise=="function"?Promise:void 0,_N=typeof queueMicrotask=="function"?queueMicrotask:typeof lg<"u"?function(e){return lg.resolve(null).then(e).catch(jN)}:pf;function jN(e){setTimeout(function(){throw e})}function cd(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Ca(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Ca(t)}function cs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function cg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ci=Math.random().toString(36).slice(2),an="__reactFiber$"+Ci,Aa="__reactProps$"+Ci,Cn="__reactContainer$"+Ci,gf="__reactEvents$"+Ci,SN="__reactListeners$"+Ci,NN="__reactHandles$"+Ci;function qs(e){var t=e[an];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Cn]||r[an]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=cg(e);e!==null;){if(r=e[an])return r;e=cg(e)}return t}e=r,r=e.parentNode}return null}function Xa(e){return e=e[an]||e[Cn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Fo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ce(33))}function Xc(e){return e[Aa]||null}var vf=[],$o=-1;function Ss(e){return{current:e}}function ot(e){0>$o||(e.current=vf[$o],vf[$o]=null,$o--)}function et(e,t){$o++,vf[$o]=e.current,e.current=t}var gs={},Gt=Ss(gs),ur=Ss(!1),to=gs;function di(e,t){var r=e.type.contextTypes;if(!r)return gs;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function dr(e){return e=e.childContextTypes,e!=null}function yc(){ot(ur),ot(Gt)}function ug(e,t,r){if(Gt.current!==gs)throw Error(ce(168));et(Gt,t),et(ur,r)}function C0(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(ce(108,cS(e)||"Unknown",s));return ut({},r,n)}function bc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gs,to=Gt.current,et(Gt,e),et(ur,ur.current),!0}function dg(e,t,r){var n=e.stateNode;if(!n)throw Error(ce(169));r?(e=C0(e,t,to),n.__reactInternalMemoizedMergedChildContext=e,ot(ur),ot(Gt),et(Gt,e)):ot(ur),et(ur,r)}var bn=null,Zc=!1,ud=!1;function E0(e){bn===null?bn=[e]:bn.push(e)}function kN(e){Zc=!0,E0(e)}function Ns(){if(!ud&&bn!==null){ud=!0;var e=0,t=He;try{var r=bn;for(He=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}bn=null,Zc=!1}catch(s){throw bn!==null&&(bn=bn.slice(e+1)),Zx($h,Ns),s}finally{He=t,ud=!1}}return null}var zo=[],Uo=0,_c=null,jc=0,Pr=[],Tr=0,ro=null,_n=1,jn="";function Ls(e,t){zo[Uo++]=jc,zo[Uo++]=_c,_c=e,jc=t}function P0(e,t,r){Pr[Tr++]=_n,Pr[Tr++]=jn,Pr[Tr++]=ro,ro=e;var n=_n;e=jn;var s=32-Kr(n)-1;n&=~(1<<s),r+=1;var i=32-Kr(t)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,_n=1<<32-Kr(t)+s|r<<s|n,jn=i+e}else _n=1<<i|r<<s|n,jn=e}function Gh(e){e.return!==null&&(Ls(e,1),P0(e,1,0))}function Yh(e){for(;e===_c;)_c=zo[--Uo],zo[Uo]=null,jc=zo[--Uo],zo[Uo]=null;for(;e===ro;)ro=Pr[--Tr],Pr[Tr]=null,jn=Pr[--Tr],Pr[Tr]=null,_n=Pr[--Tr],Pr[Tr]=null}var br=null,yr=null,at=!1,qr=null;function T0(e,t){var r=Rr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function fg(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,br=e,yr=cs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,br=e,yr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ro!==null?{id:_n,overflow:jn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Rr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,br=e,yr=null,!0):!1;default:return!1}}function xf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function wf(e){if(at){var t=yr;if(t){var r=t;if(!fg(e,t)){if(xf(e))throw Error(ce(418));t=cs(r.nextSibling);var n=br;t&&fg(e,t)?T0(n,r):(e.flags=e.flags&-4097|2,at=!1,br=e)}}else{if(xf(e))throw Error(ce(418));e.flags=e.flags&-4097|2,at=!1,br=e}}}function hg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;br=e}function Nl(e){if(e!==br)return!1;if(!at)return hg(e),at=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!mf(e.type,e.memoizedProps)),t&&(t=yr)){if(xf(e))throw R0(),Error(ce(418));for(;t;)T0(e,t),t=cs(t.nextSibling)}if(hg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ce(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){yr=cs(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}yr=null}}else yr=br?cs(e.stateNode.nextSibling):null;return!0}function R0(){for(var e=yr;e;)e=cs(e.nextSibling)}function fi(){yr=br=null,at=!1}function Qh(e){qr===null?qr=[e]:qr.push(e)}var CN=On.ReactCurrentBatchConfig;function Hi(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ce(309));var n=r.stateNode}if(!n)throw Error(ce(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(ce(284));if(!r._owner)throw Error(ce(290,e))}return e}function kl(e,t){throw e=Object.prototype.toString.call(t),Error(ce(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function mg(e){var t=e._init;return t(e._payload)}function A0(e){function t(w,v){if(e){var x=w.deletions;x===null?(w.deletions=[v],w.flags|=16):x.push(v)}}function r(w,v){if(!e)return null;for(;v!==null;)t(w,v),v=v.sibling;return null}function n(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function s(w,v){return w=hs(w,v),w.index=0,w.sibling=null,w}function i(w,v,x){return w.index=x,e?(x=w.alternate,x!==null?(x=x.index,x<v?(w.flags|=2,v):x):(w.flags|=2,v)):(w.flags|=1048576,v)}function a(w){return e&&w.alternate===null&&(w.flags|=2),w}function l(w,v,x,_){return v===null||v.tag!==6?(v=vd(x,w.mode,_),v.return=w,v):(v=s(v,x),v.return=w,v)}function c(w,v,x,_){var j=x.type;return j===Oo?f(w,v,x.props.children,_,x.key):v!==null&&(v.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===qn&&mg(j)===v.type)?(_=s(v,x.props),_.ref=Hi(w,v,x),_.return=w,_):(_=rc(x.type,x.key,x.props,null,w.mode,_),_.ref=Hi(w,v,x),_.return=w,_)}function u(w,v,x,_){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=xd(x,w.mode,_),v.return=w,v):(v=s(v,x.children||[]),v.return=w,v)}function f(w,v,x,_,j){return v===null||v.tag!==7?(v=eo(x,w.mode,_,j),v.return=w,v):(v=s(v,x),v.return=w,v)}function h(w,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=vd(""+v,w.mode,x),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case pl:return x=rc(v.type,v.key,v.props,null,w.mode,x),x.ref=Hi(w,null,v),x.return=w,x;case Io:return v=xd(v,w.mode,x),v.return=w,v;case qn:var _=v._init;return h(w,_(v._payload),x)}if(ea(v)||Ui(v))return v=eo(v,w.mode,x,null),v.return=w,v;kl(w,v)}return null}function m(w,v,x,_){var j=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return j!==null?null:l(w,v,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case pl:return x.key===j?c(w,v,x,_):null;case Io:return x.key===j?u(w,v,x,_):null;case qn:return j=x._init,m(w,v,j(x._payload),_)}if(ea(x)||Ui(x))return j!==null?null:f(w,v,x,_,null);kl(w,x)}return null}function g(w,v,x,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return w=w.get(x)||null,l(v,w,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case pl:return w=w.get(_.key===null?x:_.key)||null,c(v,w,_,j);case Io:return w=w.get(_.key===null?x:_.key)||null,u(v,w,_,j);case qn:var N=_._init;return g(w,v,x,N(_._payload),j)}if(ea(_)||Ui(_))return w=w.get(x)||null,f(v,w,_,j,null);kl(v,_)}return null}function y(w,v,x,_){for(var j=null,N=null,S=v,k=v=0,U=null;S!==null&&k<x.length;k++){S.index>k?(U=S,S=null):U=S.sibling;var W=m(w,S,x[k],_);if(W===null){S===null&&(S=U);break}e&&S&&W.alternate===null&&t(w,S),v=i(W,v,k),N===null?j=W:N.sibling=W,N=W,S=U}if(k===x.length)return r(w,S),at&&Ls(w,k),j;if(S===null){for(;k<x.length;k++)S=h(w,x[k],_),S!==null&&(v=i(S,v,k),N===null?j=S:N.sibling=S,N=S);return at&&Ls(w,k),j}for(S=n(w,S);k<x.length;k++)U=g(S,w,k,x[k],_),U!==null&&(e&&U.alternate!==null&&S.delete(U.key===null?k:U.key),v=i(U,v,k),N===null?j=U:N.sibling=U,N=U);return e&&S.forEach(function(V){return t(w,V)}),at&&Ls(w,k),j}function p(w,v,x,_){var j=Ui(x);if(typeof j!="function")throw Error(ce(150));if(x=j.call(x),x==null)throw Error(ce(151));for(var N=j=null,S=v,k=v=0,U=null,W=x.next();S!==null&&!W.done;k++,W=x.next()){S.index>k?(U=S,S=null):U=S.sibling;var V=m(w,S,W.value,_);if(V===null){S===null&&(S=U);break}e&&S&&V.alternate===null&&t(w,S),v=i(V,v,k),N===null?j=V:N.sibling=V,N=V,S=U}if(W.done)return r(w,S),at&&Ls(w,k),j;if(S===null){for(;!W.done;k++,W=x.next())W=h(w,W.value,_),W!==null&&(v=i(W,v,k),N===null?j=W:N.sibling=W,N=W);return at&&Ls(w,k),j}for(S=n(w,S);!W.done;k++,W=x.next())W=g(S,w,k,W.value,_),W!==null&&(e&&W.alternate!==null&&S.delete(W.key===null?k:W.key),v=i(W,v,k),N===null?j=W:N.sibling=W,N=W);return e&&S.forEach(function(q){return t(w,q)}),at&&Ls(w,k),j}function b(w,v,x,_){if(typeof x=="object"&&x!==null&&x.type===Oo&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case pl:e:{for(var j=x.key,N=v;N!==null;){if(N.key===j){if(j=x.type,j===Oo){if(N.tag===7){r(w,N.sibling),v=s(N,x.props.children),v.return=w,w=v;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===qn&&mg(j)===N.type){r(w,N.sibling),v=s(N,x.props),v.ref=Hi(w,N,x),v.return=w,w=v;break e}r(w,N);break}else t(w,N);N=N.sibling}x.type===Oo?(v=eo(x.props.children,w.mode,_,x.key),v.return=w,w=v):(_=rc(x.type,x.key,x.props,null,w.mode,_),_.ref=Hi(w,v,x),_.return=w,w=_)}return a(w);case Io:e:{for(N=x.key;v!==null;){if(v.key===N)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){r(w,v.sibling),v=s(v,x.children||[]),v.return=w,w=v;break e}else{r(w,v);break}else t(w,v);v=v.sibling}v=xd(x,w.mode,_),v.return=w,w=v}return a(w);case qn:return N=x._init,b(w,v,N(x._payload),_)}if(ea(x))return y(w,v,x,_);if(Ui(x))return p(w,v,x,_);kl(w,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(r(w,v.sibling),v=s(v,x),v.return=w,w=v):(r(w,v),v=vd(x,w.mode,_),v.return=w,w=v),a(w)):r(w,v)}return b}var hi=A0(!0),I0=A0(!1),Sc=Ss(null),Nc=null,Bo=null,Jh=null;function Xh(){Jh=Bo=Nc=null}function Zh(e){var t=Sc.current;ot(Sc),e._currentValue=t}function yf(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Yo(e,t){Nc=e,Jh=Bo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(cr=!0),e.firstContext=null)}function Or(e){var t=e._currentValue;if(Jh!==e)if(e={context:e,memoizedValue:t,next:null},Bo===null){if(Nc===null)throw Error(ce(308));Bo=e,Nc.dependencies={lanes:0,firstContext:e}}else Bo=Bo.next=e;return t}var Hs=null;function em(e){Hs===null?Hs=[e]:Hs.push(e)}function O0(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,em(t)):(r.next=s.next,s.next=r),t.interleaved=r,En(e,n)}function En(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Hn=!1;function tm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function D0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Sn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function us(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Le&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,En(e,r)}return s=n.interleaved,s===null?(t.next=t,em(n)):(t.next=s.next,s.next=t),n.interleaved=t,En(e,r)}function Ql(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,zh(e,r)}}function pg(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function kc(e,t,r,n){var s=e.updateQueue;Hn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;a=0,f=u=c=null,l=i;do{var m=l.lane,g=l.eventTime;if((n&m)===m){f!==null&&(f=f.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,p=l;switch(m=t,g=r,p.tag){case 1:if(y=p.payload,typeof y=="function"){h=y.call(g,h,m);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=p.payload,m=typeof y=="function"?y.call(g,h,m):y,m==null)break e;h=ut({},h,m);break e;case 2:Hn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else g={eventTime:g,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=g,c=h):f=f.next=g,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(f===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);so|=a,e.lanes=a,e.memoizedState=h}}function gg(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ce(191,s));s.call(n)}}}var Za={},cn=Ss(Za),Ia=Ss(Za),Oa=Ss(Za);function Ks(e){if(e===Za)throw Error(ce(174));return e}function rm(e,t){switch(et(Oa,t),et(Ia,e),et(cn,Za),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Zd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Zd(t,e)}ot(cn),et(cn,t)}function mi(){ot(cn),ot(Ia),ot(Oa)}function M0(e){Ks(Oa.current);var t=Ks(cn.current),r=Zd(t,e.type);t!==r&&(et(Ia,e),et(cn,r))}function nm(e){Ia.current===e&&(ot(cn),ot(Ia))}var lt=Ss(0);function Cc(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var dd=[];function sm(){for(var e=0;e<dd.length;e++)dd[e]._workInProgressVersionPrimary=null;dd.length=0}var Jl=On.ReactCurrentDispatcher,fd=On.ReactCurrentBatchConfig,no=0,ct=null,wt=null,Nt=null,Ec=!1,da=!1,Da=0,EN=0;function Bt(){throw Error(ce(321))}function om(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Yr(e[r],t[r]))return!1;return!0}function im(e,t,r,n,s,i){if(no=i,ct=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Jl.current=e===null||e.memoizedState===null?AN:IN,e=r(n,s),da){i=0;do{if(da=!1,Da=0,25<=i)throw Error(ce(301));i+=1,Nt=wt=null,t.updateQueue=null,Jl.current=ON,e=r(n,s)}while(da)}if(Jl.current=Pc,t=wt!==null&&wt.next!==null,no=0,Nt=wt=ct=null,Ec=!1,t)throw Error(ce(300));return e}function am(){var e=Da!==0;return Da=0,e}function rn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?ct.memoizedState=Nt=e:Nt=Nt.next=e,Nt}function Dr(){if(wt===null){var e=ct.alternate;e=e!==null?e.memoizedState:null}else e=wt.next;var t=Nt===null?ct.memoizedState:Nt.next;if(t!==null)Nt=t,wt=e;else{if(e===null)throw Error(ce(310));wt=e,e={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},Nt===null?ct.memoizedState=Nt=e:Nt=Nt.next=e}return Nt}function Ma(e,t){return typeof t=="function"?t(e):t}function hd(e){var t=Dr(),r=t.queue;if(r===null)throw Error(ce(311));r.lastRenderedReducer=e;var n=wt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=a=null,c=null,u=i;do{var f=u.lane;if((no&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=n):c=c.next=h,ct.lanes|=f,so|=f}u=u.next}while(u!==null&&u!==i);c===null?a=n:c.next=l,Yr(n,t.memoizedState)||(cr=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,ct.lanes|=i,so|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function md(e){var t=Dr(),r=t.queue;if(r===null)throw Error(ce(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);Yr(i,t.memoizedState)||(cr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function L0(){}function F0(e,t){var r=ct,n=Dr(),s=t(),i=!Yr(n.memoizedState,s);if(i&&(n.memoizedState=s,cr=!0),n=n.queue,lm(U0.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Nt!==null&&Nt.memoizedState.tag&1){if(r.flags|=2048,La(9,z0.bind(null,r,n,s,t),void 0,null),Pt===null)throw Error(ce(349));no&30||$0(r,t,s)}return s}function $0(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ct.updateQueue,t===null?(t={lastEffect:null,stores:null},ct.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function z0(e,t,r,n){t.value=r,t.getSnapshot=n,B0(t)&&V0(e)}function U0(e,t,r){return r(function(){B0(t)&&V0(e)})}function B0(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Yr(e,r)}catch{return!0}}function V0(e){var t=En(e,1);t!==null&&Gr(t,e,1,-1)}function vg(e){var t=rn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:e},t.queue=e,e=e.dispatch=RN.bind(null,ct,e),[t.memoizedState,e]}function La(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ct.updateQueue,t===null?(t={lastEffect:null,stores:null},ct.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function W0(){return Dr().memoizedState}function Xl(e,t,r,n){var s=rn();ct.flags|=e,s.memoizedState=La(1|t,r,void 0,n===void 0?null:n)}function eu(e,t,r,n){var s=Dr();n=n===void 0?null:n;var i=void 0;if(wt!==null){var a=wt.memoizedState;if(i=a.destroy,n!==null&&om(n,a.deps)){s.memoizedState=La(t,r,i,n);return}}ct.flags|=e,s.memoizedState=La(1|t,r,i,n)}function xg(e,t){return Xl(8390656,8,e,t)}function lm(e,t){return eu(2048,8,e,t)}function q0(e,t){return eu(4,2,e,t)}function H0(e,t){return eu(4,4,e,t)}function K0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function G0(e,t,r){return r=r!=null?r.concat([e]):null,eu(4,4,K0.bind(null,t,e),r)}function cm(){}function Y0(e,t){var r=Dr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&om(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Q0(e,t){var r=Dr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&om(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function J0(e,t,r){return no&21?(Yr(r,t)||(r=r0(),ct.lanes|=r,so|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,cr=!0),e.memoizedState=r)}function PN(e,t){var r=He;He=r!==0&&4>r?r:4,e(!0);var n=fd.transition;fd.transition={};try{e(!1),t()}finally{He=r,fd.transition=n}}function X0(){return Dr().memoizedState}function TN(e,t,r){var n=fs(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Z0(e))ew(t,r);else if(r=O0(e,t,r,n),r!==null){var s=Zt();Gr(r,e,n,s),tw(r,t,n)}}function RN(e,t,r){var n=fs(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Z0(e))ew(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,r);if(s.hasEagerState=!0,s.eagerState=l,Yr(l,a)){var c=t.interleaved;c===null?(s.next=s,em(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=O0(e,t,s,n),r!==null&&(s=Zt(),Gr(r,e,n,s),tw(r,t,n))}}function Z0(e){var t=e.alternate;return e===ct||t!==null&&t===ct}function ew(e,t){da=Ec=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function tw(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,zh(e,r)}}var Pc={readContext:Or,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},AN={readContext:Or,useCallback:function(e,t){return rn().memoizedState=[e,t===void 0?null:t],e},useContext:Or,useEffect:xg,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Xl(4194308,4,K0.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Xl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Xl(4,2,e,t)},useMemo:function(e,t){var r=rn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=rn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=TN.bind(null,ct,e),[n.memoizedState,e]},useRef:function(e){var t=rn();return e={current:e},t.memoizedState=e},useState:vg,useDebugValue:cm,useDeferredValue:function(e){return rn().memoizedState=e},useTransition:function(){var e=vg(!1),t=e[0];return e=PN.bind(null,e[1]),rn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ct,s=rn();if(at){if(r===void 0)throw Error(ce(407));r=r()}else{if(r=t(),Pt===null)throw Error(ce(349));no&30||$0(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,xg(U0.bind(null,n,i,e),[e]),n.flags|=2048,La(9,z0.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=rn(),t=Pt.identifierPrefix;if(at){var r=jn,n=_n;r=(n&~(1<<32-Kr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Da++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=EN++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},IN={readContext:Or,useCallback:Y0,useContext:Or,useEffect:lm,useImperativeHandle:G0,useInsertionEffect:q0,useLayoutEffect:H0,useMemo:Q0,useReducer:hd,useRef:W0,useState:function(){return hd(Ma)},useDebugValue:cm,useDeferredValue:function(e){var t=Dr();return J0(t,wt.memoizedState,e)},useTransition:function(){var e=hd(Ma)[0],t=Dr().memoizedState;return[e,t]},useMutableSource:L0,useSyncExternalStore:F0,useId:X0,unstable_isNewReconciler:!1},ON={readContext:Or,useCallback:Y0,useContext:Or,useEffect:lm,useImperativeHandle:G0,useInsertionEffect:q0,useLayoutEffect:H0,useMemo:Q0,useReducer:md,useRef:W0,useState:function(){return md(Ma)},useDebugValue:cm,useDeferredValue:function(e){var t=Dr();return wt===null?t.memoizedState=e:J0(t,wt.memoizedState,e)},useTransition:function(){var e=md(Ma)[0],t=Dr().memoizedState;return[e,t]},useMutableSource:L0,useSyncExternalStore:F0,useId:X0,unstable_isNewReconciler:!1};function zr(e,t){if(e&&e.defaultProps){t=ut({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function bf(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ut({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var tu={isMounted:function(e){return(e=e._reactInternals)?ho(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Zt(),s=fs(e),i=Sn(n,s);i.payload=t,r!=null&&(i.callback=r),t=us(e,i,s),t!==null&&(Gr(t,e,s,n),Ql(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Zt(),s=fs(e),i=Sn(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=us(e,i,s),t!==null&&(Gr(t,e,s,n),Ql(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Zt(),n=fs(e),s=Sn(r,n);s.tag=2,t!=null&&(s.callback=t),t=us(e,s,n),t!==null&&(Gr(t,e,n,r),Ql(t,e,n))}};function wg(e,t,r,n,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,a):t.prototype&&t.prototype.isPureReactComponent?!Pa(r,n)||!Pa(s,i):!0}function rw(e,t,r){var n=!1,s=gs,i=t.contextType;return typeof i=="object"&&i!==null?i=Or(i):(s=dr(t)?to:Gt.current,n=t.contextTypes,i=(n=n!=null)?di(e,s):gs),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=tu,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function yg(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&tu.enqueueReplaceState(t,t.state,null)}function _f(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},tm(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Or(i):(i=dr(t)?to:Gt.current,s.context=di(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(bf(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&tu.enqueueReplaceState(s,s.state,null),kc(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function pi(e,t){try{var r="",n=t;do r+=lS(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function pd(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function jf(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var DN=typeof WeakMap=="function"?WeakMap:Map;function nw(e,t,r){r=Sn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Rc||(Rc=!0,If=n),jf(e,t)},r}function sw(e,t,r){r=Sn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){jf(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){jf(e,t),typeof n!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function bg(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new DN;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=YN.bind(null,e,t,r),t.then(e,e))}function _g(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function jg(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Sn(-1,1),t.tag=2,us(r,t,1))),r.lanes|=1),e)}var MN=On.ReactCurrentOwner,cr=!1;function Jt(e,t,r,n){t.child=e===null?I0(t,null,r,n):hi(t,e.child,r,n)}function Sg(e,t,r,n,s){r=r.render;var i=t.ref;return Yo(t,s),n=im(e,t,r,n,i,s),r=am(),e!==null&&!cr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Pn(e,t,s)):(at&&r&&Gh(t),t.flags|=1,Jt(e,t,n,s),t.child)}function Ng(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!vm(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,ow(e,t,i,n,s)):(e=rc(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:Pa,r(a,n)&&e.ref===t.ref)return Pn(e,t,s)}return t.flags|=1,e=hs(i,n),e.ref=t.ref,e.return=t,t.child=e}function ow(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Pa(i,n)&&e.ref===t.ref)if(cr=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(cr=!0);else return t.lanes=e.lanes,Pn(e,t,s)}return Sf(e,t,r,n,s)}function iw(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(Wo,xr),xr|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,et(Wo,xr),xr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,et(Wo,xr),xr|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,et(Wo,xr),xr|=n;return Jt(e,t,s,r),t.child}function aw(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Sf(e,t,r,n,s){var i=dr(r)?to:Gt.current;return i=di(t,i),Yo(t,s),r=im(e,t,r,n,i,s),n=am(),e!==null&&!cr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Pn(e,t,s)):(at&&n&&Gh(t),t.flags|=1,Jt(e,t,r,s),t.child)}function kg(e,t,r,n,s){if(dr(r)){var i=!0;bc(t)}else i=!1;if(Yo(t,s),t.stateNode===null)Zl(e,t),rw(t,r,n),_f(t,r,n,s),n=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Or(u):(u=dr(r)?to:Gt.current,u=di(t,u));var f=r.getDerivedStateFromProps,h=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==u)&&yg(t,a,n,u),Hn=!1;var m=t.memoizedState;a.state=m,kc(t,n,a,s),c=t.memoizedState,l!==n||m!==c||ur.current||Hn?(typeof f=="function"&&(bf(t,r,f,n),c=t.memoizedState),(l=Hn||wg(t,r,l,n,m,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=u,n=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,D0(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:zr(t.type,l),a.props=u,h=t.pendingProps,m=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Or(c):(c=dr(r)?to:Gt.current,c=di(t,c));var g=r.getDerivedStateFromProps;(f=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||m!==c)&&yg(t,a,n,c),Hn=!1,m=t.memoizedState,a.state=m,kc(t,n,a,s);var y=t.memoizedState;l!==h||m!==y||ur.current||Hn?(typeof g=="function"&&(bf(t,r,g,n),y=t.memoizedState),(u=Hn||wg(t,r,u,n,m,y,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,y,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),a.props=n,a.state=y,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return Nf(e,t,r,n,i,s)}function Nf(e,t,r,n,s,i){aw(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return s&&dg(t,r,!1),Pn(e,t,i);n=t.stateNode,MN.current=t;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=hi(t,e.child,null,i),t.child=hi(t,null,l,i)):Jt(e,t,l,i),t.memoizedState=n.state,s&&dg(t,r,!0),t.child}function lw(e){var t=e.stateNode;t.pendingContext?ug(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ug(e,t.context,!1),rm(e,t.containerInfo)}function Cg(e,t,r,n,s){return fi(),Qh(s),t.flags|=256,Jt(e,t,r,n),t.child}var kf={dehydrated:null,treeContext:null,retryLane:0};function Cf(e){return{baseLanes:e,cachePool:null,transitions:null}}function cw(e,t,r){var n=t.pendingProps,s=lt.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),et(lt,s&1),e===null)return wf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,i?(n=t.mode,i=t.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=su(a,n,0,null),e=eo(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Cf(r),t.memoizedState=kf,e):um(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return LN(e,t,a,n,l,s,r);if(i){i=n.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=hs(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=hs(l,i):(i=eo(i,a,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,a=e.child.memoizedState,a=a===null?Cf(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~r,t.memoizedState=kf,n}return i=e.child,e=i.sibling,n=hs(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function um(e,t){return t=su({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Cl(e,t,r,n){return n!==null&&Qh(n),hi(t,e.child,null,r),e=um(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function LN(e,t,r,n,s,i,a){if(r)return t.flags&256?(t.flags&=-257,n=pd(Error(ce(422))),Cl(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=su({mode:"visible",children:n.children},s,0,null),i=eo(i,s,a,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&hi(t,e.child,null,a),t.child.memoizedState=Cf(a),t.memoizedState=kf,i);if(!(t.mode&1))return Cl(e,t,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(ce(419)),n=pd(i,n,void 0),Cl(e,t,a,n)}if(l=(a&e.childLanes)!==0,cr||l){if(n=Pt,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,En(e,s),Gr(n,e,s,-1))}return gm(),n=pd(Error(ce(421))),Cl(e,t,a,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=QN.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,yr=cs(s.nextSibling),br=t,at=!0,qr=null,e!==null&&(Pr[Tr++]=_n,Pr[Tr++]=jn,Pr[Tr++]=ro,_n=e.id,jn=e.overflow,ro=t),t=um(t,n.children),t.flags|=4096,t)}function Eg(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),yf(e.return,t,r)}function gd(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function uw(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Jt(e,t,n.children,r),n=lt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Eg(e,r,t);else if(e.tag===19)Eg(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(et(lt,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Cc(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),gd(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Cc(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}gd(t,!0,r,null,i);break;case"together":gd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Pn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),so|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ce(153));if(t.child!==null){for(e=t.child,r=hs(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=hs(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function FN(e,t,r){switch(t.tag){case 3:lw(t),fi();break;case 5:M0(t);break;case 1:dr(t.type)&&bc(t);break;case 4:rm(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;et(Sc,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(et(lt,lt.current&1),t.flags|=128,null):r&t.child.childLanes?cw(e,t,r):(et(lt,lt.current&1),e=Pn(e,t,r),e!==null?e.sibling:null);et(lt,lt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return uw(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),et(lt,lt.current),n)break;return null;case 22:case 23:return t.lanes=0,iw(e,t,r)}return Pn(e,t,r)}var dw,Ef,fw,hw;dw=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ef=function(){};fw=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Ks(cn.current);var i=null;switch(r){case"input":s=Yd(e,s),n=Yd(e,n),i=[];break;case"select":s=ut({},s,{value:void 0}),n=ut({},n,{value:void 0}),i=[];break;case"textarea":s=Xd(e,s),n=Xd(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=wc)}ef(r,n);var a;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(_a.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(_a.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&st("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};hw=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ki(e,t){if(!at)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function $N(e,t,r){var n=t.pendingProps;switch(Yh(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(t),null;case 1:return dr(t.type)&&yc(),Vt(t),null;case 3:return n=t.stateNode,mi(),ot(ur),ot(Gt),sm(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Nl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,qr!==null&&(Mf(qr),qr=null))),Ef(e,t),Vt(t),null;case 5:nm(t);var s=Ks(Oa.current);if(r=t.type,e!==null&&t.stateNode!=null)fw(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ce(166));return Vt(t),null}if(e=Ks(cn.current),Nl(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[an]=t,n[Aa]=i,e=(t.mode&1)!==0,r){case"dialog":st("cancel",n),st("close",n);break;case"iframe":case"object":case"embed":st("load",n);break;case"video":case"audio":for(s=0;s<ra.length;s++)st(ra[s],n);break;case"source":st("error",n);break;case"img":case"image":case"link":st("error",n),st("load",n);break;case"details":st("toggle",n);break;case"input":Lp(n,i),st("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},st("invalid",n);break;case"textarea":$p(n,i),st("invalid",n)}ef(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Sl(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Sl(n.textContent,l,e),s=["children",""+l]):_a.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&st("scroll",n)}switch(r){case"input":gl(n),Fp(n,i,!0);break;case"textarea":gl(n),zp(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=wc)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ux(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[an]=t,e[Aa]=n,dw(e,t,!1,!1),t.stateNode=e;e:{switch(a=tf(r,n),r){case"dialog":st("cancel",e),st("close",e),s=n;break;case"iframe":case"object":case"embed":st("load",e),s=n;break;case"video":case"audio":for(s=0;s<ra.length;s++)st(ra[s],e);s=n;break;case"source":st("error",e),s=n;break;case"img":case"image":case"link":st("error",e),st("load",e),s=n;break;case"details":st("toggle",e),s=n;break;case"input":Lp(e,n),s=Yd(e,n),st("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=ut({},n,{value:void 0}),st("invalid",e);break;case"textarea":$p(e,n),s=Xd(e,n),st("invalid",e);break;default:s=n}ef(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Wx(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Bx(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ja(e,c):typeof c=="number"&&ja(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(_a.hasOwnProperty(i)?c!=null&&i==="onScroll"&&st("scroll",e):c!=null&&Oh(e,i,c,a))}switch(r){case"input":gl(e),Fp(e,n,!1);break;case"textarea":gl(e),zp(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ps(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?qo(e,!!n.multiple,i,!1):n.defaultValue!=null&&qo(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=wc)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Vt(t),null;case 6:if(e&&t.stateNode!=null)hw(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ce(166));if(r=Ks(Oa.current),Ks(cn.current),Nl(t)){if(n=t.stateNode,r=t.memoizedProps,n[an]=t,(i=n.nodeValue!==r)&&(e=br,e!==null))switch(e.tag){case 3:Sl(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Sl(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[an]=t,t.stateNode=n}return Vt(t),null;case 13:if(ot(lt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(at&&yr!==null&&t.mode&1&&!(t.flags&128))R0(),fi(),t.flags|=98560,i=!1;else if(i=Nl(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(ce(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ce(317));i[an]=t}else fi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Vt(t),i=!1}else qr!==null&&(Mf(qr),qr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||lt.current&1?yt===0&&(yt=3):gm())),t.updateQueue!==null&&(t.flags|=4),Vt(t),null);case 4:return mi(),Ef(e,t),e===null&&Ta(t.stateNode.containerInfo),Vt(t),null;case 10:return Zh(t.type._context),Vt(t),null;case 17:return dr(t.type)&&yc(),Vt(t),null;case 19:if(ot(lt),i=t.memoizedState,i===null)return Vt(t),null;if(n=(t.flags&128)!==0,a=i.rendering,a===null)if(n)Ki(i,!1);else{if(yt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Cc(e),a!==null){for(t.flags|=128,Ki(i,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return et(lt,lt.current&1|2),t.child}e=e.sibling}i.tail!==null&&mt()>gi&&(t.flags|=128,n=!0,Ki(i,!1),t.lanes=4194304)}else{if(!n)if(e=Cc(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ki(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!at)return Vt(t),null}else 2*mt()-i.renderingStartTime>gi&&r!==1073741824&&(t.flags|=128,n=!0,Ki(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(r=i.last,r!==null?r.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=mt(),t.sibling=null,r=lt.current,et(lt,n?r&1|2:r&1),t):(Vt(t),null);case 22:case 23:return pm(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?xr&1073741824&&(Vt(t),t.subtreeFlags&6&&(t.flags|=8192)):Vt(t),null;case 24:return null;case 25:return null}throw Error(ce(156,t.tag))}function zN(e,t){switch(Yh(t),t.tag){case 1:return dr(t.type)&&yc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return mi(),ot(ur),ot(Gt),sm(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return nm(t),null;case 13:if(ot(lt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ce(340));fi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ot(lt),null;case 4:return mi(),null;case 10:return Zh(t.type._context),null;case 22:case 23:return pm(),null;case 24:return null;default:return null}}var El=!1,Ht=!1,UN=typeof WeakSet=="function"?WeakSet:Set,be=null;function Vo(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ft(e,t,n)}else r.current=null}function Pf(e,t,r){try{r()}catch(n){ft(e,t,n)}}var Pg=!1;function BN(e,t){if(ff=gc,e=x0(),Kh(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,f=0,h=e,m=null;t:for(;;){for(var g;h!==r||s!==0&&h.nodeType!==3||(l=a+s),h!==i||n!==0&&h.nodeType!==3||(c=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===e)break t;if(m===r&&++u===s&&(l=a),m===i&&++f===n&&(c=a),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(hf={focusedElem:e,selectionRange:r},gc=!1,be=t;be!==null;)if(t=be,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,be=e;else for(;be!==null;){t=be;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var p=y.memoizedProps,b=y.memoizedState,w=t.stateNode,v=w.getSnapshotBeforeUpdate(t.elementType===t.type?p:zr(t.type,p),b);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(_){ft(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,be=e;break}be=t.return}return y=Pg,Pg=!1,y}function fa(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Pf(t,r,i)}s=s.next}while(s!==n)}}function ru(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Tf(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function mw(e){var t=e.alternate;t!==null&&(e.alternate=null,mw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[an],delete t[Aa],delete t[gf],delete t[SN],delete t[NN])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function pw(e){return e.tag===5||e.tag===3||e.tag===4}function Tg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||pw(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Rf(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=wc));else if(n!==4&&(e=e.child,e!==null))for(Rf(e,t,r),e=e.sibling;e!==null;)Rf(e,t,r),e=e.sibling}function Af(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Af(e,t,r),e=e.sibling;e!==null;)Af(e,t,r),e=e.sibling}var Ot=null,Vr=!1;function Fn(e,t,r){for(r=r.child;r!==null;)gw(e,t,r),r=r.sibling}function gw(e,t,r){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(Gc,r)}catch{}switch(r.tag){case 5:Ht||Vo(r,t);case 6:var n=Ot,s=Vr;Ot=null,Fn(e,t,r),Ot=n,Vr=s,Ot!==null&&(Vr?(e=Ot,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ot.removeChild(r.stateNode));break;case 18:Ot!==null&&(Vr?(e=Ot,r=r.stateNode,e.nodeType===8?cd(e.parentNode,r):e.nodeType===1&&cd(e,r),Ca(e)):cd(Ot,r.stateNode));break;case 4:n=Ot,s=Vr,Ot=r.stateNode.containerInfo,Vr=!0,Fn(e,t,r),Ot=n,Vr=s;break;case 0:case 11:case 14:case 15:if(!Ht&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Pf(r,t,a),s=s.next}while(s!==n)}Fn(e,t,r);break;case 1:if(!Ht&&(Vo(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ft(r,t,l)}Fn(e,t,r);break;case 21:Fn(e,t,r);break;case 22:r.mode&1?(Ht=(n=Ht)||r.memoizedState!==null,Fn(e,t,r),Ht=n):Fn(e,t,r);break;default:Fn(e,t,r)}}function Rg(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new UN),t.forEach(function(n){var s=JN.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Lr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:Ot=l.stateNode,Vr=!1;break e;case 3:Ot=l.stateNode.containerInfo,Vr=!0;break e;case 4:Ot=l.stateNode.containerInfo,Vr=!0;break e}l=l.return}if(Ot===null)throw Error(ce(160));gw(i,a,s),Ot=null,Vr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ft(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)vw(t,e),t=t.sibling}function vw(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Lr(t,e),tn(e),n&4){try{fa(3,e,e.return),ru(3,e)}catch(p){ft(e,e.return,p)}try{fa(5,e,e.return)}catch(p){ft(e,e.return,p)}}break;case 1:Lr(t,e),tn(e),n&512&&r!==null&&Vo(r,r.return);break;case 5:if(Lr(t,e),tn(e),n&512&&r!==null&&Vo(r,r.return),e.flags&32){var s=e.stateNode;try{ja(s,"")}catch(p){ft(e,e.return,p)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&$x(s,i),tf(l,a);var u=tf(l,i);for(a=0;a<c.length;a+=2){var f=c[a],h=c[a+1];f==="style"?Wx(s,h):f==="dangerouslySetInnerHTML"?Bx(s,h):f==="children"?ja(s,h):Oh(s,f,h,u)}switch(l){case"input":Qd(s,i);break;case"textarea":zx(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?qo(s,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?qo(s,!!i.multiple,i.defaultValue,!0):qo(s,!!i.multiple,i.multiple?[]:"",!1))}s[Aa]=i}catch(p){ft(e,e.return,p)}}break;case 6:if(Lr(t,e),tn(e),n&4){if(e.stateNode===null)throw Error(ce(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(p){ft(e,e.return,p)}}break;case 3:if(Lr(t,e),tn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ca(t.containerInfo)}catch(p){ft(e,e.return,p)}break;case 4:Lr(t,e),tn(e);break;case 13:Lr(t,e),tn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(hm=mt())),n&4&&Rg(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(Ht=(u=Ht)||f,Lr(t,e),Ht=u):Lr(t,e),tn(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(be=e,f=e.child;f!==null;){for(h=be=f;be!==null;){switch(m=be,g=m.child,m.tag){case 0:case 11:case 14:case 15:fa(4,m,m.return);break;case 1:Vo(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(p){ft(n,r,p)}}break;case 5:Vo(m,m.return);break;case 22:if(m.memoizedState!==null){Ig(h);continue}}g!==null?(g.return=m,be=g):Ig(h)}f=f.sibling}e:for(f=null,h=e;;){if(h.tag===5){if(f===null){f=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Vx("display",a))}catch(p){ft(e,e.return,p)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(p){ft(e,e.return,p)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Lr(t,e),tn(e),n&4&&Rg(e);break;case 21:break;default:Lr(t,e),tn(e)}}function tn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(pw(r)){var n=r;break e}r=r.return}throw Error(ce(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(ja(s,""),n.flags&=-33);var i=Tg(e);Af(e,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=Tg(e);Rf(e,l,a);break;default:throw Error(ce(161))}}catch(c){ft(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function VN(e,t,r){be=e,xw(e)}function xw(e,t,r){for(var n=(e.mode&1)!==0;be!==null;){var s=be,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||El;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ht;l=El;var u=Ht;if(El=a,(Ht=c)&&!u)for(be=s;be!==null;)a=be,c=a.child,a.tag===22&&a.memoizedState!==null?Og(s):c!==null?(c.return=a,be=c):Og(s);for(;i!==null;)be=i,xw(i),i=i.sibling;be=s,El=l,Ht=u}Ag(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,be=i):Ag(e)}}function Ag(e){for(;be!==null;){var t=be;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ht||ru(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ht)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:zr(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&gg(t,i,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}gg(t,a,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&Ca(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}Ht||t.flags&512&&Tf(t)}catch(m){ft(t,t.return,m)}}if(t===e){be=null;break}if(r=t.sibling,r!==null){r.return=t.return,be=r;break}be=t.return}}function Ig(e){for(;be!==null;){var t=be;if(t===e){be=null;break}var r=t.sibling;if(r!==null){r.return=t.return,be=r;break}be=t.return}}function Og(e){for(;be!==null;){var t=be;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ru(4,t)}catch(c){ft(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){ft(t,s,c)}}var i=t.return;try{Tf(t)}catch(c){ft(t,i,c)}break;case 5:var a=t.return;try{Tf(t)}catch(c){ft(t,a,c)}}}catch(c){ft(t,t.return,c)}if(t===e){be=null;break}var l=t.sibling;if(l!==null){l.return=t.return,be=l;break}be=t.return}}var WN=Math.ceil,Tc=On.ReactCurrentDispatcher,dm=On.ReactCurrentOwner,Ar=On.ReactCurrentBatchConfig,Le=0,Pt=null,gt=null,Dt=0,xr=0,Wo=Ss(0),yt=0,Fa=null,so=0,nu=0,fm=0,ha=null,ar=null,hm=0,gi=1/0,wn=null,Rc=!1,If=null,ds=null,Pl=!1,ns=null,Ac=0,ma=0,Of=null,ec=-1,tc=0;function Zt(){return Le&6?mt():ec!==-1?ec:ec=mt()}function fs(e){return e.mode&1?Le&2&&Dt!==0?Dt&-Dt:CN.transition!==null?(tc===0&&(tc=r0()),tc):(e=He,e!==0||(e=window.event,e=e===void 0?16:c0(e.type)),e):1}function Gr(e,t,r,n){if(50<ma)throw ma=0,Of=null,Error(ce(185));Qa(e,r,n),(!(Le&2)||e!==Pt)&&(e===Pt&&(!(Le&2)&&(nu|=r),yt===4&&Yn(e,Dt)),fr(e,n),r===1&&Le===0&&!(t.mode&1)&&(gi=mt()+500,Zc&&Ns()))}function fr(e,t){var r=e.callbackNode;CS(e,t);var n=pc(e,e===Pt?Dt:0);if(n===0)r!==null&&Vp(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Vp(r),t===1)e.tag===0?kN(Dg.bind(null,e)):E0(Dg.bind(null,e)),_N(function(){!(Le&6)&&Ns()}),r=null;else{switch(n0(n)){case 1:r=$h;break;case 4:r=e0;break;case 16:r=mc;break;case 536870912:r=t0;break;default:r=mc}r=kw(r,ww.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ww(e,t){if(ec=-1,tc=0,Le&6)throw Error(ce(327));var r=e.callbackNode;if(Qo()&&e.callbackNode!==r)return null;var n=pc(e,e===Pt?Dt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ic(e,n);else{t=n;var s=Le;Le|=2;var i=bw();(Pt!==e||Dt!==t)&&(wn=null,gi=mt()+500,Zs(e,t));do try{KN();break}catch(l){yw(e,l)}while(!0);Xh(),Tc.current=i,Le=s,gt!==null?t=0:(Pt=null,Dt=0,t=yt)}if(t!==0){if(t===2&&(s=af(e),s!==0&&(n=s,t=Df(e,s))),t===1)throw r=Fa,Zs(e,0),Yn(e,n),fr(e,mt()),r;if(t===6)Yn(e,n);else{if(s=e.current.alternate,!(n&30)&&!qN(s)&&(t=Ic(e,n),t===2&&(i=af(e),i!==0&&(n=i,t=Df(e,i))),t===1))throw r=Fa,Zs(e,0),Yn(e,n),fr(e,mt()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(ce(345));case 2:Fs(e,ar,wn);break;case 3:if(Yn(e,n),(n&130023424)===n&&(t=hm+500-mt(),10<t)){if(pc(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Zt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=pf(Fs.bind(null,e,ar,wn),t);break}Fs(e,ar,wn);break;case 4:if(Yn(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var a=31-Kr(n);i=1<<a,a=t[a],a>s&&(s=a),n&=~i}if(n=s,n=mt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*WN(n/1960))-n,10<n){e.timeoutHandle=pf(Fs.bind(null,e,ar,wn),n);break}Fs(e,ar,wn);break;case 5:Fs(e,ar,wn);break;default:throw Error(ce(329))}}}return fr(e,mt()),e.callbackNode===r?ww.bind(null,e):null}function Df(e,t){var r=ha;return e.current.memoizedState.isDehydrated&&(Zs(e,t).flags|=256),e=Ic(e,t),e!==2&&(t=ar,ar=r,t!==null&&Mf(t)),e}function Mf(e){ar===null?ar=e:ar.push.apply(ar,e)}function qN(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Yr(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yn(e,t){for(t&=~fm,t&=~nu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Kr(t),n=1<<r;e[r]=-1,t&=~n}}function Dg(e){if(Le&6)throw Error(ce(327));Qo();var t=pc(e,0);if(!(t&1))return fr(e,mt()),null;var r=Ic(e,t);if(e.tag!==0&&r===2){var n=af(e);n!==0&&(t=n,r=Df(e,n))}if(r===1)throw r=Fa,Zs(e,0),Yn(e,t),fr(e,mt()),r;if(r===6)throw Error(ce(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fs(e,ar,wn),fr(e,mt()),null}function mm(e,t){var r=Le;Le|=1;try{return e(t)}finally{Le=r,Le===0&&(gi=mt()+500,Zc&&Ns())}}function oo(e){ns!==null&&ns.tag===0&&!(Le&6)&&Qo();var t=Le;Le|=1;var r=Ar.transition,n=He;try{if(Ar.transition=null,He=1,e)return e()}finally{He=n,Ar.transition=r,Le=t,!(Le&6)&&Ns()}}function pm(){xr=Wo.current,ot(Wo)}function Zs(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,bN(r)),gt!==null)for(r=gt.return;r!==null;){var n=r;switch(Yh(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&yc();break;case 3:mi(),ot(ur),ot(Gt),sm();break;case 5:nm(n);break;case 4:mi();break;case 13:ot(lt);break;case 19:ot(lt);break;case 10:Zh(n.type._context);break;case 22:case 23:pm()}r=r.return}if(Pt=e,gt=e=hs(e.current,null),Dt=xr=t,yt=0,Fa=null,fm=nu=so=0,ar=ha=null,Hs!==null){for(t=0;t<Hs.length;t++)if(r=Hs[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}Hs=null}return e}function yw(e,t){do{var r=gt;try{if(Xh(),Jl.current=Pc,Ec){for(var n=ct.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ec=!1}if(no=0,Nt=wt=ct=null,da=!1,Da=0,dm.current=null,r===null||r.return===null){yt=1,Fa=t,gt=null;break}e:{var i=e,a=r.return,l=r,c=t;if(t=Dt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=l,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=_g(a);if(g!==null){g.flags&=-257,jg(g,a,l,i,t),g.mode&1&&bg(i,u,t),t=g,c=u;var y=t.updateQueue;if(y===null){var p=new Set;p.add(c),t.updateQueue=p}else y.add(c);break e}else{if(!(t&1)){bg(i,u,t),gm();break e}c=Error(ce(426))}}else if(at&&l.mode&1){var b=_g(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),jg(b,a,l,i,t),Qh(pi(c,l));break e}}i=c=pi(c,l),yt!==4&&(yt=2),ha===null?ha=[i]:ha.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var w=nw(i,c,t);pg(i,w);break e;case 1:l=c;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ds===null||!ds.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=sw(i,l,t);pg(i,_);break e}}i=i.return}while(i!==null)}jw(r)}catch(j){t=j,gt===r&&r!==null&&(gt=r=r.return);continue}break}while(!0)}function bw(){var e=Tc.current;return Tc.current=Pc,e===null?Pc:e}function gm(){(yt===0||yt===3||yt===2)&&(yt=4),Pt===null||!(so&268435455)&&!(nu&268435455)||Yn(Pt,Dt)}function Ic(e,t){var r=Le;Le|=2;var n=bw();(Pt!==e||Dt!==t)&&(wn=null,Zs(e,t));do try{HN();break}catch(s){yw(e,s)}while(!0);if(Xh(),Le=r,Tc.current=n,gt!==null)throw Error(ce(261));return Pt=null,Dt=0,yt}function HN(){for(;gt!==null;)_w(gt)}function KN(){for(;gt!==null&&!xS();)_w(gt)}function _w(e){var t=Nw(e.alternate,e,xr);e.memoizedProps=e.pendingProps,t===null?jw(e):gt=t,dm.current=null}function jw(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=zN(r,t),r!==null){r.flags&=32767,gt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{yt=6,gt=null;return}}else if(r=$N(r,t,xr),r!==null){gt=r;return}if(t=t.sibling,t!==null){gt=t;return}gt=t=e}while(t!==null);yt===0&&(yt=5)}function Fs(e,t,r){var n=He,s=Ar.transition;try{Ar.transition=null,He=1,GN(e,t,r,n)}finally{Ar.transition=s,He=n}return null}function GN(e,t,r,n){do Qo();while(ns!==null);if(Le&6)throw Error(ce(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ce(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(ES(e,i),e===Pt&&(gt=Pt=null,Dt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Pl||(Pl=!0,kw(mc,function(){return Qo(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ar.transition,Ar.transition=null;var a=He;He=1;var l=Le;Le|=4,dm.current=null,BN(e,r),vw(r,e),mN(hf),gc=!!ff,hf=ff=null,e.current=r,VN(r),wS(),Le=l,He=a,Ar.transition=i}else e.current=r;if(Pl&&(Pl=!1,ns=e,Ac=s),i=e.pendingLanes,i===0&&(ds=null),_S(r.stateNode),fr(e,mt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Rc)throw Rc=!1,e=If,If=null,e;return Ac&1&&e.tag!==0&&Qo(),i=e.pendingLanes,i&1?e===Of?ma++:(ma=0,Of=e):ma=0,Ns(),null}function Qo(){if(ns!==null){var e=n0(Ac),t=Ar.transition,r=He;try{if(Ar.transition=null,He=16>e?16:e,ns===null)var n=!1;else{if(e=ns,ns=null,Ac=0,Le&6)throw Error(ce(331));var s=Le;for(Le|=4,be=e.current;be!==null;){var i=be,a=i.child;if(be.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(be=u;be!==null;){var f=be;switch(f.tag){case 0:case 11:case 15:fa(8,f,i)}var h=f.child;if(h!==null)h.return=f,be=h;else for(;be!==null;){f=be;var m=f.sibling,g=f.return;if(mw(f),f===u){be=null;break}if(m!==null){m.return=g,be=m;break}be=g}}}var y=i.alternate;if(y!==null){var p=y.child;if(p!==null){y.child=null;do{var b=p.sibling;p.sibling=null,p=b}while(p!==null)}}be=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,be=a;else e:for(;be!==null;){if(i=be,i.flags&2048)switch(i.tag){case 0:case 11:case 15:fa(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,be=w;break e}be=i.return}}var v=e.current;for(be=v;be!==null;){a=be;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,be=x;else e:for(a=v;be!==null;){if(l=be,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ru(9,l)}}catch(j){ft(l,l.return,j)}if(l===a){be=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,be=_;break e}be=l.return}}if(Le=s,Ns(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(Gc,e)}catch{}n=!0}return n}finally{He=r,Ar.transition=t}}return!1}function Mg(e,t,r){t=pi(r,t),t=nw(e,t,1),e=us(e,t,1),t=Zt(),e!==null&&(Qa(e,1,t),fr(e,t))}function ft(e,t,r){if(e.tag===3)Mg(e,e,r);else for(;t!==null;){if(t.tag===3){Mg(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ds===null||!ds.has(n))){e=pi(r,e),e=sw(t,e,1),t=us(t,e,1),e=Zt(),t!==null&&(Qa(t,1,e),fr(t,e));break}}t=t.return}}function YN(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Zt(),e.pingedLanes|=e.suspendedLanes&r,Pt===e&&(Dt&r)===r&&(yt===4||yt===3&&(Dt&130023424)===Dt&&500>mt()-hm?Zs(e,0):fm|=r),fr(e,t)}function Sw(e,t){t===0&&(e.mode&1?(t=wl,wl<<=1,!(wl&130023424)&&(wl=4194304)):t=1);var r=Zt();e=En(e,t),e!==null&&(Qa(e,t,r),fr(e,r))}function QN(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Sw(e,r)}function JN(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ce(314))}n!==null&&n.delete(t),Sw(e,r)}var Nw;Nw=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ur.current)cr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return cr=!1,FN(e,t,r);cr=!!(e.flags&131072)}else cr=!1,at&&t.flags&1048576&&P0(t,jc,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Zl(e,t),e=t.pendingProps;var s=di(t,Gt.current);Yo(t,r),s=im(null,t,n,e,s,r);var i=am();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,dr(n)?(i=!0,bc(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,tm(t),s.updater=tu,t.stateNode=s,s._reactInternals=t,_f(t,n,e,r),t=Nf(null,t,n,!0,i,r)):(t.tag=0,at&&i&&Gh(t),Jt(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Zl(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=ZN(n),e=zr(n,e),s){case 0:t=Sf(null,t,n,e,r);break e;case 1:t=kg(null,t,n,e,r);break e;case 11:t=Sg(null,t,n,e,r);break e;case 14:t=Ng(null,t,n,zr(n.type,e),r);break e}throw Error(ce(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:zr(n,s),Sf(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:zr(n,s),kg(e,t,n,s,r);case 3:e:{if(lw(t),e===null)throw Error(ce(387));n=t.pendingProps,i=t.memoizedState,s=i.element,D0(e,t),kc(t,n,null,r);var a=t.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=pi(Error(ce(423)),t),t=Cg(e,t,n,r,s);break e}else if(n!==s){s=pi(Error(ce(424)),t),t=Cg(e,t,n,r,s);break e}else for(yr=cs(t.stateNode.containerInfo.firstChild),br=t,at=!0,qr=null,r=I0(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(fi(),n===s){t=Pn(e,t,r);break e}Jt(e,t,n,r)}t=t.child}return t;case 5:return M0(t),e===null&&wf(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,mf(n,s)?a=null:i!==null&&mf(n,i)&&(t.flags|=32),aw(e,t),Jt(e,t,a,r),t.child;case 6:return e===null&&wf(t),null;case 13:return cw(e,t,r);case 4:return rm(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=hi(t,null,n,r):Jt(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:zr(n,s),Sg(e,t,n,s,r);case 7:return Jt(e,t,t.pendingProps,r),t.child;case 8:return Jt(e,t,t.pendingProps.children,r),t.child;case 12:return Jt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,et(Sc,n._currentValue),n._currentValue=a,i!==null)if(Yr(i.value,a)){if(i.children===s.children&&!ur.current){t=Pn(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Sn(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),yf(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(ce(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),yf(a,r,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Jt(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Yo(t,r),s=Or(s),n=n(s),t.flags|=1,Jt(e,t,n,r),t.child;case 14:return n=t.type,s=zr(n,t.pendingProps),s=zr(n.type,s),Ng(e,t,n,s,r);case 15:return ow(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:zr(n,s),Zl(e,t),t.tag=1,dr(n)?(e=!0,bc(t)):e=!1,Yo(t,r),rw(t,n,s),_f(t,n,s,r),Nf(null,t,n,!0,e,r);case 19:return uw(e,t,r);case 22:return iw(e,t,r)}throw Error(ce(156,t.tag))};function kw(e,t){return Zx(e,t)}function XN(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(e,t,r,n){return new XN(e,t,r,n)}function vm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ZN(e){if(typeof e=="function")return vm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Mh)return 11;if(e===Lh)return 14}return 2}function hs(e,t){var r=e.alternate;return r===null?(r=Rr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function rc(e,t,r,n,s,i){var a=2;if(n=e,typeof e=="function")vm(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Oo:return eo(r.children,s,i,t);case Dh:a=8,s|=8;break;case qd:return e=Rr(12,r,t,s|2),e.elementType=qd,e.lanes=i,e;case Hd:return e=Rr(13,r,t,s),e.elementType=Hd,e.lanes=i,e;case Kd:return e=Rr(19,r,t,s),e.elementType=Kd,e.lanes=i,e;case Mx:return su(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ox:a=10;break e;case Dx:a=9;break e;case Mh:a=11;break e;case Lh:a=14;break e;case qn:a=16,n=null;break e}throw Error(ce(130,e==null?e:typeof e,""))}return t=Rr(a,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function eo(e,t,r,n){return e=Rr(7,e,n,t),e.lanes=r,e}function su(e,t,r,n){return e=Rr(22,e,n,t),e.elementType=Mx,e.lanes=r,e.stateNode={isHidden:!1},e}function vd(e,t,r){return e=Rr(6,e,null,t),e.lanes=r,e}function xd(e,t,r){return t=Rr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ek(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xu(0),this.expirationTimes=Xu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xu(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function xm(e,t,r,n,s,i,a,l,c){return e=new ek(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Rr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},tm(i),e}function tk(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Io,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Cw(e){if(!e)return gs;e=e._reactInternals;e:{if(ho(e)!==e||e.tag!==1)throw Error(ce(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(dr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ce(171))}if(e.tag===1){var r=e.type;if(dr(r))return C0(e,r,t)}return t}function Ew(e,t,r,n,s,i,a,l,c){return e=xm(r,n,!0,e,s,i,a,l,c),e.context=Cw(null),r=e.current,n=Zt(),s=fs(r),i=Sn(n,s),i.callback=t??null,us(r,i,s),e.current.lanes=s,Qa(e,s,n),fr(e,n),e}function ou(e,t,r,n){var s=t.current,i=Zt(),a=fs(s);return r=Cw(r),t.context===null?t.context=r:t.pendingContext=r,t=Sn(i,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=us(s,t,a),e!==null&&(Gr(e,s,a,i),Ql(e,s,a)),a}function Oc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Lg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function wm(e,t){Lg(e,t),(e=e.alternate)&&Lg(e,t)}function rk(){return null}var Pw=typeof reportError=="function"?reportError:function(e){console.error(e)};function ym(e){this._internalRoot=e}iu.prototype.render=ym.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ce(409));ou(e,t,null,null)};iu.prototype.unmount=ym.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;oo(function(){ou(null,e,null,null)}),t[Cn]=null}};function iu(e){this._internalRoot=e}iu.prototype.unstable_scheduleHydration=function(e){if(e){var t=i0();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Gn.length&&t!==0&&t<Gn[r].priority;r++);Gn.splice(r,0,e),r===0&&l0(e)}};function bm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function au(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Fg(){}function nk(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Oc(a);i.call(u)}}var a=Ew(t,n,e,0,null,!1,!1,"",Fg);return e._reactRootContainer=a,e[Cn]=a.current,Ta(e.nodeType===8?e.parentNode:e),oo(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Oc(c);l.call(u)}}var c=xm(e,0,!1,null,null,!1,!1,"",Fg);return e._reactRootContainer=c,e[Cn]=c.current,Ta(e.nodeType===8?e.parentNode:e),oo(function(){ou(t,c,r,n)}),c}function lu(e,t,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Oc(a);l.call(c)}}ou(t,a,e,s)}else a=nk(r,t,e,s,n);return Oc(a)}s0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ta(t.pendingLanes);r!==0&&(zh(t,r|1),fr(t,mt()),!(Le&6)&&(gi=mt()+500,Ns()))}break;case 13:oo(function(){var n=En(e,1);if(n!==null){var s=Zt();Gr(n,e,1,s)}}),wm(e,1)}};Uh=function(e){if(e.tag===13){var t=En(e,134217728);if(t!==null){var r=Zt();Gr(t,e,134217728,r)}wm(e,134217728)}};o0=function(e){if(e.tag===13){var t=fs(e),r=En(e,t);if(r!==null){var n=Zt();Gr(r,e,t,n)}wm(e,t)}};i0=function(){return He};a0=function(e,t){var r=He;try{return He=e,t()}finally{He=r}};nf=function(e,t,r){switch(t){case"input":if(Qd(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Xc(n);if(!s)throw Error(ce(90));Fx(n),Qd(n,s)}}}break;case"textarea":zx(e,r);break;case"select":t=r.value,t!=null&&qo(e,!!r.multiple,t,!1)}};Kx=mm;Gx=oo;var sk={usingClientEntryPoint:!1,Events:[Xa,Fo,Xc,qx,Hx,mm]},Gi={findFiberByHostInstance:qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ok={bundleType:Gi.bundleType,version:Gi.version,rendererPackageName:Gi.rendererPackageName,rendererConfig:Gi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:On.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Jx(e),e===null?null:e.stateNode},findFiberByHostInstance:Gi.findFiberByHostInstance||rk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tl.isDisabled&&Tl.supportsFiber)try{Gc=Tl.inject(ok),ln=Tl}catch{}}Sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sk;Sr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bm(t))throw Error(ce(200));return tk(e,t,null,r)};Sr.createRoot=function(e,t){if(!bm(e))throw Error(ce(299));var r=!1,n="",s=Pw;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=xm(e,1,!1,null,null,r,!1,n,s),e[Cn]=t.current,Ta(e.nodeType===8?e.parentNode:e),new ym(t)};Sr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ce(188)):(e=Object.keys(e).join(","),Error(ce(268,e)));return e=Jx(t),e=e===null?null:e.stateNode,e};Sr.flushSync=function(e){return oo(e)};Sr.hydrate=function(e,t,r){if(!au(t))throw Error(ce(200));return lu(null,e,t,!0,r)};Sr.hydrateRoot=function(e,t,r){if(!bm(e))throw Error(ce(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=Pw;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=Ew(t,null,e,1,r??null,s,!1,i,a),e[Cn]=t.current,Ta(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new iu(t)};Sr.render=function(e,t,r){if(!au(t))throw Error(ce(200));return lu(null,e,t,!1,r)};Sr.unmountComponentAtNode=function(e){if(!au(e))throw Error(ce(40));return e._reactRootContainer?(oo(function(){lu(null,null,e,!1,function(){e._reactRootContainer=null,e[Cn]=null})}),!0):!1};Sr.unstable_batchedUpdates=mm;Sr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!au(r))throw Error(ce(200));if(e==null||e._reactInternals===void 0)throw Error(ce(38));return lu(e,t,r,!1,n)};Sr.version="18.3.1-next-f1338f8080-20240426";function Tw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Tw)}catch(e){console.error(e)}}Tw(),Tx.exports=Sr;var mo=Tx.exports;const Rw=Ch(mo);var Aw,$g=mo;Aw=$g.createRoot,$g.hydrateRoot;const ik=1,ak=1e6;let wd=0;function lk(){return wd=(wd+1)%Number.MAX_SAFE_INTEGER,wd.toString()}const yd=new Map,zg=e=>{if(yd.has(e))return;const t=setTimeout(()=>{yd.delete(e),pa({type:"REMOVE_TOAST",toastId:e})},ak);yd.set(e,t)},ck=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,ik)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?zg(r):e.toasts.forEach(n=>{zg(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},nc=[];let sc={toasts:[]};function pa(e){sc=ck(sc,e),nc.forEach(t=>{t(sc)})}function $s({...e}){const t=lk(),r=s=>pa({type:"UPDATE_TOAST",toast:{...s,id:t}}),n=()=>pa({type:"DISMISS_TOAST",toastId:t});return pa({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||n()}}}),{id:t,dismiss:n,update:r}}function Ft(){const[e,t]=d.useState(sc);return d.useEffect(()=>(nc.push(t),()=>{const r=nc.indexOf(t);r>-1&&nc.splice(r,1)}),[e]),{...e,toast:$s,dismiss:r=>pa({type:"DISMISS_TOAST",toastId:r})}}function Se(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function uk(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Iw(...e){return t=>e.forEach(r=>uk(r,t))}function Ke(...e){return d.useCallback(Iw(...e),e)}function dk(e,t=[]){let r=[];function n(i,a){const l=d.createContext(a),c=r.length;r=[...r,a];function u(h){const{scope:m,children:g,...y}=h,p=(m==null?void 0:m[e][c])||l,b=d.useMemo(()=>y,Object.values(y));return o.jsx(p.Provider,{value:b,children:g})}function f(h,m){const g=(m==null?void 0:m[e][c])||l,y=d.useContext(g);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,f]}const s=()=>{const i=r.map(a=>d.createContext(a));return function(l){const c=(l==null?void 0:l[e])||i;return d.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,fk(s,...t)]}function fk(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}var vs=d.forwardRef((e,t)=>{const{children:r,...n}=e,s=d.Children.toArray(r),i=s.find(hk);if(i){const a=i.props.children,l=s.map(c=>c===i?d.Children.count(a)>1?d.Children.only(null):d.isValidElement(a)?a.props.children:null:c);return o.jsx(Lf,{...n,ref:t,children:d.isValidElement(a)?d.cloneElement(a,void 0,l):null})}return o.jsx(Lf,{...n,ref:t,children:r})});vs.displayName="Slot";var Lf=d.forwardRef((e,t)=>{const{children:r,...n}=e;if(d.isValidElement(r)){const s=pk(r);return d.cloneElement(r,{...mk(n,r.props),ref:t?Iw(t,s):s})}return d.Children.count(r)>1?d.Children.only(null):null});Lf.displayName="SlotClone";var Ow=({children:e})=>o.jsx(o.Fragment,{children:e});function hk(e){return d.isValidElement(e)&&e.type===Ow}function mk(e,t){const r={...t};for(const n in t){const s=e[n],i=t[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{i(...l),s(...l)}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}function pk(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function _m(e){const t=e+"CollectionProvider",[r,n]=dk(t),[s,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:y,children:p}=g,b=fe.useRef(null),w=fe.useRef(new Map).current;return o.jsx(s,{scope:y,itemMap:w,collectionRef:b,children:p})};a.displayName=t;const l=e+"CollectionSlot",c=fe.forwardRef((g,y)=>{const{scope:p,children:b}=g,w=i(l,p),v=Ke(y,w.collectionRef);return o.jsx(vs,{ref:v,children:b})});c.displayName=l;const u=e+"CollectionItemSlot",f="data-radix-collection-item",h=fe.forwardRef((g,y)=>{const{scope:p,children:b,...w}=g,v=fe.useRef(null),x=Ke(y,v),_=i(u,p);return fe.useEffect(()=>(_.itemMap.set(v,{ref:v,...w}),()=>void _.itemMap.delete(v))),o.jsx(vs,{[f]:"",ref:x,children:b})});h.displayName=u;function m(g){const y=i(e+"CollectionConsumer",g);return fe.useCallback(()=>{const b=y.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${f}]`));return Array.from(y.itemMap.values()).sort((_,j)=>w.indexOf(_.ref.current)-w.indexOf(j.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:a,Slot:c,ItemSlot:h},m,n]}function gk(e,t){const r=d.createContext(t),n=i=>{const{children:a,...l}=i,c=d.useMemo(()=>l,Object.values(l));return o.jsx(r.Provider,{value:c,children:a})};n.displayName=e+"Provider";function s(i){const a=d.useContext(r);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,s]}function ks(e,t=[]){let r=[];function n(i,a){const l=d.createContext(a),c=r.length;r=[...r,a];const u=h=>{var w;const{scope:m,children:g,...y}=h,p=((w=m==null?void 0:m[e])==null?void 0:w[c])||l,b=d.useMemo(()=>y,Object.values(y));return o.jsx(p.Provider,{value:b,children:g})};u.displayName=i+"Provider";function f(h,m){var p;const g=((p=m==null?void 0:m[e])==null?void 0:p[c])||l,y=d.useContext(g);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,f]}const s=()=>{const i=r.map(a=>d.createContext(a));return function(l){const c=(l==null?void 0:l[e])||i;return d.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,vk(s,...t)]}function vk(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}var xk=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ce=xk.reduce((e,t)=>{const r=d.forwardRef((n,s)=>{const{asChild:i,...a}=n,l=i?vs:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Dw(e,t){e&&mo.flushSync(()=>e.dispatchEvent(t))}function er(e){const t=d.useRef(e);return d.useEffect(()=>{t.current=e}),d.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function wk(e,t=globalThis==null?void 0:globalThis.document){const r=er(e);d.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var yk="DismissableLayer",Ff="dismissableLayer.update",bk="dismissableLayer.pointerDownOutside",_k="dismissableLayer.focusOutside",Ug,Mw=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ei=d.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=e,u=d.useContext(Mw),[f,h]=d.useState(null),m=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=d.useState({}),y=Ke(t,S=>h(S)),p=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=p.indexOf(b),v=f?p.indexOf(f):-1,x=u.layersWithOutsidePointerEventsDisabled.size>0,_=v>=w,j=Sk(S=>{const k=S.target,U=[...u.branches].some(W=>W.contains(k));!_||U||(s==null||s(S),a==null||a(S),S.defaultPrevented||l==null||l())},m),N=Nk(S=>{const k=S.target;[...u.branches].some(W=>W.contains(k))||(i==null||i(S),a==null||a(S),S.defaultPrevented||l==null||l())},m);return wk(S=>{v===u.layers.size-1&&(n==null||n(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},m),d.useEffect(()=>{if(f)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Ug=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),Bg(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Ug)}},[f,m,r,u]),d.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),Bg())},[f,u]),d.useEffect(()=>{const S=()=>g({});return document.addEventListener(Ff,S),()=>document.removeEventListener(Ff,S)},[]),o.jsx(Ce.div,{...c,ref:y,style:{pointerEvents:x?_?"auto":"none":void 0,...e.style},onFocusCapture:Se(e.onFocusCapture,N.onFocusCapture),onBlurCapture:Se(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:Se(e.onPointerDownCapture,j.onPointerDownCapture)})});Ei.displayName=yk;var jk="DismissableLayerBranch",Lw=d.forwardRef((e,t)=>{const r=d.useContext(Mw),n=d.useRef(null),s=Ke(t,n);return d.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),o.jsx(Ce.div,{...e,ref:s})});Lw.displayName=jk;function Sk(e,t=globalThis==null?void 0:globalThis.document){const r=er(e),n=d.useRef(!1),s=d.useRef(()=>{});return d.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){Fw(bk,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);n.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",i),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function Nk(e,t=globalThis==null?void 0:globalThis.document){const r=er(e),n=d.useRef(!1);return d.useEffect(()=>{const s=i=>{i.target&&!n.current&&Fw(_k,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Bg(){const e=new CustomEvent(Ff);document.dispatchEvent(e)}function Fw(e,t,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Dw(s,i):s.dispatchEvent(i)}var kk=Ei,Ck=Lw,Tt=globalThis!=null&&globalThis.document?d.useLayoutEffect:()=>{},Ek="Portal",el=d.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[s,i]=d.useState(!1);Tt(()=>i(!0),[]);const a=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?Rw.createPortal(o.jsx(Ce.div,{...n,ref:t}),a):null});el.displayName=Ek;function Pk(e,t){return d.useReducer((r,n)=>t[r][n]??r,e)}var Dn=e=>{const{present:t,children:r}=e,n=Tk(t),s=typeof r=="function"?r({present:n.isPresent}):d.Children.only(r),i=Ke(n.ref,Rk(s));return typeof r=="function"||n.isPresent?d.cloneElement(s,{ref:i}):null};Dn.displayName="Presence";function Tk(e){const[t,r]=d.useState(),n=d.useRef({}),s=d.useRef(e),i=d.useRef("none"),a=e?"mounted":"unmounted",[l,c]=Pk(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const u=Rl(n.current);i.current=l==="mounted"?u:"none"},[l]),Tt(()=>{const u=n.current,f=s.current;if(f!==e){const m=i.current,g=Rl(u);e?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(f&&m!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),Tt(()=>{if(t){let u;const f=t.ownerDocument.defaultView??window,h=g=>{const p=Rl(n.current).includes(g.animationName);if(g.target===t&&p&&(c("ANIMATION_END"),!s.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",u=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},m=g=>{g.target===t&&(i.current=Rl(n.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:d.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function Rl(e){return(e==null?void 0:e.animationName)||"none"}function Rk(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function xs({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=Ak({defaultProp:t,onChange:r}),i=e!==void 0,a=i?e:n,l=er(r),c=d.useCallback(u=>{if(i){const h=typeof u=="function"?u(e):u;h!==e&&l(h)}else s(u)},[i,e,s,l]);return[a,c]}function Ak({defaultProp:e,onChange:t}){const r=d.useState(e),[n]=r,s=d.useRef(n),i=er(t);return d.useEffect(()=>{s.current!==n&&(i(n),s.current=n)},[n,s,i]),r}var Ik="VisuallyHidden",tl=d.forwardRef((e,t)=>o.jsx(Ce.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));tl.displayName=Ik;var Ok=tl,jm="ToastProvider",[Sm,Dk,Mk]=_m("Toast"),[$w,PD]=ks("Toast",[Mk]),[Lk,cu]=$w(jm),zw=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=e,[l,c]=d.useState(null),[u,f]=d.useState(0),h=d.useRef(!1),m=d.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${jm}\`. Expected non-empty \`string\`.`),o.jsx(Sm.Provider,{scope:t,children:o.jsx(Lk,{scope:t,label:r,duration:n,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:d.useCallback(()=>f(g=>g+1),[]),onToastRemove:d.useCallback(()=>f(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:a})})};zw.displayName=jm;var Uw="ToastViewport",Fk=["F8"],$f="toast.viewportPause",zf="toast.viewportResume",Bw=d.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=Fk,label:s="Notifications ({hotkey})",...i}=e,a=cu(Uw,r),l=Dk(r),c=d.useRef(null),u=d.useRef(null),f=d.useRef(null),h=d.useRef(null),m=Ke(t,h,a.onViewportChange),g=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=a.toastCount>0;d.useEffect(()=>{const b=w=>{var x;n.length!==0&&n.every(_=>w[_]||w.code===_)&&((x=h.current)==null||x.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[n]),d.useEffect(()=>{const b=c.current,w=h.current;if(y&&b&&w){const v=()=>{if(!a.isClosePausedRef.current){const N=new CustomEvent($f);w.dispatchEvent(N),a.isClosePausedRef.current=!0}},x=()=>{if(a.isClosePausedRef.current){const N=new CustomEvent(zf);w.dispatchEvent(N),a.isClosePausedRef.current=!1}},_=N=>{!b.contains(N.relatedTarget)&&x()},j=()=>{b.contains(document.activeElement)||x()};return b.addEventListener("focusin",v),b.addEventListener("focusout",_),b.addEventListener("pointermove",v),b.addEventListener("pointerleave",j),window.addEventListener("blur",v),window.addEventListener("focus",x),()=>{b.removeEventListener("focusin",v),b.removeEventListener("focusout",_),b.removeEventListener("pointermove",v),b.removeEventListener("pointerleave",j),window.removeEventListener("blur",v),window.removeEventListener("focus",x)}}},[y,a.isClosePausedRef]);const p=d.useCallback(({tabbingDirection:b})=>{const v=l().map(x=>{const _=x.ref.current,j=[_,...Jk(_)];return b==="forwards"?j:j.reverse()});return(b==="forwards"?v.reverse():v).flat()},[l]);return d.useEffect(()=>{const b=h.current;if(b){const w=v=>{var j,N,S;const x=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!x){const k=document.activeElement,U=v.shiftKey;if(v.target===b&&U){(j=u.current)==null||j.focus();return}const q=p({tabbingDirection:U?"backwards":"forwards"}),re=q.findIndex($=>$===k);bd(q.slice(re+1))?v.preventDefault():U?(N=u.current)==null||N.focus():(S=f.current)==null||S.focus()}};return b.addEventListener("keydown",w),()=>b.removeEventListener("keydown",w)}},[l,p]),o.jsxs(Ck,{ref:c,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&o.jsx(Uf,{ref:u,onFocusFromOutsideViewport:()=>{const b=p({tabbingDirection:"forwards"});bd(b)}}),o.jsx(Sm.Slot,{scope:r,children:o.jsx(Ce.ol,{tabIndex:-1,...i,ref:m})}),y&&o.jsx(Uf,{ref:f,onFocusFromOutsideViewport:()=>{const b=p({tabbingDirection:"backwards"});bd(b)}})]})});Bw.displayName=Uw;var Vw="ToastFocusProxy",Uf=d.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=e,i=cu(Vw,r);return o.jsx(tl,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&n()}})});Uf.displayName=Vw;var uu="Toast",$k="toast.swipeStart",zk="toast.swipeMove",Uk="toast.swipeCancel",Bk="toast.swipeEnd",Ww=d.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:i,...a}=e,[l=!0,c]=xs({prop:n,defaultProp:s,onChange:i});return o.jsx(Dn,{present:r||l,children:o.jsx(qk,{open:l,...a,ref:t,onClose:()=>c(!1),onPause:er(e.onPause),onResume:er(e.onResume),onSwipeStart:Se(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Se(e.onSwipeMove,u=>{const{x:f,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Se(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Se(e.onSwipeEnd,u=>{const{x:f,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});Ww.displayName=uu;var[Vk,Wk]=$w(uu,{onClose(){}}),qk=d.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:f,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:g,...y}=e,p=cu(uu,r),[b,w]=d.useState(null),v=Ke(t,$=>w($)),x=d.useRef(null),_=d.useRef(null),j=s||p.duration,N=d.useRef(0),S=d.useRef(j),k=d.useRef(0),{onToastAdd:U,onToastRemove:W}=p,V=er(()=>{var ee;(b==null?void 0:b.contains(document.activeElement))&&((ee=p.viewport)==null||ee.focus()),a()}),q=d.useCallback($=>{!$||$===1/0||(window.clearTimeout(k.current),N.current=new Date().getTime(),k.current=window.setTimeout(V,$))},[V]);d.useEffect(()=>{const $=p.viewport;if($){const ee=()=>{q(S.current),u==null||u()},G=()=>{const J=new Date().getTime()-N.current;S.current=S.current-J,window.clearTimeout(k.current),c==null||c()};return $.addEventListener($f,G),$.addEventListener(zf,ee),()=>{$.removeEventListener($f,G),$.removeEventListener(zf,ee)}}},[p.viewport,j,c,u,q]),d.useEffect(()=>{i&&!p.isClosePausedRef.current&&q(j)},[i,j,p.isClosePausedRef,q]),d.useEffect(()=>(U(),()=>W()),[U,W]);const re=d.useMemo(()=>b?Jw(b):null,[b]);return p.viewport?o.jsxs(o.Fragment,{children:[re&&o.jsx(Hk,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:re}),o.jsx(Vk,{scope:r,onClose:V,children:mo.createPortal(o.jsx(Sm.ItemSlot,{scope:r,children:o.jsx(kk,{asChild:!0,onEscapeKeyDown:Se(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||V(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(Ce.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...y,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Se(e.onKeyDown,$=>{$.key==="Escape"&&(l==null||l($.nativeEvent),$.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,V()))}),onPointerDown:Se(e.onPointerDown,$=>{$.button===0&&(x.current={x:$.clientX,y:$.clientY})}),onPointerMove:Se(e.onPointerMove,$=>{if(!x.current)return;const ee=$.clientX-x.current.x,G=$.clientY-x.current.y,J=!!_.current,P=["left","right"].includes(p.swipeDirection),F=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,Q=P?F(0,ee):0,se=P?0:F(0,G),O=$.pointerType==="touch"?10:2,X={x:Q,y:se},ie={originalEvent:$,delta:X};J?(_.current=X,Al(zk,h,ie,{discrete:!1})):Vg(X,p.swipeDirection,O)?(_.current=X,Al($k,f,ie,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(ee)>O||Math.abs(G)>O)&&(x.current=null)}),onPointerUp:Se(e.onPointerUp,$=>{const ee=_.current,G=$.target;if(G.hasPointerCapture($.pointerId)&&G.releasePointerCapture($.pointerId),_.current=null,x.current=null,ee){const J=$.currentTarget,P={originalEvent:$,delta:ee};Vg(ee,p.swipeDirection,p.swipeThreshold)?Al(Bk,g,P,{discrete:!0}):Al(Uk,m,P,{discrete:!0}),J.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),Hk=e=>{const{__scopeToast:t,children:r,...n}=e,s=cu(uu,t),[i,a]=d.useState(!1),[l,c]=d.useState(!1);return Yk(()=>a(!0)),d.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:o.jsx(el,{asChild:!0,children:o.jsx(tl,{...n,children:i&&o.jsxs(o.Fragment,{children:[s.label," ",r]})})})},Kk="ToastTitle",qw=d.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return o.jsx(Ce.div,{...n,ref:t})});qw.displayName=Kk;var Gk="ToastDescription",Hw=d.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return o.jsx(Ce.div,{...n,ref:t})});Hw.displayName=Gk;var Kw="ToastAction",Gw=d.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?o.jsx(Qw,{altText:r,asChild:!0,children:o.jsx(Nm,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Kw}\`. Expected non-empty \`string\`.`),null)});Gw.displayName=Kw;var Yw="ToastClose",Nm=d.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,s=Wk(Yw,r);return o.jsx(Qw,{asChild:!0,children:o.jsx(Ce.button,{type:"button",...n,ref:t,onClick:Se(e.onClick,s.onClose)})})});Nm.displayName=Yw;var Qw=d.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...s}=e;return o.jsx(Ce.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:t})});function Jw(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),Qk(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=n.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...Jw(n))}}),t}function Al(e,t,r,{discrete:n}){const s=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?Dw(s,i):s.dispatchEvent(i)}var Vg=(e,t,r=0)=>{const n=Math.abs(e.x),s=Math.abs(e.y),i=n>s;return t==="left"||t==="right"?i&&n>r:!i&&s>r};function Yk(e=()=>{}){const t=er(e);Tt(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function Qk(e){return e.nodeType===e.ELEMENT_NODE}function Jk(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function bd(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var Xk=zw,Xw=Bw,Zw=Ww,ey=qw,ty=Hw,ry=Gw,ny=Nm;function sy(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=sy(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ga(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=sy(e))&&(n&&(n+=" "),n+=t);return n}const Wg=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,qg=ga,rl=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return qg(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:i}=t,a=Object.keys(s).map(u=>{const f=r==null?void 0:r[u],h=i==null?void 0:i[u];if(f===null)return null;const m=Wg(f)||Wg(h);return s[u][m]}),l=r&&Object.entries(r).reduce((u,f)=>{let[h,m]=f;return m===void 0||(u[h]=m),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,f)=>{let{class:h,className:m,...g}=f;return Object.entries(g).every(y=>{let[p,b]=y;return Array.isArray(b)?b.includes({...i,...l}[p]):{...i,...l}[p]===b})?[...u,h,m]:u},[]);return qg(e,a,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oy=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=d.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:a,...l},c)=>d.createElement("svg",{ref:c,...eC,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:oy("lucide",s),...l},[...a.map(([u,f])=>d.createElement(u,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=(e,t)=>{const r=d.forwardRef(({className:n,...s},i)=>d.createElement(tC,{ref:i,iconNode:t,className:oy(`lucide-${Zk(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=Pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=Pe("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=Pe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=Pe("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=Pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=Pe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=Pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=Pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=Pe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=Pe("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=Pe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Em=Pe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=Pe("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=Pe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=Pe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=Pe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=Pe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=Pe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=Pe("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=Pe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=Pe("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=Pe("Paintbrush",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=Pe("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=Pe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=Pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=Pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=Pe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=Pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=Pe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=Pe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=Pe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=Pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=Pe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=Pe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=Pe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=Pe("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=Pe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=Pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=Pe("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=Pe("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=Pe("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=Pe("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=Pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Rm="-",pC=e=>{const t=vC(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:a=>{const l=a.split(Rm);return l[0]===""&&l.length!==1&&l.shift(),cy(l,t)||gC(a)},getConflictingClassGroupIds:(a,l)=>{const c=r[a]||[];return l&&n[a]?[...c,...n[a]]:c}}},cy=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?cy(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(Rm);return(a=t.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},Qg=/^\[(.+)\]$/,gC=e=>{if(Qg.test(e)){const t=Qg.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},vC=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return wC(Object.entries(e.classGroups),r).forEach(([i,a])=>{Vf(a,n,i,t)}),n},Vf=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:Jg(t,s);i.classGroupId=r;return}if(typeof s=="function"){if(xC(s)){Vf(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,a])=>{Vf(a,Jg(t,i),r,n)})})},Jg=(e,t)=>{let r=e;return t.split(Rm).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},xC=e=>e.isThemeGetter,wC=(e,t)=>t?e.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[t+a,l])):i);return[r,s]}):e,yC=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(i,a)=>{r.set(i,a),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let a=r.get(i);if(a!==void 0)return a;if((a=n.get(i))!==void 0)return s(i,a),a},set(i,a){r.has(i)?r.set(i,a):s(i,a)}}},uy="!",bC=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],i=t.length,a=l=>{const c=[];let u=0,f=0,h;for(let b=0;b<l.length;b++){let w=l[b];if(u===0){if(w===s&&(n||l.slice(b,b+i)===t)){c.push(l.slice(f,b)),f=b+i;continue}if(w==="/"){h=b;continue}}w==="["?u++:w==="]"&&u--}const m=c.length===0?l:l.substring(f),g=m.startsWith(uy),y=g?m.substring(1):m,p=h&&h>f?h-f:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:p}};return r?l=>r({className:l,parseClassName:a}):a},_C=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},jC=e=>({cache:yC(e.cacheSize),parseClassName:bC(e),...pC(e)}),SC=/\s+/,NC=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,i=[],a=e.trim().split(SC);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:f,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:g}=r(u);let y=!!g,p=n(y?m.substring(0,g):m);if(!p){if(!y){l=u+(l.length>0?" "+l:l);continue}if(p=n(m),!p){l=u+(l.length>0?" "+l:l);continue}y=!1}const b=_C(f).join(":"),w=h?b+uy:b,v=w+p;if(i.includes(v))continue;i.push(v);const x=s(p,y);for(let _=0;_<x.length;++_){const j=x[_];i.push(w+j)}l=u+(l.length>0?" "+l:l)}return l};function kC(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=dy(t))&&(n&&(n+=" "),n+=r);return n}const dy=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=dy(e[n]))&&(r&&(r+=" "),r+=t);return r};function CC(e,...t){let r,n,s,i=a;function a(c){const u=t.reduce((f,h)=>h(f),e());return r=jC(u),n=r.cache.get,s=r.cache.set,i=l,l(c)}function l(c){const u=n(c);if(u)return u;const f=NC(c,r);return s(c,f),f}return function(){return i(kC.apply(null,arguments))}}const nt=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},fy=/^\[(?:([a-z-]+):)?(.+)\]$/i,EC=/^\d+\/\d+$/,PC=new Set(["px","full","screen"]),TC=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,RC=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,AC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,IC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,OC=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,gn=e=>Xo(e)||PC.has(e)||EC.test(e),$n=e=>Pi(e,"length",BC),Xo=e=>!!e&&!Number.isNaN(Number(e)),jd=e=>Pi(e,"number",Xo),Yi=e=>!!e&&Number.isInteger(Number(e)),DC=e=>e.endsWith("%")&&Xo(e.slice(0,-1)),Re=e=>fy.test(e),zn=e=>TC.test(e),MC=new Set(["length","size","percentage"]),LC=e=>Pi(e,MC,hy),FC=e=>Pi(e,"position",hy),$C=new Set(["image","url"]),zC=e=>Pi(e,$C,WC),UC=e=>Pi(e,"",VC),Qi=()=>!0,Pi=(e,t,r)=>{const n=fy.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},BC=e=>RC.test(e)&&!AC.test(e),hy=()=>!1,VC=e=>IC.test(e),WC=e=>OC.test(e),qC=()=>{const e=nt("colors"),t=nt("spacing"),r=nt("blur"),n=nt("brightness"),s=nt("borderColor"),i=nt("borderRadius"),a=nt("borderSpacing"),l=nt("borderWidth"),c=nt("contrast"),u=nt("grayscale"),f=nt("hueRotate"),h=nt("invert"),m=nt("gap"),g=nt("gradientColorStops"),y=nt("gradientColorStopPositions"),p=nt("inset"),b=nt("margin"),w=nt("opacity"),v=nt("padding"),x=nt("saturate"),_=nt("scale"),j=nt("sepia"),N=nt("skew"),S=nt("space"),k=nt("translate"),U=()=>["auto","contain","none"],W=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto",Re,t],q=()=>[Re,t],re=()=>["",gn,$n],$=()=>["auto",Xo,Re],ee=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],G=()=>["solid","dashed","dotted","double","none"],J=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],P=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",Re],Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],se=()=>[Xo,Re];return{cacheSize:500,separator:":",theme:{colors:[Qi],spacing:[gn,$n],blur:["none","",zn,Re],brightness:se(),borderColor:[e],borderRadius:["none","","full",zn,Re],borderSpacing:q(),borderWidth:re(),contrast:se(),grayscale:F(),hueRotate:se(),invert:F(),gap:q(),gradientColorStops:[e],gradientColorStopPositions:[DC,$n],inset:V(),margin:V(),opacity:se(),padding:q(),saturate:se(),scale:se(),sepia:F(),skew:se(),space:q(),translate:q()},classGroups:{aspect:[{aspect:["auto","square","video",Re]}],container:["container"],columns:[{columns:[zn]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ee(),Re]}],overflow:[{overflow:W()}],"overflow-x":[{"overflow-x":W()}],"overflow-y":[{"overflow-y":W()}],overscroll:[{overscroll:U()}],"overscroll-x":[{"overscroll-x":U()}],"overscroll-y":[{"overscroll-y":U()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Yi,Re]}],basis:[{basis:V()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Re]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",Yi,Re]}],"grid-cols":[{"grid-cols":[Qi]}],"col-start-end":[{col:["auto",{span:["full",Yi,Re]},Re]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[Qi]}],"row-start-end":[{row:["auto",{span:[Yi,Re]},Re]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Re]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Re]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...P()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...P(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...P(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Re,t]}],"min-w":[{"min-w":[Re,t,"min","max","fit"]}],"max-w":[{"max-w":[Re,t,"none","full","min","max","fit","prose",{screen:[zn]},zn]}],h:[{h:[Re,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Re,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Re,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Re,t,"auto","min","max","fit"]}],"font-size":[{text:["base",zn,$n]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",jd]}],"font-family":[{font:[Qi]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Re]}],"line-clamp":[{"line-clamp":["none",Xo,jd]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",gn,Re]}],"list-image":[{"list-image":["none",Re]}],"list-style-type":[{list:["none","disc","decimal",Re]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",gn,$n]}],"underline-offset":[{"underline-offset":["auto",gn,Re]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:q()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ee(),FC]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",LC]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},zC]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...G(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:G()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...G()]}],"outline-offset":[{"outline-offset":[gn,Re]}],"outline-w":[{outline:[gn,$n]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:re()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[gn,$n]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",zn,UC]}],"shadow-color":[{shadow:[Qi]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...J(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":J()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",zn,Re]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[h]}],saturate:[{saturate:[x]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Re]}],duration:[{duration:se()}],ease:[{ease:["linear","in","out","in-out",Re]}],delay:[{delay:se()}],animate:[{animate:["none","spin","ping","pulse","bounce",Re]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Yi,Re]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Re]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Re]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":q()}],"scroll-mx":[{"scroll-mx":q()}],"scroll-my":[{"scroll-my":q()}],"scroll-ms":[{"scroll-ms":q()}],"scroll-me":[{"scroll-me":q()}],"scroll-mt":[{"scroll-mt":q()}],"scroll-mr":[{"scroll-mr":q()}],"scroll-mb":[{"scroll-mb":q()}],"scroll-ml":[{"scroll-ml":q()}],"scroll-p":[{"scroll-p":q()}],"scroll-px":[{"scroll-px":q()}],"scroll-py":[{"scroll-py":q()}],"scroll-ps":[{"scroll-ps":q()}],"scroll-pe":[{"scroll-pe":q()}],"scroll-pt":[{"scroll-pt":q()}],"scroll-pr":[{"scroll-pr":q()}],"scroll-pb":[{"scroll-pb":q()}],"scroll-pl":[{"scroll-pl":q()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Re]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[gn,$n,jd]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},HC=CC(qC);function Ee(...e){return HC(ga(e))}async function KC(e,t){const r=await GC(e),n=document.createElement("canvas"),s=n.getContext("2d");if(!s)throw new Error("No 2d context");const i=window.devicePixelRatio||1;return n.width=t.width*i,n.height=t.height*i,s.setTransform(i,0,0,i,0,0),s.imageSmoothingQuality="high",s.drawImage(r,t.x,t.y,t.width,t.height,0,0,t.width,t.height),new Promise((a,l)=>{n.toBlob(c=>{c?a(c):l(new Error("Canvas is empty"))},"image/jpeg")})}function GC(e){return new Promise((t,r)=>{const n=new window.Image;n.addEventListener("load",()=>t(n)),n.addEventListener("error",s=>r(s)),n.setAttribute("crossOrigin","anonymous"),n.src=e})}const YC=Xk,my=d.forwardRef(({className:e,...t},r)=>o.jsx(Xw,{ref:r,className:Ee("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));my.displayName=Xw.displayName;const QC=rl("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),py=d.forwardRef(({className:e,variant:t,...r},n)=>o.jsx(Zw,{ref:n,className:Ee(QC({variant:t}),e),...r}));py.displayName=Zw.displayName;const JC=d.forwardRef(({className:e,...t},r)=>o.jsx(ry,{ref:r,className:Ee("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));JC.displayName=ry.displayName;const gy=d.forwardRef(({className:e,...t},r)=>o.jsx(ny,{ref:r,className:Ee("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:o.jsx(Mr,{className:"h-4 w-4"})}));gy.displayName=ny.displayName;const vy=d.forwardRef(({className:e,...t},r)=>o.jsx(ey,{ref:r,className:Ee("text-sm font-semibold",e),...t}));vy.displayName=ey.displayName;const xy=d.forwardRef(({className:e,...t},r)=>o.jsx(ty,{ref:r,className:Ee("text-sm opacity-90",e),...t}));xy.displayName=ty.displayName;function XC(){const{toasts:e}=Ft();return o.jsxs(YC,{children:[e.map(function({id:t,title:r,description:n,action:s,...i}){return o.jsxs(py,{...i,children:[o.jsxs("div",{className:"grid gap-1",children:[r&&o.jsx(vy,{children:r}),n&&o.jsx(xy,{children:n})]}),s,o.jsx(gy,{})]},t)}),o.jsx(my,{})]})}var Xg=["light","dark"],ZC="(prefers-color-scheme: dark)",eE=d.createContext(void 0),tE={setTheme:e=>{},themes:[]},rE=()=>{var e;return(e=d.useContext(eE))!=null?e:tE};d.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:i,value:a,attrs:l,nonce:c})=>{let u=i==="system",f=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(y=>`'${y}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,h=s?Xg.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(y,p=!1,b=!0)=>{let w=a?a[y]:y,v=p?y+"|| ''":`'${w}'`,x="";return s&&b&&!p&&Xg.includes(y)&&(x+=`d.style.colorScheme = '${y}';`),r==="class"?p||w?x+=`c.add(${v})`:x+="null":w&&(x+=`d[s](n,${v})`),x},g=e?`!function(){${f}${m(e)}}()`:n?`!function(){try{${f}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${ZC}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${m(a?"x[e]":"e",!0)}}${u?"":"else{"+m(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${f}var e=localStorage.getItem('${t}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${m(a?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${h}}catch(t){}}();`;return d.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:g}})});var nE=e=>{switch(e){case"success":return iE;case"info":return lE;case"warning":return aE;case"error":return cE;default:return null}},sE=Array(12).fill(0),oE=({visible:e})=>fe.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},fe.createElement("div",{className:"sonner-spinner"},sE.map((t,r)=>fe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),iE=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),aE=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),lE=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),cE=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),uE=()=>{let[e,t]=fe.useState(document.hidden);return fe.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},Wf=1,dE=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Wf++,i=this.toasts.find(l=>l.id===s),a=e.dismissible===void 0?!0:e.dismissible;return i?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:r}),{...l,...e,id:s,dismissible:a,title:r}):l):this.addToast({title:r,...n,dismissible:a,id:s}),s},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),s=r!==void 0;return n.then(async i=>{if(hE(i)&&!i.ok){s=!1;let a=typeof t.error=="function"?await t.error(`HTTP error! status: ${i.status}`):t.error,l=typeof t.description=="function"?await t.description(`HTTP error! status: ${i.status}`):t.description;this.create({id:r,type:"error",message:a,description:l})}else if(t.success!==void 0){s=!1;let a=typeof t.success=="function"?await t.success(i):t.success,l=typeof t.description=="function"?await t.description(i):t.description;this.create({id:r,type:"success",message:a,description:l})}}).catch(async i=>{if(t.error!==void 0){s=!1;let a=typeof t.error=="function"?await t.error(i):t.error,l=typeof t.description=="function"?await t.description(i):t.description;this.create({id:r,type:"error",message:a,description:l})}}).finally(()=>{var i;s&&(this.dismiss(r),r=void 0),(i=t.finally)==null||i.call(t)}),r},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||Wf++;return this.create({jsx:e(r),id:r,...t}),r},this.subscribers=[],this.toasts=[]}},vr=new dE,fE=(e,t)=>{let r=(t==null?void 0:t.id)||Wf++;return vr.addToast({title:e,...t,id:r}),r},hE=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",mE=fE,pE=()=>vr.toasts;Object.assign(mE,{success:vr.success,info:vr.info,warning:vr.warning,error:vr.error,custom:vr.custom,message:vr.message,promise:vr.promise,dismiss:vr.dismiss,loading:vr.loading},{getHistory:pE});function gE(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}gE(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Il(e){return e.label!==void 0}var vE=3,xE="32px",wE=4e3,yE=356,bE=14,_E=20,jE=200;function SE(...e){return e.filter(Boolean).join(" ")}var NE=e=>{var t,r,n,s,i,a,l,c,u,f;let{invert:h,toast:m,unstyled:g,interacting:y,setHeights:p,visibleToasts:b,heights:w,index:v,toasts:x,expanded:_,removeToast:j,defaultRichColors:N,closeButton:S,style:k,cancelButtonStyle:U,actionButtonStyle:W,className:V="",descriptionClassName:q="",duration:re,position:$,gap:ee,loadingIcon:G,expandByDefault:J,classNames:P,icons:F,closeButtonAriaLabel:Q="Close toast",pauseWhenPageIsHidden:se,cn:O}=e,[X,ie]=fe.useState(!1),[le,T]=fe.useState(!1),[L,Y]=fe.useState(!1),[D,M]=fe.useState(!1),[z,ae]=fe.useState(0),[me,we]=fe.useState(0),I=fe.useRef(null),R=fe.useRef(null),B=v===0,Z=v+1<=b,ue=m.type,ve=m.dismissible!==!1,he=m.className||"",Ie=m.descriptionClassName||"",Fe=fe.useMemo(()=>w.findIndex(Ne=>Ne.toastId===m.id)||0,[w,m.id]),We=fe.useMemo(()=>{var Ne;return(Ne=m.closeButton)!=null?Ne:S},[m.closeButton,S]),bt=fe.useMemo(()=>m.duration||re||wE,[m.duration,re]),$t=fe.useRef(0),Yt=fe.useRef(0),hr=fe.useRef(0),Rt=fe.useRef(null),[At,kr]=$.split("-"),hn=fe.useMemo(()=>w.reduce((Ne,$e,ze)=>ze>=Fe?Ne:Ne+$e.height,0),[w,Fe]),mn=uE(),Ge=m.invert||h,Cr=ue==="loading";Yt.current=fe.useMemo(()=>Fe*ee+hn,[Fe,hn]),fe.useEffect(()=>{ie(!0)},[]),fe.useLayoutEffect(()=>{if(!X)return;let Ne=R.current,$e=Ne.style.height;Ne.style.height="auto";let ze=Ne.getBoundingClientRect().height;Ne.style.height=$e,we(ze),p(_t=>_t.find(A=>A.toastId===m.id)?_t.map(A=>A.toastId===m.id?{...A,height:ze}:A):[{toastId:m.id,height:ze,position:m.position},..._t])},[X,m.title,m.description,p,m.id]);let sr=fe.useCallback(()=>{T(!0),ae(Yt.current),p(Ne=>Ne.filter($e=>$e.toastId!==m.id)),setTimeout(()=>{j(m)},jE)},[m,j,p,Yt]);fe.useEffect(()=>{if(m.promise&&ue==="loading"||m.duration===1/0||m.type==="loading")return;let Ne,$e=bt;return _||y||se&&mn?(()=>{if(hr.current<$t.current){let ze=new Date().getTime()-$t.current;$e=$e-ze}hr.current=new Date().getTime()})():$e!==1/0&&($t.current=new Date().getTime(),Ne=setTimeout(()=>{var ze;(ze=m.onAutoClose)==null||ze.call(m,m),sr()},$e)),()=>clearTimeout(Ne)},[_,y,J,m,bt,sr,m.promise,ue,se,mn]),fe.useEffect(()=>{let Ne=R.current;if(Ne){let $e=Ne.getBoundingClientRect().height;return we($e),p(ze=>[{toastId:m.id,height:$e,position:m.position},...ze]),()=>p(ze=>ze.filter(_t=>_t.toastId!==m.id))}},[p,m.id]),fe.useEffect(()=>{m.delete&&sr()},[sr,m.delete]);function Mn(){return F!=null&&F.loading?fe.createElement("div",{className:"sonner-loader","data-visible":ue==="loading"},F.loading):G?fe.createElement("div",{className:"sonner-loader","data-visible":ue==="loading"},G):fe.createElement(oE,{visible:ue==="loading"})}return fe.createElement("li",{"aria-live":m.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:R,className:O(V,he,P==null?void 0:P.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,P==null?void 0:P.default,P==null?void 0:P[ue],(r=m==null?void 0:m.classNames)==null?void 0:r[ue]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:N,"data-styled":!(m.jsx||m.unstyled||g),"data-mounted":X,"data-promise":!!m.promise,"data-removed":le,"data-visible":Z,"data-y-position":At,"data-x-position":kr,"data-index":v,"data-front":B,"data-swiping":L,"data-dismissible":ve,"data-type":ue,"data-invert":Ge,"data-swipe-out":D,"data-expanded":!!(_||J&&X),style:{"--index":v,"--toasts-before":v,"--z-index":x.length-v,"--offset":`${le?z:Yt.current}px`,"--initial-height":J?"auto":`${me}px`,...k,...m.style},onPointerDown:Ne=>{Cr||!ve||(I.current=new Date,ae(Yt.current),Ne.target.setPointerCapture(Ne.pointerId),Ne.target.tagName!=="BUTTON"&&(Y(!0),Rt.current={x:Ne.clientX,y:Ne.clientY}))},onPointerUp:()=>{var Ne,$e,ze,_t;if(D||!ve)return;Rt.current=null;let A=Number(((Ne=R.current)==null?void 0:Ne.style.getPropertyValue("--swipe-amount").replace("px",""))||0),oe=new Date().getTime()-(($e=I.current)==null?void 0:$e.getTime()),pe=Math.abs(A)/oe;if(Math.abs(A)>=_E||pe>.11){ae(Yt.current),(ze=m.onDismiss)==null||ze.call(m,m),sr(),M(!0);return}(_t=R.current)==null||_t.style.setProperty("--swipe-amount","0px"),Y(!1)},onPointerMove:Ne=>{var $e;if(!Rt.current||!ve)return;let ze=Ne.clientY-Rt.current.y,_t=Ne.clientX-Rt.current.x,A=(At==="top"?Math.min:Math.max)(0,ze),oe=Ne.pointerType==="touch"?10:2;Math.abs(A)>oe?($e=R.current)==null||$e.style.setProperty("--swipe-amount",`${ze}px`):Math.abs(_t)>oe&&(Rt.current=null)}},We&&!m.jsx?fe.createElement("button",{"aria-label":Q,"data-disabled":Cr,"data-close-button":!0,onClick:Cr||!ve?()=>{}:()=>{var Ne;sr(),(Ne=m.onDismiss)==null||Ne.call(m,m)},className:O(P==null?void 0:P.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},fe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),fe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,m.jsx||fe.isValidElement(m.title)?m.jsx||m.title:fe.createElement(fe.Fragment,null,ue||m.icon||m.promise?fe.createElement("div",{"data-icon":"",className:O(P==null?void 0:P.icon,(i=m==null?void 0:m.classNames)==null?void 0:i.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Mn():null,m.type!=="loading"?m.icon||(F==null?void 0:F[ue])||nE(ue):null):null,fe.createElement("div",{"data-content":"",className:O(P==null?void 0:P.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},fe.createElement("div",{"data-title":"",className:O(P==null?void 0:P.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},m.title),m.description?fe.createElement("div",{"data-description":"",className:O(q,Ie,P==null?void 0:P.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},m.description):null),fe.isValidElement(m.cancel)?m.cancel:m.cancel&&Il(m.cancel)?fe.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||U,onClick:Ne=>{var $e,ze;Il(m.cancel)&&ve&&((ze=($e=m.cancel).onClick)==null||ze.call($e,Ne),sr())},className:O(P==null?void 0:P.cancelButton,(u=m==null?void 0:m.classNames)==null?void 0:u.cancelButton)},m.cancel.label):null,fe.isValidElement(m.action)?m.action:m.action&&Il(m.action)?fe.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||W,onClick:Ne=>{var $e,ze;Il(m.action)&&(Ne.defaultPrevented||((ze=($e=m.action).onClick)==null||ze.call($e,Ne),sr()))},className:O(P==null?void 0:P.actionButton,(f=m==null?void 0:m.classNames)==null?void 0:f.actionButton)},m.action.label):null))};function Zg(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var kE=e=>{let{invert:t,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:s,closeButton:i,className:a,offset:l,theme:c="light",richColors:u,duration:f,style:h,visibleToasts:m=vE,toastOptions:g,dir:y=Zg(),gap:p=bE,loadingIcon:b,icons:w,containerAriaLabel:v="Notifications",pauseWhenPageIsHidden:x,cn:_=SE}=e,[j,N]=fe.useState([]),S=fe.useMemo(()=>Array.from(new Set([r].concat(j.filter(se=>se.position).map(se=>se.position)))),[j,r]),[k,U]=fe.useState([]),[W,V]=fe.useState(!1),[q,re]=fe.useState(!1),[$,ee]=fe.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),G=fe.useRef(null),J=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),P=fe.useRef(null),F=fe.useRef(!1),Q=fe.useCallback(se=>{var O;(O=j.find(X=>X.id===se.id))!=null&&O.delete||vr.dismiss(se.id),N(X=>X.filter(({id:ie})=>ie!==se.id))},[j]);return fe.useEffect(()=>vr.subscribe(se=>{if(se.dismiss){N(O=>O.map(X=>X.id===se.id?{...X,delete:!0}:X));return}setTimeout(()=>{Rw.flushSync(()=>{N(O=>{let X=O.findIndex(ie=>ie.id===se.id);return X!==-1?[...O.slice(0,X),{...O[X],...se},...O.slice(X+1)]:[se,...O]})})})}),[]),fe.useEffect(()=>{if(c!=="system"){ee(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ee("dark"):ee("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:se})=>{ee(se?"dark":"light")})},[c]),fe.useEffect(()=>{j.length<=1&&V(!1)},[j]),fe.useEffect(()=>{let se=O=>{var X,ie;n.every(le=>O[le]||O.code===le)&&(V(!0),(X=G.current)==null||X.focus()),O.code==="Escape"&&(document.activeElement===G.current||(ie=G.current)!=null&&ie.contains(document.activeElement))&&V(!1)};return document.addEventListener("keydown",se),()=>document.removeEventListener("keydown",se)},[n]),fe.useEffect(()=>{if(G.current)return()=>{P.current&&(P.current.focus({preventScroll:!0}),P.current=null,F.current=!1)}},[G.current]),j.length?fe.createElement("section",{"aria-label":`${v} ${J}`,tabIndex:-1},S.map((se,O)=>{var X;let[ie,le]=se.split("-");return fe.createElement("ol",{key:se,dir:y==="auto"?Zg():y,tabIndex:-1,ref:G,className:a,"data-sonner-toaster":!0,"data-theme":$,"data-y-position":ie,"data-x-position":le,style:{"--front-toast-height":`${((X=k[0])==null?void 0:X.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||xE,"--width":`${yE}px`,"--gap":`${p}px`,...h},onBlur:T=>{F.current&&!T.currentTarget.contains(T.relatedTarget)&&(F.current=!1,P.current&&(P.current.focus({preventScroll:!0}),P.current=null))},onFocus:T=>{T.target instanceof HTMLElement&&T.target.dataset.dismissible==="false"||F.current||(F.current=!0,P.current=T.relatedTarget)},onMouseEnter:()=>V(!0),onMouseMove:()=>V(!0),onMouseLeave:()=>{q||V(!1)},onPointerDown:T=>{T.target instanceof HTMLElement&&T.target.dataset.dismissible==="false"||re(!0)},onPointerUp:()=>re(!1)},j.filter(T=>!T.position&&O===0||T.position===se).map((T,L)=>{var Y,D;return fe.createElement(NE,{key:T.id,icons:w,index:L,toast:T,defaultRichColors:u,duration:(Y=g==null?void 0:g.duration)!=null?Y:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:t,visibleToasts:m,closeButton:(D=g==null?void 0:g.closeButton)!=null?D:i,interacting:q,position:se,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:Q,toasts:j.filter(M=>M.position==T.position),heights:k.filter(M=>M.position==T.position),setHeights:U,expandByDefault:s,gap:p,loadingIcon:b,expanded:W,pauseWhenPageIsHidden:x,cn:_})}))})):null};const CE=({...e})=>{const{theme:t="system"}=rE();return o.jsx(kE,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var EE=Ex.useId||(()=>{}),PE=0;function Nn(e){const[t,r]=d.useState(EE());return Tt(()=>{e||r(n=>n??String(PE++))},[e]),e||(t?`radix-${t}`:"")}const TE=["top","right","bottom","left"],ws=Math.min,wr=Math.max,Mc=Math.round,Ol=Math.floor,ys=e=>({x:e,y:e}),RE={left:"right",right:"left",bottom:"top",top:"bottom"},AE={start:"end",end:"start"};function qf(e,t,r){return wr(e,ws(t,r))}function Rn(e,t){return typeof e=="function"?e(t):e}function An(e){return e.split("-")[0]}function Ti(e){return e.split("-")[1]}function Am(e){return e==="x"?"y":"x"}function Im(e){return e==="y"?"height":"width"}function bs(e){return["top","bottom"].includes(An(e))?"y":"x"}function Om(e){return Am(bs(e))}function IE(e,t,r){r===void 0&&(r=!1);const n=Ti(e),s=Om(e),i=Im(s);let a=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=Lc(a)),[a,Lc(a)]}function OE(e){const t=Lc(e);return[Hf(e),t,Hf(t)]}function Hf(e){return e.replace(/start|end/g,t=>AE[t])}function DE(e,t,r){const n=["left","right"],s=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return r?t?s:n:t?n:s;case"left":case"right":return t?i:a;default:return[]}}function ME(e,t,r,n){const s=Ti(e);let i=DE(An(e),r==="start",n);return s&&(i=i.map(a=>a+"-"+s),t&&(i=i.concat(i.map(Hf)))),i}function Lc(e){return e.replace(/left|right|bottom|top/g,t=>RE[t])}function LE(e){return{top:0,right:0,bottom:0,left:0,...e}}function wy(e){return typeof e!="number"?LE(e):{top:e,right:e,bottom:e,left:e}}function Fc(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function ev(e,t,r){let{reference:n,floating:s}=e;const i=bs(t),a=Om(t),l=Im(a),c=An(t),u=i==="y",f=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,m=n[l]/2-s[l]/2;let g;switch(c){case"top":g={x:f,y:n.y-s.height};break;case"bottom":g={x:f,y:n.y+n.height};break;case"right":g={x:n.x+n.width,y:h};break;case"left":g={x:n.x-s.width,y:h};break;default:g={x:n.x,y:n.y}}switch(Ti(t)){case"start":g[a]-=m*(r&&u?-1:1);break;case"end":g[a]+=m*(r&&u?-1:1);break}return g}const FE=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:a}=r,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:h}=ev(u,n,c),m=n,g={},y=0;for(let p=0;p<l.length;p++){const{name:b,fn:w}=l[p],{x:v,y:x,data:_,reset:j}=await w({x:f,y:h,initialPlacement:n,placement:m,strategy:s,middlewareData:g,rects:u,platform:a,elements:{reference:e,floating:t}});f=v??f,h=x??h,g={...g,[b]:{...g[b],..._}},j&&y<=50&&(y++,typeof j=="object"&&(j.placement&&(m=j.placement),j.rects&&(u=j.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):j.rects),{x:f,y:h}=ev(u,m,c)),p=-1)}return{x:f,y:h,placement:m,strategy:s,middlewareData:g}};async function za(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:i,rects:a,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=Rn(t,e),y=wy(g),b=l[m?h==="floating"?"reference":"floating":h],w=Fc(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(b)))==null||r?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:c})),v=h==="floating"?{x:n,y:s,width:a.floating.width,height:a.floating.height}:a.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),_=await(i.isElement==null?void 0:i.isElement(x))?await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1}:{x:1,y:1},j=Fc(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:x,strategy:c}):v);return{top:(w.top-j.top+y.top)/_.y,bottom:(j.bottom-w.bottom+y.bottom)/_.y,left:(w.left-j.left+y.left)/_.x,right:(j.right-w.right+y.right)/_.x}}const $E=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=t,{element:u,padding:f=0}=Rn(e,t)||{};if(u==null)return{};const h=wy(f),m={x:r,y:n},g=Om(s),y=Im(g),p=await a.getDimensions(u),b=g==="y",w=b?"top":"left",v=b?"bottom":"right",x=b?"clientHeight":"clientWidth",_=i.reference[y]+i.reference[g]-m[g]-i.floating[y],j=m[g]-i.reference[g],N=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let S=N?N[x]:0;(!S||!await(a.isElement==null?void 0:a.isElement(N)))&&(S=l.floating[x]||i.floating[y]);const k=_/2-j/2,U=S/2-p[y]/2-1,W=ws(h[w],U),V=ws(h[v],U),q=W,re=S-p[y]-V,$=S/2-p[y]/2+k,ee=qf(q,$,re),G=!c.arrow&&Ti(s)!=null&&$!==ee&&i.reference[y]/2-($<q?W:V)-p[y]/2<0,J=G?$<q?$-q:$-re:0;return{[g]:m[g]+J,data:{[g]:ee,centerOffset:$-ee-J,...G&&{alignmentOffset:J}},reset:G}}}),zE=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:p=!0,...b}=Rn(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const w=An(s),v=bs(l),x=An(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=m||(x||!p?[Lc(l)]:OE(l)),N=y!=="none";!m&&N&&j.push(...ME(l,p,y,_));const S=[l,...j],k=await za(t,b),U=[];let W=((n=i.flip)==null?void 0:n.overflows)||[];if(f&&U.push(k[w]),h){const $=IE(s,a,_);U.push(k[$[0]],k[$[1]])}if(W=[...W,{placement:s,overflows:U}],!U.every($=>$<=0)){var V,q;const $=(((V=i.flip)==null?void 0:V.index)||0)+1,ee=S[$];if(ee)return{data:{index:$,overflows:W},reset:{placement:ee}};let G=(q=W.filter(J=>J.overflows[0]<=0).sort((J,P)=>J.overflows[1]-P.overflows[1])[0])==null?void 0:q.placement;if(!G)switch(g){case"bestFit":{var re;const J=(re=W.filter(P=>{if(N){const F=bs(P.placement);return F===v||F==="y"}return!0}).map(P=>[P.placement,P.overflows.filter(F=>F>0).reduce((F,Q)=>F+Q,0)]).sort((P,F)=>P[1]-F[1])[0])==null?void 0:re[0];J&&(G=J);break}case"initialPlacement":G=l;break}if(s!==G)return{reset:{placement:G}}}return{}}}};function tv(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function rv(e){return TE.some(t=>e[t]>=0)}const UE=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=Rn(e,t);switch(n){case"referenceHidden":{const i=await za(t,{...s,elementContext:"reference"}),a=tv(i,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:rv(a)}}}case"escaped":{const i=await za(t,{...s,altBoundary:!0}),a=tv(i,r.floating);return{data:{escapedOffsets:a,escaped:rv(a)}}}default:return{}}}}};async function BE(e,t){const{placement:r,platform:n,elements:s}=e,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),a=An(r),l=Ti(r),c=bs(r)==="y",u=["left","top"].includes(a)?-1:1,f=i&&c?-1:1,h=Rn(t,e);let{mainAxis:m,crossAxis:g,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof y=="number"&&(g=l==="end"?y*-1:y),c?{x:g*f,y:m*u}:{x:m*u,y:g*f}}const VE=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:i,placement:a,middlewareData:l}=t,c=await BE(t,e);return a===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},WE=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:b=>{let{x:w,y:v}=b;return{x:w,y:v}}},...c}=Rn(e,t),u={x:r,y:n},f=await za(t,c),h=bs(An(s)),m=Am(h);let g=u[m],y=u[h];if(i){const b=m==="y"?"top":"left",w=m==="y"?"bottom":"right",v=g+f[b],x=g-f[w];g=qf(v,g,x)}if(a){const b=h==="y"?"top":"left",w=h==="y"?"bottom":"right",v=y+f[b],x=y-f[w];y=qf(v,y,x)}const p=l.fn({...t,[m]:g,[h]:y});return{...p,data:{x:p.x-r,y:p.y-n,enabled:{[m]:i,[h]:a}}}}}},qE=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:i,middlewareData:a}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Rn(e,t),f={x:r,y:n},h=bs(s),m=Am(h);let g=f[m],y=f[h];const p=Rn(l,t),b=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const x=m==="y"?"height":"width",_=i.reference[m]-i.floating[x]+b.mainAxis,j=i.reference[m]+i.reference[x]-b.mainAxis;g<_?g=_:g>j&&(g=j)}if(u){var w,v;const x=m==="y"?"width":"height",_=["top","left"].includes(An(s)),j=i.reference[h]-i.floating[x]+(_&&((w=a.offset)==null?void 0:w[h])||0)+(_?0:b.crossAxis),N=i.reference[h]+i.reference[x]+(_?0:((v=a.offset)==null?void 0:v[h])||0)-(_?b.crossAxis:0);y<j?y=j:y>N&&(y=N)}return{[m]:g,[h]:y}}}},HE=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:i,platform:a,elements:l}=t,{apply:c=()=>{},...u}=Rn(e,t),f=await za(t,u),h=An(s),m=Ti(s),g=bs(s)==="y",{width:y,height:p}=i.floating;let b,w;h==="top"||h==="bottom"?(b=h,w=m===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(w=h,b=m==="end"?"top":"bottom");const v=p-f.top-f.bottom,x=y-f.left-f.right,_=ws(p-f[b],v),j=ws(y-f[w],x),N=!t.middlewareData.shift;let S=_,k=j;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(k=x),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(S=v),N&&!m){const W=wr(f.left,0),V=wr(f.right,0),q=wr(f.top,0),re=wr(f.bottom,0);g?k=y-2*(W!==0||V!==0?W+V:wr(f.left,f.right)):S=p-2*(q!==0||re!==0?q+re:wr(f.top,f.bottom))}await c({...t,availableWidth:k,availableHeight:S});const U=await a.getDimensions(l.floating);return y!==U.width||p!==U.height?{reset:{rects:!0}}:{}}}};function fu(){return typeof window<"u"}function Ri(e){return yy(e)?(e.nodeName||"").toLowerCase():"#document"}function _r(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function dn(e){var t;return(t=(yy(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function yy(e){return fu()?e instanceof Node||e instanceof _r(e).Node:!1}function Qr(e){return fu()?e instanceof Element||e instanceof _r(e).Element:!1}function un(e){return fu()?e instanceof HTMLElement||e instanceof _r(e).HTMLElement:!1}function nv(e){return!fu()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof _r(e).ShadowRoot}function nl(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=Jr(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(s)}function KE(e){return["table","td","th"].includes(Ri(e))}function hu(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Dm(e){const t=Mm(),r=Qr(e)?Jr(e):e;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function GE(e){let t=_s(e);for(;un(t)&&!yi(t);){if(Dm(t))return t;if(hu(t))return null;t=_s(t)}return null}function Mm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function yi(e){return["html","body","#document"].includes(Ri(e))}function Jr(e){return _r(e).getComputedStyle(e)}function mu(e){return Qr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function _s(e){if(Ri(e)==="html")return e;const t=e.assignedSlot||e.parentNode||nv(e)&&e.host||dn(e);return nv(t)?t.host:t}function by(e){const t=_s(e);return yi(t)?e.ownerDocument?e.ownerDocument.body:e.body:un(t)&&nl(t)?t:by(t)}function Ua(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=by(e),i=s===((n=e.ownerDocument)==null?void 0:n.body),a=_r(s);if(i){const l=Kf(a);return t.concat(a,a.visualViewport||[],nl(s)?s:[],l&&r?Ua(l):[])}return t.concat(s,Ua(s,[],r))}function Kf(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function _y(e){const t=Jr(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=un(e),i=s?e.offsetWidth:r,a=s?e.offsetHeight:n,l=Mc(r)!==i||Mc(n)!==a;return l&&(r=i,n=a),{width:r,height:n,$:l}}function Lm(e){return Qr(e)?e:e.contextElement}function Zo(e){const t=Lm(e);if(!un(t))return ys(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:i}=_y(t);let a=(i?Mc(r.width):r.width)/n,l=(i?Mc(r.height):r.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const YE=ys(0);function jy(e){const t=_r(e);return!Mm()||!t.visualViewport?YE:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function QE(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==_r(e)?!1:t}function ao(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),i=Lm(e);let a=ys(1);t&&(n?Qr(n)&&(a=Zo(n)):a=Zo(e));const l=QE(i,r,n)?jy(i):ys(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,f=s.width/a.x,h=s.height/a.y;if(i){const m=_r(i),g=n&&Qr(n)?_r(n):n;let y=m,p=Kf(y);for(;p&&n&&g!==y;){const b=Zo(p),w=p.getBoundingClientRect(),v=Jr(p),x=w.left+(p.clientLeft+parseFloat(v.paddingLeft))*b.x,_=w.top+(p.clientTop+parseFloat(v.paddingTop))*b.y;c*=b.x,u*=b.y,f*=b.x,h*=b.y,c+=x,u+=_,y=_r(p),p=Kf(y)}}return Fc({width:f,height:h,x:c,y:u})}function JE(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const i=s==="fixed",a=dn(n),l=t?hu(t.floating):!1;if(n===a||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=ys(1);const f=ys(0),h=un(n);if((h||!h&&!i)&&((Ri(n)!=="body"||nl(a))&&(c=mu(n)),un(n))){const m=ao(n);u=Zo(n),f.x=m.x+n.clientLeft,f.y=m.y+n.clientTop}return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+f.x,y:r.y*u.y-c.scrollTop*u.y+f.y}}function XE(e){return Array.from(e.getClientRects())}function Gf(e,t){const r=mu(e).scrollLeft;return t?t.left+r:ao(dn(e)).left+r}function ZE(e){const t=dn(e),r=mu(e),n=e.ownerDocument.body,s=wr(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=wr(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+Gf(e);const l=-r.scrollTop;return Jr(n).direction==="rtl"&&(a+=wr(t.clientWidth,n.clientWidth)-s),{width:s,height:i,x:a,y:l}}function e2(e,t){const r=_r(e),n=dn(e),s=r.visualViewport;let i=n.clientWidth,a=n.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const u=Mm();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:a,x:l,y:c}}function t2(e,t){const r=ao(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,i=un(e)?Zo(e):ys(1),a=e.clientWidth*i.x,l=e.clientHeight*i.y,c=s*i.x,u=n*i.y;return{width:a,height:l,x:c,y:u}}function sv(e,t,r){let n;if(t==="viewport")n=e2(e,r);else if(t==="document")n=ZE(dn(e));else if(Qr(t))n=t2(t,r);else{const s=jy(e);n={...t,x:t.x-s.x,y:t.y-s.y}}return Fc(n)}function Sy(e,t){const r=_s(e);return r===t||!Qr(r)||yi(r)?!1:Jr(r).position==="fixed"||Sy(r,t)}function r2(e,t){const r=t.get(e);if(r)return r;let n=Ua(e,[],!1).filter(l=>Qr(l)&&Ri(l)!=="body"),s=null;const i=Jr(e).position==="fixed";let a=i?_s(e):e;for(;Qr(a)&&!yi(a);){const l=Jr(a),c=Dm(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||nl(a)&&!c&&Sy(e,a))?n=n.filter(f=>f!==a):s=l,a=_s(a)}return t.set(e,n),n}function n2(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const a=[...r==="clippingAncestors"?hu(t)?[]:r2(t,this._c):[].concat(r),n],l=a[0],c=a.reduce((u,f)=>{const h=sv(t,f,s);return u.top=wr(h.top,u.top),u.right=ws(h.right,u.right),u.bottom=ws(h.bottom,u.bottom),u.left=wr(h.left,u.left),u},sv(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function s2(e){const{width:t,height:r}=_y(e);return{width:t,height:r}}function o2(e,t,r){const n=un(t),s=dn(t),i=r==="fixed",a=ao(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=ys(0);if(n||!n&&!i)if((Ri(t)!=="body"||nl(s))&&(l=mu(t)),n){const g=ao(t,!0,i,t);c.x=g.x+t.clientLeft,c.y=g.y+t.clientTop}else s&&(c.x=Gf(s));let u=0,f=0;if(s&&!n&&!i){const g=s.getBoundingClientRect();f=g.top+l.scrollTop,u=g.left+l.scrollLeft-Gf(s,g)}const h=a.left+l.scrollLeft-c.x-u,m=a.top+l.scrollTop-c.y-f;return{x:h,y:m,width:a.width,height:a.height}}function Sd(e){return Jr(e).position==="static"}function ov(e,t){if(!un(e)||Jr(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return dn(e)===r&&(r=r.ownerDocument.body),r}function Ny(e,t){const r=_r(e);if(hu(e))return r;if(!un(e)){let s=_s(e);for(;s&&!yi(s);){if(Qr(s)&&!Sd(s))return s;s=_s(s)}return r}let n=ov(e,t);for(;n&&KE(n)&&Sd(n);)n=ov(n,t);return n&&yi(n)&&Sd(n)&&!Dm(n)?r:n||GE(e)||r}const i2=async function(e){const t=this.getOffsetParent||Ny,r=this.getDimensions,n=await r(e.floating);return{reference:o2(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function a2(e){return Jr(e).direction==="rtl"}const l2={convertOffsetParentRelativeRectToViewportRelativeRect:JE,getDocumentElement:dn,getClippingRect:n2,getOffsetParent:Ny,getElementRects:i2,getClientRects:XE,getDimensions:s2,getScale:Zo,isElement:Qr,isRTL:a2};function c2(e,t){let r=null,n;const s=dn(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const{left:u,top:f,width:h,height:m}=e.getBoundingClientRect();if(l||t(),!h||!m)return;const g=Ol(f),y=Ol(s.clientWidth-(u+h)),p=Ol(s.clientHeight-(f+m)),b=Ol(u),v={rootMargin:-g+"px "+-y+"px "+-p+"px "+-b+"px",threshold:wr(0,ws(1,c))||1};let x=!0;function _(j){const N=j[0].intersectionRatio;if(N!==c){if(!x)return a();N?a(!1,N):n=setTimeout(()=>{a(!1,1e-7)},1e3)}x=!1}try{r=new IntersectionObserver(_,{...v,root:s.ownerDocument})}catch{r=new IntersectionObserver(_,v)}r.observe(e)}return a(!0),i}function u2(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=Lm(e),f=s||i?[...u?Ua(u):[],...Ua(t)]:[];f.forEach(w=>{s&&w.addEventListener("scroll",r,{passive:!0}),i&&w.addEventListener("resize",r)});const h=u&&l?c2(u,r):null;let m=-1,g=null;a&&(g=new ResizeObserver(w=>{let[v]=w;v&&v.target===u&&g&&(g.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var x;(x=g)==null||x.observe(t)})),r()}),u&&!c&&g.observe(u),g.observe(t));let y,p=c?ao(e):null;c&&b();function b(){const w=ao(e);p&&(w.x!==p.x||w.y!==p.y||w.width!==p.width||w.height!==p.height)&&r(),p=w,y=requestAnimationFrame(b)}return r(),()=>{var w;f.forEach(v=>{s&&v.removeEventListener("scroll",r),i&&v.removeEventListener("resize",r)}),h==null||h(),(w=g)==null||w.disconnect(),g=null,c&&cancelAnimationFrame(y)}}const d2=VE,f2=WE,h2=zE,m2=HE,p2=UE,iv=$E,g2=qE,v2=(e,t,r)=>{const n=new Map,s={platform:l2,...r},i={...s.platform,_c:n};return FE(e,t,{...s,platform:i})};var oc=typeof document<"u"?d.useLayoutEffect:d.useEffect;function $c(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!$c(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&e.$$typeof)&&!$c(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function ky(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function av(e,t){const r=ky(e);return Math.round(t*r)/r}function Nd(e){const t=d.useRef(e);return oc(()=>{t.current=e}),t}function x2(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[f,h]=d.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[m,g]=d.useState(n);$c(m,n)||g(n);const[y,p]=d.useState(null),[b,w]=d.useState(null),v=d.useCallback(P=>{P!==N.current&&(N.current=P,p(P))},[]),x=d.useCallback(P=>{P!==S.current&&(S.current=P,w(P))},[]),_=i||y,j=a||b,N=d.useRef(null),S=d.useRef(null),k=d.useRef(f),U=c!=null,W=Nd(c),V=Nd(s),q=Nd(u),re=d.useCallback(()=>{if(!N.current||!S.current)return;const P={placement:t,strategy:r,middleware:m};V.current&&(P.platform=V.current),v2(N.current,S.current,P).then(F=>{const Q={...F,isPositioned:q.current!==!1};$.current&&!$c(k.current,Q)&&(k.current=Q,mo.flushSync(()=>{h(Q)}))})},[m,t,r,V,q]);oc(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,h(P=>({...P,isPositioned:!1})))},[u]);const $=d.useRef(!1);oc(()=>($.current=!0,()=>{$.current=!1}),[]),oc(()=>{if(_&&(N.current=_),j&&(S.current=j),_&&j){if(W.current)return W.current(_,j,re);re()}},[_,j,re,W,U]);const ee=d.useMemo(()=>({reference:N,floating:S,setReference:v,setFloating:x}),[v,x]),G=d.useMemo(()=>({reference:_,floating:j}),[_,j]),J=d.useMemo(()=>{const P={position:r,left:0,top:0};if(!G.floating)return P;const F=av(G.floating,f.x),Q=av(G.floating,f.y);return l?{...P,transform:"translate("+F+"px, "+Q+"px)",...ky(G.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:F,top:Q}},[r,l,G.floating,f.x,f.y]);return d.useMemo(()=>({...f,update:re,refs:ee,elements:G,floatingStyles:J}),[f,re,ee,G,J])}const w2=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?iv({element:n.current,padding:s}).fn(r):{}:n?iv({element:n,padding:s}).fn(r):{}}}},y2=(e,t)=>({...d2(e),options:[e,t]}),b2=(e,t)=>({...f2(e),options:[e,t]}),_2=(e,t)=>({...g2(e),options:[e,t]}),j2=(e,t)=>({...h2(e),options:[e,t]}),S2=(e,t)=>({...m2(e),options:[e,t]}),N2=(e,t)=>({...p2(e),options:[e,t]}),k2=(e,t)=>({...w2(e),options:[e,t]});var C2="Arrow",Cy=d.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...i}=e;return o.jsx(Ce.svg,{...i,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});Cy.displayName=C2;var E2=Cy;function P2(e,t=[]){let r=[];function n(i,a){const l=d.createContext(a),c=r.length;r=[...r,a];function u(h){const{scope:m,children:g,...y}=h,p=(m==null?void 0:m[e][c])||l,b=d.useMemo(()=>y,Object.values(y));return o.jsx(p.Provider,{value:b,children:g})}function f(h,m){const g=(m==null?void 0:m[e][c])||l,y=d.useContext(g);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,f]}const s=()=>{const i=r.map(a=>d.createContext(a));return function(l){const c=(l==null?void 0:l[e])||i;return d.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,T2(s,...t)]}function T2(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}function Ey(e){const[t,r]=d.useState(void 0);return Tt(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=e.offsetWidth,l=e.offsetHeight;r({width:a,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var Fm="Popper",[Py,Ai]=P2(Fm),[R2,Ty]=Py(Fm),Ry=e=>{const{__scopePopper:t,children:r}=e,[n,s]=d.useState(null);return o.jsx(R2,{scope:t,anchor:n,onAnchorChange:s,children:r})};Ry.displayName=Fm;var Ay="PopperAnchor",Iy=d.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,i=Ty(Ay,r),a=d.useRef(null),l=Ke(t,a);return d.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||a.current)}),n?null:o.jsx(Ce.div,{...s,ref:l})});Iy.displayName=Ay;var $m="PopperContent",[A2,I2]=Py($m),Oy=d.forwardRef((e,t)=>{var L,Y,D,M,z,ae;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:y,...p}=e,b=Ty($m,r),[w,v]=d.useState(null),x=Ke(t,me=>v(me)),[_,j]=d.useState(null),N=Ey(_),S=(N==null?void 0:N.width)??0,k=(N==null?void 0:N.height)??0,U=n+(i!=="center"?"-"+i:""),W=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},V=Array.isArray(u)?u:[u],q=V.length>0,re={padding:W,boundary:V.filter(D2),altBoundary:q},{refs:$,floatingStyles:ee,placement:G,isPositioned:J,middlewareData:P}=x2({strategy:"fixed",placement:U,whileElementsMounted:(...me)=>u2(...me,{animationFrame:g==="always"}),elements:{reference:b.anchor},middleware:[y2({mainAxis:s+k,alignmentAxis:a}),c&&b2({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?_2():void 0,...re}),c&&j2({...re}),S2({...re,apply:({elements:me,rects:we,availableWidth:I,availableHeight:R})=>{const{width:B,height:Z}=we.reference,ue=me.floating.style;ue.setProperty("--radix-popper-available-width",`${I}px`),ue.setProperty("--radix-popper-available-height",`${R}px`),ue.setProperty("--radix-popper-anchor-width",`${B}px`),ue.setProperty("--radix-popper-anchor-height",`${Z}px`)}}),_&&k2({element:_,padding:l}),M2({arrowWidth:S,arrowHeight:k}),m&&N2({strategy:"referenceHidden",...re})]}),[F,Q]=Ly(G),se=er(y);Tt(()=>{J&&(se==null||se())},[J,se]);const O=(L=P.arrow)==null?void 0:L.x,X=(Y=P.arrow)==null?void 0:Y.y,ie=((D=P.arrow)==null?void 0:D.centerOffset)!==0,[le,T]=d.useState();return Tt(()=>{w&&T(window.getComputedStyle(w).zIndex)},[w]),o.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...ee,transform:J?ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:le,"--radix-popper-transform-origin":[(M=P.transformOrigin)==null?void 0:M.x,(z=P.transformOrigin)==null?void 0:z.y].join(" "),...((ae=P.hide)==null?void 0:ae.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(A2,{scope:r,placedSide:F,onArrowChange:j,arrowX:O,arrowY:X,shouldHideArrow:ie,children:o.jsx(Ce.div,{"data-side":F,"data-align":Q,...p,ref:x,style:{...p.style,animation:J?void 0:"none"}})})})});Oy.displayName=$m;var Dy="PopperArrow",O2={top:"bottom",right:"left",bottom:"top",left:"right"},My=d.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,i=I2(Dy,n),a=O2[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(E2,{...s,ref:r,style:{...s.style,display:"block"}})})});My.displayName=Dy;function D2(e){return e!==null}var M2=e=>({name:"transformOrigin",options:e,fn(t){var b,w,v;const{placement:r,rects:n,middlewareData:s}=t,a=((b=s.arrow)==null?void 0:b.centerOffset)!==0,l=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[u,f]=Ly(r),h={start:"0%",center:"50%",end:"100%"}[f],m=(((w=s.arrow)==null?void 0:w.x)??0)+l/2,g=(((v=s.arrow)==null?void 0:v.y)??0)+c/2;let y="",p="";return u==="bottom"?(y=a?h:`${m}px`,p=`${-c}px`):u==="top"?(y=a?h:`${m}px`,p=`${n.floating.height+c}px`):u==="right"?(y=`${-c}px`,p=a?h:`${g}px`):u==="left"&&(y=`${n.floating.width+c}px`,p=a?h:`${g}px`),{data:{x:y,y:p}}}});function Ly(e){const[t,r="center"]=e.split("-");return[t,r]}var Fy=Ry,pu=Iy,zm=Oy,Um=My,[gu,TD]=ks("Tooltip",[Ai]),Bm=Ai(),$y="TooltipProvider",L2=700,lv="tooltip.open",[F2,zy]=gu($y),Uy=e=>{const{__scopeTooltip:t,delayDuration:r=L2,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:i}=e,[a,l]=d.useState(!0),c=d.useRef(!1),u=d.useRef(0);return d.useEffect(()=>{const f=u.current;return()=>window.clearTimeout(f)},[]),o.jsx(F2,{scope:t,isOpenDelayed:a,delayDuration:r,onOpen:d.useCallback(()=>{window.clearTimeout(u.current),l(!1)},[]),onClose:d.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>l(!0),n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:d.useCallback(f=>{c.current=f},[]),disableHoverableContent:s,children:i})};Uy.displayName=$y;var By="Tooltip",[RD,vu]=gu(By),Yf="TooltipTrigger",$2=d.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=vu(Yf,r),i=zy(Yf,r),a=Bm(r),l=d.useRef(null),c=Ke(t,l,s.onTriggerChange),u=d.useRef(!1),f=d.useRef(!1),h=d.useCallback(()=>u.current=!1,[]);return d.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),o.jsx(pu,{asChild:!0,...a,children:o.jsx(Ce.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:c,onPointerMove:Se(e.onPointerMove,m=>{m.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),f.current=!0)}),onPointerLeave:Se(e.onPointerLeave,()=>{s.onTriggerLeave(),f.current=!1}),onPointerDown:Se(e.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Se(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:Se(e.onBlur,s.onClose),onClick:Se(e.onClick,s.onClose)})})});$2.displayName=Yf;var z2="TooltipPortal",[AD,U2]=gu(z2,{forceMount:void 0}),bi="TooltipContent",Vy=d.forwardRef((e,t)=>{const r=U2(bi,e.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...i}=e,a=vu(bi,e.__scopeTooltip);return o.jsx(Dn,{present:n||a.open,children:a.disableHoverableContent?o.jsx(Wy,{side:s,...i,ref:t}):o.jsx(B2,{side:s,...i,ref:t})})}),B2=d.forwardRef((e,t)=>{const r=vu(bi,e.__scopeTooltip),n=zy(bi,e.__scopeTooltip),s=d.useRef(null),i=Ke(t,s),[a,l]=d.useState(null),{trigger:c,onClose:u}=r,f=s.current,{onPointerInTransitChange:h}=n,m=d.useCallback(()=>{l(null),h(!1)},[h]),g=d.useCallback((y,p)=>{const b=y.currentTarget,w={x:y.clientX,y:y.clientY},v=H2(w,b.getBoundingClientRect()),x=K2(w,v),_=G2(p.getBoundingClientRect()),j=Q2([...x,..._]);l(j),h(!0)},[h]);return d.useEffect(()=>()=>m(),[m]),d.useEffect(()=>{if(c&&f){const y=b=>g(b,f),p=b=>g(b,c);return c.addEventListener("pointerleave",y),f.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",y),f.removeEventListener("pointerleave",p)}}},[c,f,g,m]),d.useEffect(()=>{if(a){const y=p=>{const b=p.target,w={x:p.clientX,y:p.clientY},v=(c==null?void 0:c.contains(b))||(f==null?void 0:f.contains(b)),x=!Y2(w,a);v?m():x&&(m(),u())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,f,a,u,m]),o.jsx(Wy,{...e,ref:i})}),[V2,W2]=gu(By,{isInside:!1}),Wy=d.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...l}=e,c=vu(bi,r),u=Bm(r),{onClose:f}=c;return d.useEffect(()=>(document.addEventListener(lv,f),()=>document.removeEventListener(lv,f)),[f]),d.useEffect(()=>{if(c.trigger){const h=m=>{const g=m.target;g!=null&&g.contains(c.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,f]),o.jsx(Ei,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:o.jsxs(zm,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(Ow,{children:n}),o.jsx(V2,{scope:r,isInside:!0,children:o.jsx(Ok,{id:c.contentId,role:"tooltip",children:s||n})})]})})});Vy.displayName=bi;var qy="TooltipArrow",q2=d.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=Bm(r);return W2(qy,r).isInside?null:o.jsx(Um,{...s,...n,ref:t})});q2.displayName=qy;function H2(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,s,i)){case i:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function K2(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function G2(e){const{top:t,right:r,bottom:n,left:s}=e;return[{x:s,y:t},{x:r,y:t},{x:r,y:n},{x:s,y:n}]}function Y2(e,t){const{x:r,y:n}=e;let s=!1;for(let i=0,a=t.length-1;i<t.length;a=i++){const l=t[i].x,c=t[i].y,u=t[a].x,f=t[a].y;c>n!=f>n&&r<(u-l)*(n-c)/(f-c)+l&&(s=!s)}return s}function Q2(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),J2(t)}function J2(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const s=e[n];for(;t.length>=2;){const i=t[t.length-1],a=t[t.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))t.pop();else break}t.push(s)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const s=e[n];for(;r.length>=2;){const i=r[r.length-1],a=r[r.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))r.pop();else break}r.push(s)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var X2=Uy,Hy=Vy;const Z2=X2,eP=d.forwardRef(({className:e,sideOffset:t=4,...r},n)=>o.jsx(Hy,{ref:n,sideOffset:t,className:Ee("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));eP.displayName=Hy.displayName;var xu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},wu=typeof window>"u"||"Deno"in globalThis;function Ur(){}function tP(e,t){return typeof e=="function"?e(t):e}function rP(e){return typeof e=="number"&&e>=0&&e!==1/0}function nP(e,t){return Math.max(e+(t||0)-Date.now(),0)}function cv(e,t){return typeof e=="function"?e(t):e}function sP(e,t){return typeof e=="function"?e(t):e}function uv(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:a,stale:l}=e;if(a){if(n){if(t.queryHash!==Vm(a,t.options))return!1}else if(!Va(t.queryKey,a))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function dv(e,t){const{exact:r,status:n,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Ba(t.options.mutationKey)!==Ba(i))return!1}else if(!Va(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function Vm(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ba)(e)}function Ba(e){return JSON.stringify(e,(t,r)=>Qf(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Va(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!Va(e[r],t[r])):!1}function Ky(e,t){if(e===t)return e;const r=fv(e)&&fv(t);if(r||Qf(e)&&Qf(t)){const n=r?e:Object.keys(e),s=n.length,i=r?t:Object.keys(t),a=i.length,l=r?[]:{};let c=0;for(let u=0;u<a;u++){const f=r?u:i[u];(!r&&n.includes(f)||r)&&e[f]===void 0&&t[f]===void 0?(l[f]=void 0,c++):(l[f]=Ky(e[f],t[f]),l[f]===e[f]&&e[f]!==void 0&&c++)}return s===a&&c===s?e:l}return t}function fv(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Qf(e){if(!hv(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!hv(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function hv(e){return Object.prototype.toString.call(e)==="[object Object]"}function oP(e){return new Promise(t=>{setTimeout(t,e)})}function iP(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Ky(e,t):t}function aP(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function lP(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Wm=Symbol();function Gy(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Wm?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Ys,Jn,ti,ux,cP=(ux=class extends xu{constructor(){super();Ve(this,Ys);Ve(this,Jn);Ve(this,ti);Ae(this,ti,t=>{if(!wu&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){ne(this,Jn)||this.setEventListener(ne(this,ti))}onUnsubscribe(){var t;this.hasListeners()||((t=ne(this,Jn))==null||t.call(this),Ae(this,Jn,void 0))}setEventListener(t){var r;Ae(this,ti,t),(r=ne(this,Jn))==null||r.call(this),Ae(this,Jn,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){ne(this,Ys)!==t&&(Ae(this,Ys,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof ne(this,Ys)=="boolean"?ne(this,Ys):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Ys=new WeakMap,Jn=new WeakMap,ti=new WeakMap,ux),Yy=new cP,ri,Xn,ni,dx,uP=(dx=class extends xu{constructor(){super();Ve(this,ri,!0);Ve(this,Xn);Ve(this,ni);Ae(this,ni,t=>{if(!wu&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){ne(this,Xn)||this.setEventListener(ne(this,ni))}onUnsubscribe(){var t;this.hasListeners()||((t=ne(this,Xn))==null||t.call(this),Ae(this,Xn,void 0))}setEventListener(t){var r;Ae(this,ni,t),(r=ne(this,Xn))==null||r.call(this),Ae(this,Xn,t(this.setOnline.bind(this)))}setOnline(t){ne(this,ri)!==t&&(Ae(this,ri,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return ne(this,ri)}},ri=new WeakMap,Xn=new WeakMap,ni=new WeakMap,dx),zc=new uP;function dP(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}function fP(e){return Math.min(1e3*2**e,3e4)}function Qy(e){return(e??"online")==="online"?zc.isOnline():!0}var Jy=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function kd(e){return e instanceof Jy}function Xy(e){let t=!1,r=0,n=!1,s;const i=dP(),a=p=>{var b;n||(m(new Jy(p)),(b=e.abort)==null||b.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>Yy.isFocused()&&(e.networkMode==="always"||zc.isOnline())&&e.canRun(),f=()=>Qy(e.networkMode)&&e.canRun(),h=p=>{var b;n||(n=!0,(b=e.onSuccess)==null||b.call(e,p),s==null||s(),i.resolve(p))},m=p=>{var b;n||(n=!0,(b=e.onError)==null||b.call(e,p),s==null||s(),i.reject(p))},g=()=>new Promise(p=>{var b;s=w=>{(n||u())&&p(w)},(b=e.onPause)==null||b.call(e)}).then(()=>{var p;s=void 0,n||(p=e.onContinue)==null||p.call(e)}),y=()=>{if(n)return;let p;const b=r===0?e.initialPromise:void 0;try{p=b??e.fn()}catch(w){p=Promise.reject(w)}Promise.resolve(p).then(h).catch(w=>{var N;if(n)return;const v=e.retry??(wu?0:3),x=e.retryDelay??fP,_=typeof x=="function"?x(r,w):x,j=v===!0||typeof v=="number"&&r<v||typeof v=="function"&&v(r,w);if(t||!j){m(w);return}r++,(N=e.onFail)==null||N.call(e,r,w),oP(_).then(()=>u()?void 0:g()).then(()=>{t?m(w):y()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?y():g().then(y),i)}}function hP(){let e=[],t=0,r=l=>{l()},n=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{t?e.push(l):s(()=>{r(l)})},a=()=>{const l=e;e=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var Xt=hP(),Qs,fx,Zy=(fx=class{constructor(){Ve(this,Qs)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),rP(this.gcTime)&&Ae(this,Qs,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(wu?1/0:5*60*1e3))}clearGcTimeout(){ne(this,Qs)&&(clearTimeout(ne(this,Qs)),Ae(this,Qs,void 0))}},Qs=new WeakMap,fx),si,oi,Er,qt,Ka,Js,Br,vn,hx,mP=(hx=class extends Zy{constructor(t){super();Ve(this,Br);Ve(this,si);Ve(this,oi);Ve(this,Er);Ve(this,qt);Ve(this,Ka);Ve(this,Js);Ae(this,Js,!1),Ae(this,Ka,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ae(this,Er,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ae(this,si,gP(this.options)),this.state=t.state??ne(this,si),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=ne(this,qt))==null?void 0:t.promise}setOptions(t){this.options={...ne(this,Ka),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ne(this,Er).remove(this)}setData(t,r){const n=iP(this.state.data,t,this.options);return Ut(this,Br,vn).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Ut(this,Br,vn).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,s;const r=(n=ne(this,qt))==null?void 0:n.promise;return(s=ne(this,qt))==null||s.cancel(t),r?r.then(Ur).catch(Ur):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ne(this,si))}isActive(){return this.observers.some(t=>sP(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Wm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!nP(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=ne(this,qt))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=ne(this,qt))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),ne(this,Er).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(ne(this,qt)&&(ne(this,Js)?ne(this,qt).cancel({revert:!0}):ne(this,qt).cancelRetry()),this.scheduleGc()),ne(this,Er).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ut(this,Br,vn).call(this,{type:"invalidate"})}fetch(t,r){var c,u,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(ne(this,qt))return ne(this,qt).continueRetry(),ne(this,qt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(m=>m.options.queryFn);h&&this.setOptions(h.options)}const n=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(Ae(this,Js,!0),n.signal)})},i=()=>{const h=Gy(this.options,r),m={queryKey:this.queryKey,meta:this.meta};return s(m),Ae(this,Js,!1),this.options.persister?this.options.persister(h,m,this):h(m)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};s(a),(c=this.options.behavior)==null||c.onFetch(a,this),Ae(this,oi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&Ut(this,Br,vn).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta});const l=h=>{var m,g,y,p;kd(h)&&h.silent||Ut(this,Br,vn).call(this,{type:"error",error:h}),kd(h)||((g=(m=ne(this,Er).config).onError)==null||g.call(m,h,this),(p=(y=ne(this,Er).config).onSettled)==null||p.call(y,this.state.data,h,this)),this.scheduleGc()};return Ae(this,qt,Xy({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onSuccess:h=>{var m,g,y,p;if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(b){l(b);return}(g=(m=ne(this,Er).config).onSuccess)==null||g.call(m,h,this),(p=(y=ne(this,Er).config).onSettled)==null||p.call(y,h,this.state.error,this),this.scheduleGc()},onError:l,onFail:(h,m)=>{Ut(this,Br,vn).call(this,{type:"failed",failureCount:h,error:m})},onPause:()=>{Ut(this,Br,vn).call(this,{type:"pause"})},onContinue:()=>{Ut(this,Br,vn).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),ne(this,qt).start()}},si=new WeakMap,oi=new WeakMap,Er=new WeakMap,qt=new WeakMap,Ka=new WeakMap,Js=new WeakMap,Br=new WeakSet,vn=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...pP(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return kd(s)&&s.revert&&ne(this,oi)?{...ne(this,oi),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Xt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),ne(this,Er).notify({query:this,type:"updated",action:t})})},hx);function pP(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Qy(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function gP(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var nn,mx,vP=(mx=class extends xu{constructor(t={}){super();Ve(this,nn);this.config=t,Ae(this,nn,new Map)}build(t,r,n){const s=r.queryKey,i=r.queryHash??Vm(s,r);let a=this.get(i);return a||(a=new mP({cache:this,queryKey:s,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(a)),a}add(t){ne(this,nn).has(t.queryHash)||(ne(this,nn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=ne(this,nn).get(t.queryHash);r&&(t.destroy(),r===t&&ne(this,nn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Xt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return ne(this,nn).get(t)}getAll(){return[...ne(this,nn).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>uv(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>uv(t,n)):r}notify(t){Xt.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Xt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Xt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},nn=new WeakMap,mx),sn,Qt,Xs,on,Bn,px,xP=(px=class extends Zy{constructor(t){super();Ve(this,on);Ve(this,sn);Ve(this,Qt);Ve(this,Xs);this.mutationId=t.mutationId,Ae(this,Qt,t.mutationCache),Ae(this,sn,[]),this.state=t.state||wP(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){ne(this,sn).includes(t)||(ne(this,sn).push(t),this.clearGcTimeout(),ne(this,Qt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ae(this,sn,ne(this,sn).filter(r=>r!==t)),this.scheduleGc(),ne(this,Qt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){ne(this,sn).length||(this.state.status==="pending"?this.scheduleGc():ne(this,Qt).remove(this))}continue(){var t;return((t=ne(this,Xs))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,i,a,l,c,u,f,h,m,g,y,p,b,w,v,x,_,j,N,S;Ae(this,Xs,Xy({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(k,U)=>{Ut(this,on,Bn).call(this,{type:"failed",failureCount:k,error:U})},onPause:()=>{Ut(this,on,Bn).call(this,{type:"pause"})},onContinue:()=>{Ut(this,on,Bn).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ne(this,Qt).canRun(this)}));const r=this.state.status==="pending",n=!ne(this,Xs).canStart();try{if(!r){Ut(this,on,Bn).call(this,{type:"pending",variables:t,isPaused:n}),await((i=(s=ne(this,Qt).config).onMutate)==null?void 0:i.call(s,t,this));const U=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,t));U!==this.state.context&&Ut(this,on,Bn).call(this,{type:"pending",context:U,variables:t,isPaused:n})}const k=await ne(this,Xs).start();return await((u=(c=ne(this,Qt).config).onSuccess)==null?void 0:u.call(c,k,t,this.state.context,this)),await((h=(f=this.options).onSuccess)==null?void 0:h.call(f,k,t,this.state.context)),await((g=(m=ne(this,Qt).config).onSettled)==null?void 0:g.call(m,k,null,this.state.variables,this.state.context,this)),await((p=(y=this.options).onSettled)==null?void 0:p.call(y,k,null,t,this.state.context)),Ut(this,on,Bn).call(this,{type:"success",data:k}),k}catch(k){try{throw await((w=(b=ne(this,Qt).config).onError)==null?void 0:w.call(b,k,t,this.state.context,this)),await((x=(v=this.options).onError)==null?void 0:x.call(v,k,t,this.state.context)),await((j=(_=ne(this,Qt).config).onSettled)==null?void 0:j.call(_,void 0,k,this.state.variables,this.state.context,this)),await((S=(N=this.options).onSettled)==null?void 0:S.call(N,void 0,k,t,this.state.context)),k}finally{Ut(this,on,Bn).call(this,{type:"error",error:k})}}finally{ne(this,Qt).runNext(this)}}},sn=new WeakMap,Qt=new WeakMap,Xs=new WeakMap,on=new WeakSet,Bn=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Xt.batch(()=>{ne(this,sn).forEach(n=>{n.onMutationUpdate(t)}),ne(this,Qt).notify({mutation:this,type:"updated",action:t})})},px);function wP(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var gr,Ga,gx,yP=(gx=class extends xu{constructor(t={}){super();Ve(this,gr);Ve(this,Ga);this.config=t,Ae(this,gr,new Map),Ae(this,Ga,Date.now())}build(t,r,n){const s=new xP({mutationCache:this,mutationId:++hl(this,Ga)._,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){const r=Dl(t),n=ne(this,gr).get(r)??[];n.push(t),ne(this,gr).set(r,n),this.notify({type:"added",mutation:t})}remove(t){var n;const r=Dl(t);if(ne(this,gr).has(r)){const s=(n=ne(this,gr).get(r))==null?void 0:n.filter(i=>i!==t);s&&(s.length===0?ne(this,gr).delete(r):ne(this,gr).set(r,s))}this.notify({type:"removed",mutation:t})}canRun(t){var n;const r=(n=ne(this,gr).get(Dl(t)))==null?void 0:n.find(s=>s.state.status==="pending");return!r||r===t}runNext(t){var n;const r=(n=ne(this,gr).get(Dl(t)))==null?void 0:n.find(s=>s!==t&&s.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){Xt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...ne(this,gr).values()].flat()}find(t){const r={exact:!0,...t};return this.getAll().find(n=>dv(r,n))}findAll(t={}){return this.getAll().filter(r=>dv(t,r))}notify(t){Xt.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Xt.batch(()=>Promise.all(t.map(r=>r.continue().catch(Ur))))}},gr=new WeakMap,Ga=new WeakMap,gx);function Dl(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function mv(e){return{onFetch:(t,r)=>{var f,h,m,g,y;const n=t.options,s=(m=(h=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,i=((g=t.state.data)==null?void 0:g.pages)||[],a=((y=t.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let p=!1;const b=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},w=Gy(t.options,t.fetchOptions),v=async(x,_,j)=>{if(p)return Promise.reject();if(_==null&&x.pages.length)return Promise.resolve(x);const N={queryKey:t.queryKey,pageParam:_,direction:j?"backward":"forward",meta:t.options.meta};b(N);const S=await w(N),{maxPages:k}=t.options,U=j?lP:aP;return{pages:U(x.pages,S,k),pageParams:U(x.pageParams,_,k)}};if(s&&i.length){const x=s==="backward",_=x?bP:pv,j={pages:i,pageParams:a},N=_(n,j);l=await v(j,N,x)}else{const x=e??i.length;do{const _=c===0?a[0]??n.initialPageParam:pv(n,l);if(c>0&&_==null)break;l=await v(l,_),c++}while(c<x)}return l};t.options.persister?t.fetchFn=()=>{var p,b;return(b=(p=t.options).persister)==null?void 0:b.call(p,u,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function pv(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function bP(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var dt,Zn,es,ii,ai,ts,li,ci,vx,_P=(vx=class{constructor(e={}){Ve(this,dt);Ve(this,Zn);Ve(this,es);Ve(this,ii);Ve(this,ai);Ve(this,ts);Ve(this,li);Ve(this,ci);Ae(this,dt,e.queryCache||new vP),Ae(this,Zn,e.mutationCache||new yP),Ae(this,es,e.defaultOptions||{}),Ae(this,ii,new Map),Ae(this,ai,new Map),Ae(this,ts,0)}mount(){hl(this,ts)._++,ne(this,ts)===1&&(Ae(this,li,Yy.subscribe(async e=>{e&&(await this.resumePausedMutations(),ne(this,dt).onFocus())})),Ae(this,ci,zc.subscribe(async e=>{e&&(await this.resumePausedMutations(),ne(this,dt).onOnline())})))}unmount(){var e,t;hl(this,ts)._--,ne(this,ts)===0&&((e=ne(this,li))==null||e.call(this),Ae(this,li,void 0),(t=ne(this,ci))==null||t.call(this),Ae(this,ci,void 0))}isFetching(e){return ne(this,dt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return ne(this,Zn).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=ne(this,dt).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),n=ne(this,dt).build(this,r);return e.revalidateIfStale&&n.isStaleByTime(cv(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return ne(this,dt).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=ne(this,dt).get(n.queryHash),i=s==null?void 0:s.state.data,a=tP(t,i);if(a!==void 0)return ne(this,dt).build(this,n).setData(a,{...r,manual:!0})}setQueriesData(e,t,r){return Xt.batch(()=>ne(this,dt).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=ne(this,dt).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=ne(this,dt);Xt.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=ne(this,dt),n={type:"active",...e};return Xt.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries(n,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},n=Xt.batch(()=>ne(this,dt).findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(Ur).catch(Ur)}invalidateQueries(e={},t={}){return Xt.batch(()=>{if(ne(this,dt).findAll(e).forEach(n=>{n.invalidate()}),e.refetchType==="none")return Promise.resolve();const r={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},n=Xt.batch(()=>ne(this,dt).findAll(e).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(Ur)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Ur)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=ne(this,dt).build(this,t);return r.isStaleByTime(cv(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ur).catch(Ur)}fetchInfiniteQuery(e){return e.behavior=mv(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ur).catch(Ur)}ensureInfiniteQueryData(e){return e.behavior=mv(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return zc.isOnline()?ne(this,Zn).resumePausedMutations():Promise.resolve()}getQueryCache(){return ne(this,dt)}getMutationCache(){return ne(this,Zn)}getDefaultOptions(){return ne(this,es)}setDefaultOptions(e){Ae(this,es,e)}setQueryDefaults(e,t){ne(this,ii).set(Ba(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...ne(this,ii).values()];let r={};return t.forEach(n=>{Va(e,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(e,t){ne(this,ai).set(Ba(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...ne(this,ai).values()];let r={};return t.forEach(n=>{Va(e,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...ne(this,es).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Vm(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===Wm&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...ne(this,es).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){ne(this,dt).clear(),ne(this,Zn).clear()}},dt=new WeakMap,Zn=new WeakMap,es=new WeakMap,ii=new WeakMap,ai=new WeakMap,ts=new WeakMap,li=new WeakMap,ci=new WeakMap,vx),jP=d.createContext(void 0),SP=({client:e,children:t})=>(d.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),o.jsx(jP.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wa(){return Wa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wa.apply(this,arguments)}var os;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(os||(os={}));const gv="popstate";function NP(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:a,hash:l}=n.location;return Jf("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Uc(s)}return CP(t,r,null,e)}function xt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function eb(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function kP(){return Math.random().toString(36).substr(2,8)}function vv(e,t){return{usr:e.state,key:e.key,idx:t}}function Jf(e,t,r,n){return r===void 0&&(r=null),Wa({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ii(t):t,{state:r,key:t&&t.key||n||kP()})}function Uc(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ii(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function CP(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,l=os.Pop,c=null,u=f();u==null&&(u=0,a.replaceState(Wa({},a.state,{idx:u}),""));function f(){return(a.state||{idx:null}).idx}function h(){l=os.Pop;let b=f(),w=b==null?null:b-u;u=b,c&&c({action:l,location:p.location,delta:w})}function m(b,w){l=os.Push;let v=Jf(p.location,b,w);u=f()+1;let x=vv(v,u),_=p.createHref(v);try{a.pushState(x,"",_)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(_)}i&&c&&c({action:l,location:p.location,delta:1})}function g(b,w){l=os.Replace;let v=Jf(p.location,b,w);u=f();let x=vv(v,u),_=p.createHref(v);a.replaceState(x,"",_),i&&c&&c({action:l,location:p.location,delta:0})}function y(b){let w=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof b=="string"?b:Uc(b);return v=v.replace(/ $/,"%20"),xt(w,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,w)}let p={get action(){return l},get location(){return e(s,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(gv,h),c=b,()=>{s.removeEventListener(gv,h),c=null}},createHref(b){return t(s,b)},createURL:y,encodeLocation(b){let w=y(b);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:g,go(b){return a.go(b)}};return p}var xv;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(xv||(xv={}));function EP(e,t,r){return r===void 0&&(r="/"),PP(e,t,r,!1)}function PP(e,t,r,n){let s=typeof t=="string"?Ii(t):t,i=qm(s.pathname||"/",r);if(i==null)return null;let a=tb(e);TP(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=UP(i);l=$P(a[c],u,n)}return l}function tb(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(xt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=ms([n,c.relativePath]),f=r.concat(c);i.children&&i.children.length>0&&(xt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),tb(i.children,t,f,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:LP(u,i.index),routesMeta:f})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of rb(i.path))s(i,a,c)}),t}function rb(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=rb(n.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function TP(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:FP(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const RP=/^:[\w-]+$/,AP=3,IP=2,OP=1,DP=10,MP=-2,wv=e=>e==="*";function LP(e,t){let r=e.split("/"),n=r.length;return r.some(wv)&&(n+=MP),t&&(n+=IP),r.filter(s=>!wv(s)).reduce((s,i)=>s+(RP.test(i)?AP:i===""?OP:DP),n)}function FP(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function $P(e,t,r){let{routesMeta:n}=e,s={},i="/",a=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,f=i==="/"?t:t.slice(i.length)||"/",h=yv({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),m=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=yv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:ms([i,h.pathname]),pathnameBase:qP(ms([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=ms([i,h.pathnameBase]))}return a}function yv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=zP(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,f,h)=>{let{paramName:m,isOptional:g}=f;if(m==="*"){let p=l[h]||"";a=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const y=l[h];return g&&!y?u[m]=void 0:u[m]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function zP(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),eb(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function UP(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return eb(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function qm(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function BP(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Ii(e):e;return{pathname:r?r.startsWith("/")?r:VP(r,t):t,search:HP(n),hash:KP(s)}}function VP(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Cd(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function WP(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function nb(e,t){let r=WP(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function sb(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Ii(e):(s=Wa({},e),xt(!s.pathname||!s.pathname.includes("?"),Cd("?","pathname","search",s)),xt(!s.pathname||!s.pathname.includes("#"),Cd("#","pathname","hash",s)),xt(!s.search||!s.search.includes("#"),Cd("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=r;else{let h=t.length-1;if(!n&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=BP(s,l),u=a&&a!=="/"&&a.endsWith("/"),f=(i||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const ms=e=>e.join("/").replace(/\/\/+/g,"/"),qP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),HP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,KP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function GP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const ob=["post","put","patch","delete"];new Set(ob);const YP=["get",...ob];new Set(YP);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qa(){return qa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qa.apply(this,arguments)}const Hm=d.createContext(null),QP=d.createContext(null),po=d.createContext(null),yu=d.createContext(null),Cs=d.createContext({outlet:null,matches:[],isDataRoute:!1}),ib=d.createContext(null);function JP(e,t){let{relative:r}=t===void 0?{}:t;sl()||xt(!1);let{basename:n,navigator:s}=d.useContext(po),{hash:i,pathname:a,search:l}=lb(e,{relative:r}),c=a;return n!=="/"&&(c=a==="/"?n:ms([n,a])),s.createHref({pathname:c,search:l,hash:i})}function sl(){return d.useContext(yu)!=null}function fn(){return sl()||xt(!1),d.useContext(yu).location}function ab(e){d.useContext(po).static||d.useLayoutEffect(e)}function Ye(){let{isDataRoute:e}=d.useContext(Cs);return e?uT():XP()}function XP(){sl()||xt(!1);let e=d.useContext(Hm),{basename:t,future:r,navigator:n}=d.useContext(po),{matches:s}=d.useContext(Cs),{pathname:i}=fn(),a=JSON.stringify(nb(s,r.v7_relativeSplatPath)),l=d.useRef(!1);return ab(()=>{l.current=!0}),d.useCallback(function(u,f){if(f===void 0&&(f={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=sb(u,JSON.parse(a),i,f.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:ms([t,h.pathname])),(f.replace?n.replace:n.push)(h,f.state,f)},[t,n,a,i,e])}function ol(){let{matches:e}=d.useContext(Cs),t=e[e.length-1];return t?t.params:{}}function lb(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=d.useContext(po),{matches:s}=d.useContext(Cs),{pathname:i}=fn(),a=JSON.stringify(nb(s,n.v7_relativeSplatPath));return d.useMemo(()=>sb(e,JSON.parse(a),i,r==="path"),[e,a,i,r])}function ZP(e,t){return eT(e,t)}function eT(e,t,r,n){sl()||xt(!1);let{navigator:s}=d.useContext(po),{matches:i}=d.useContext(Cs),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=fn(),f;if(t){var h;let b=typeof t=="string"?Ii(t):t;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||xt(!1),f=b}else f=u;let m=f.pathname||"/",g=m;if(c!=="/"){let b=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let y=EP(e,{pathname:g}),p=oT(y&&y.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:ms([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:ms([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,r,n);return t&&p?d.createElement(yu.Provider,{value:{location:qa({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:os.Pop}},p):p}function tT(){let e=cT(),t=GP(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return d.createElement(d.Fragment,null,d.createElement("h2",null,"Unexpected Application Error!"),d.createElement("h3",{style:{fontStyle:"italic"}},t),r?d.createElement("pre",{style:s},r):null,null)}const rT=d.createElement(tT,null);class nT extends d.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?d.createElement(Cs.Provider,{value:this.props.routeContext},d.createElement(ib.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sT(e){let{routeContext:t,match:r,children:n}=e,s=d.useContext(Hm);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),d.createElement(Cs.Provider,{value:t},n)}function oT(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let f=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);f>=0||xt(!1),a=a.slice(0,Math.min(a.length,f+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let f=0;f<a.length;f++){let h=a[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=f),h.route.id){let{loaderData:m,errors:g}=r,y=h.route.loader&&m[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||y){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((f,h,m)=>{let g,y=!1,p=null,b=null;r&&(g=l&&h.route.id?l[h.route.id]:void 0,p=h.route.errorElement||rT,c&&(u<0&&m===0?(y=!0,b=null):u===m&&(y=!0,b=h.route.hydrateFallbackElement||null)));let w=t.concat(a.slice(0,m+1)),v=()=>{let x;return g?x=p:y?x=b:h.route.Component?x=d.createElement(h.route.Component,null):h.route.element?x=h.route.element:x=f,d.createElement(sT,{match:h,routeContext:{outlet:f,matches:w,isDataRoute:r!=null},children:x})};return r&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?d.createElement(nT,{location:r.location,revalidation:r.revalidation,component:p,error:g,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):v()},null)}var cb=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(cb||{}),Bc=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Bc||{});function iT(e){let t=d.useContext(Hm);return t||xt(!1),t}function aT(e){let t=d.useContext(QP);return t||xt(!1),t}function lT(e){let t=d.useContext(Cs);return t||xt(!1),t}function ub(e){let t=lT(),r=t.matches[t.matches.length-1];return r.route.id||xt(!1),r.route.id}function cT(){var e;let t=d.useContext(ib),r=aT(Bc.UseRouteError),n=ub(Bc.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function uT(){let{router:e}=iT(cb.UseNavigateStable),t=ub(Bc.UseNavigateStable),r=d.useRef(!1);return ab(()=>{r.current=!0}),d.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,qa({fromRouteId:t},i)))},[e,t])}function Qe(e){xt(!1)}function dT(e){let{basename:t="/",children:r=null,location:n,navigationType:s=os.Pop,navigator:i,static:a=!1,future:l}=e;sl()&&xt(!1);let c=t.replace(/^\/*/,"/"),u=d.useMemo(()=>({basename:c,navigator:i,static:a,future:qa({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof n=="string"&&(n=Ii(n));let{pathname:f="/",search:h="",hash:m="",state:g=null,key:y="default"}=n,p=d.useMemo(()=>{let b=qm(f,c);return b==null?null:{location:{pathname:b,search:h,hash:m,state:g,key:y},navigationType:s}},[c,f,h,m,g,y,s]);return p==null?null:d.createElement(po.Provider,{value:u},d.createElement(yu.Provider,{children:r,value:p}))}function fT(e){let{children:t,location:r}=e;return ZP(Xf(t),r)}new Promise(()=>{});function Xf(e,t){t===void 0&&(t=[]);let r=[];return d.Children.forEach(e,(n,s)=>{if(!d.isValidElement(n))return;let i=[...t,s];if(n.type===d.Fragment){r.push.apply(r,Xf(n.props.children,i));return}n.type!==Qe&&xt(!1),!n.props.index||!n.props.children||xt(!1);let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Xf(n.props.children,i)),r.push(a)}),r}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zf(){return Zf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zf.apply(this,arguments)}function hT(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function mT(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function pT(e,t){return e.button===0&&(!t||t==="_self")&&!mT(e)}function eh(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function gT(e,t){let r=eh(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}const vT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],xT="6";try{window.__reactRouterVersion=xT}catch{}const wT="startTransition",bv=Ex[wT];function yT(e){let{basename:t,children:r,future:n,window:s}=e,i=d.useRef();i.current==null&&(i.current=NP({window:s,v5Compat:!0}));let a=i.current,[l,c]=d.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},f=d.useCallback(h=>{u&&bv?bv(()=>c(h)):c(h)},[c,u]);return d.useLayoutEffect(()=>a.listen(f),[a,f]),d.createElement(dT,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:a,future:n})}const bT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_T=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gs=d.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:u,preventScrollReset:f,viewTransition:h}=t,m=hT(t,vT),{basename:g}=d.useContext(po),y,p=!1;if(typeof u=="string"&&_T.test(u)&&(y=u,bT))try{let x=new URL(window.location.href),_=u.startsWith("//")?new URL(x.protocol+u):new URL(u),j=qm(_.pathname,g);_.origin===x.origin&&j!=null?u=j+_.search+_.hash:p=!0}catch{}let b=JP(u,{relative:s}),w=jT(u,{replace:a,state:l,target:c,preventScrollReset:f,relative:s,viewTransition:h});function v(x){n&&n(x),x.defaultPrevented||w(x)}return d.createElement("a",Zf({},m,{href:y||b,onClick:p||i?n:v,ref:r,target:c}))});var _v;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(_v||(_v={}));var jv;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(jv||(jv={}));function jT(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:l}=t===void 0?{}:t,c=Ye(),u=fn(),f=lb(e,{relative:a});return d.useCallback(h=>{if(pT(h,r)){h.preventDefault();let m=n!==void 0?n:Uc(u)===Uc(f);c(e,{replace:m,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[u,c,f,n,s,r,e,i,a,l])}function Km(e){let t=d.useRef(eh(e)),r=d.useRef(!1),n=fn(),s=d.useMemo(()=>gT(n.search,r.current?null:t.current),[n.search]),i=Ye(),a=d.useCallback((l,c)=>{const u=eh(typeof l=="function"?l(s):l);r.current=!0,i("?"+u,c)},[i,s]);return[s,a]}const ST="modulepreload",NT=function(e){return"/repository-name/"+e},Sv={},In=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=NT(c),c in Sv)return;Sv[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":ST,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},kT=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>In(async()=>{const{default:n}=await Promise.resolve().then(()=>Oi);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Gm extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class CT extends Gm{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Nv extends Gm{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class kv extends Gm{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var th;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(th||(th={}));var ET=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(f){try{u(n.next(f))}catch(h){a(h)}}function c(f){try{u(n.throw(f))}catch(h){a(h)}}function u(f){f.done?i(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class PT{constructor(t,{headers:r={},customFetch:n,region:s=th.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=kT(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return ET(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let f;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=a):typeof a=="string"?(l["Content-Type"]="text/plain",f=a):typeof FormData<"u"&&a instanceof FormData?f=a:(l["Content-Type"]="application/json",f=JSON.stringify(a)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:f}).catch(p=>{throw new CT(p)}),m=h.headers.get("x-relay-error");if(m&&m==="true")throw new Nv(h);if(!h.ok)throw new kv(h);let g=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),y;return g==="application/json"?y=yield h.json():g==="application/octet-stream"?y=yield h.blob():g==="text/event-stream"?y=h:g==="multipart/form-data"?y=yield h.formData():y=yield h.text(),{data:y,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof kv||s instanceof Nv?s.context:void 0}}})}}var lr={},Ym={},bu={},il={},_u={},ju={},TT=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},_i=TT();const RT=_i.fetch,db=_i.fetch.bind(_i),fb=_i.Headers,AT=_i.Request,IT=_i.Response,Oi=Object.freeze(Object.defineProperty({__proto__:null,Headers:fb,Request:AT,Response:IT,default:db,fetch:RT},Symbol.toStringTag,{value:"Module"})),OT=Oj(Oi);var Su={};Object.defineProperty(Su,"__esModule",{value:!0});let DT=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Su.default=DT;var hb=Ir&&Ir.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ju,"__esModule",{value:!0});const MT=hb(OT),LT=hb(Su);let FT=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=MT.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c;let u=null,f=null,h=null,m=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?f=w:f=JSON.parse(w))}const p=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),b=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");p&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(u={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,h=null,m=406,g="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const p=await i.text();try{u=JSON.parse(p),Array.isArray(u)&&i.status===404&&(f=[],u=null,m=200,g="OK")}catch{i.status===404&&p===""?(m=204,g="No Content"):u={message:p}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,m=200,g="OK"),u&&this.shouldThrowOnError)throw new LT.default(u)}return{error:u,data:f,count:h,status:m,statusText:g}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};ju.default=FT;var $T=Ir&&Ir.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_u,"__esModule",{value:!0});const zT=$T(ju);let UT=class extends zT.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(a,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`,a==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};_u.default=UT;var BT=Ir&&Ir.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(il,"__esModule",{value:!0});const VT=BT(_u);let WT=class extends VT.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${a}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};il.default=WT;var qT=Ir&&Ir.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bu,"__esModule",{value:!0});const Ji=qT(il);let HT=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new Ji.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ji.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const a="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,f)=>u.concat(Object.keys(f)),[]);if(c.length>0){const u=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ji.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new Ji.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Ji.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};bu.default=HT;var Nu={},ku={};Object.defineProperty(ku,"__esModule",{value:!0});ku.version=void 0;ku.version="0.0.0-automated";Object.defineProperty(Nu,"__esModule",{value:!0});Nu.DEFAULT_HEADERS=void 0;const KT=ku;Nu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${KT.version}`};var mb=Ir&&Ir.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ym,"__esModule",{value:!0});const GT=mb(bu),YT=mb(il),QT=Nu;let JT=class pb{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},QT.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new GT.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new pb(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){let a;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([f,h])=>h!==void 0).map(([f,h])=>[f,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([f,h])=>{l.searchParams.append(f,h)})):(a="POST",c=r);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new YT.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Ym.default=JT;var Di=Ir&&Ir.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lr,"__esModule",{value:!0});lr.PostgrestError=lr.PostgrestBuilder=lr.PostgrestTransformBuilder=lr.PostgrestFilterBuilder=lr.PostgrestQueryBuilder=lr.PostgrestClient=void 0;const gb=Di(Ym);lr.PostgrestClient=gb.default;const vb=Di(bu);lr.PostgrestQueryBuilder=vb.default;const xb=Di(il);lr.PostgrestFilterBuilder=xb.default;const wb=Di(_u);lr.PostgrestTransformBuilder=wb.default;const yb=Di(ju);lr.PostgrestBuilder=yb.default;const bb=Di(Su);lr.PostgrestError=bb.default;var XT=lr.default={PostgrestClient:gb.default,PostgrestQueryBuilder:vb.default,PostgrestFilterBuilder:xb.default,PostgrestTransformBuilder:wb.default,PostgrestBuilder:yb.default,PostgrestError:bb.default};const{PostgrestClient:ZT,PostgrestQueryBuilder:FD,PostgrestFilterBuilder:$D,PostgrestTransformBuilder:zD,PostgrestBuilder:UD,PostgrestError:BD}=XT;function eR(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const tR=eR(),rR="2.11.15",nR=`realtime-js/${rR}`,sR="1.0.0",_b=1e4,oR=1e3;var ya;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ya||(ya={}));var Wt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Wt||(Wt={}));var Wr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Wr||(Wr={}));var rh;(function(e){e.websocket="websocket"})(rh||(rh={}));var Vs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Vs||(Vs={}));class iR{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let a=this.HEADER_LENGTH+2;const l=n.decode(t.slice(a,a+s));a=a+s;const c=n.decode(t.slice(a,a+i));a=a+i;const u=JSON.parse(n.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class jb{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Je;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Je||(Je={}));const Cv=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,a)=>(i[a]=aR(a,e,t,s),i),{})},aR=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,a=r[e];return i&&!n.includes(i)?Sb(i,a):nh(a)},Sb=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return dR(t,r)}switch(e){case Je.bool:return lR(t);case Je.float4:case Je.float8:case Je.int2:case Je.int4:case Je.int8:case Je.numeric:case Je.oid:return cR(t);case Je.json:case Je.jsonb:return uR(t);case Je.timestamp:return fR(t);case Je.abstime:case Je.date:case Je.daterange:case Je.int4range:case Je.int8range:case Je.money:case Je.reltime:case Je.text:case Je.time:case Je.timestamptz:case Je.timetz:case Je.tsrange:case Je.tstzrange:return nh(t);default:return nh(t)}},nh=e=>e,lR=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},cR=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},uR=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},dR=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const a=e.slice(1,r);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>Sb(t,l))}return e},fR=e=>typeof e=="string"?e.replace(" ","T"):e,Nb=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Ed{constructor(t,r,n={},s=_b){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Ev;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Ev||(Ev={}));class ba{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ba.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=ba.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ba.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),a=this.transformState(r),l={},c={};return this.map(i,(u,f)=>{a[u]||(c[u]=f)}),this.map(a,(u,f)=>{const h=i[u];if(h){const m=f.map(b=>b.presence_ref),g=h.map(b=>b.presence_ref),y=f.filter(b=>g.indexOf(b.presence_ref)<0),p=h.filter(b=>m.indexOf(b.presence_ref)<0);y.length>0&&(l[u]=y),p.length>0&&(c[u]=p)}else l[u]=f}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const f=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),f.length>0){const h=t[l].map(g=>g.presence_ref),m=f.filter(g=>h.indexOf(g.presence_ref)<0);t[l].unshift(...m)}n(l,f,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const f=c.map(h=>h.presence_ref);u=u.filter(h=>f.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Pv;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Pv||(Pv={}));var Tv;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Tv||(Tv={}));var yn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(yn||(yn={}));class Qm{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Wt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ed(this,Wr.join,this.params,this.timeout),this.rejoinTimer=new jb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Wt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Wt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Wt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Wr.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new ba(this),this.broadcastEndpointURL=Nb(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Wt.closed){const{config:{broadcast:i,presence:a,private:l}}=this.params;this._onError(f=>t==null?void 0:t(yn.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(yn.CLOSED));const c={},u={broadcast:i,presence:a,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var h;if(this.socket.setAuth(),f===void 0){t==null||t(yn.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,g=(h=m==null?void 0:m.length)!==null&&h!==void 0?h:0,y=[];for(let p=0;p<g;p++){const b=m[p],{filter:{event:w,schema:v,table:x,filter:_}}=b,j=f&&f[p];if(j&&j.event===w&&j.schema===v&&j.table===x&&j.filter===_)y.push(Object.assign(Object.assign({},b),{id:j.id}));else{this.unsubscribe(),this.state=Wt.errored,t==null||t(yn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(yn.SUBSCRIBED);return}}).receive("error",f=>{this.state=Wt.errored,t==null||t(yn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(yn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Wt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Wr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Ed(this,Wr.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),a}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Ed(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:f}=Wr;if(n&&[l,c,u,f].indexOf(a)>=0&&n!==this._joinRef())return;let m=this._onMessage(a,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var y,p,b;return((y=g.filter)===null||y===void 0?void 0:y.event)==="*"||((b=(p=g.filter)===null||p===void 0?void 0:p.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(g=>g.callback(m,n)):(i=this.bindings[a])===null||i===void 0||i.filter(g=>{var y,p,b,w,v,x;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const _=g.id,j=(y=g.filter)===null||y===void 0?void 0:y.event;return _&&((p=r.ids)===null||p===void 0?void 0:p.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const _=(v=(w=g==null?void 0:g.filter)===null||w===void 0?void 0:w.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return _==="*"||_===((x=r==null?void 0:r.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof m=="object"&&"ids"in m){const y=m.data,{schema:p,table:b,commit_timestamp:w,type:v,errors:x}=y;m=Object.assign(Object.assign({},{schema:p,table:b,commit_timestamp:w,eventType:v,new:{},old:{},errors:x}),this._getPayloadRecords(y))}g.callback(m,n)})}_isClosed(){return this.state===Wt.closed}_isJoined(){return this.state===Wt.joined}_isJoining(){return this.state===Wt.joining}_isLeaving(){return this.state===Wt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Qm.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Wr.close,{},t)}_onError(t){this._on(Wr.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Wt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Cv(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Cv(t.columns,t.old_record)),r}}const Rv=()=>{},hR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class mR{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_b,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Rv,this.ref=0,this.logger=Rv,this.conn=null,this.sendBuffer=[],this.serializer=new iR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>In(async()=>{const{default:c}=await Promise.resolve().then(()=>Oi);return{default:c}},void 0).then(({default:c})=>c(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${t}/${rh.websocket}`,this.httpEndpoint=Nb(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,a)=>a(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new jb(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=tR),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:sR}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ya.connecting:return Vs.Connecting;case ya.open:return Vs.Open;case ya.closing:return Vs.Closing;default:return Vs.Closed}}isConnected(){return this.connectionState()===Vs.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Qm(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:nR};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Wr.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(oR,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:i,ref:a}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${a&&"("+a+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,i,a)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Wr.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([hR],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class Jm extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function St(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class pR extends Jm{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class sh extends Jm{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var gR=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(f){try{u(n.next(f))}catch(h){a(h)}}function c(f){try{u(n.throw(f))}catch(h){a(h)}}function u(f){f.done?i(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const kb=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>In(async()=>{const{default:n}=await Promise.resolve().then(()=>Oi);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},vR=()=>gR(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield In(()=>Promise.resolve().then(()=>Oi),void 0)).Response:Response}),oh=e=>{if(Array.isArray(e))return e.map(r=>oh(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=oh(n)}),t};var go=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(f){try{u(n.next(f))}catch(h){a(h)}}function c(f){try{u(n.throw(f))}catch(h){a(h)}}function u(f){f.done?i(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Pd=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),xR=(e,t,r)=>go(void 0,void 0,void 0,function*(){const n=yield vR();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{t(new pR(Pd(s),e.status||500))}).catch(s=>{t(new sh(Pd(s),s))}):t(new sh(Pd(e),e))}),wR=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function al(e,t,r,n,s,i){return go(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(r,wR(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>xR(c,l,n))})})}function Vc(e,t,r,n){return go(this,void 0,void 0,function*(){return al(e,"GET",t,r,n)})}function Kn(e,t,r,n,s){return go(this,void 0,void 0,function*(){return al(e,"POST",t,n,s,r)})}function yR(e,t,r,n,s){return go(this,void 0,void 0,function*(){return al(e,"PUT",t,n,s,r)})}function bR(e,t,r,n){return go(this,void 0,void 0,function*(){return al(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Cb(e,t,r,n,s){return go(this,void 0,void 0,function*(){return al(e,"DELETE",t,n,s,r)})}var or=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(f){try{u(n.next(f))}catch(h){a(h)}}function c(f){try{u(n.throw(f))}catch(h){a(h)}}function u(f){f.done?i(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const _R={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Av={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class jR{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=kb(s)}uploadOrUpdate(t,r,n,s){return or(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},Av),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),f=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${f}`,Object.assign({method:t,body:i,headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{})),m=yield h.json();return h.ok?{data:{path:u,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(St(i))return{data:null,error:i};throw i}})}upload(t,r,n){return or(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return or(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Av.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:f}),m=yield h.json();return h.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(c){if(St(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return or(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Kn(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new Jm("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(n){if(St(n))return{data:null,error:n};throw n}})}update(t,r,n){return or(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return or(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(St(s))return{data:null,error:s};throw s}})}copy(t,r,n){return or(this,void 0,void 0,function*(){try{return{data:{path:(yield Kn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(St(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return or(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Kn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(St(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return or(this,void 0,void 0,function*(){try{const s=yield Kn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(St(s))return{data:null,error:s};throw s}})}download(t,r){return or(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Vc(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(St(l))return{data:null,error:l};throw l}})}info(t){return or(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Vc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:oh(n),error:null}}catch(n){if(St(n))return{data:null,error:n};throw n}})}exists(t){return or(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield bR(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(St(n)&&n instanceof sh){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return or(this,void 0,void 0,function*(){try{return{data:yield Cb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(St(r))return{data:null,error:r};throw r}})}list(t,r,n){return or(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},_R),r),{prefix:t||""});return{data:yield Kn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(St(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const SR="2.7.1",NR={"X-Client-Info":`storage-js/${SR}`};var yo=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(f){try{u(n.next(f))}catch(h){a(h)}}function c(f){try{u(n.throw(f))}catch(h){a(h)}}function u(f){f.done?i(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class kR{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},NR),r),this.fetch=kb(n)}listBuckets(){return yo(this,void 0,void 0,function*(){try{return{data:yield Vc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(St(t))return{data:null,error:t};throw t}})}getBucket(t){return yo(this,void 0,void 0,function*(){try{return{data:yield Vc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(St(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return yo(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(St(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return yo(this,void 0,void 0,function*(){try{return{data:yield yR(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(St(n))return{data:null,error:n};throw n}})}emptyBucket(t){return yo(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(St(r))return{data:null,error:r};throw r}})}deleteBucket(t){return yo(this,void 0,void 0,function*(){try{return{data:yield Cb(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(St(r))return{data:null,error:r};throw r}})}}class CR extends kR{constructor(t,r={},n){super(t,r,n)}from(t){return new jR(this.url,this.headers,t,this.fetch)}}const ER="2.51.0";let na="";typeof Deno<"u"?na="deno":typeof document<"u"?na="web":typeof navigator<"u"&&navigator.product==="ReactNative"?na="react-native":na="node";const PR={"X-Client-Info":`supabase-js-${na}/${ER}`},TR={headers:PR},RR={schema:"public"},AR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},IR={};var OR=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(f){try{u(n.next(f))}catch(h){a(h)}}function c(f){try{u(n.throw(f))}catch(h){a(h)}}function u(f){f.done?i(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const DR=e=>{let t;return e?t=e:typeof fetch>"u"?t=db:t=fetch,(...r)=>t(...r)},MR=()=>typeof Headers>"u"?fb:Headers,LR=(e,t,r)=>{const n=DR(r),s=MR();return(i,a)=>OR(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},a),{headers:u}))})};var FR=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(f){try{u(n.next(f))}catch(h){a(h)}}function c(f){try{u(n.throw(f))}catch(h){a(h)}}function u(f){f.done?i(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function $R(e){return e.endsWith("/")?e:e+"/"}function zR(e,t){var r,n;const{db:s,auth:i,realtime:a,global:l}=e,{db:c,auth:u,realtime:f,global:h}=t,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},f),a),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>FR(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}const Eb="2.71.0",Eo=30*1e3,ih=3,Td=ih*Eo,UR="http://localhost:9999",BR="supabase.auth.token",VR={"X-Client-Info":`gotrue-js/${Eb}`},ah="X-Supabase-Api-Version",Pb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},WR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,qR=10*60*1e3;class Xm extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Te(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class HR extends Xm{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function KR(e){return Te(e)&&e.name==="AuthApiError"}class Tb extends Xm{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Es extends Xm{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Vn extends Es{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function GR(e){return Te(e)&&e.name==="AuthSessionMissingError"}class Ml extends Es{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ll extends Es{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Fl extends Es{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function YR(e){return Te(e)&&e.name==="AuthImplicitGrantRedirectError"}class Iv extends Es{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class lh extends Es{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Rd(e){return Te(e)&&e.name==="AuthRetryableFetchError"}class Ov extends Es{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class ch extends Es{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Dv=` 	
\r=`.split(""),QR=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Dv.length;t+=1)e[Dv[t].charCodeAt(0)]=-2;for(let t=0;t<Wc.length;t+=1)e[Wc[t].charCodeAt(0)]=t;return e})();function Mv(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Wc[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Wc[n]),t.queuedBits-=6}}function Rb(e,t,r){const n=QR[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Lv(e){const t=[],r=a=>{t.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{ZR(a,n,r)};for(let a=0;a<e.length;a+=1)Rb(e.charCodeAt(a),s,i);return t.join("")}function JR(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function XR(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}JR(n,t)}}function ZR(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function eA(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Rb(e.charCodeAt(s),r,n);return new Uint8Array(t)}function tA(e){const t=[];return XR(e,r=>t.push(r)),new Uint8Array(t)}function rA(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Mv(s,r,n)),Mv(null,r,n),t.join("")}function nA(e){return Math.round(Date.now()/1e3)+e}function sA(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Fr=()=>typeof window<"u"&&typeof document<"u",Ds={tested:!1,writable:!1},Ab=()=>{if(!Fr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ds.tested)return Ds.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ds.tested=!0,Ds.writable=!0}catch{Ds.tested=!0,Ds.writable=!1}return Ds.writable};function oA(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const Ib=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>In(async()=>{const{default:n}=await Promise.resolve().then(()=>Oi);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},iA=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Po=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Ms=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Un=async(e,t)=>{await e.removeItem(t)};class Cu{constructor(){this.promise=new Cu.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Cu.promiseConstructor=Promise;function Ad(e){const t=e.split(".");if(t.length!==3)throw new ch("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!WR.test(t[n]))throw new ch("JWT not in base64url format");return{header:JSON.parse(Lv(t[0])),payload:JSON.parse(Lv(t[1])),signature:eA(t[2]),raw:{header:t[0],payload:t[1]}}}async function aA(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function lA(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){n(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function cA(e){return("0"+e.toString(16)).substr(-2)}function uA(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,cA).join("")}async function dA(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function fA(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await dA(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function bo(e,t,r=!1){const n=uA();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Po(e,`${t}-code-verifier`,s);const i=await fA(n);return[i,n===i?"plain":"s256"]}const hA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function mA(e){const t=e.headers.get(ah);if(!t||!t.match(hA))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function pA(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function gA(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const vA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _o(e){if(!vA.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Id(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}var xA=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const zs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),wA=[502,503,504];async function Fv(e){var t;if(!iA(e))throw new lh(zs(e),0);if(wA.includes(e.status))throw new lh(zs(e),e.status);let r;try{r=await e.json()}catch(i){throw new Tb(zs(i),i)}let n;const s=mA(e);if(s&&s.getTime()>=Pb["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Ov(zs(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Vn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Ov(zs(r),e.status,r.weak_password.reasons);throw new HR(zs(r),e.status||500,n)}const yA=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Oe(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[ah]||(i[ah]=Pb["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await bA(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function bA(e,t,r,n,s,i){const a=yA(t,n,s,i);let l;try{l=await e(r,Object.assign({},a))}catch(c){throw console.error(c),new lh(zs(c),0)}if(l.ok||await Fv(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Fv(c)}}function xn(e){var t;let r=null;NA(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=nA(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function $v(e){const t=xn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Qn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function _A(e){return{data:e,error:null}}function jA(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,a=xA(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function SA(e){return e}function NA(e){return e.access_token&&e.refresh_token&&e.expires_in}const Od=["global","local","others"];var kA=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class CA{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Ib(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Od[0]){if(Od.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Od.join(", ")}`);try{return await Oe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Te(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Qn})}catch(n){if(Te(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=kA(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:jA,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Te(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Oe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Qn})}catch(r){if(Te(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},f=await Oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:SA});if(f.error)throw f.error;const h=await f.json(),m=(a=f.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(y=>{const p=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);u[`${b}Page`]=p}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Te(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){_o(t);try{return await Oe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Qn})}catch(r){if(Te(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){_o(t);try{return await Oe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Qn})}catch(n){if(Te(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){_o(t);try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Qn})}catch(n){if(Te(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){_o(t.userId);try{const{data:r,error:n}=await Oe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _deleteFactor(t){_o(t.userId),_o(t.id);try{return{data:await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}}}function zv(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function EA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const jo={debug:!!(globalThis&&Ab()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ob extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class PA extends Ob{}async function TA(e,t,r){jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),jo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new PA(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(jo.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}EA();const RA={url:UR,storageKey:BR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:VR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Uv(e,t,r){return await r()}const So={};class Ha{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ha.nextInstanceID,Ha.nextInstanceID+=1,this.instanceID>0&&Fr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},RA),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new CA({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Ib(s.fetch),this.lock=s.lock||Uv,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Fr()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=TA:this.lock=Uv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Ab()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zv(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=zv(this.memoryStorage)),Fr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=So[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){So[this.storageKey]=Object.assign(Object.assign({},So[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=So[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){So[this.storageKey]=Object.assign(Object.assign({},So[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Eb}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=oA(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Fr()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),YR(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Te(r)?{error:r}:{error:new Tb("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:xn}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Te(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:f,password:h,options:m}=t;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await bo(this.storage,this.storageKey)),i=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:f,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:y},xform:xn})}else if("phone"in t){const{phone:f,password:h,options:m}=t;i=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:xn})}else throw new Ll("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Te(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:a,options:l}=t;r=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:$v})}else if("phone"in t){const{phone:i,password:a,options:l}=t;r=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:$v})}else throw new Ll("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ml}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Te(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,i,a,l,c,u,f,h,m,g;let y,p;if("message"in t)y=t.message,p=t.signature;else{const{chain:b,wallet:w,statement:v,options:x}=t;let _;if(Fr())if(typeof w=="object")_=w;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))_=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=w}const j=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const N=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),v?{statement:v}:null));let S;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")S=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)S=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)y=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),p=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(n=x==null?void 0:x.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=x==null?void 0:x.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((h=(f=x==null?void 0:x.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||h===void 0)&&h.length?["Resources",...x.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const N=await _.signMessage(new TextEncoder().encode(y),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=N}}try{const{data:b,error:w}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:rA(p)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:xn});if(w)throw w;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Ml}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:w})}catch(b){if(Te(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await Ms(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:a}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:xn});if(await Un(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ml}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(Te(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:a}=t,l=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:xn}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ml}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(Te(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,f=null;this.flowType==="pkce"&&([u,f]=await bo(this.storage,this.storageKey));const{error:h}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:f}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f}}throw new Ll("You must provide either an email or phone number.")}catch(l){if(Te(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await Oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:xn});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(Te(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await bo(this.storage,this.storageKey)),await Oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:_A})}catch(i){if(Te(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Vn;const{error:s}=await Oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Te(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:a}=await Oe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:a,error:l}=await Oe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Ll("You must provide either an email or phone number and a type")}catch(r){if(Te(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Ms(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Td:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const a=await Ms(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=Id()}if(this.storage.isServer&&t.user){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,f)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,f))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Qn}):await this._useSession(async r=>{var n,s,i;const{data:a,error:l}=r;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Vn}:await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Qn})})}catch(r){if(Te(r))return GR(r)&&(await this._removeSession(),await Un(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Vn;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await bo(this.storage,this.storageKey));const{data:u,error:f}=await Oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Qn});if(f)throw f;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(Te(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Vn;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:a}=Ad(t.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(Te(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:a,error:l}=r;if(l)throw l;t=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Vn;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Te(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Fr())throw new Fl("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Fl(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Iv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fl("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Iv("No code detected.");const{data:v,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!a||!u)throw new Fl("No session defined in URL");const f=Math.round(Date.now()/1e3),h=parseInt(l);let m=f+h;c&&(m=parseInt(c));const g=m-f;g*1e3<=Eo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const y=m-h;f-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,m,f):f-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,m,f);const{data:p,error:b}=await this._getUser(i);if(b)throw b;const w={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:m,refresh_token:a,token_type:u,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:t.type},error:null}}catch(n){if(Te(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Ms(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(KR(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Un(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=sA(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await bo(this.storage,this.storageKey,!0));try{return await Oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(Te(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var a,l,c,u,f;const{data:h,error:m}=i;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Oe(this.fetch,"GET",g,{headers:this.headers,jwt:(f=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return Fr()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Te(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)throw a;return await Oe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await lA(async s=>(s>0&&await aA(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:xn})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Rd(i)&&Date.now()+a-n<Eo})}catch(n){if(this._debug(r,"error",n),Te(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Fr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Ms(this.storage,this.storageKey);if(s&&this.userStorage){let a=await Ms(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Po(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:Id()}else if(s&&!s.user&&!s.user){const a=await Ms(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await Un(this.storage,this.storageKey+"-user"),await Po(this.storage,this.storageKey,s)):s.user=Id()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Td;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Td}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Rd(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Vn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Cu;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new Vn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),Te(i)){const a={session:null,error:i};return Rd(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Po(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=structuredClone(s);await Po(this.storage,this.storageKey,i)}else{const s=structuredClone(r);await Po(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Un(this.storage,this.storageKey),await Un(this.storage,this.storageKey+"-code-verifier"),await Un(this.storage,this.storageKey+"-user"),this.userStorage&&await Un(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Fr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Eo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Eo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Eo}ms, refresh threshold is ${ih} ticks`),s<=ih&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Ob)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Fr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await bo(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await Oe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await Oe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:a,error:l}=await Oe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(r){if(Te(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await Oe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Te(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Ad(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const f=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+qR>s)return n;const{data:i,error:a}=await Oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:g,error:y}=await this.getSession();if(y||!g.session)return{data:null,error:y};n=g.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=Ad(n);r!=null&&r.allowExpired||pA(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:i,header:s,signature:a},error:null}}const f=gA(s.alg),h=await crypto.subtle.importKey("jwk",u,f,!0,["verify"]);if(!await crypto.subtle.verify(f,h,a,tA(`${l}.${c}`)))throw new ch("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(n){if(Te(n))return{data:null,error:n};throw n}}}Ha.nextInstanceID=0;const AA=Ha;class IA extends AA{constructor(t){super(t)}}var OA=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(f){try{u(n.next(f))}catch(h){a(h)}}function c(f){try{u(n.throw(f))}catch(h){a(h)}}function u(f){f.done?i(f.value):s(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class DA{constructor(t,r,n){var s,i,a;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=$R(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:RR,realtime:IR,auth:Object.assign(Object.assign({},AR),{storageKey:u}),global:TR},h=zR(n??{},f);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=LR(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new ZT(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new PT(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new CR(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return OA(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:a,lock:l,debug:c},u,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new IA({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:a,lock:l,debug:c,fetch:f,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new mR(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const MA=(e,t,r)=>new DA(e,t,r),LA="https://hhcirfvubsugcuypjyxp.supabase.co",FA="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhoY2lyZnZ1YnN1Z2N1eXBqeXhwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE0MjE4OTMsImV4cCI6MjA2Njk5Nzg5M30.1B5paA-hI-zL0NG2st5xiJwecR8z9JBHzCTaAtwX38k",C=MA(LA,FA,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}});async function Db(e){try{const{data:t,error:r}=await C.from("wallet_links").insert([{user_id:e}]);return{data:t,error:r}}catch(t){return console.error("Exception in linkWallet:",t),{data:null,error:t}}}async function Eu(e){try{const{data:t,error:r}=await C.from("wallet_links").select("*").eq("user_id",e).maybeSingle();return{data:t,error:r}}catch(t){return console.error("Exception in getLinkedWallet:",t),{data:null,error:t}}}const Mb=Object.freeze(Object.defineProperty({__proto__:null,getLinkedWallet:Eu,linkWallet:Db,supabase:C},Symbol.toStringTag,{value:"Module"})),Lb=d.createContext(void 0),$A=({children:e})=>{const[t,r]=d.useState(null),[n,s]=d.useState(null),[i,a]=d.useState(!0),[l,c]=d.useState(!1),{toast:u}=Ft(),f=async b=>{try{const w=new Promise((j,N)=>setTimeout(()=>N(new Error("Admin check timeout")),2e3)),v=C.from("profiles").select("is_admin").eq("user_id",b).single(),{data:x,error:_}=await Promise.race([v,w]);c(!_&&x&&x.is_admin||!1)}catch{c(!1)}};d.useEffect(()=>{const b=setTimeout(()=>{a(!1)},3e3),{data:{subscription:w}}=C.auth.onAuthStateChange(async(v,x)=>{s(x),r((x==null?void 0:x.user)??null),x!=null&&x.user?f(x.user.id).catch(()=>{c(!1)}):c(!1),clearTimeout(b),a(!1)});return C.auth.getSession().then(async({data:{session:v}})=>{s(v),r((v==null?void 0:v.user)??null),v!=null&&v.user?f(v.user.id).catch(()=>{c(!1)}):c(!1),clearTimeout(b),a(!1)}).catch(()=>{clearTimeout(b),a(!1)}),()=>{w.unsubscribe(),clearTimeout(b)}},[]);const h=async(b,w,v)=>{const x=`${window.location.origin}/`,{error:_}=await C.auth.signUp({email:b,password:w,options:{emailRedirectTo:x,data:{username:v,display_name:v}}});return u(_?{title:"Sign up failed",description:_.message,variant:"destructive"}:{title:"Check your email",description:"We sent you a confirmation link to complete your sign up.",className:"bg-green-600 text-white border-green-700"}),{error:_}};async function m(b,w){try{const v=new AbortController,x=setTimeout(()=>v.abort(),5e3),_=await fetch("https://theronm18.sg-host.com/wp-json/jwt-auth/v1/token",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({username:b,password:w}),signal:v.signal});if(clearTimeout(x),_.ok){const j=await _.json();if(j.token)return localStorage.setItem("wp_jwt_token",j.token),localStorage.setItem("wp_jwt_validated","true"),localStorage.setItem("wp_jwt_validation_time",Date.now().toString()),console.log("WordPress JWT token stored successfully"),!0}return localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time"),console.warn("WordPress JWT token fetch failed"),!1}catch(v){return console.error("WordPress JWT token fetch error:",v),localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time"),!1}}const p={user:t,session:n,loading:i,isAdmin:l,signUp:h,signIn:async(b,w)=>{const{error:v}=await C.auth.signInWithPassword({email:b,password:w});if(!v)try{await m(b,w)||console.warn("WordPress JWT token could not be obtained, wallet features may not work")}catch(x){console.error("JWT token fetch failed:",x),localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time")}return v&&u({title:"Sign in failed",description:v.message,variant:"destructive"}),{error:v}},signOut:async()=>{try{const{error:b}=await C.auth.signOut();localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time"),r(null),s(null),u(b?{title:"Signed out",description:"You have been signed out (session was already missing).",className:"bg-green-600 text-white border-green-700"}:{description:"You have been signed out successfully.",className:"bg-green-600 text-white border-green-700",duration:3e3})}catch{r(null),s(null),u({title:"Signed out",description:"You have been signed out (local session cleared)",className:"bg-green-600 text-white border-green-700"})}}};return o.jsx(Lb.Provider,{value:p,children:e})},tt=()=>{const e=d.useContext(Lb);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},jt=({children:e})=>{const{user:t,loading:r}=tt(),n=Ye(),[s,i]=d.useState(!0),a=d.useRef(null);return d.useEffect(()=>{if(a.current&&clearTimeout(a.current),!r&&t){const l=setTimeout(()=>{i(!1)},2e3);a.current=l,C.from("profiles").select("deactivated").eq("user_id",t.id).single().then(({data:c,error:u})=>{a.current&&(clearTimeout(a.current),a.current=null),u?i(!1):c!=null&&c.deactivated?n("/deactivated",{replace:!0}):i(!1)}).catch(()=>{a.current&&(clearTimeout(a.current),a.current=null),i(!1)})}else!r&&!t&&n("/welcome");return()=>{a.current&&clearTimeout(a.current)}},[t,r,n]),r||s?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):t?o.jsx(o.Fragment,{children:e}):null},zA=rl("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-primary bg-transparent text-primary hover:bg-primary hover:text-primary-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",neon:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-[0_0_10px_hsl(var(--primary)),0_0_20px_hsl(var(--primary)),0_0_30px_hsl(var(--primary))] hover:shadow-[0_0_15px_hsl(var(--primary)),0_0_30px_hsl(var(--primary)),0_0_45px_hsl(var(--primary))] transition-all duration-300"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),K=d.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},i)=>{const a=n?vs:"button";return o.jsx(a,{className:Ee(zA({variant:t,size:r,className:e})),ref:i,...s})});K.displayName="Button";const Zm=({className:e="",showText:t=!0,showCircle:r=!1,circleSize:n,wordmark:s=!1})=>{const i=n||96,a=i*1.33,l=i*1.66;return o.jsxs("div",{className:`flex flex-col items-center justify-center ${e}`,children:[r&&o.jsx("div",{className:"relative mb-4 flex justify-center",children:o.jsx("div",{className:"bg-black border-4 border-primary rounded-full neon-glow overflow-hidden flex items-center justify-center relative",style:{width:i,height:i},children:o.jsx("img",{src:"/limey-tree-logo.png",alt:"Limey Tree Logo",style:{width:a,height:l,zIndex:2},className:"object-contain drop-shadow-[0_0_16px_hsl(120,100%,50%)]"})})}),t&&s&&o.jsxs("svg",{width:"420",height:"120",viewBox:"0 0 420 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"block mx-auto",style:{maxWidth:"100%",height:"auto"},children:[o.jsx("defs",{children:o.jsxs("filter",{id:"neon",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[o.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"6",floodColor:"#39FF14"}),o.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"12",floodColor:"#39FF14"}),o.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"24",floodColor:"#39FF14"})]})}),o.jsx("text",{x:"50%",y:"60%",textAnchor:"middle",dominantBaseline:"middle",fontFamily:"'Pacifico', 'Inter', cursive, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",fontWeight:"900",fontSize:"84",stroke:"#000",strokeWidth:"10",fill:"#39FF14",filter:"url(#neon)",style:{letterSpacing:"0.08em",paintOrder:"stroke fill"},transform:"rotate(-8 210 60) skewX(-8)",children:"Limey"}),o.jsx("text",{x:"50%",y:"60%",textAnchor:"middle",dominantBaseline:"middle",fontFamily:"'Pacifico', 'Inter', cursive, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",fontWeight:"900",fontSize:"84",fill:"#39FF14",style:{letterSpacing:"0.08em"},transform:"rotate(-8 210 60) skewX(-8)",children:"Limey"})]}),t&&!s&&o.jsx("span",{className:"text-4xl font-black text-primary tracking-wider logo-text-glow",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:900,letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))",WebkitTextStroke:"2px black",textShadow:"0 0 2px black, 0 0 4px black",backgroundImage:"url(/limey-tree-logo.png)",backgroundSize:"cover",backgroundRepeat:"repeat",WebkitBackgroundClip:"text",backgroundClip:"text",color:"transparent"},children:"Limey"}),t&&o.jsx("div",{className:"mt-2 text-center",children:o.jsx("p",{className:"text-muted-foreground text-sm",children:"Trinidad & Tobago"})})]})},UA=()=>o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:o.jsxs("div",{className:"text-center space-y-8",children:[o.jsx(Zm,{showCircle:!0,circleSize:192,wordmark:!0}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h2",{className:"text-2xl text-foreground",children:"Trinbago's Home for Creators"}),o.jsx("p",{className:"text-muted-foreground max-w-md mx-auto text-center px-[20px]",children:"Share your moments, discover local talent, and connect with the Caribbean community."})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(Gs,{to:"/signup",children:o.jsx(K,{variant:"neon",className:"w-64",children:"Join Limey"})}),o.jsx("div",{children:o.jsx(Gs,{to:"/login",children:o.jsx(K,{variant:"outline",className:"w-64 py-0",children:"Sign In"})})}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:["By signing up, you agree to our"," ",o.jsx(Gs,{to:"/terms",className:"text-primary hover:underline",children:"Terms of Service"})," ","and"," ",o.jsx(Gs,{to:"/privacy",className:"text-primary hover:underline",children:"Privacy Policy"}),"."]})]})]})}),Ze=d.forwardRef(({className:e,type:t,...r},n)=>o.jsx("input",{type:t,className:Ee("flex h-10 w-full rounded-md border border-input bg-input px-3 py-2 text-base text-foreground ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));Ze.displayName="Input";const ke=d.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:Ee("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));ke.displayName="Card";const To=d.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:Ee("flex flex-col space-y-1.5 p-6",e),...t}));To.displayName="CardHeader";const Ro=d.forwardRef(({className:e,...t},r)=>o.jsx("h3",{ref:r,className:Ee("text-2xl font-semibold leading-none tracking-tight",e),...t}));Ro.displayName="CardTitle";const BA=d.forwardRef(({className:e,...t},r)=>o.jsx("p",{ref:r,className:Ee("text-sm text-muted-foreground",e),...t}));BA.displayName="CardDescription";const Ao=d.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:Ee("p-6 pt-0",e),...t}));Ao.displayName="CardContent";const VA=d.forwardRef(({className:e,...t},r)=>o.jsx("div",{ref:r,className:Ee("flex items-center p-6 pt-0",e),...t}));VA.displayName="CardFooter";const WA=()=>{const[e,t]=d.useState(""),[r,n]=d.useState(""),[s,i]=d.useState(!1),[a,l]=d.useState(!1),{signIn:c,user:u,loading:f}=tt(),h=Ye(),[m]=Km();d.useEffect(()=>{if(u&&!f){const y=m.get("returnTo");h(y||"/")}},[u,f,h,m]);const g=async y=>{y.preventDefault(),i(!0);try{const{error:p}=await c(e,r);p&&console.error("Login error:",p)}catch(p){console.error("Login exception:",p)}i(!1)};return o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:o.jsxs(ke,{className:"w-full max-w-md p-8 space-y-6",children:[o.jsx(Zm,{showCircle:!0,wordmark:!0}),o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Welcome Back"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Sign in to your Limey account"})]}),o.jsxs("form",{onSubmit:g,className:"space-y-4",children:[o.jsx("div",{children:o.jsx(Ze,{type:"email",placeholder:"Email address",value:e,onChange:y=>t(y.target.value),required:!0})}),o.jsxs("div",{className:"relative",children:[o.jsx(Ze,{type:a?"text":"password",placeholder:"Password",value:r,onChange:y=>n(y.target.value),required:!0}),o.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground focus:outline-none",tabIndex:-1,onClick:()=>l(y=>!y),"aria-label":a?"Hide password":"Show password",children:a?o.jsx(Jo,{size:18}):o.jsx(Mt,{size:18})})]}),o.jsx(K,{type:"submit",variant:"neon",className:"w-full mt-6",disabled:s,children:s?"Signing In...":"Sign In"})]}),o.jsxs("div",{className:"text-center space-y-4",children:[o.jsx(Gs,{to:"/forgot-password",className:"text-primary hover:underline text-sm",children:"Forgot your password?"}),o.jsxs("div",{className:"text-muted-foreground",children:["Don't have an account?"," ",o.jsx(Gs,{to:"/signup",className:"text-primary hover:underline",children:"Sign up"})]})]})]})})},qA=()=>{const[e,t]=d.useState({username:"",email:"",password:"",confirmPassword:""}),[r,n]=d.useState(!1),[s,i]=d.useState(!1),[a,l]=d.useState(!1),{signUp:c,user:u,loading:f}=tt(),h=Ye();d.useEffect(()=>{u&&!f&&h("/")},[u,f,h]);const m=(y,p)=>{t(b=>({...b,[y]:p}))},g=async y=>{if(y.preventDefault(),e.password!==e.confirmPassword){console.error("Passwords do not match");return}n(!0);try{const{error:p}=await c(e.email,e.password,e.username);p||console.log("Signup successful, should redirect")}catch(p){console.error("Signup error:",p)}n(!1)};return o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:o.jsxs(ke,{className:"w-full max-w-md p-8 space-y-6",children:[o.jsx(Zm,{showCircle:!0,wordmark:!0}),o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Join Limey"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Create your creator account"})]}),o.jsxs("form",{onSubmit:g,className:"space-y-4",children:[o.jsx("div",{children:o.jsx(Ze,{type:"text",placeholder:"Username",value:e.username,onChange:y=>m("username",y.target.value),required:!0})}),o.jsx("div",{children:o.jsx(Ze,{type:"email",placeholder:"Email address",value:e.email,onChange:y=>m("email",y.target.value),required:!0})}),o.jsxs("div",{className:"relative",children:[o.jsx(Ze,{type:s?"text":"password",placeholder:"Password",value:e.password,onChange:y=>m("password",y.target.value),required:!0}),o.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground focus:outline-none",tabIndex:-1,onClick:()=>i(y=>!y),"aria-label":s?"Hide password":"Show password",children:s?o.jsx(Jo,{size:18}):o.jsx(Mt,{size:18})})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Ze,{type:a?"text":"password",placeholder:"Confirm Password",value:e.confirmPassword,onChange:y=>m("confirmPassword",y.target.value),required:!0}),o.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground focus:outline-none",tabIndex:-1,onClick:()=>l(y=>!y),"aria-label":a?"Hide password":"Show password",children:a?o.jsx(Jo,{size:18}):o.jsx(Mt,{size:18})})]}),o.jsx(K,{type:"submit",variant:"neon",className:"w-full mt-6",disabled:r,children:r?"Creating Account...":"Create Account"})]}),o.jsx("div",{className:"text-center",children:o.jsxs("div",{className:"text-muted-foreground",children:["Already have an account?"," ",o.jsx(Gs,{to:"/login",className:"text-primary hover:underline",children:"Sign in"})]})})]})})},HA=rl("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function vt({className:e,variant:t,...r}){return o.jsx("div",{className:Ee(HA({variant:t}),e),...r})}const ep=()=>{const{user:e,isAdmin:t}=tt(),[r,n]=d.useState(0),[s,i]=d.useState(0),[a,l]=d.useState(0),c=async()=>{if(e)try{const{data:u,error:f}=await C.from("messages").select("id").eq("receiver_id",e.id).eq("read_by_receiver",!1).eq("deleted_for_receiver",!1).eq("deleted_for_everyone",!1);let h=0,m=null;if(!t){const{data:g,error:y}=await C.from("system_notifications").select("id").eq("to_user_id",e.id).eq("read",!1);m=y,h=(g==null?void 0:g.length)||0}if(!f&&!m){const g=(u==null?void 0:u.length)||0,y=g+h;i(g),l(h),n(y)}}catch(u){console.error("Error fetching unread counts:",u)}};return d.useEffect(()=>{if(e){c();const u=setInterval(()=>{c()},1e4),f=()=>{document.hidden||c()};document.addEventListener("visibilitychange",f);const h=C.channel(`unread_messages_${e.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`receiver_id=eq.${e.id}`},()=>{i(g=>g+1),n(g=>g+1)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`receiver_id=eq.${e.id}`},g=>{g.new.read_by_receiver&&!g.old.read_by_receiver&&setTimeout(()=>c(),100)}).subscribe();let m=null;return t||(m=C.channel(`unread_notifications_${e.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"system_notifications",filter:`to_user_id=eq.${e.id}`},()=>{l(g=>g+1),n(g=>g+1)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"system_notifications",filter:`to_user_id=eq.${e.id}`},g=>{g.new.read&&!g.old.read&&setTimeout(()=>c(),100)}).subscribe()),()=>{clearInterval(u),document.removeEventListener("visibilitychange",f),h.unsubscribe(),m&&m.unsubscribe()}}},[e,t]),{totalUnreadCount:r,inboxUnreadCount:s,systemUnreadCount:a,refreshCounts:c}},nr=()=>{const e=Ye(),t=fn(),{totalUnreadCount:r}=ep(),n=[{path:"/",icon:iC},{path:"/friends",icon:ly},{path:"/upload",icon:io,isUpload:!0},{path:"/inbox",icon:wa},{path:"/profile",icon:oC}];return o.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border p-2 z-50",children:o.jsx("div",{className:"flex justify-around items-center max-w-md mx-auto",children:n.map(s=>{const i=s.icon;return o.jsx(K,{variant:s.isUpload?"neon":t.pathname===s.path?"default":"ghost",size:"sm",onClick:()=>e(s.path),className:s.isUpload?"px-3":"p-3",children:s.path==="/inbox"?o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"text-xl",role:"img","aria-label":"Messages",children:"💬"}),r>0&&o.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full min-w-[18px] h-[18px] flex items-center justify-center font-bold",children:r>99?"99+":r})]}):o.jsx(i,{size:20})},s.path)})})})};var tp="Avatar",[KA,VD]=ks(tp),[GA,Fb]=KA(tp),$b=d.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[s,i]=d.useState("idle");return o.jsx(GA,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:o.jsx(Ce.span,{...n,ref:t})})});$b.displayName=tp;var zb="AvatarImage",Ub=d.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...i}=e,a=Fb(zb,r),l=YA(n,i.referrerPolicy),c=er(u=>{s(u),a.onImageLoadingStatusChange(u)});return Tt(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?o.jsx(Ce.img,{...i,ref:t,src:n}):null});Ub.displayName=zb;var Bb="AvatarFallback",Vb=d.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...s}=e,i=Fb(Bb,r),[a,l]=d.useState(n===void 0);return d.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),a&&i.imageLoadingStatus!=="loaded"?o.jsx(Ce.span,{...s,ref:t}):null});Vb.displayName=Bb;function YA(e,t){const[r,n]=d.useState("idle");return Tt(()=>{if(!e){n("error");return}let s=!0;const i=new window.Image,a=l=>()=>{s&&n(l)};return n("loading"),i.onload=a("loaded"),i.onerror=a("error"),i.src=e,t&&(i.referrerPolicy=t),()=>{s=!1}},[e,t]),r}var Wb=$b,qb=Ub,Hb=Vb;const kt=d.forwardRef(({className:e,...t},r)=>o.jsx(Wb,{ref:r,className:Ee("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));kt.displayName=Wb.displayName;const Ct=d.forwardRef(({className:e,...t},r)=>o.jsx(qb,{ref:r,className:Ee("aspect-square h-full w-full",e),...t}));Ct.displayName=qb.displayName;const Et=d.forwardRef(({className:e,...t},r)=>o.jsx(Hb,{ref:r,className:Ee("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Et.displayName=Hb.displayName;const rp=({isOpen:e,onClose:t,video:r})=>{var m;const{toast:n}=Ft(),[s,i]=d.useState(!1);d.useEffect(()=>{if(e)i(!0);else{const g=setTimeout(()=>i(!1),300);return()=>clearTimeout(g)}},[e]);const a=`${window.location.origin}/video/${r.id}`,l=((m=r.profiles)==null?void 0:m.username)||r.username||"user",c=r.description?`${r.description}

By @${l} on Limey`:`Check out this amazing video by @${l} on Limey!`,u=[{name:"WhatsApp",icon:"💬",color:"bg-green-500",action:()=>{const g=`https://wa.me/?text=${encodeURIComponent(`${r.title}

${c}

${a}`)}`;window.open(g,"_blank")}},{name:"Facebook",icon:"📘",color:"bg-blue-600",action:()=>{const g=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(a)}&quote=${encodeURIComponent(c)}`;window.open(g,"_blank")}},{name:"Instagram",icon:"📷",color:"bg-gradient-to-r from-purple-500 to-pink-500",action:()=>{f(),n({title:"Link copied!",description:"Paste this link in your Instagram story or bio"})}},{name:"Twitter",icon:"🐦",color:"bg-blue-400",action:()=>{const g=`https://twitter.com/intent/tweet?text=${encodeURIComponent(c)}&url=${encodeURIComponent(a)}`;window.open(g,"_blank")}},{name:"Email",icon:"📧",color:"bg-gray-600",action:()=>{const g=`mailto:?subject=${encodeURIComponent(r.title)}&body=${encodeURIComponent(`${c}

${a}`)}`;window.open(g,"_blank")}},{name:"SMS",icon:"💬",color:"bg-green-600",action:()=>{const g=`sms:?body=${encodeURIComponent(`${r.title}

${c}

${a}`)}`;window.open(g,"_blank")}},{name:"Telegram",icon:"✈️",color:"bg-blue-500",action:()=>{const g=`https://t.me/share/url?url=${encodeURIComponent(a)}&text=${encodeURIComponent(c)}`;window.open(g,"_blank")}},{name:"LinkedIn",icon:"💼",color:"bg-blue-700",action:()=>{const g=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(a)}`;window.open(g,"_blank")}}],f=async()=>{const g=`${r.title}

${c}

${a}`;try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(g);else{const y=document.createElement("textarea");y.value=g,y.style.position="fixed",y.style.left="-999999px",y.style.top="-999999px",document.body.appendChild(y),y.focus(),y.select(),document.execCommand("copy"),document.body.removeChild(y)}n({title:"Link copied!",description:"Video link copied to clipboard"}),t()}catch(y){console.error("Failed to copy to clipboard:",y),n({title:"Copy failed",description:"Unable to copy link. Please try again.",variant:"destructive"})}},h=async()=>{try{navigator.share&&(await navigator.share({title:r.title,text:c,url:a}),t())}catch{console.log("Native sharing cancelled or failed")}};return s?o.jsxs("div",{className:"fixed inset-0 z-50 flex items-end justify-center",children:[o.jsx("div",{className:`absolute inset-0 bg-black transition-opacity duration-300 ${e?"opacity-50":"opacity-0"}`,onClick:t}),o.jsxs("div",{className:`relative w-full max-w-md mx-4 mb-4 bg-white rounded-t-3xl transform transition-transform duration-300 ease-out ${e?"translate-y-0":"translate-y-full"}`,children:[o.jsx("div",{className:"flex justify-center pt-3 pb-2",children:o.jsx("div",{className:"w-12 h-1 bg-gray-300 rounded-full"})}),o.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Share video"}),o.jsx(K,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8 rounded-full hover:bg-gray-100",children:o.jsx(Mr,{size:20,className:"text-gray-500"})})]}),o.jsx("div",{className:"px-6 py-4 border-b border-gray-100",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-16 bg-gray-200 rounded-lg overflow-hidden flex-shrink-0",children:r.thumbnail_url?o.jsx("img",{src:r.thumbnail_url.startsWith("http")?r.thumbnail_url:C.storage.from("limeytt-uploads").getPublicUrl(r.thumbnail_url).data.publicUrl,alt:r.title,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-gray-300 flex items-center justify-center",children:o.jsx(wi,{size:16,className:"text-gray-500"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium text-gray-900 truncate",children:r.title}),o.jsxs("p",{className:"text-sm text-gray-500",children:["@",l]})]})]})}),o.jsxs("div",{className:"px-6 py-6",children:[o.jsx("div",{className:"grid grid-cols-4 gap-4 mb-6",children:u.map(g=>o.jsxs("button",{onClick:g.action,className:"flex flex-col items-center gap-2 p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:`w-12 h-12 rounded-full ${g.color} flex items-center justify-center text-white text-xl shadow-lg`,children:g.icon}),o.jsx("span",{className:"text-xs text-gray-600 font-medium",children:g.name})]},g.name))}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("button",{onClick:f,className:"w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:o.jsx(iy,{size:18,className:"text-gray-600"})}),o.jsx("span",{className:"text-gray-900 font-medium",children:"Copy link"})]}),navigator.share&&o.jsxs("button",{onClick:h,className:"w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:o.jsx(Bf,{size:18,className:"text-gray-600"})}),o.jsx("span",{className:"text-gray-900 font-medium",children:"More options"})]})]})]})]})]}):null};function ll(){const e=localStorage.getItem("wp_jwt_token"),t=localStorage.getItem("wp_jwt_validated"),r=localStorage.getItem("wp_jwt_validation_time");if(e&&t==="true"&&r){const n=Date.now()-parseInt(r),s=24*60*60*1e3;return n>s?(localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time"),null):e}return null}async function Kb(){const e=ll();if(!e)throw new Error("Not authenticated with TrinEPay. Please sign in again to refresh your session.");try{const t=await fetch("https://theronm18.sg-host.com/wp-json/ttpaypal/v1/user-limits",{headers:{Authorization:`Bearer ${e}`,Accept:"application/json"}});if(!t.ok)throw t.status===401||t.status===403?(localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time"),new Error("Authentication expired. Please sign in again.")):new Error("Failed to fetch user limits");return await t.json()}catch(t){throw console.error("User limits error:",t),t}}async function Gb({email:e,password:t,passcode:r}){const n=ll();if(!n)throw new Error("Not authenticated with TrinEPay. Please sign in again to refresh your session.");try{const s=await fetch("https://theronm18.sg-host.com/wp-json/ttpaypal/v1/link",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`,Accept:"application/json"},mode:"cors",credentials:"omit",body:JSON.stringify({email:e,password:t,passcode:r})});if(!s.ok){let i="Failed to link wallet";try{const a=await s.json();i=a.message||a.error||i}catch{}throw(s.status===401||s.status===403)&&(localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time"),i="Authentication expired. Please sign in again."),new Error(i)}return await s.json()}catch(s){throw console.error("Wallet link error:",s),s}}async function Yb({amount:e}){const t=ll();if(!t)throw new Error("Not authenticated with TrinEPay. Please sign in again to refresh your session.");try{const r=await fetch("https://theronm18.sg-host.com/wp-json/ttpaypal/v1/deposit",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`,Accept:"application/json"},mode:"cors",credentials:"omit",body:JSON.stringify({amount:e})});if(!r.ok){let n="Failed to deposit";try{const s=await r.json();n=s.message||s.error||n}catch{}throw(r.status===401||r.status===403)&&(localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time"),n="Authentication expired. Please sign in again."),new Error(n)}return await r.json()}catch(r){throw console.error("Deposit error:",r),r}}async function Qb({amount:e}){const t=ll();if(!t)throw new Error("Not authenticated with TrinEPay. Please sign in again to refresh your session.");try{const r=await fetch("https://theronm18.sg-host.com/wp-json/ttpaypal/v1/withdraw",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`,Accept:"application/json"},body:JSON.stringify({amount:e})});if(!r.ok){let n="Failed to withdraw";try{const s=await r.json();n=s.message||s.error||n}catch{}throw(r.status===401||r.status===403)&&(localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time"),n="Authentication expired. Please sign in again."),new Error(n)}return await r.json()}catch(r){throw console.error("Withdraw error:",r),r}}async function Jb(){const e=ll();if(!e)throw new Error("Not authenticated with TrinEPay. Please sign in again to refresh your session.");try{const t=await fetch("https://theronm18.sg-host.com/wp-json/ttpaypal/v1/unlink",{method:"POST",headers:{Authorization:`Bearer ${e}`,Accept:"application/json"}});if(t.ok)return localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time"),await t.json();if(t.status===404)return console.log("TrinEPay unlink endpoint not found, handling locally"),localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time"),{success:!0,message:"Wallet unlinked locally"};{let r="Failed to unlink wallet";try{const n=await t.json();r=n.message||n.error||r}catch{}throw(t.status===401||t.status===403)&&(localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time"),r="Authentication expired. Please sign in again."),new Error(r)}}catch(t){return console.log("Error calling TrinEPay unlink endpoint, handling locally:",t),localStorage.removeItem("wp_jwt_token"),localStorage.removeItem("wp_jwt_validated"),localStorage.removeItem("wp_jwt_validation_time"),{success:!0,message:"Wallet unlinked locally"}}}async function Mi(e){const{supabase:t}=await In(async()=>{const{supabase:r}=await Promise.resolve().then(()=>Mb);return{supabase:r}},void 0);try{const{data:r,error:n}=await t.from("trincredits_transactions").select("transaction_type, amount").eq("user_id",e).eq("status","completed");if(n)throw console.error("Error fetching transactions:",n),new Error("Failed to fetch transaction history");let s=0;return r==null||r.forEach(i=>{i.transaction_type==="deposit"||i.transaction_type==="refund"||i.transaction_type==="reward"?s+=i.amount:i.transaction_type==="withdrawal"&&(s-=i.amount)}),s}catch(r){throw console.error("Error calculating balance:",r),new Error("Failed to calculate balance")}}async function lo({userId:e,transactionType:t,amount:r,description:n,referenceId:s}){const{supabase:i}=await In(async()=>{const{supabase:a}=await Promise.resolve().then(()=>Mb);return{supabase:a}},void 0);try{const{data:a,error:l}=await i.from("profiles").select("trini_credits").eq("user_id",e).single();if(l)throw console.error("Error fetching current balance:",l),new Error("Failed to fetch current balance");const c=a.trini_credits||0;let u=c;t==="deposit"||t==="refund"||t==="reward"?u=c+r:t==="withdrawal"&&(u=c-r);const{data:f,error:h}=await i.from("trincredits_transactions").insert({user_id:e,transaction_type:t,amount:r,balance_before:c,balance_after:u,description:n,reference_id:s,status:"completed"}).select().single();if(h)throw console.error("Error inserting transaction:",h),new Error("Failed to record transaction");const{error:m}=await i.from("profiles").update({trini_credits:u}).eq("user_id",e);if(m)throw console.error("Error updating balance:",m),new Error("Failed to update balance");return f}catch(a){throw console.error("Error recording transaction:",a),new Error("Failed to record transaction")}}async function Xb(e,t){try{const r=await Mi(e);return r<t?{success:!1,error:`Insufficient balance. You have TT${r.toFixed(2)} but need TT${t.toFixed(2)}`}:(await lo({userId:e,transactionType:"withdrawal",amount:t,description:"Debit for Boost",referenceId:`boost_${Date.now()}`}),{success:!0})}catch(r){return console.error("Error deducting balance:",r),{success:!1,error:r instanceof Error?r.message:"Failed to deduct balance"}}}const Bv=Object.freeze(Object.defineProperty({__proto__:null,deductTrincredits:Xb,depositToApp:Yb,getTrincreditsBalance:Mi,getUserLimits:Kb,linkWallet:Gb,recordTrincreditsTransaction:lo,unlinkWallet:Jb,withdrawToWallet:Qb},Symbol.toStringTag,{value:"Module"})),Zb=async()=>{try{const{data:e,error:t}=await C.from("profiles").select("user_id").eq("is_admin",!0).single();return t?(console.error("Error getting admin user:",t),null):(e==null?void 0:e.user_id)||null}catch(e){return console.error("Error getting admin user:",e),null}},sa={1:15,3:40,7:85,14:150,30:250},QA=(e,t)=>{const r=new Date(e);return r.setDate(r.getDate()+t),r},JA=async(e,t,r)=>{try{const n=await Zb();if(!n)return console.warn("Admin account not found for boost transaction tracking"),{success:!0};try{const{error:s}=await C.from("boost_transactions").insert({sponsored_ad_id:r,user_id:t,admin_id:n,amount:e,transaction_type:"boost_payment",status:"completed"});s?console.error("Error recording boost transaction (non-critical):",s):console.log("Boost transaction recorded successfully")}catch(s){console.error("Exception recording boost transaction (non-critical):",s)}return{success:!0}}catch(n){return console.error("Error in transferBoostPaymentToAdmin:",n),{success:!0}}},Dd=async e=>{try{const t=sa[e.boost_duration],r=new Date,n=QA(r,e.boost_duration),{data:s,error:i}=await C.from("sponsored_ads").insert({...e,boost_cost:t,campaign_start:r.toISOString(),campaign_end:n.toISOString(),status:e.status||"pending"}).select("id").single();return i?(console.error("Error creating sponsored ad:",i),{success:!1,error:"Failed to create sponsored ad"}):{success:!0,adId:s.id}}catch(t){return console.error("Error creating sponsored ad:",t),{success:!1,error:"Failed to create sponsored ad"}}},e_=async e=>{try{const{data:t,error:r}=await C.from("sponsored_ads").select("*").eq("user_id",e).order("created_at",{ascending:!1});return r?(console.error("Error fetching user sponsored ads:",r),[]):t||[]}catch(t){return console.error("Error fetching user sponsored ads:",t),[]}},XA=async()=>{try{const{data:e,error:t}=await C.from("sponsored_ads").select("*").order("created_at",{ascending:!1});if(t)return console.error("Error fetching sponsored ads:",t),[];if(!e||e.length===0)return[];const r=[...new Set(e.map(l=>l.user_id).filter(Boolean))],{data:n,error:s}=await C.from("profiles").select("user_id, username, display_name, avatar_url").in("user_id",r);if(s)return console.error("Error fetching profiles:",s),e;const i=new Map;return n==null||n.forEach(l=>{i.set(l.user_id,l)}),e.map(l=>({...l,profiles:i.get(l.user_id)||null}))}catch(e){return console.error("Error fetching all sponsored ads:",e),[]}},ZA=async e=>{try{const{data:t,error:r}=await C.from("sponsored_ads").select("boost_cost, user_id, title").eq("id",e).single();if(r||!t)return console.error("Error fetching ad details:",r),{success:!1,error:"Failed to fetch ad details"};const{data:n,error:s}=await C.from("profiles").select("username, display_name").eq("user_id",t.user_id).single(),i=(n==null?void 0:n.username)||(n==null?void 0:n.display_name)||"Unknown User",a=await Zb();if(!a)return{success:!1,error:"Admin account not found"};const{error:l}=await C.from("sponsored_ads").update({status:"approved",updated_at:new Date().toISOString()}).eq("id",e);if(l)return console.error("Error approving sponsored ad:",l),{success:!1,error:"Failed to approve ad"};try{await lo({userId:a,transactionType:"deposit",amount:t.boost_cost,description:`Boost Credit from ${i}`,referenceId:`boost_revenue_${e}`})}catch(c){return console.error("Error crediting admin:",c),{success:!1,error:"Failed to process admin payment. Please try again."}}return{success:!0}}catch(t){return console.error("Error approving sponsored ad:",t),{success:!1,error:"Failed to approve ad"}}},e4=async e=>{try{const{data:t,error:r}=await C.from("sponsored_ads").select("boost_cost, user_id, title").eq("id",e).single();if(r||!t)return console.error("Error fetching ad details:",r),{success:!1,error:"Failed to fetch ad details"};const{error:n}=await C.from("sponsored_ads").update({status:"rejected",updated_at:new Date().toISOString()}).eq("id",e);if(n)return console.error("Error rejecting sponsored ad:",n),{success:!1,error:"Failed to reject ad"};try{await lo({userId:t.user_id,transactionType:"refund",amount:t.boost_cost,description:`Boost Refund - Ad Rejected: "${t.title}"`,referenceId:`boost_refund_${e}`})}catch(s){return console.error("Error refunding user:",s),{success:!1,error:"Failed to process user refund. Please try again."}}return{success:!0}}catch(t){return console.error("Error rejecting sponsored ad:",t),{success:!1,error:"Failed to reject ad"}}},t4=async(e,t,r=0)=>{try{await C.from("ad_impressions").insert({sponsored_ad_id:e,viewer_id:t,view_duration:r}),await C.rpc("increment_ad_impressions",{ad_id:e})}catch(n){console.error("Error tracking ad impression:",n)}},r4=async(e,t)=>{try{await C.from("ad_clicks").insert({sponsored_ad_id:e,viewer_id:t}),await C.rpc("increment_ad_clicks",{ad_id:e})}catch(r){console.error("Error tracking ad click:",r)}},n4=async(e,t)=>{try{const{data:r,error:n}=await C.from("sponsored_ads").select("user_id, video_url, thumbnail_url, status, boost_cost, title").eq("id",e).single();if(n||!r)return console.error("Error fetching ad details:",n),{success:!1,error:"Ad not found"};if(r.user_id!==t)return{success:!1,error:"You can only delete your own ads"};if(r.status==="active"||r.status==="approved")try{await lo({userId:t,transactionType:"refund",amount:r.boost_cost,description:`Boost Refund - Ad Deleted: "${r.title}"`,referenceId:`ad_delete_${e}`})}catch(i){return console.error("Error refunding user:",i),{success:!1,error:"Failed to process refund. Please contact support."}}const{error:s}=await C.from("sponsored_ads").delete().eq("id",e);if(s)return console.error("Error deleting sponsored ad:",s),{success:!1,error:"Failed to delete ad"};try{if(r.video_url){const i=r.video_url.split("/").pop();i&&await C.storage.from("limeytt-uploads").remove([i])}if(r.thumbnail_url){const i=r.thumbnail_url.split("/").pop();i&&await C.storage.from("limeytt-uploads").remove([i])}}catch(i){console.error("Error deleting files from storage:",i)}return{success:!0}}catch(r){return console.error("Error deleting sponsored ad:",r),{success:!1,error:"Failed to delete ad"}}},Vv=({src:e,className:t,globalMuted:r,videoId:n,user:s,onViewRecorded:i,...a})=>{const l=d.useRef(null),[c,u]=d.useState(!1),[f,h]=d.useState(!1),[m,g]=d.useState(!1),y=d.useRef(null),p=async()=>{try{"wakeLock"in navigator&&(y.current=await navigator.wakeLock.request("screen"))}catch(v){console.error("Failed to request wake lock:",v)}},b=async()=>{if(y.current)try{await y.current.release(),y.current=null}catch(v){console.error("Failed to release wake lock:",v)}};d.useEffect(()=>{const v=l.current;if(!v)return;v.muted=!0;const x=new window.IntersectionObserver(([j])=>{j.isIntersecting&&j.intersectionRatio>=.5?(u(!0),v.play().catch(N=>{})):(u(!1),v.pause(),v.currentTime=0)},{threshold:.5});x.observe(v);const _=setTimeout(()=>{v.muted=r},1e3);return()=>{x.unobserve(v),clearTimeout(_)}},[r]),d.useEffect(()=>{if(c&&f&&!m&&n){const v=setTimeout(async()=>{try{const{data:x,error:_}=await C.rpc("record_video_view",{video_uuid:n});_||(g(!0),x&&i&&i(n))}catch{}},5e3);return()=>{clearTimeout(v)}}},[c,f,m,n,i]),d.useEffect(()=>{l.current&&(l.current.muted=r)},[r]),d.useEffect(()=>{const v=l.current;if(!v)return;const x=()=>{h(!0),p()},_=()=>{h(!1),b()};return v.addEventListener("play",x),v.addEventListener("pause",_),()=>{v.removeEventListener("play",x),v.removeEventListener("pause",_),b()}},[]);const w=()=>{l.current&&(f?l.current.pause():l.current.play())};return o.jsxs("div",{className:"relative w-full h-full",children:[o.jsx("video",{ref:l,src:e,loop:!0,muted:r,playsInline:!0,className:t,...a}),c&&!f&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20",children:o.jsx("button",{onClick:v=>{v.stopPropagation(),w()},className:"w-16 h-16 flex items-center justify-center rounded-full bg-black/60 hover:bg-black/80 text-white","aria-label":"Play","data-control":!0,children:o.jsx(xi,{size:32})})})]})},s4=()=>{const[e,t]=d.useState("All"),[r,n]=d.useState(null),[s,i]=d.useState([]),[a,l]=d.useState(!0),[c,u]=d.useState(null),[f,h]=d.useState(0),[m,g]=d.useState(!1),[y,p]=d.useState(""),[b,w]=d.useState(null),[v,x]=d.useState(!1);d.useState({}),d.useState({});const[_,j]=d.useState({}),[N,S]=d.useState({}),[k,U]=d.useState({}),[W,V]=d.useState({}),[q,re]=d.useState({}),[$,ee]=d.useState({}),[G,J]=d.useState(!1),[P,F]=d.useState({}),[Q,se]=d.useState(!1),[O,X]=d.useState(null),[ie,le]=d.useState([]),[T,L]=d.useState(!1),[Y,D]=d.useState(null),[M,z]=d.useState({});d.useRef({});const ae=d.useRef(null),me=d.useRef(null),we=Ye();tt();const{user:I}=tt();d.useEffect(()=>{const A=document.createElement("style");return A.textContent=`
      @keyframes fire-glow {
        0%, 100% { 
          filter: drop-shadow(0 0 5px #ff6b35) drop-shadow(0 0 10px #ff8c42) drop-shadow(0 0 15px #ffa726);
          transform: rotate(-1deg) scale(1);
        }
        25% { 
          filter: drop-shadow(0 0 8px #ff5722) drop-shadow(0 0 15px #ff7043) drop-shadow(0 0 20px #ffab40);
          transform: rotate(1deg) scale(1.05);
        }
        50% { 
          filter: drop-shadow(0 0 6px #ff6b35) drop-shadow(0 0 12px #ff8c42) drop-shadow(0 0 18px #ffa726);
          transform: rotate(-0.5deg) scale(1.02);
        }
        75% { 
          filter: drop-shadow(0 0 9px #ff5722) drop-shadow(0 0 16px #ff7043) drop-shadow(0 0 22px #ffab40);
          transform: rotate(0.5deg) scale(1.03);
        }
      }
      
      .animate-fire {
        animation: fire-glow 2s ease-in-out infinite;
        display: inline-block;
        transform-origin: center bottom;
      }
    `,document.head.appendChild(A),()=>{document.head.removeChild(A)}},[]);const[R,B]=Km();Ft();const Z=["Anime","Bar Limes","Cartoon","Carnival","Comedy","Dance","Dancehall","DIY Projects","Educational","Events","Fete","Funny Vids","HOW TOs","Local News","Music Vids","Parties","Soca","Trini Celebs"],ue=fe.useMemo(()=>r?s.filter(A=>A.description&&A.description.toLowerCase().includes(`#${r.toLowerCase()}`)):e&&e!=="All"?s.filter(A=>A.category===e):s,[s,e,r]);d.useEffect(()=>{Yt()},[e]),d.useEffect(()=>{const A=R.get("video");if(A&&s.length>0){const oe=s.findIndex(pe=>pe.id===A);oe!==-1&&(setTimeout(()=>{const pe=document.querySelector(`[data-video-id="${A}"]`);pe&&(pe.scrollIntoView({behavior:"smooth",block:"start"}),h(oe))},500),B(pe=>{const xe=new URLSearchParams(pe);return xe.delete("video"),xe}))}},[s,R,B]),d.useEffect(()=>{m&&me.current&&me.current.focus()},[m]);const ve=async A=>{if(!(!A||A.length===0))try{const oe=[...new Set(A.map(ye=>ye.user_id))],{data:pe,error:xe}=await C.from("profiles").select("user_id, username, avatar_url").in("user_id",oe);if(xe)return;if(pe&&pe.length>0){const ye=new Map;pe.forEach(je=>ye.set(je.user_id,je));const ge=A.map(je=>{const Ue=ye.get(je.user_id);return Ue?{...je,profiles:{...je.profiles,username:Ue.username,avatar_url:Ue.avatar_url},avatar_url:Ue.avatar_url}:je});b!==null?w(ge):i(ge)}}catch{}};d.useEffect(()=>{if(!I)return;const A=C.channel("profiles_changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles"},oe=>{ve(b!==null?b:s)}).subscribe(oe=>{});return()=>{C.removeChannel(A)}},[I,s,b]),d.useEffect(()=>{if(!I)return;const A=C.channel("videos_realtime").on("postgres_changes",{event:"UPDATE",schema:"public",table:"videos"},async ye=>{try{if(ye.new&&ye.new.id){const ge=ye.new.id,je=ye.new.like_count||0,Ue=ye.new.share_count||0,pt=ye.new.save_count||0;U(Be=>({...Be,[ge]:je})),V(Be=>({...Be,[ge]:Ue})),re(Be=>({...Be,[ge]:pt}))}}catch(ge){console.error("Unexpected error in videos realtime handler:",ge)}}).subscribe(),oe=C.channel("likes_realtime").on("postgres_changes",{event:"*",schema:"public",table:"video_likes"},async ye=>{var ge;try{if(ye.eventType==="INSERT"&&((ge=ye.new)==null?void 0:ge.user_id)===I.id)S(je=>({...je,[ye.new.video_id]:!0}));else if(ye.eventType==="DELETE"&&ye.old&&ye.old.video_id){const je=ye.old.video_id;S(Ue=>({...Ue,[je]:!1}))}}catch(je){console.error("Error in likes realtime handler:",je)}}).subscribe(),pe=C.channel("video_views_realtime").on("postgres_changes",{event:"INSERT",schema:"public",table:"video_views"},async ye=>{const ge=ye.new;if(ge&&ge.video_id)try{const{data:je,error:Ue}=await C.rpc("get_genuine_view_count",{video_uuid:ge.video_id});ee(!Ue&&typeof je=="number"?pt=>({...pt,[ge.video_id]:je}):pt=>{const Be=(pt[ge.video_id]||0)+1;return{...pt,[ge.video_id]:Be}})}catch(je){console.error("Error getting genuine view count:",je),ee(Ue=>{const pt=(Ue[ge.video_id]||0)+1;return{...Ue,[ge.video_id]:pt}})}}).subscribe(),xe=C.channel("saved_videos_realtime").on("postgres_changes",{event:"*",schema:"public",table:"saved_videos"},async ye=>{var ge;try{ye.eventType==="INSERT"&&((ge=ye.new)==null?void 0:ge.user_id)===I.id?F(je=>({...je,[ye.new.video_id]:!0})):ye.eventType==="DELETE"&&ye.old&&ye.old.user_id===I.id&&F(je=>({...je,[ye.old.video_id]:!1}))}catch(je){console.error("Error in saved_videos realtime handler:",je)}}).subscribe();return()=>{C.removeChannel(A),C.removeChannel(oe),C.removeChannel(pe),C.removeChannel(xe)}},[I,s]),d.useEffect(()=>{},[s,a]);const he=async A=>{if(A&&A.preventDefault(),!y.trim()){w(null);return}x(!0);let oe=C.from("videos").select("*, profiles!inner(username, avatar_url)").order("created_at",{ascending:!1}).limit(100);if(y.startsWith("#")){const ye=y.replace("#","").toLowerCase();oe=oe.ilike("description",`%#${ye}%`)}else if(y.startsWith("@")){const ye=y.replace("@","").toLowerCase();oe=oe.ilike("profiles.username",`%${ye}%`)}else oe=oe.or(`title.ilike.%${y}%,description.ilike.%${y}%,category.ilike.%${y}%,tags.ilike.%${y}%,profiles.username.ilike.%${y}%`);const{data:pe,error:xe}=await oe;if(xe){let ye=C.from("videos").select("*").order("created_at",{ascending:!1}).limit(50);if(y.startsWith("#")){const Ue=y.replace("#","").toLowerCase();ye=ye.ilike("description",`%#${Ue}%`)}else if(y.startsWith("@")){const Ue=y.replace("@","").toLowerCase();ye=ye.ilike("username",`%${Ue}%`)}else ye=ye.or(`title.ilike.%${y}%,description.ilike.%${y}%,category.ilike.%${y}%,tags.ilike.%${y}%,username.ilike.%${y}%`);const{data:ge,error:je}=await ye;if(je)w([]);else if(ge&&ge.length>0){const Ue=[...new Set(ge.map(zt=>zt.user_id))],{data:pt}=await C.from("profiles").select("user_id, username, avatar_url").in("user_id",Ue),Be=new Map;pt&&pt.forEach(zt=>Be.set(zt.user_id,zt));const vo=ge.map(zt=>({...zt,profiles:Be.get(zt.user_id)||null}));w(vo),await ve(vo)}else w([])}else w(pe||[]),await Ge(pe||[]),await Ne(pe||[]),await ve(pe||[]);x(!1)},Ie=async()=>{try{const{data:A,error:oe}=await C.rpc("get_active_sponsored_ads");return oe?[]:(A||[]).map(xe=>({...xe,isSponsored:!0}))}catch{return[]}},Fe=(A,oe)=>{if(oe.length===0)return A;const pe=[];let xe=0;const ye=()=>Math.floor(Math.random()*3)+3;let ge=ye();if(A.forEach((je,Ue)=>{pe.push(je),e==="All"&&Ue>=ge&&xe<oe.length&&(pe.push(oe[xe]),xe++,ge=Ue+ye())}),e==="All"&&xe<oe.length)for(;xe<oe.length;)pe.push(oe[xe]),xe++;return pe},We=A=>{if(M[A.id])return;const oe=A.duration||30;z(xe=>({...xe,[A.id]:oe}));const pe=setInterval(()=>{z(xe=>{const ye=(xe[A.id]||0)-1;return ye<=0?(clearInterval(pe),{...xe,[A.id]:0}):{...xe,[A.id]:ye}})},1e3)},bt=async A=>{await r4(A.id,I==null?void 0:I.id),D(A),L(!0)},$t=async(A,oe=0)=>{await t4(A.id,I==null?void 0:I.id,oe)},Yt=async()=>{try{l(!0),u(null);let A=C.from("videos").select("*, like_count, view_count, share_count, save_count").order("created_at",{ascending:!1}).limit(100);e!=="All"&&(A=A.eq("category",e));const{data:oe,error:pe}=await A;if(pe){u("Failed to load videos. Please try again.");return}const xe={},ye={},ge={};oe==null||oe.forEach(Be=>{xe[Be.id]=Be.like_count||0,ye[Be.id]=Be.share_count||0,ge[Be.id]=Be.save_count||0}),U(Be=>({...Be,...xe})),V(Be=>({...Be,...ye})),re(Be=>({...Be,...ge}));const je=(oe||[]).filter(Be=>{var zt;return!((zt=Be.profiles)!=null&&zt.deactivated)}),Ue=await Ie();le(Ue);const pt=Fe(je,Ue);i(pt),await hn(je),await Ge(je),await Cr(je),await Ne(je),await ve(je)}catch{u("Failed to load videos. Please try again.")}finally{l(!1)}},hr=A=>{X(A),se(!0)},Rt=async(A,oe)=>{if(I)try{const{data:pe}=await C.from("follows").select("*").eq("follower_id",I.id).eq("following_id",A).single();if(pe)return await C.from("follows").delete().eq("follower_id",I.id).eq("following_id",A),j(xe=>({...xe,[A]:!1})),!1;{const{error:xe}=await C.from("follows").insert({follower_id:I.id,following_id:A});return xe?(xe&&xe.code,!1):(j(ye=>({...ye,[A]:!0})),!0)}}catch{return _[A]||!1}},At=A=>A.username?A.username:A.user_id?`user_${A.user_id.replace(/[^a-zA-Z0-9]/g,"").slice(0,8)}`:"unknown_user",kr=A=>{const oe=At(A);return I&&A.user_id===I.id?"/profile":`/profile/${oe}`},hn=async A=>{if(I)try{const oe=A.map(ge=>ge.user_id).filter(ge=>ge!==I.id);if(oe.length===0)return;const{data:pe}=await C.from("follows").select("following_id").eq("follower_id",I.id).in("following_id",oe),xe=new Set((pe==null?void 0:pe.map(ge=>ge.following_id))||[]),ye={};A.forEach(ge=>{ge.user_id!==I.id&&(ye[ge.user_id]=xe.has(ge.user_id))}),j(ge=>({...ge,...ye}))}catch{}},mn=async A=>{if(I)try{const oe=N[A]||!1,pe=k[A]||0;S(ge=>({...ge,[A]:!oe})),U(ge=>({...ge,[A]:oe?Math.max(0,pe-1):pe+1}));const{data:xe,error:ye}=await C.rpc("toggle_video_like",{video_uuid:A});if(ye){S(ge=>({...ge,[A]:oe})),U(ge=>({...ge,[A]:pe}));return}}catch{}},Ge=async A=>{if(I)try{const oe=A.map(ge=>ge.id);if(oe.length===0)return;const pe=new Set,xe=5;for(let ge=0;ge<oe.length;ge+=xe){const je=oe.slice(ge,ge+xe);await Promise.all(je.map(async Ue=>{try{const{data:pt,error:Be}=await C.from("video_likes").select("id").eq("video_id",Ue).eq("user_id",I.id);!Be&&pt&&pt.length>0&&pe.add(Ue)}catch{}}))}const ye={};A.forEach(ge=>{ye[ge.id]=pe.has(ge.id)}),S(ge=>({...ge,...ye}))}catch{}},Cr=async A=>{try{const oe={};for(const pe of A)try{const{data:xe,error:ye}=await C.rpc("get_genuine_view_count",{video_uuid:pe.id});!ye&&typeof xe=="number"?oe[pe.id]=xe:oe[pe.id]=pe.view_count||0}catch{oe[pe.id]=pe.view_count||0}ee(pe=>({...pe,...oe}))}catch(oe){console.error("Error checking view counts:",oe)}},sr=async A=>{try{const{data:oe,error:pe}=await C.rpc("get_genuine_view_count",{video_uuid:A});ee(!pe&&typeof oe=="number"?xe=>({...xe,[A]:oe}):xe=>({...xe,[A]:(xe[A]||0)+1}))}catch(oe){console.error("Error updating view count:",oe),ee(pe=>({...pe,[A]:(pe[A]||0)+1}))}},Mn=A=>A<1e3?A.toString():A<1e6?(A/1e3).toFixed(1)+"K":(A/1e6).toFixed(1)+"M",Ne=async A=>{if(!(!I||A.length===0))try{const oe=A.map(je=>je.id),xe=(await C.from("saved_videos").select("video_id").eq("user_id",I.id).in("video_id",oe)).data||[],ye=new Set(xe.map(je=>je.video_id)),ge={};A.forEach(je=>{je&&je.id&&(ge[je.id]=ye.has(je.id))}),F(ge)}catch(oe){console.error("Error checking saved status:",oe)}},$e=async A=>{if(I)try{if(P[A]){const{error:oe}=await C.from("saved_videos").delete().eq("user_id",I.id).eq("video_id",A);if(oe)throw oe;F(pe=>({...pe,[A]:!1}))}else{const{error:oe}=await C.from("saved_videos").insert({user_id:I.id,video_id:A});if(oe)throw oe;F(pe=>({...pe,[A]:!0}))}}catch(oe){console.error("Error saving/unsaving video:",oe),F(pe=>({...pe,[A]:!pe[A]}))}};function ze(A){return A.split(/(#[\w-]+)/g).map((oe,pe)=>/^#[\w-]+$/.test(oe)?o.jsx("button",{className:"text-lime-400 hover:underline font-semibold",onClick:xe=>{xe.stopPropagation(),n(oe.substring(1))},children:oe},pe):oe)}const _t=r||e&&e!=="All";return o.jsxs("div",{className:"min-h-screen bg-black",children:[o.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10 p-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-2xl font-black text-white tracking-wider logo-text-glow",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:"900",letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))"},children:"Limey"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(K,{variant:"ghost",size:"icon",onClick:()=>g(A=>!A),"aria-label":"Search",className:"text-white hover:bg-white/10",children:o.jsx(Hg,{size:20})}),o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>we("/trending"),className:"text-white hover:bg-white/10","aria-label":"Trending",children:o.jsx("span",{className:"animate-fire text-xl",children:"🔥"})}),o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>we("/live"),className:"text-white hover:bg-white/10","aria-label":"Live",children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),o.jsx("span",{className:"text-sm font-medium",children:"LIVE"})]})}),o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>we("/settings"),className:"text-white hover:bg-white/10",children:o.jsx(du,{size:16})})]})]}),m&&o.jsxs(o.Fragment,{children:[o.jsxs("form",{onSubmit:he,className:"flex flex-col gap-2 mt-4 mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{ref:me,type:"text",className:"flex-1 p-2 border rounded text-base bg-black/50 text-white border-white/20 placeholder-white/50",placeholder:"Search videos by title or hashtags...",value:y,onChange:A=>p(A.target.value)}),o.jsx(K,{type:"submit",variant:"default",size:"icon","aria-label":"Go",disabled:v,children:v?o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):o.jsx(Hg,{size:18})}),o.jsx(K,{type:"button",variant:"ghost",size:"icon",onClick:()=>{g(!1),p(""),w(null)},"aria-label":"Close",className:"text-white hover:bg-white/10",children:o.jsx(Mr,{size:18})})]}),o.jsx("div",{className:"overflow-x-auto pb-2 -mx-2 px-2",children:o.jsxs("div",{className:"flex space-x-2",children:[o.jsx(K,{variant:"outline",size:"sm",className:`whitespace-nowrap bg-black border-white text-white hover:bg-black/80 hover:text-lime-400 ${e==="All"?"border-lime-400 text-lime-400":"border-white/50"}`,onClick:()=>{t("All"),n(null),w(null)},children:"All"},"all"),Z.map(A=>o.jsx(K,{variant:"outline",size:"sm",className:`whitespace-nowrap bg-black border-white text-white hover:bg-black/80 hover:text-lime-400 ${e===A?"border-lime-400 text-lime-400":"border-white/50"}`,onClick:()=>{t(A),n(null),w(null)},children:A},A))]})})]}),_t&&o.jsx("div",{className:"flex justify-start mb-2",children:o.jsxs(K,{variant:"ghost",className:"bg-black/70 text-white rounded-full px-4 py-2 flex items-center gap-2 shadow-lg hover:bg-black/80 border-none",onClick:()=>{n(null),t("All")},children:[o.jsx(Tn,{size:20,className:"text-white"}),o.jsx("span",{className:"font-semibold",children:"All Videos"})]})})]})]}),o.jsx("div",{className:"fixed top-20 right-4 z-40",children:o.jsx(K,{variant:"ghost",size:"icon",onClick:()=>J(A=>!A),"aria-label":"Toggle Global Mute",className:"w-12 h-12 rounded-full p-0 text-white hover:bg-white/10",children:G?o.jsx(Tm,{size:24,className:"text-white"}):o.jsx(Pm,{size:24,className:"text-white"})})}),_t&&!m&&o.jsx("div",{className:"fixed top-16 left-4 z-50",children:o.jsxs(K,{variant:"ghost",className:"bg-black/70 text-white rounded-full px-4 py-2 flex items-center gap-2 shadow-lg hover:bg-black/80 border-none",onClick:()=>{n(null),t("All")},children:[o.jsx(Tn,{size:20,className:"text-white"}),o.jsx("span",{className:"font-semibold",children:"All Videos"})]})}),o.jsx("div",{ref:ae,className:"h-screen overflow-y-auto snap-y snap-mandatory",style:{scrollSnapType:"y mandatory"},children:a?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):c?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-red-400 mb-4",children:c}),o.jsx(K,{onClick:Yt,variant:"outline",className:"text-white border-white/20 hover:bg-white/10",children:"Try Again"})]}):b!==null?v?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):b.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Yg,{size:32,className:"text-white/70"})}),o.jsx("h3",{className:"text-lg font-semibold mb-2 text-white",children:"No results found"}),o.jsx("p",{className:"text-white/70 mb-4",children:"Try searching with different keywords or hashtags"}),o.jsx(K,{onClick:()=>{g(!1),p(""),w(null)},variant:"outline",className:"text-white border-white/20 hover:bg-white/10",children:"Clear Search"})]}):o.jsx("div",{className:"space-y-0",children:b.map(A=>o.jsxs("div",{"data-video-id":A.id,className:"relative h-screen snap-start snap-always flex items-center justify-center",children:["  ",o.jsx("div",{className:"absolute top-0 left-0 right-0 h-16 bg-black z-10"}),o.jsx("div",{className:"absolute inset-0 top-16 bottom-32 overflow-hidden",children:o.jsx(Vv,{src:A.video_url,className:"w-full h-full object-cover",globalMuted:G,videoId:A.id,user:I,onViewRecorded:sr})}),o.jsx("div",{className:"absolute bottom-32 left-0 right-0 h-[1px] bg-white/20 z-10"}),o.jsx("div",{className:"absolute bottom-16 left-0 right-0 h-16 bg-black z-10"}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-black z-10"}),o.jsx("div",{className:"absolute bottom-16 left-0 right-0 p-4 text-white z-20",children:o.jsxs("div",{className:"flex justify-between items-end",children:[o.jsx("div",{className:"flex-1 mr-4 space-y-3",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-white font-semibold text-base leading-tight",children:A.title}),A.description&&o.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:ze(A.description)})]})}),o.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[o.jsx("div",{className:"flex flex-col items-center",children:o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:oe=>{oe.stopPropagation(),we(kr(A))},className:"hover:opacity-80 transition-opacity","aria-label":`View ${At(A)}'s profile`,"data-control":!0,children:o.jsxs(kt,{className:"w-12 h-12 rounded-full",children:[o.jsx(Ct,{src:A.avatar_url||void 0,alt:At(A)}),o.jsx(Et,{children:At(A).charAt(0).toUpperCase()})]})}),I&&A.user_id!==I.id&&o.jsx("button",{onClick:async oe=>{oe.stopPropagation(),await Rt(A.user_id,At(A))},className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-6 h-6 bg-red-600 rounded-full flex items-center justify-center shadow-lg hover:bg-red-700 transition-colors","data-control":!0,children:_[A.user_id]?o.jsx("span",{className:"text-white font-bold text-sm",children:"✓"}):o.jsx(io,{size:14,className:"text-white"})})]})}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("button",{onClick:oe=>{oe.stopPropagation(),mn(A.id)},className:"p-0 bg-transparent border-none","data-control":!0,children:o.jsx(vi,{size:28,className:`${N[A.id]?"text-red-500 fill-red-500":"text-white fill-white"} transition-colors`})}),o.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:k[A.id]||0})]}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(Mt,{size:24,className:"text-white"}),o.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:Mn($[A.id]||0)})]}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("button",{onClick:oe=>{oe.stopPropagation(),$e(A.id)},className:"p-0 bg-transparent border-none","data-control":!0,children:o.jsx($a,{size:28,className:`${P[A.id]?"text-yellow-500 fill-yellow-500":"text-white fill-white"} transition-colors`})}),o.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:q[A.id]||0})]}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("button",{onClick:oe=>{oe.stopPropagation(),hr(A)},className:"p-0 bg-transparent border-none","data-control":!0,children:o.jsx(wi,{size:28,className:"text-white fill-white"})}),o.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:W[A.id]||0})]})]})]})})]},A.id))}):s.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Yg,{size:32,className:"text-white/70"})}),o.jsx("h3",{className:"text-lg font-semibold mb-2 text-white",children:"No videos yet"}),o.jsx("p",{className:"text-white/70 mb-4",children:e==="All"?"Be the first to upload a video!":`No videos found in the "${e}" category`}),o.jsx(K,{onClick:()=>we("/upload"),variant:"default",className:"bg-white text-black hover:bg-white/90",children:"Upload Your First Video"})]}):o.jsx("div",{className:"space-y-0",children:ue.map(A=>{const oe=A.isSponsored,pe=oe?A:null;return o.jsxs("div",{"data-video-id":A.id,className:"relative h-screen snap-start snap-always flex items-center justify-center",onClick:xe=>{const ye=["button[data-control]"];let ge=xe.target;for(;ge&&ge!==xe.currentTarget;){if(ye.some(Ue=>ge.matches(Ue)))return;ge=ge.parentElement}const je=xe.currentTarget.querySelector("video");je&&(je.paused?(je.play(),pe&&($t(pe),We(pe))):je.pause())},children:[o.jsx("div",{className:"absolute top-0 left-0 right-0 h-16 bg-black z-10"}),oe&&o.jsxs("div",{className:"absolute top-20 left-4 right-4 z-20 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(vt,{className:"bg-yellow-600 text-black font-bold",children:"SPONSORED"}),o.jsxs("div",{className:"bg-black/70 px-2 py-1 rounded text-white text-sm",children:[M[A.id]||(pe==null?void 0:pe.duration)||30,"s"]})]}),o.jsxs(K,{size:"sm",variant:"outline",className:"bg-white/90 text-black hover:bg-white border-none",onClick:xe=>{xe.stopPropagation(),pe&&bt(pe)},"data-control":!0,children:[o.jsx(Bf,{size:14,className:"mr-1"}),"Learn More"]})]}),o.jsx("div",{className:"absolute inset-0 top-16 bottom-32 overflow-hidden",children:o.jsx(Vv,{src:A.video_url,className:"w-full h-full object-cover",globalMuted:G,videoId:A.id,user:I,onViewRecorded:oe?void 0:sr})}),o.jsx("div",{className:"absolute bottom-32 left-0 right-0 h-[1px] bg-white/20 z-10"}),o.jsx("div",{className:"absolute bottom-16 left-0 right-0 h-16 bg-black z-10"}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-black z-10"}),o.jsx("div",{className:"absolute bottom-16 left-0 right-0 p-4 text-white z-20",children:o.jsxs("div",{className:"flex justify-between items-end",children:[o.jsx("div",{className:"flex-1 mr-4 space-y-3",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-white font-semibold text-base leading-tight",children:A.title}),A.description&&o.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:ze(A.description)})]})}),!oe&&o.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[o.jsx("div",{className:"flex flex-col items-center",children:o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:xe=>{xe.stopPropagation(),we(kr(A))},className:"hover:opacity-80 transition-opacity","aria-label":`View ${At(A)}'s profile`,"data-control":!0,children:o.jsxs(kt,{className:"w-12 h-12 rounded-full",children:[o.jsx(Ct,{src:A.avatar_url||void 0,alt:At(A)}),o.jsx(Et,{children:At(A).charAt(0).toUpperCase()})]})}),I&&A.user_id!==I.id&&o.jsx("button",{onClick:async xe=>{xe.stopPropagation(),await Rt(A.user_id,At(A))},className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-6 h-6 bg-red-600 rounded-full flex items-center justify-center shadow-lg hover:bg-red-700 transition-colors","data-control":!0,children:_[A.user_id]?o.jsx("span",{className:"text-white font-bold text-sm",children:"✓"}):o.jsx(io,{size:14,className:"text-white"})})]})}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("button",{onClick:xe=>{xe.stopPropagation(),mn(A.id)},className:"p-0 bg-transparent border-none","data-control":!0,children:o.jsx(vi,{size:28,className:`${N[A.id]?"text-red-500 fill-red-500":"text-white fill-white"} transition-colors`})}),o.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:k[A.id]||0})]}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(Mt,{size:24,className:"text-white"}),o.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:Mn($[A.id]||0)})]}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("button",{onClick:xe=>{xe.stopPropagation(),$e(A.id)},className:"p-0 bg-transparent border-none","data-control":!0,children:o.jsx($a,{size:28,className:`${P[A.id]?"text-yellow-500 fill-yellow-500":"text-white fill-white"} transition-colors`})}),o.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:q[A.id]||0})]}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("button",{onClick:xe=>{xe.stopPropagation(),hr(A)},className:"p-0 bg-transparent border-none","data-control":!0,children:o.jsx(wi,{size:28,className:"text-white fill-white"})}),o.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:W[A.id]||0})]})]})]})})]},A.id)})})}),o.jsx(nr,{}),Y&&o.jsxs("div",{className:`fixed inset-0 z-50 ${T?"block":"hidden"}`,children:[o.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:()=>L(!1)}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-background rounded-lg max-w-md w-full max-h-[80vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[o.jsx("h2",{className:"text-lg font-semibold text-white",children:"Business Details"}),o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>L(!1),className:"p-2",children:o.jsx(Mr,{size:20,className:"text-white"})})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:Y.title}),Y.description&&o.jsx("p",{className:"text-muted-foreground mb-4",children:Y.description})]}),Y.business_name&&o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-white mb-1",children:"Business Name"}),o.jsx("p",{className:"text-muted-foreground",children:Y.business_name})]}),Y.contact_number&&o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-white mb-1",children:"Contact Number"}),o.jsx("a",{href:`tel:${Y.contact_number}`,className:"text-blue-400 hover:text-blue-300",children:Y.contact_number})]}),Y.website_url&&o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-white mb-1",children:"Website"}),o.jsxs("a",{href:Y.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 flex items-center gap-1",children:[Y.website_url,o.jsx(Bf,{size:14})]})]}),Y.support_email&&o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-white mb-1",children:"Email"}),o.jsx("a",{href:`mailto:${Y.support_email}`,className:"text-blue-400 hover:text-blue-300",children:Y.support_email})]}),Y.price_info&&o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-white mb-1",children:"Pricing"}),o.jsx("p",{className:"text-muted-foreground",children:Y.price_info})]}),o.jsx("div",{className:"pt-4 border-t border-border",children:o.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"This is a sponsored advertisement"})})]})]})})]}),O&&o.jsx(rp,{isOpen:Q,onClose:()=>{se(!1),X(null)},video:O})]})},t_=({src:e,className:t,globalMuted:r=!1,videoId:n,user:s,onViewRecorded:i,...a})=>{const l=d.useRef(null),[c,u]=d.useState(!1),[f,h]=d.useState(!1),[m,g]=d.useState(!1),y=d.useRef(null),p=async()=>{try{"wakeLock"in navigator&&(y.current=await navigator.wakeLock.request("screen"),console.log("Wake lock activated"))}catch(w){console.error("Failed to request wake lock:",w)}},b=async()=>{if(y.current)try{await y.current.release(),y.current=null,console.log("Wake lock released")}catch(w){console.error("Failed to release wake lock:",w)}};return d.useEffect(()=>{const w=l.current;if(!w)return;w.muted=r;const v=new window.IntersectionObserver(([x])=>{x.isIntersecting&&x.intersectionRatio>=.5?(u(!0),w.play()):(u(!1),w.pause(),w.currentTime=0)},{threshold:.5});return v.observe(w),()=>{v.unobserve(w)}},[r]),d.useEffect(()=>{l.current&&(l.current.muted=r)},[r]),d.useEffect(()=>{const w=l.current;if(!w)return;const v=()=>{h(!0),p()},x=()=>{h(!1),b()};return w.addEventListener("play",v),w.addEventListener("pause",x),()=>{w.removeEventListener("play",v),w.removeEventListener("pause",x),b()}},[]),d.useEffect(()=>{if(c&&f&&!m&&n){console.log("AutoPlayVideo: Starting 5-second view timer for video:",n);const w=setTimeout(async()=>{console.log("AutoPlayVideo: 5-second timer completed, recording view for video:",n);try{const{data:v,error:x}=await C.rpc("record_video_view",{video_uuid:n});console.log("AutoPlayVideo: RPC function result:",{data:v,error:x,videoId:n}),x?console.error("AutoPlayVideo: Error recording view:",x):(g(!0),v?(console.log("AutoPlayVideo: New view successfully recorded for video:",n),i&&i(n)):console.log("AutoPlayVideo: View already exists for video:",n,"- not recording duplicate"))}catch(v){console.error("AutoPlayVideo: Exception recording view:",v)}},5e3);return()=>{console.log("AutoPlayVideo: Clearing view timer for video:",n),clearTimeout(w)}}},[c,f,m,n,i]),o.jsxs("div",{className:"relative w-full h-full",children:[o.jsx("video",{ref:l,src:e,loop:!0,muted:r,playsInline:!0,controls:!1,className:t,style:{pointerEvents:"auto"},...a}),o.jsx("style",{children:`
        video::-webkit-media-controls {
          display: none !important;
        }
        video::-webkit-media-controls-enclosure {
          display: none !important;
        }
        video::-webkit-media-controls-panel {
          display: none !important;
        }
        video::-webkit-media-controls-play-button {
          display: none !important;
        }
        video::-webkit-media-controls-start-playback-button {
          display: none !important;
        }
      `}),c&&!f&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20",children:o.jsx("button",{onClick:w=>{var v;w.stopPropagation(),(v=l.current)==null||v.play()},className:"w-16 h-16 flex items-center justify-center rounded-full bg-black/60 hover:bg-black/80 text-white","aria-label":"Play","data-control":!0,children:o.jsx(xi,{size:32})})})]})},r_=({videos:e,startIndex:t,onClose:r})=>{const n=d.useRef(null),{user:s}=tt(),i=Ye(),[a,l]=d.useState(!1),[c,u]=d.useState({}),[f,h]=d.useState({}),[m,g]=d.useState({}),[y,p]=d.useState({}),[b,w]=d.useState({}),[v,x]=d.useState({}),[_,j]=d.useState(e),[N,S]=d.useState({}),[k,U]=d.useState(!1),[W,V]=d.useState(null);d.useEffect(()=>{j(e)},[e]),d.useEffect(()=>{if(n.current){const O=n.current.children[t];O&&O.scrollIntoView({behavior:"auto"})}},[t]),d.useEffect(()=>{if(!s)return;const O=_.map(ie=>ie.user_id).filter(ie=>ie!==s.id);(async()=>{if(O.length===0)return;const{data:ie}=await C.from("follows").select("following_id").eq("follower_id",s.id).in("following_id",O),le=new Set((ie==null?void 0:ie.map(L=>L.following_id))||[]),T={};_.forEach(L=>{L.user_id!==s.id&&(T[L.user_id]=le.has(L.user_id))}),u(T)})()},[s,_]),d.useEffect(()=>{if(!s||_.length===0)return;const O=async()=>{try{const ie=_.map(z=>z.id),{data:le}=await C.from("video_likes").select("video_id").eq("user_id",s.id).in("video_id",ie),T=new Set((le==null?void 0:le.map(z=>z.video_id))||[]),L={},Y={},D={},M={};_.forEach(z=>{L[z.id]=T.has(z.id),Y[z.id]=z.like_count||0,D[z.id]=z.share_count||0,M[z.id]=z.save_count||0}),h(L),g(Y),w(D),x(M)}catch(ie){console.error("Error checking like status:",ie)}},X=async()=>{try{const ie={};for(const le of _)try{const{data:T,error:L}=await C.rpc("get_genuine_view_count",{video_uuid:le.id});!L&&typeof T=="number"?ie[le.id]=T:ie[le.id]=le.view_count||0}catch(T){console.error(`Error getting view count for video ${le.id}:`,T),ie[le.id]=le.view_count||0}p(ie)}catch(ie){console.error("Error checking view counts:",ie)}};O(),X()},[s,_]);const q=async()=>{if(!(!s||_.length===0))try{const O=_.map(L=>L.id),{data:X,error:ie}=await C.from("saved_videos").select("video_id").eq("user_id",s.id).in("video_id",O);if(ie){console.error("Error fetching saved videos:",ie);return}const le=new Set((X||[]).map(L=>L.video_id)),T={};_.forEach(L=>{T[L.id]=le.has(L.id)}),S(T)}catch(O){console.error("Error checking saved status:",O)}},re=async O=>{if(s)try{N[O]?(await C.from("saved_videos").delete().eq("user_id",s.id).eq("video_id",O),S(X=>({...X,[O]:!1})),x(X=>({...X,[O]:Math.max((X[O]||0)-1,0)}))):(await C.from("saved_videos").insert({user_id:s.id,video_id:O}),S(X=>({...X,[O]:!0})),x(X=>({...X,[O]:(X[O]||0)+1})))}catch(X){console.error("Error saving/unsaving video:",X)}};d.useEffect(()=>{q()},[s,_]),d.useEffect(()=>{if(!s)return;const O=C.channel("modal_video_views_realtime").on("postgres_changes",{event:"INSERT",schema:"public",table:"video_views"},async ie=>{console.log("ModalVerticalFeed: View change detected via real-time:",ie);const le=ie.new;if(le&&le.video_id){console.log("ModalVerticalFeed: Updating view count for video:",le.video_id);try{const{data:T,error:L}=await C.rpc("get_genuine_view_count",{video_uuid:le.video_id});p(!L&&typeof T=="number"?Y=>(console.log("ModalVerticalFeed: View count updated via real-time:",le.video_id,"to",T),{...Y,[le.video_id]:T}):Y=>{const D=(Y[le.video_id]||0)+1;return console.log("ModalVerticalFeed: View count updated (fallback):",le.video_id,"from",Y[le.video_id]||0,"to",D),{...Y,[le.video_id]:D}})}catch(T){console.error("ModalVerticalFeed: Error getting genuine view count:",T),p(L=>{const Y=(L[le.video_id]||0)+1;return{...L,[le.video_id]:Y}})}}}).subscribe(),X=C.channel("modal_videos_realtime").on("postgres_changes",{event:"UPDATE",schema:"public",table:"videos"},async ie=>{if(console.log("ModalVerticalFeed: Video change detected via real-time:",ie),ie.new&&ie.old){const le=ie.new.id,T=ie.new.share_count||0,L=ie.new.save_count||0;ie.new.share_count!==ie.old.share_count&&w(Y=>({...Y,[le]:T})),ie.new.save_count!==ie.old.save_count&&x(Y=>({...Y,[le]:L}))}}).subscribe();return()=>{C.removeChannel(O),C.removeChannel(X)}},[s,_]);const $=async O=>{if(!s)return;if(c[O.user_id])await C.from("follows").delete().eq("follower_id",s.id).eq("following_id",O.user_id),u(ie=>({...ie,[O.user_id]:!1}));else{const{data:ie}=await C.from("follows").select("*").eq("follower_id",s.id).eq("following_id",O.user_id).single();if(!ie){const{error:le}=await C.from("follows").insert({follower_id:s.id,following_id:O.user_id});le||u(T=>({...T,[O.user_id]:!0})),le&&le.code!=="23505"&&console.error("Error following:",le)}}},ee=async O=>{try{const{error:X}=await C.from("videos").update({share_count:(O.share_count||0)+1}).eq("id",O.id);X||w(ie=>({...ie,[O.id]:(ie[O.id]||0)+1}))}catch(X){console.error("Error incrementing share count:",X)}V(O),U(!0)},G=async O=>{if(s)try{const{data:X,error:ie}=await C.rpc("toggle_video_like",{video_uuid:O});if(ie){console.error("Error toggling like:",ie);return}const le=X;h(T=>({...T,[O]:le})),g(T=>({...T,[O]:le?(T[O]||0)+1:Math.max((T[O]||0)-1,0)}))}catch(X){console.error("Error handling like:",X)}},J=async O=>{try{const{data:X,error:ie}=await C.rpc("get_genuine_view_count",{video_uuid:O});!ie&&typeof X=="number"?(p(le=>({...le,[O]:X})),console.log(`Updated view count for video ${O}: ${X}`)):p(le=>({...le,[O]:(le[O]||0)+1}))}catch(X){console.error("Error updating view count:",X),p(ie=>({...ie,[O]:(ie[O]||0)+1}))}},P=O=>O<1e3?O.toString():O<1e6?(O/1e3).toFixed(1)+"K":(O/1e6).toFixed(1)+"M",F=O=>{var X;return((X=O.profiles)==null?void 0:X.username)||O.username||(O.user_id?`user_${O.user_id.slice(0,8)}`:"unknown")},Q=O=>{const X=F(O);return s&&O.user_id===s.id?"/profile":`/profile/${X}`},se=O=>O?O.split(/(#[\w-]+)/g).map((X,ie)=>/^#[\w-]+$/.test(X)?o.jsx("button",{className:"inline-block text-green-400 hover:text-green-600 font-semibold px-1",onClick:le=>{le.stopPropagation()},children:X},ie):X):null;return o.jsxs("div",{className:"fixed inset-0 z-50 bg-black flex flex-col",children:[o.jsx("button",{className:"absolute top-4 right-4 z-50 text-white bg-black/60 rounded-full p-2",onClick:r,children:o.jsx(Mr,{size:32})}),o.jsx("div",{className:"fixed top-20 right-4 z-40",children:o.jsx(K,{variant:"ghost",size:"icon",onClick:()=>l(O=>!O),"aria-label":"Toggle Global Mute",className:"w-12 h-12 rounded-full p-0 text-white hover:bg-white/10",children:a?o.jsx(Tm,{size:24,className:"text-white"}):o.jsx(Pm,{size:24,className:"text-white"})})}),o.jsx("div",{ref:n,className:"flex-1 overflow-y-auto snap-y snap-mandatory",style:{scrollSnapType:"y mandatory"},children:_.map(O=>o.jsxs("div",{className:"relative h-screen snap-start snap-always flex items-center justify-center",style:{scrollSnapAlign:"start"},onClick:X=>{const ie=["button[data-control]"];let le=X.target;for(;le&&le!==X.currentTarget;){if(ie.some(L=>le.matches(L)))return;le=le.parentElement}const T=X.currentTarget.querySelector("video");T&&(T.paused?T.play():T.pause())},children:[o.jsx("div",{className:"absolute top-0 left-0 right-0 h-16 bg-black z-10"}),o.jsx("div",{className:"absolute inset-0 top-16 bottom-32 overflow-hidden",children:o.jsx(t_,{src:O.video_url,className:"w-full h-full object-cover",globalMuted:a,videoId:O.id,user:s,onViewRecorded:J})}),o.jsx("div",{className:"absolute bottom-32 left-0 right-0 h-[1px] bg-white/20 z-10"}),o.jsx("div",{className:"absolute bottom-16 left-0 right-0 h-16 bg-black z-10"}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-black z-10"}),o.jsx("div",{className:"absolute bottom-16 left-0 right-0 p-4 text-white z-20",children:o.jsxs("div",{className:"flex justify-between items-end",children:[o.jsx("div",{className:"flex-1 mr-4 space-y-3",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-white font-semibold text-base leading-tight",children:O.title}),O.description&&o.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:se(O.description)})]})}),o.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[o.jsx("div",{className:"flex flex-col items-center",children:o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:X=>{X.stopPropagation(),i(Q(O))},className:"hover:opacity-80 transition-opacity","aria-label":`View ${F(O)}'s profile`,"data-control":!0,children:o.jsxs(kt,{className:"w-12 h-12 rounded-full",children:[o.jsx(Ct,{src:O.avatar_url||void 0,alt:F(O)}),o.jsx(Et,{children:F(O).charAt(0).toUpperCase()})]})}),s&&O.user_id!==s.id&&o.jsx("button",{onClick:async X=>{X.stopPropagation(),await $(O)},className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-6 h-6 bg-red-600 rounded-full flex items-center justify-center shadow-lg hover:bg-red-700 transition-colors","data-control":!0,children:c[O.user_id]?o.jsx("span",{className:"text-white font-bold text-sm",children:"✓"}):o.jsx(io,{size:14,className:"text-white"})})]})}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("button",{onClick:X=>{X.stopPropagation(),G(O.id)},className:"p-0 bg-transparent border-none","data-control":!0,children:o.jsx(vi,{size:28,className:`${f[O.id]?"text-red-500 fill-red-500":"text-white fill-white"} transition-colors`})}),o.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:m[O.id]||0})]}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(Mt,{size:28,className:"text-white"}),o.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:P(y[O.id]||0)})]}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("button",{onClick:X=>{X.stopPropagation(),re(O.id)},className:"p-0 bg-transparent border-none","data-control":!0,children:o.jsx($a,{size:28,className:`${N[O.id]?"text-yellow-500 fill-yellow-500":"text-white fill-white"} transition-colors`})}),o.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:v[O.id]||0})]}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("button",{onClick:X=>{X.stopPropagation(),ee(O)},className:"p-0 bg-transparent border-none","data-control":!0,children:o.jsx(wi,{size:28,className:"text-white fill-white"})}),o.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:b[O.id]||0})]})]})]})})]},O.id))}),W&&o.jsx(rp,{isOpen:k,onClose:()=>{U(!1),V(null)},video:W})]})},o4=()=>{const e=Ye();d.useEffect(()=>{const g=document.createElement("style");return g.textContent=`
      @keyframes fire-glow {
        0%, 100% { 
          filter: drop-shadow(0 0 5px #ff6b35) drop-shadow(0 0 10px #ff8c42) drop-shadow(0 0 15px #ffa726);
          transform: rotate(-1deg) scale(1);
        }
        25% { 
          filter: drop-shadow(0 0 8px #ff5722) drop-shadow(0 0 15px #ff7043) drop-shadow(0 0 20px #ffab40);
          transform: rotate(1deg) scale(1.05);
        }
        50% { 
          filter: drop-shadow(0 0 6px #ff6b35) drop-shadow(0 0 12px #ff8c42) drop-shadow(0 0 18px #ffa726);
          transform: rotate(-0.5deg) scale(1.02);
        }
        75% { 
          filter: drop-shadow(0 0 9px #ff5722) drop-shadow(0 0 16px #ff7043) drop-shadow(0 0 22px #ffab40);
          transform: rotate(0.5deg) scale(1.03);
        }
      }
      
      .animate-fire {
        animation: fire-glow 2s ease-in-out infinite;
        display: inline-block;
        transform-origin: center bottom;
      }
    `,document.head.appendChild(g),()=>{document.head.removeChild(g)}},[]);const[t,r]=d.useState(!1),[n,s]=d.useState(null),[i,a]=d.useState([]),[l,c]=d.useState(!0),{user:u}=tt(),f=25,h=async g=>{if(!(!g||g.length===0))try{const y=[...new Set(g.map(w=>w.user_id))],{data:p,error:b}=await C.from("profiles").select("user_id, username, avatar_url").in("user_id",y);if(b){console.error("Error fetching latest profile data:",b);return}if(p&&p.length>0){const w=new Map;p.forEach(x=>w.set(x.user_id,x));const v=g.map(x=>{const _=w.get(x.user_id);return _?{...x,profiles:{...x.profiles,username:_.username,avatar_url:_.avatar_url},avatar_url:_.avatar_url}:x});a(v),console.log("Updated trending videos with latest profile data")}}catch(y){console.error("Error in fetchLatestProfileData:",y)}},m=async()=>{c(!0);try{console.log("Fetching trending videos...");const{data:g,error:y}=await C.from("videos").select(`
          id, 
          title, 
          video_url, 
          thumbnail_url, 
          duration, 
          user_id, 
          created_at,
          view_count,
          like_count,
          share_count,
          save_count
        `).order("view_count",{ascending:!1,nullsFirst:!1}).order("like_count",{ascending:!1,nullsFirst:!1}).order("created_at",{ascending:!1}).limit(f);if(console.log("Videos query result:",{videos:g,error:y}),y){console.error("Error fetching videos:",y),c(!1);return}if(!g||g.length===0){console.log("No videos found in database"),a([]),c(!1);return}const p=[...new Set(g.map(S=>S.user_id))],{data:b,error:w}=await C.from("profiles").select("user_id, username, avatar_url").in("user_id",p);w&&console.error("Error fetching profiles:",w);const v=new Map;(b||[]).forEach(S=>v.set(S.user_id,S));const x=new Map;for(const S of g)try{const{data:k,error:U}=await C.rpc("get_genuine_view_count",{video_uuid:S.id});!U&&typeof k=="number"?x.set(S.id,k):x.set(S.id,S.view_count||0)}catch(k){console.error(`Error getting view count for video ${S.id}:`,k),x.set(S.id,S.view_count||0)}const j=g.map(S=>{const k=v.get(S.user_id);return{...S,profiles:k?{username:k.username,avatar_url:k.avatar_url,user_id:k.user_id}:null,actual_view_count:x.get(S.id)||0,genuine_view_count:x.get(S.id)||0}}).filter(S=>S.profiles);console.log("Filtered videos with profiles:",j.length);const N=j.sort((S,k)=>{const U=S.genuine_view_count||0,W=k.genuine_view_count||0,V=S.like_count||0,q=k.like_count||0;return W!==U?W-U:q!==V?q-V:new Date(k.created_at).getTime()-new Date(S.created_at).getTime()});console.log("Sorted trending videos:",N.length),console.log("Sample video with profile:",N[0]),a(N),await h(N)}catch(g){console.error("Error in fetchTrending:",g)}c(!1)};return d.useEffect(()=>{m()},[]),d.useEffect(()=>{if(!u)return;console.log("Setting up real-time subscriptions for trending page");const g=C.channel("trending_videos_realtime").on("postgres_changes",{event:"UPDATE",schema:"public",table:"videos"},async b=>{if(console.log("Trending: Video change detected via real-time:",b),b.new&&b.old){const w=b.new.id,v=b.new.like_count||0;console.log(`Trending: Like count for video ${w}: ${b.old.like_count} -> ${v}`),a(x=>x.map(_=>_.id===w?{..._,like_count:v}:_))}}).subscribe(),y=C.channel("trending_likes_realtime").on("postgres_changes",{event:"*",schema:"public",table:"video_likes"},async b=>{console.log("Trending: Like change detected:",b)}).subscribe(),p=C.channel("trending_profiles_realtime").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles"},async b=>{console.log("Trending: Profile change detected:",b),b.new&&await h(i)}).subscribe();return()=>{console.log("Cleaning up real-time subscriptions for trending page"),C.removeChannel(g),C.removeChannel(y),C.removeChannel(p)}},[u,i]),l?o.jsx("div",{className:"min-h-screen bg-background pb-20 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-white",children:"Loading trending videos..."})]})}):o.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[o.jsx("div",{className:"sticky top-0 z-50 bg-background border-b border-border p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h1",{className:"text-2xl font-bold text-primary flex items-center gap-2",children:[o.jsx("span",{className:"animate-fire",children:"🔥"}),"Trending"]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>e("/live"),className:"text-white hover:bg-white/10","aria-label":"Live",children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),o.jsx("span",{className:"text-sm font-medium",children:"LIVE"})]})}),o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>e("/settings"),"aria-label":"Settings",children:o.jsx(du,{size:20})})]})]})}),o.jsxs("div",{className:"px-4 py-6 text-center",children:[o.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center justify-center gap-2 mb-2",children:[o.jsx(ss,{size:22,className:"text-orange-500"}),"Most Trending Videos Today"]}),o.jsx("p",{className:"text-sm text-gray-400",children:"Ranked by views and engagement"})]}),o.jsx("div",{className:"grid grid-cols-3 gap-2 p-4",children:i.length===0?o.jsxs("div",{className:"col-span-3 text-center py-12",children:[o.jsx(ss,{size:48,className:"text-gray-500 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400 text-lg",children:"No trending videos found"}),o.jsx("p",{className:"text-gray-500 text-sm",children:"Check back later for the latest trending content!"})]}):i.map((g,y)=>{var p,b,w,v;return o.jsxs(ke,{className:"relative aspect-[9/16] cursor-pointer group overflow-hidden bg-black/10",onClick:()=>{s(y),r(!0)},children:[y<3&&o.jsxs("div",{className:"absolute top-2 right-2 z-10",children:[y===0&&o.jsxs("div",{className:"flex items-center gap-1 bg-gradient-to-r from-yellow-500 to-yellow-600 rounded-full px-2 py-1 shadow-lg",children:[o.jsx(dC,{size:12,className:"text-white"}),o.jsx("span",{className:"text-xs font-bold text-white",children:"#1"})]}),y===1&&o.jsxs("div",{className:"flex items-center gap-1 bg-gradient-to-r from-gray-400 to-gray-500 rounded-full px-2 py-1 shadow-lg",children:[o.jsx(aC,{size:12,className:"text-white"}),o.jsx("span",{className:"text-xs font-bold text-white",children:"#2"})]}),y===2&&o.jsxs("div",{className:"flex items-center gap-1 bg-gradient-to-r from-amber-600 to-amber-700 rounded-full px-2 py-1 shadow-lg",children:[o.jsx(rC,{size:12,className:"text-white"}),o.jsx("span",{className:"text-xs font-bold text-white",children:"#3"})]})]}),o.jsx("div",{className:"w-full h-full",children:o.jsx(t_,{src:g.video_url,className:"w-full h-full object-cover",globalMuted:!0})}),o.jsx("div",{className:"absolute top-2 left-2 z-10",children:o.jsxs(kt,{className:"w-8 h-8 border-2 border-white shadow",children:[o.jsx(Ct,{src:((p=g.profiles)==null?void 0:p.avatar_url)||void 0,alt:((b=g.profiles)==null?void 0:b.username)||g.user_id}),o.jsx(Et,{children:(v=((w=g.profiles)==null?void 0:w.username)||g.user_id)==null?void 0:v.charAt(0).toUpperCase()})]})}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2",children:o.jsxs("div",{className:"flex items-center justify-between text-white text-xs",children:[o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Mt,{size:12}),o.jsx("span",{children:g.genuine_view_count>=1e3?`${(g.genuine_view_count/1e3).toFixed(1)}K`:g.genuine_view_count||0})]})}),g.duration&&o.jsx("div",{className:"bg-black/60 rounded-full px-2 py-1",children:`${Math.floor(g.duration/60)}:${(g.duration%60).toString().padStart(2,"0")}`})]})})]},g.id)})}),t&&n!==null&&o.jsx(r_,{videos:i,startIndex:n,onClose:()=>r(!1)}),o.jsx(nr,{})]})},i4=()=>{const[e,t]=d.useState("Anime"),r=["Anime","Bar Limes","Cartoon","Carnival","Comedy","Dance","Dancehall","DIY Projects","Educational","Events","Fete","Funny Vids","HOW TOs","Local News","Music Vids","Parties","Soca","Trini Celebs"],s=[{id:1,creator:"CarnivalLive",title:"LIVE: Mas Band Rehearsal 🎭",viewers:"2.3K",thumbnail:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=600&fit=crop",category:"Music"},{id:2,creator:"SocaDJ",title:"Power Soca Mix 2024 🔥",viewers:"1.8K",thumbnail:"https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?w=400&h=600&fit=crop",category:"Music"},{id:3,creator:"TriniChef",title:"Cooking Pelau LIVE!",viewers:"956",thumbnail:"https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400&h=600&fit=crop",category:"Talk"},{id:4,creator:"DanceStudio",title:"Soca Dance Class 💃",viewers:"743",thumbnail:"https://images.unsplash.com/photo-1547036967-23d11aacaee0?w=400&h=600&fit=crop",category:"Dance"}].filter(i=>i.category===e);return o.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[o.jsxs("div",{className:"sticky top-0 z-10 bg-background border-b border-border p-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-2xl font-bold text-primary",children:"🔴 Live"}),o.jsx("div",{className:"flex items-center space-x-2",children:o.jsx(K,{variant:"neon",size:"sm",children:"Go Live"})})]}),o.jsx("div",{className:"flex overflow-x-auto space-x-2 mt-4 pb-2",children:r.map(i=>o.jsx(K,{variant:e===i?"default":"outline",size:"sm",onClick:()=>t(i),className:"whitespace-nowrap",children:i},i))})]}),o.jsxs("div",{className:"p-4",children:[o.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:s.map(i=>o.jsxs(ke,{className:"relative group cursor-pointer",onClick:()=>{console.log("Live stream clicked:",i.title)},children:[o.jsxs("div",{className:"relative aspect-[9/16] bg-muted rounded-lg overflow-hidden",children:[o.jsx("img",{src:i.thumbnail,alt:i.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),o.jsx("div",{className:"absolute top-2 left-2",children:o.jsx(vt,{className:"bg-red-600 text-white animate-pulse",children:"🔴 LIVE"})}),o.jsx("div",{className:"absolute bottom-2 right-2",children:o.jsxs(vt,{variant:"secondary",className:"bg-black/70 text-white",children:[i.viewers," watching"]})}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/30",children:o.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xl",children:"▶"})})})]}),o.jsxs("div",{className:"p-3",children:[o.jsx("h3",{className:"font-semibold text-foreground text-sm line-clamp-2 mb-1",children:i.title}),o.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[o.jsx("span",{className:"font-medium",children:i.creator}),o.jsx(vt,{variant:"outline",className:"text-xs",children:i.category})]})]})]},i.id))}),s.length===0&&o.jsxs("div",{className:"text-center mt-12",children:[o.jsx("p",{className:"text-muted-foreground",children:"No live streams in this category"}),o.jsx(K,{variant:"neon",className:"mt-4",children:"Start Streaming"})]})]}),o.jsx(nr,{})]})};function a4(e,t=[]){let r=[];function n(i,a){const l=d.createContext(a),c=r.length;r=[...r,a];function u(h){const{scope:m,children:g,...y}=h,p=(m==null?void 0:m[e][c])||l,b=d.useMemo(()=>y,Object.values(y));return o.jsx(p.Provider,{value:b,children:g})}function f(h,m){const g=(m==null?void 0:m[e][c])||l,y=d.useContext(g);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,f]}const s=()=>{const i=r.map(a=>d.createContext(a));return function(l){const c=(l==null?void 0:l[e])||i;return d.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,l4(s,...t)]}function l4(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}var c4=d.createContext(void 0);function np(e){const t=d.useContext(c4);return e||t||"ltr"}var Md="rovingFocusGroup.onEntryFocus",u4={bubbles:!1,cancelable:!0},Pu="RovingFocusGroup",[uh,n_,d4]=_m(Pu),[f4,s_]=a4(Pu,[d4]),[h4,m4]=f4(Pu),o_=d.forwardRef((e,t)=>o.jsx(uh.Provider,{scope:e.__scopeRovingFocusGroup,children:o.jsx(uh.Slot,{scope:e.__scopeRovingFocusGroup,children:o.jsx(p4,{...e,ref:t})})}));o_.displayName=Pu;var p4=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...h}=e,m=d.useRef(null),g=Ke(t,m),y=np(i),[p=null,b]=xs({prop:a,defaultProp:l,onChange:c}),[w,v]=d.useState(!1),x=er(u),_=n_(r),j=d.useRef(!1),[N,S]=d.useState(0);return d.useEffect(()=>{const k=m.current;if(k)return k.addEventListener(Md,x),()=>k.removeEventListener(Md,x)},[x]),o.jsx(h4,{scope:r,orientation:n,dir:y,loop:s,currentTabStopId:p,onItemFocus:d.useCallback(k=>b(k),[b]),onItemShiftTab:d.useCallback(()=>v(!0),[]),onFocusableItemAdd:d.useCallback(()=>S(k=>k+1),[]),onFocusableItemRemove:d.useCallback(()=>S(k=>k-1),[]),children:o.jsx(Ce.div,{tabIndex:w||N===0?-1:0,"data-orientation":n,...h,ref:g,style:{outline:"none",...e.style},onMouseDown:Se(e.onMouseDown,()=>{j.current=!0}),onFocus:Se(e.onFocus,k=>{const U=!j.current;if(k.target===k.currentTarget&&U&&!w){const W=new CustomEvent(Md,u4);if(k.currentTarget.dispatchEvent(W),!W.defaultPrevented){const V=_().filter(G=>G.focusable),q=V.find(G=>G.active),re=V.find(G=>G.id===p),ee=[q,re,...V].filter(Boolean).map(G=>G.ref.current);l_(ee,f)}}j.current=!1}),onBlur:Se(e.onBlur,()=>v(!1))})})}),i_="RovingFocusGroupItem",a_=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,...a}=e,l=Nn(),c=i||l,u=m4(i_,r),f=u.currentTabStopId===c,h=n_(r),{onFocusableItemAdd:m,onFocusableItemRemove:g}=u;return d.useEffect(()=>{if(n)return m(),()=>g()},[n,m,g]),o.jsx(uh.ItemSlot,{scope:r,id:c,focusable:n,active:s,children:o.jsx(Ce.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...a,ref:t,onMouseDown:Se(e.onMouseDown,y=>{n?u.onItemFocus(c):y.preventDefault()}),onFocus:Se(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:Se(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){u.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const p=x4(y,u.orientation,u.dir);if(p!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let w=h().filter(v=>v.focusable).map(v=>v.ref.current);if(p==="last")w.reverse();else if(p==="prev"||p==="next"){p==="prev"&&w.reverse();const v=w.indexOf(y.currentTarget);w=u.loop?w4(w,v+1):w.slice(v+1)}setTimeout(()=>l_(w))}})})})});a_.displayName=i_;var g4={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function v4(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function x4(e,t,r){const n=v4(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return g4[n]}function l_(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function w4(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var y4=o_,b4=a_,sp="Tabs",[_4,WD]=ks(sp,[s_]),c_=s_(),[j4,op]=_4(sp),u_=d.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:c="automatic",...u}=e,f=np(l),[h,m]=xs({prop:n,onChange:s,defaultProp:i});return o.jsx(j4,{scope:r,baseId:Nn(),value:h,onValueChange:m,orientation:a,dir:f,activationMode:c,children:o.jsx(Ce.div,{dir:f,"data-orientation":a,...u,ref:t})})});u_.displayName=sp;var d_="TabsList",f_=d.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,i=op(d_,r),a=c_(r);return o.jsx(y4,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:n,children:o.jsx(Ce.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:t})})});f_.displayName=d_;var h_="TabsTrigger",m_=d.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...i}=e,a=op(h_,r),l=c_(r),c=v_(a.baseId,n),u=x_(a.baseId,n),f=n===a.value;return o.jsx(b4,{asChild:!0,...l,focusable:!s,active:f,children:o.jsx(Ce.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":u,"data-state":f?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:t,onMouseDown:Se(e.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?a.onValueChange(n):h.preventDefault()}),onKeyDown:Se(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&a.onValueChange(n)}),onFocus:Se(e.onFocus,()=>{const h=a.activationMode!=="manual";!f&&!s&&h&&a.onValueChange(n)})})})});m_.displayName=h_;var p_="TabsContent",g_=d.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:i,...a}=e,l=op(p_,r),c=v_(l.baseId,n),u=x_(l.baseId,n),f=n===l.value,h=d.useRef(f);return d.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),o.jsx(Dn,{present:s||f,children:({present:m})=>o.jsx(Ce.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});g_.displayName=p_;function v_(e,t){return`${e}-trigger-${t}`}function x_(e,t){return`${e}-content-${t}`}var S4=u_,w_=f_,y_=m_,b_=g_;const Tu=S4,cl=d.forwardRef(({className:e,...t},r)=>o.jsx(w_,{ref:r,className:Ee("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));cl.displayName=w_.displayName;const Kt=d.forwardRef(({className:e,...t},r)=>o.jsx(y_,{ref:r,className:Ee("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Kt.displayName=y_.displayName;const Hr=d.forwardRef(({className:e,...t},r)=>o.jsx(b_,{ref:r,className:Ee("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Hr.displayName=b_.displayName;const Li=d.forwardRef(({className:e,...t},r)=>o.jsx("textarea",{className:Ee("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));Li.displayName="Textarea";function Wv(e,[t,r]){return Math.min(r,Math.max(t,e))}var Ld=0;function ip(){d.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??qv()),document.body.insertAdjacentElement("beforeend",e[1]??qv()),Ld++,()=>{Ld===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Ld--}},[])}function qv(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Fd="focusScope.autoFocusOnMount",$d="focusScope.autoFocusOnUnmount",Hv={bubbles:!1,cancelable:!0},N4="FocusScope",Ru=d.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=e,[l,c]=d.useState(null),u=er(s),f=er(i),h=d.useRef(null),m=Ke(t,p=>c(p)),g=d.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;d.useEffect(()=>{if(n){let p=function(x){if(g.paused||!l)return;const _=x.target;l.contains(_)?h.current=_:Wn(h.current,{select:!0})},b=function(x){if(g.paused||!l)return;const _=x.relatedTarget;_!==null&&(l.contains(_)||Wn(h.current,{select:!0}))},w=function(x){if(document.activeElement===document.body)for(const j of x)j.removedNodes.length>0&&Wn(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",b);const v=new MutationObserver(w);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",b),v.disconnect()}}},[n,l,g.paused]),d.useEffect(()=>{if(l){Gv.add(g);const p=document.activeElement;if(!l.contains(p)){const w=new CustomEvent(Fd,Hv);l.addEventListener(Fd,u),l.dispatchEvent(w),w.defaultPrevented||(k4(R4(__(l)),{select:!0}),document.activeElement===p&&Wn(l))}return()=>{l.removeEventListener(Fd,u),setTimeout(()=>{const w=new CustomEvent($d,Hv);l.addEventListener($d,f),l.dispatchEvent(w),w.defaultPrevented||Wn(p??document.body,{select:!0}),l.removeEventListener($d,f),Gv.remove(g)},0)}}},[l,u,f,g]);const y=d.useCallback(p=>{if(!r&&!n||g.paused)return;const b=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,w=document.activeElement;if(b&&w){const v=p.currentTarget,[x,_]=C4(v);x&&_?!p.shiftKey&&w===_?(p.preventDefault(),r&&Wn(x,{select:!0})):p.shiftKey&&w===x&&(p.preventDefault(),r&&Wn(_,{select:!0})):w===v&&p.preventDefault()}},[r,n,g.paused]);return o.jsx(Ce.div,{tabIndex:-1,...a,ref:m,onKeyDown:y})});Ru.displayName=N4;function k4(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Wn(n,{select:t}),document.activeElement!==r)return}function C4(e){const t=__(e),r=Kv(t,e),n=Kv(t.reverse(),e);return[r,n]}function __(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Kv(e,t){for(const r of e)if(!E4(r,{upTo:t}))return r}function E4(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function P4(e){return e instanceof HTMLInputElement&&"select"in e}function Wn(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&P4(e)&&t&&e.select()}}var Gv=T4();function T4(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=Yv(e,t),e.unshift(t)},remove(t){var r;e=Yv(e,t),(r=e[0])==null||r.resume()}}}function Yv(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function R4(e){return e.filter(t=>t.tagName!=="A")}function j_(e){const t=d.useRef({value:e,previous:e});return d.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var A4=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},No=new WeakMap,$l=new WeakMap,zl={},zd=0,S_=function(e){return e&&(e.host||S_(e.parentNode))},I4=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=S_(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},O4=function(e,t,r,n){var s=I4(t,Array.isArray(e)?e:[e]);zl[r]||(zl[r]=new WeakMap);var i=zl[r],a=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var f=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))f(m);else try{var g=m.getAttribute(n),y=g!==null&&g!=="false",p=(No.get(m)||0)+1,b=(i.get(m)||0)+1;No.set(m,p),i.set(m,b),a.push(m),p===1&&y&&$l.set(m,!0),b===1&&m.setAttribute(r,"true"),y||m.setAttribute(n,"true")}catch(w){console.error("aria-hidden: cannot operate on ",m,w)}})};return f(t),l.clear(),zd++,function(){a.forEach(function(h){var m=No.get(h)-1,g=i.get(h)-1;No.set(h,m),i.set(h,g),m||($l.has(h)||h.removeAttribute(n),$l.delete(h)),g||h.removeAttribute(r)}),zd--,zd||(No=new WeakMap,No=new WeakMap,$l=new WeakMap,zl={})}},ap=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=A4(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),O4(n,s,r,"aria-hidden")):function(){return null}},dh=function(e,t){return dh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},dh(e,t)};function D4(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");dh(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Xe=function(){return Xe=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Xe.apply(this,arguments)};function N_(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function M4(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var ic="right-scroll-bar-position",ac="width-before-scroll-bar",L4="with-scroll-bars-hidden",F4="--removed-body-scroll-bar-size";function Ud(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function $4(e,t){var r=d.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var z4=typeof window<"u"?d.useLayoutEffect:d.useEffect,Qv=new WeakMap;function U4(e,t){var r=$4(null,function(n){return e.forEach(function(s){return Ud(s,n)})});return z4(function(){var n=Qv.get(r);if(n){var s=new Set(n),i=new Set(e),a=r.current;s.forEach(function(l){i.has(l)||Ud(l,null)}),i.forEach(function(l){s.has(l)||Ud(l,a)})}Qv.set(r,e)},[e]),r}function B4(e){return e}function V4(e,t){t===void 0&&(t=B4);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var a=t(i,n);return r.push(a),function(){r=r.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(n=!0;r.length;){var a=r;r=[],a.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var a=[];if(r.length){var l=r;r=[],l.forEach(i),a=r}var c=function(){var f=a;a=[],f.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(f){a.push(f),u()},filter:function(f){return a=a.filter(f),r}}}};return s}function W4(e){e===void 0&&(e={});var t=V4(null);return t.options=Xe({async:!0,ssr:!1},e),t}var k_=function(e){var t=e.sideCar,r=N_(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return d.createElement(n,Xe({},r))};k_.isSideCarExport=!0;function q4(e,t){return e.useMedium(t),k_}var C_=W4(),Bd=function(){},Au=d.forwardRef(function(e,t){var r=d.useRef(null),n=d.useState({onScrollCapture:Bd,onWheelCapture:Bd,onTouchMoveCapture:Bd}),s=n[0],i=n[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,h=e.shards,m=e.sideCar,g=e.noIsolation,y=e.inert,p=e.allowPinchZoom,b=e.as,w=b===void 0?"div":b,v=e.gapMode,x=N_(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=m,j=U4([r,t]),N=Xe(Xe({},x),s);return d.createElement(d.Fragment,null,f&&d.createElement(_,{sideCar:C_,removeScrollBar:u,shards:h,noIsolation:g,inert:y,setCallbacks:i,allowPinchZoom:!!p,lockRef:r,gapMode:v}),a?d.cloneElement(d.Children.only(l),Xe(Xe({},N),{ref:j})):d.createElement(w,Xe({},N,{className:c,ref:j}),l))});Au.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Au.classNames={fullWidth:ac,zeroRight:ic};var H4=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function K4(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=H4();return t&&e.setAttribute("nonce",t),e}function G4(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Y4(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Q4=function(){var e=0,t=null;return{add:function(r){e==0&&(t=K4())&&(G4(t,r),Y4(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},J4=function(){var e=Q4();return function(t,r){d.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},E_=function(){var e=J4(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},X4={left:0,top:0,right:0,gap:0},Vd=function(e){return parseInt(e||"",10)||0},Z4=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Vd(r),Vd(n),Vd(s)]},eI=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return X4;var t=Z4(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},tI=E_(),ei="data-scroll-locked",rI=function(e,t,r,n){var s=e.left,i=e.top,a=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(L4,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(ei,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ic,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(ac,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(ic," .").concat(ic,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(ac," .").concat(ac,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(ei,`] {
    `).concat(F4,": ").concat(l,`px;
  }
`)},Jv=function(){var e=parseInt(document.body.getAttribute(ei)||"0",10);return isFinite(e)?e:0},nI=function(){d.useEffect(function(){return document.body.setAttribute(ei,(Jv()+1).toString()),function(){var e=Jv()-1;e<=0?document.body.removeAttribute(ei):document.body.setAttribute(ei,e.toString())}},[])},sI=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;nI();var i=d.useMemo(function(){return eI(s)},[s]);return d.createElement(tI,{styles:rI(i,!t,s,r?"":"!important")})},fh=!1;if(typeof window<"u")try{var Ul=Object.defineProperty({},"passive",{get:function(){return fh=!0,!0}});window.addEventListener("test",Ul,Ul),window.removeEventListener("test",Ul,Ul)}catch{fh=!1}var ko=fh?{passive:!1}:!1,oI=function(e){return e.tagName==="TEXTAREA"},P_=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!oI(e)&&r[t]==="visible")},iI=function(e){return P_(e,"overflowY")},aI=function(e){return P_(e,"overflowX")},Xv=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=T_(e,n);if(s){var i=R_(e,n),a=i[1],l=i[2];if(a>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},lI=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},cI=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},T_=function(e,t){return e==="v"?iI(t):aI(t)},R_=function(e,t){return e==="v"?lI(t):cI(t)},uI=function(e,t){return e==="h"&&t==="rtl"?-1:1},dI=function(e,t,r,n,s){var i=uI(e,window.getComputedStyle(t).direction),a=i*n,l=r.target,c=t.contains(l),u=!1,f=a>0,h=0,m=0;do{var g=R_(e,l),y=g[0],p=g[1],b=g[2],w=p-b-i*y;(y||w)&&T_(e,l)&&(h+=w,m+=y),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(Math.abs(h)<1||!s)||!f&&(Math.abs(m)<1||!s))&&(u=!0),u},Bl=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Zv=function(e){return[e.deltaX,e.deltaY]},ex=function(e){return e&&"current"in e?e.current:e},fI=function(e,t){return e[0]===t[0]&&e[1]===t[1]},hI=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},mI=0,Co=[];function pI(e){var t=d.useRef([]),r=d.useRef([0,0]),n=d.useRef(),s=d.useState(mI++)[0],i=d.useState(E_)[0],a=d.useRef(e);d.useEffect(function(){a.current=e},[e]),d.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var p=M4([e.lockRef.current],(e.shards||[]).map(ex),!0).filter(Boolean);return p.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),p.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=d.useCallback(function(p,b){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!a.current.allowPinchZoom;var w=Bl(p),v=r.current,x="deltaX"in p?p.deltaX:v[0]-w[0],_="deltaY"in p?p.deltaY:v[1]-w[1],j,N=p.target,S=Math.abs(x)>Math.abs(_)?"h":"v";if("touches"in p&&S==="h"&&N.type==="range")return!1;var k=Xv(S,N);if(!k)return!0;if(k?j=S:(j=S==="v"?"h":"v",k=Xv(S,N)),!k)return!1;if(!n.current&&"changedTouches"in p&&(x||_)&&(n.current=j),!j)return!0;var U=n.current||j;return dI(U,b,p,U==="h"?x:_,!0)},[]),c=d.useCallback(function(p){var b=p;if(!(!Co.length||Co[Co.length-1]!==i)){var w="deltaY"in b?Zv(b):Bl(b),v=t.current.filter(function(j){return j.name===b.type&&(j.target===b.target||b.target===j.shadowParent)&&fI(j.delta,w)})[0];if(v&&v.should){b.cancelable&&b.preventDefault();return}if(!v){var x=(a.current.shards||[]).map(ex).filter(Boolean).filter(function(j){return j.contains(b.target)}),_=x.length>0?l(b,x[0]):!a.current.noIsolation;_&&b.cancelable&&b.preventDefault()}}},[]),u=d.useCallback(function(p,b,w,v){var x={name:p,delta:b,target:w,should:v,shadowParent:gI(w)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(_){return _!==x})},1)},[]),f=d.useCallback(function(p){r.current=Bl(p),n.current=void 0},[]),h=d.useCallback(function(p){u(p.type,Zv(p),p.target,l(p,e.lockRef.current))},[]),m=d.useCallback(function(p){u(p.type,Bl(p),p.target,l(p,e.lockRef.current))},[]);d.useEffect(function(){return Co.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,ko),document.addEventListener("touchmove",c,ko),document.addEventListener("touchstart",f,ko),function(){Co=Co.filter(function(p){return p!==i}),document.removeEventListener("wheel",c,ko),document.removeEventListener("touchmove",c,ko),document.removeEventListener("touchstart",f,ko)}},[]);var g=e.removeScrollBar,y=e.inert;return d.createElement(d.Fragment,null,y?d.createElement(i,{styles:hI(s)}):null,g?d.createElement(sI,{gapMode:e.gapMode}):null)}function gI(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const vI=q4(C_,pI);var Iu=d.forwardRef(function(e,t){return d.createElement(Au,Xe({},e,{ref:t,sideCar:vI}))});Iu.classNames=Au.classNames;var xI=[" ","Enter","ArrowUp","ArrowDown"],wI=[" ","Enter"],ul="Select",[Ou,Du,yI]=_m(ul),[Fi,qD]=ks(ul,[yI,Ai]),Mu=Ai(),[bI,Ps]=Fi(ul),[_I,jI]=Fi(ul),A_=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:u,name:f,autoComplete:h,disabled:m,required:g,form:y}=e,p=Mu(t),[b,w]=d.useState(null),[v,x]=d.useState(null),[_,j]=d.useState(!1),N=np(u),[S=!1,k]=xs({prop:n,defaultProp:s,onChange:i}),[U,W]=xs({prop:a,defaultProp:l,onChange:c}),V=d.useRef(null),q=b?y||!!b.closest("form"):!0,[re,$]=d.useState(new Set),ee=Array.from(re).map(G=>G.props.value).join(";");return o.jsx(Fy,{...p,children:o.jsxs(bI,{required:g,scope:t,trigger:b,onTriggerChange:w,valueNode:v,onValueNodeChange:x,valueNodeHasChildren:_,onValueNodeHasChildrenChange:j,contentId:Nn(),value:U,onValueChange:W,open:S,onOpenChange:k,dir:N,triggerPointerDownPosRef:V,disabled:m,children:[o.jsx(Ou.Provider,{scope:t,children:o.jsx(_I,{scope:e.__scopeSelect,onNativeOptionAdd:d.useCallback(G=>{$(J=>new Set(J).add(G))},[]),onNativeOptionRemove:d.useCallback(G=>{$(J=>{const P=new Set(J);return P.delete(G),P})},[]),children:r})}),q?o.jsxs(n1,{"aria-hidden":!0,required:g,tabIndex:-1,name:f,autoComplete:h,value:U,onChange:G=>W(G.target.value),disabled:m,form:y,children:[U===void 0?o.jsx("option",{value:""}):null,Array.from(re)]},ee):null]})})};A_.displayName=ul;var I_="SelectTrigger",O_=d.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,i=Mu(r),a=Ps(I_,r),l=a.disabled||n,c=Ke(t,a.onTriggerChange),u=Du(r),f=d.useRef("touch"),[h,m,g]=s1(p=>{const b=u().filter(x=>!x.disabled),w=b.find(x=>x.value===a.value),v=o1(b,p,w);v!==void 0&&a.onValueChange(v.value)}),y=p=>{l||(a.onOpenChange(!0),g()),p&&(a.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return o.jsx(pu,{asChild:!0,...i,children:o.jsx(Ce.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":r1(a.value)?"":void 0,...s,ref:c,onClick:Se(s.onClick,p=>{p.currentTarget.focus(),f.current!=="mouse"&&y(p)}),onPointerDown:Se(s.onPointerDown,p=>{f.current=p.pointerType;const b=p.target;b.hasPointerCapture(p.pointerId)&&b.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(y(p),p.preventDefault())}),onKeyDown:Se(s.onKeyDown,p=>{const b=h.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&m(p.key),!(b&&p.key===" ")&&xI.includes(p.key)&&(y(),p.preventDefault())})})})});O_.displayName=I_;var D_="SelectValue",M_=d.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:i,placeholder:a="",...l}=e,c=Ps(D_,r),{onValueNodeHasChildrenChange:u}=c,f=i!==void 0,h=Ke(t,c.onValueNodeChange);return Tt(()=>{u(f)},[u,f]),o.jsx(Ce.span,{...l,ref:h,style:{pointerEvents:"none"},children:r1(c.value)?o.jsx(o.Fragment,{children:a}):i})});M_.displayName=D_;var SI="SelectIcon",L_=d.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return o.jsx(Ce.span,{"aria-hidden":!0,...s,ref:t,children:n||"▼"})});L_.displayName=SI;var NI="SelectPortal",F_=e=>o.jsx(el,{asChild:!0,...e});F_.displayName=NI;var co="SelectContent",$_=d.forwardRef((e,t)=>{const r=Ps(co,e.__scopeSelect),[n,s]=d.useState();if(Tt(()=>{s(new DocumentFragment)},[]),!r.open){const i=n;return i?mo.createPortal(o.jsx(z_,{scope:e.__scopeSelect,children:o.jsx(Ou.Slot,{scope:e.__scopeSelect,children:o.jsx("div",{children:e.children})})}),i):null}return o.jsx(U_,{...e,ref:t})});$_.displayName=co;var $r=10,[z_,Ts]=Fi(co),kI="SelectContentImpl",U_=d.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:y,hideWhenDetached:p,avoidCollisions:b,...w}=e,v=Ps(co,r),[x,_]=d.useState(null),[j,N]=d.useState(null),S=Ke(t,L=>_(L)),[k,U]=d.useState(null),[W,V]=d.useState(null),q=Du(r),[re,$]=d.useState(!1),ee=d.useRef(!1);d.useEffect(()=>{if(x)return ap(x)},[x]),ip();const G=d.useCallback(L=>{const[Y,...D]=q().map(ae=>ae.ref.current),[M]=D.slice(-1),z=document.activeElement;for(const ae of L)if(ae===z||(ae==null||ae.scrollIntoView({block:"nearest"}),ae===Y&&j&&(j.scrollTop=0),ae===M&&j&&(j.scrollTop=j.scrollHeight),ae==null||ae.focus(),document.activeElement!==z))return},[q,j]),J=d.useCallback(()=>G([k,x]),[G,k,x]);d.useEffect(()=>{re&&J()},[re,J]);const{onOpenChange:P,triggerPointerDownPosRef:F}=v;d.useEffect(()=>{if(x){let L={x:0,y:0};const Y=M=>{var z,ae;L={x:Math.abs(Math.round(M.pageX)-(((z=F.current)==null?void 0:z.x)??0)),y:Math.abs(Math.round(M.pageY)-(((ae=F.current)==null?void 0:ae.y)??0))}},D=M=>{L.x<=10&&L.y<=10?M.preventDefault():x.contains(M.target)||P(!1),document.removeEventListener("pointermove",Y),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",Y),document.addEventListener("pointerup",D,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Y),document.removeEventListener("pointerup",D,{capture:!0})}}},[x,P,F]),d.useEffect(()=>{const L=()=>P(!1);return window.addEventListener("blur",L),window.addEventListener("resize",L),()=>{window.removeEventListener("blur",L),window.removeEventListener("resize",L)}},[P]);const[Q,se]=s1(L=>{const Y=q().filter(z=>!z.disabled),D=Y.find(z=>z.ref.current===document.activeElement),M=o1(Y,L,D);M&&setTimeout(()=>M.ref.current.focus())}),O=d.useCallback((L,Y,D)=>{const M=!ee.current&&!D;(v.value!==void 0&&v.value===Y||M)&&(U(L),M&&(ee.current=!0))},[v.value]),X=d.useCallback(()=>x==null?void 0:x.focus(),[x]),ie=d.useCallback((L,Y,D)=>{const M=!ee.current&&!D;(v.value!==void 0&&v.value===Y||M)&&V(L)},[v.value]),le=n==="popper"?hh:B_,T=le===hh?{side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:y,hideWhenDetached:p,avoidCollisions:b}:{};return o.jsx(z_,{scope:r,content:x,viewport:j,onViewportChange:N,itemRefCallback:O,selectedItem:k,onItemLeave:X,itemTextRefCallback:ie,focusSelectedItem:J,selectedItemText:W,position:n,isPositioned:re,searchRef:Q,children:o.jsx(Iu,{as:vs,allowPinchZoom:!0,children:o.jsx(Ru,{asChild:!0,trapped:v.open,onMountAutoFocus:L=>{L.preventDefault()},onUnmountAutoFocus:Se(s,L=>{var Y;(Y=v.trigger)==null||Y.focus({preventScroll:!0}),L.preventDefault()}),children:o.jsx(Ei,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:L=>L.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:o.jsx(le,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:L=>L.preventDefault(),...w,...T,onPlaced:()=>$(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:Se(w.onKeyDown,L=>{const Y=L.ctrlKey||L.altKey||L.metaKey;if(L.key==="Tab"&&L.preventDefault(),!Y&&L.key.length===1&&se(L.key),["ArrowUp","ArrowDown","Home","End"].includes(L.key)){let M=q().filter(z=>!z.disabled).map(z=>z.ref.current);if(["ArrowUp","End"].includes(L.key)&&(M=M.slice().reverse()),["ArrowUp","ArrowDown"].includes(L.key)){const z=L.target,ae=M.indexOf(z);M=M.slice(ae+1)}setTimeout(()=>G(M)),L.preventDefault()}})})})})})})});U_.displayName=kI;var CI="SelectItemAlignedPosition",B_=d.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,i=Ps(co,r),a=Ts(co,r),[l,c]=d.useState(null),[u,f]=d.useState(null),h=Ke(t,S=>f(S)),m=Du(r),g=d.useRef(!1),y=d.useRef(!0),{viewport:p,selectedItem:b,selectedItemText:w,focusSelectedItem:v}=a,x=d.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&p&&b&&w){const S=i.trigger.getBoundingClientRect(),k=u.getBoundingClientRect(),U=i.valueNode.getBoundingClientRect(),W=w.getBoundingClientRect();if(i.dir!=="rtl"){const z=W.left-k.left,ae=U.left-z,me=S.left-ae,we=S.width+me,I=Math.max(we,k.width),R=window.innerWidth-$r,B=Wv(ae,[$r,Math.max($r,R-I)]);l.style.minWidth=we+"px",l.style.left=B+"px"}else{const z=k.right-W.right,ae=window.innerWidth-U.right-z,me=window.innerWidth-S.right-ae,we=S.width+me,I=Math.max(we,k.width),R=window.innerWidth-$r,B=Wv(ae,[$r,Math.max($r,R-I)]);l.style.minWidth=we+"px",l.style.right=B+"px"}const V=m(),q=window.innerHeight-$r*2,re=p.scrollHeight,$=window.getComputedStyle(u),ee=parseInt($.borderTopWidth,10),G=parseInt($.paddingTop,10),J=parseInt($.borderBottomWidth,10),P=parseInt($.paddingBottom,10),F=ee+G+re+P+J,Q=Math.min(b.offsetHeight*5,F),se=window.getComputedStyle(p),O=parseInt(se.paddingTop,10),X=parseInt(se.paddingBottom,10),ie=S.top+S.height/2-$r,le=q-ie,T=b.offsetHeight/2,L=b.offsetTop+T,Y=ee+G+L,D=F-Y;if(Y<=ie){const z=V.length>0&&b===V[V.length-1].ref.current;l.style.bottom="0px";const ae=u.clientHeight-p.offsetTop-p.offsetHeight,me=Math.max(le,T+(z?X:0)+ae+J),we=Y+me;l.style.height=we+"px"}else{const z=V.length>0&&b===V[0].ref.current;l.style.top="0px";const me=Math.max(ie,ee+p.offsetTop+(z?O:0)+T)+D;l.style.height=me+"px",p.scrollTop=Y-ie+p.offsetTop}l.style.margin=`${$r}px 0`,l.style.minHeight=Q+"px",l.style.maxHeight=q+"px",n==null||n(),requestAnimationFrame(()=>g.current=!0)}},[m,i.trigger,i.valueNode,l,u,p,b,w,i.dir,n]);Tt(()=>x(),[x]);const[_,j]=d.useState();Tt(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const N=d.useCallback(S=>{S&&y.current===!0&&(x(),v==null||v(),y.current=!1)},[x,v]);return o.jsx(PI,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:N,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:o.jsx(Ce.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});B_.displayName=CI;var EI="SelectPopperPosition",hh=d.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=$r,...i}=e,a=Mu(r);return o.jsx(zm,{...a,...i,ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});hh.displayName=EI;var[PI,lp]=Fi(co,{}),mh="SelectViewport",V_=d.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...s}=e,i=Ts(mh,r),a=lp(mh,r),l=Ke(t,i.onViewportChange),c=d.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),o.jsx(Ou.Slot,{scope:r,children:o.jsx(Ce.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Se(s.onScroll,u=>{const f=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=a;if(m!=null&&m.current&&h){const g=Math.abs(c.current-f.scrollTop);if(g>0){const y=window.innerHeight-$r*2,p=parseFloat(h.style.minHeight),b=parseFloat(h.style.height),w=Math.max(p,b);if(w<y){const v=w+g,x=Math.min(y,v),_=v-x;h.style.height=x+"px",h.style.bottom==="0px"&&(f.scrollTop=_>0?_:0,h.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});V_.displayName=mh;var W_="SelectGroup",[TI,RI]=Fi(W_),AI=d.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Nn();return o.jsx(TI,{scope:r,id:s,children:o.jsx(Ce.div,{role:"group","aria-labelledby":s,...n,ref:t})})});AI.displayName=W_;var q_="SelectLabel",H_=d.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=RI(q_,r);return o.jsx(Ce.div,{id:s.id,...n,ref:t})});H_.displayName=q_;var qc="SelectItem",[II,K_]=Fi(qc),G_=d.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:i,...a}=e,l=Ps(qc,r),c=Ts(qc,r),u=l.value===n,[f,h]=d.useState(i??""),[m,g]=d.useState(!1),y=Ke(t,v=>{var x;return(x=c.itemRefCallback)==null?void 0:x.call(c,v,n,s)}),p=Nn(),b=d.useRef("touch"),w=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(II,{scope:r,value:n,disabled:s,textId:p,isSelected:u,onItemTextChange:d.useCallback(v=>{h(x=>x||((v==null?void 0:v.textContent)??"").trim())},[]),children:o.jsx(Ou.ItemSlot,{scope:r,value:n,disabled:s,textValue:f,children:o.jsx(Ce.div,{role:"option","aria-labelledby":p,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:y,onFocus:Se(a.onFocus,()=>g(!0)),onBlur:Se(a.onBlur,()=>g(!1)),onClick:Se(a.onClick,()=>{b.current!=="mouse"&&w()}),onPointerUp:Se(a.onPointerUp,()=>{b.current==="mouse"&&w()}),onPointerDown:Se(a.onPointerDown,v=>{b.current=v.pointerType}),onPointerMove:Se(a.onPointerMove,v=>{var x;b.current=v.pointerType,s?(x=c.onItemLeave)==null||x.call(c):b.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Se(a.onPointerLeave,v=>{var x;v.currentTarget===document.activeElement&&((x=c.onItemLeave)==null||x.call(c))}),onKeyDown:Se(a.onKeyDown,v=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&v.key===" "||(wI.includes(v.key)&&w(),v.key===" "&&v.preventDefault())})})})})});G_.displayName=qc;var oa="SelectItemText",Y_=d.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...i}=e,a=Ps(oa,r),l=Ts(oa,r),c=K_(oa,r),u=jI(oa,r),[f,h]=d.useState(null),m=Ke(t,w=>h(w),c.onItemTextChange,w=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,w,c.value,c.disabled)}),g=f==null?void 0:f.textContent,y=d.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:p,onNativeOptionRemove:b}=u;return Tt(()=>(p(y),()=>b(y)),[p,b,y]),o.jsxs(o.Fragment,{children:[o.jsx(Ce.span,{id:c.textId,...i,ref:m}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?mo.createPortal(i.children,a.valueNode):null]})});Y_.displayName=oa;var Q_="SelectItemIndicator",J_=d.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return K_(Q_,r).isSelected?o.jsx(Ce.span,{"aria-hidden":!0,...n,ref:t}):null});J_.displayName=Q_;var ph="SelectScrollUpButton",X_=d.forwardRef((e,t)=>{const r=Ts(ph,e.__scopeSelect),n=lp(ph,e.__scopeSelect),[s,i]=d.useState(!1),a=Ke(t,n.onScrollButtonChange);return Tt(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?o.jsx(e1,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});X_.displayName=ph;var gh="SelectScrollDownButton",Z_=d.forwardRef((e,t)=>{const r=Ts(gh,e.__scopeSelect),n=lp(gh,e.__scopeSelect),[s,i]=d.useState(!1),a=Ke(t,n.onScrollButtonChange);return Tt(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<u;i(f)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?o.jsx(e1,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Z_.displayName=gh;var e1=d.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=e,i=Ts("SelectScrollButton",r),a=d.useRef(null),l=Du(r),c=d.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return d.useEffect(()=>()=>c(),[c]),Tt(()=>{var f;const u=l().find(h=>h.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),o.jsx(Ce.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:Se(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:Se(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:Se(s.onPointerLeave,()=>{c()})})}),OI="SelectSeparator",t1=d.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return o.jsx(Ce.div,{"aria-hidden":!0,...n,ref:t})});t1.displayName=OI;var vh="SelectArrow",DI=d.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Mu(r),i=Ps(vh,r),a=Ts(vh,r);return i.open&&a.position==="popper"?o.jsx(Um,{...s,...n,ref:t}):null});DI.displayName=vh;function r1(e){return e===""||e===void 0}var n1=d.forwardRef((e,t)=>{const{value:r,...n}=e,s=d.useRef(null),i=Ke(t,s),a=j_(r);return d.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==r&&f){const h=new Event("change",{bubbles:!0});f.call(l,r),l.dispatchEvent(h)}},[a,r]),o.jsx(tl,{asChild:!0,children:o.jsx("select",{...n,ref:i,defaultValue:r})})});n1.displayName="BubbleSelect";function s1(e){const t=er(e),r=d.useRef(""),n=d.useRef(0),s=d.useCallback(a=>{const l=r.current+a;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=d.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return d.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,i]}function o1(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let a=MI(e,Math.max(i,0));s.length===1&&(a=a.filter(u=>u!==r));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function MI(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var LI=A_,i1=O_,FI=M_,$I=L_,zI=F_,a1=$_,UI=V_,l1=H_,c1=G_,BI=Y_,VI=J_,u1=X_,d1=Z_,f1=t1;const WI=LI,qI=FI,h1=d.forwardRef(({className:e,children:t,...r},n)=>o.jsxs(i1,{ref:n,className:Ee("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,o.jsx($I,{asChild:!0,children:o.jsx(Cm,{className:"h-4 w-4 opacity-50"})})]}));h1.displayName=i1.displayName;const m1=d.forwardRef(({className:e,...t},r)=>o.jsx(u1,{ref:r,className:Ee("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(sC,{className:"h-4 w-4"})}));m1.displayName=u1.displayName;const p1=d.forwardRef(({className:e,...t},r)=>o.jsx(d1,{ref:r,className:Ee("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(Cm,{className:"h-4 w-4"})}));p1.displayName=d1.displayName;const g1=d.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>o.jsx(zI,{children:o.jsxs(a1,{ref:s,className:Ee("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[o.jsx(m1,{}),o.jsx(UI,{className:Ee("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),o.jsx(p1,{})]})}));g1.displayName=a1.displayName;const HI=d.forwardRef(({className:e,...t},r)=>o.jsx(l1,{ref:r,className:Ee("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));HI.displayName=l1.displayName;const xh=d.forwardRef(({className:e,children:t,...r},n)=>o.jsxs(c1,{ref:n,className:Ee("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(VI,{children:o.jsx(km,{className:"h-4 w-4"})})}),o.jsx(BI,{children:t})]}));xh.displayName=c1.displayName;const KI=d.forwardRef(({className:e,...t},r)=>o.jsx(f1,{ref:r,className:Ee("-mx-1 my-1 h-px bg-muted",e),...t}));KI.displayName=f1.displayName;function cp(e){const[t,r]=d.useState(!0),[n,s]=d.useState(!1),[i,a]=d.useState(null),l=d.useCallback(async()=>{var c,u;r(!0),a(null);try{const{data:f,error:h}=await Eu(e);h?(console.error("Wallet link status error:",h),h.code==="PGRST116"||(c=h.message)!=null&&c.includes("406")||(u=h.message)!=null&&u.includes("Not Acceptable")||h.status===406?(console.log("Wallet links table access issue, assuming not linked"),s(!1),a(null)):(a(h.message||"Failed to fetch wallet link status"),s(!1))):s(!!f)}catch(f){console.error("Exception in wallet link status:",f),s(!1),a(null)}finally{r(!1)}},[e]);return d.useEffect(()=>{e&&l()},[l,e]),{loading:t,linked:n,error:i,refresh:l,setLinked:s}}function GI({open:e,onClose:t,refreshKey:r}){const[n,s]=d.useState(null),[i,a]=d.useState(!1),[l,c]=d.useState(null),[u,f]=d.useState(!1),h=Ye(),{user:m}=tt(),{loading:g,linked:y,refresh:p}=cp(m==null?void 0:m.id);d.useEffect(()=>{e&&(c(null),Mi(m==null?void 0:m.id).then(s).catch(()=>s(null)),m!=null&&m.id&&p())},[e,m,r]);const b=async()=>{a(!0),c(null);try{if(await Jb(),m!=null&&m.id){const{error:v}=await C.from("wallet_links").delete().eq("user_id",m.id);if(v){c(v.message||"Failed to remove wallet link from database"),a(!1);return}}p(),a(!1),typeof window<"u"&&window.toast&&window.toast({title:"Wallet unlinked",description:"Your wallet has been successfully unlinked.",className:"bg-green-600 text-white border-green-700"}),t()}catch(v){c(v.message||"Failed to unlink wallet"),a(!1)}};if(!e)return null;const w=l==null?void 0:l.replace(/WordPress/gi,"TrinEPay");return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black",children:o.jsxs("div",{className:"bg-black rounded-lg p-6 w-full max-w-xs shadow-lg border border-white/10",children:[o.jsx("h2",{className:"text-lg font-bold text-white mb-4 text-center",children:"TrinEPay Wallet"}),g?o.jsx("div",{className:"text-center text-white",children:"Loading..."}):y?o.jsxs(o.Fragment,{children:[u&&o.jsx("div",{className:"text-center text-red-400 font-semibold mb-2",children:"This wallet is already linked to another Limey account."}),n!==null&&o.jsxs("div",{className:"text-center text-green-400 font-semibold mb-4",children:["TrinECredits: TT$",n.toFixed(2)]}),o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(K,{onClick:()=>{t(),h("/wallet")},className:"w-full",children:"Go to Wallet"}),o.jsx(K,{onClick:b,className:"w-full",variant:"destructive",disabled:i,children:i?"Unlinking...":"Unlink Wallet"})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-yellow-500/20 border border-yellow-500/30 rounded-lg p-3 mb-4",children:o.jsxs("p",{className:"text-yellow-400 text-sm text-center",children:[o.jsx("strong",{children:"Important:"})," To link your Wallet, make sure you use the exact same email and password from your Limey account to create your TrinEPay Wallet account. If not go to the TrinEPay App and create a new account with your Limey email and password then come back and Link Wallet."]})}),o.jsx(K,{onClick:()=>{t(),h("/wallet/link")},className:"w-full",children:"Link Account"})]}),w&&o.jsx("div",{className:"text-red-400 text-center mt-2",children:w}),o.jsx(K,{onClick:t,className:"w-full mt-4",variant:"ghost",children:"Cancel"})]})})}var up="Dialog",[v1,HD]=ks(up),[YI,Xr]=v1(up),x1=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:a=!0}=e,l=d.useRef(null),c=d.useRef(null),[u=!1,f]=xs({prop:n,defaultProp:s,onChange:i});return o.jsx(YI,{scope:t,triggerRef:l,contentRef:c,contentId:Nn(),titleId:Nn(),descriptionId:Nn(),open:u,onOpenChange:f,onOpenToggle:d.useCallback(()=>f(h=>!h),[f]),modal:a,children:r})};x1.displayName=up;var w1="DialogTrigger",QI=d.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Xr(w1,r),i=Ke(t,s.triggerRef);return o.jsx(Ce.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":hp(s.open),...n,ref:i,onClick:Se(e.onClick,s.onOpenToggle)})});QI.displayName=w1;var dp="DialogPortal",[JI,y1]=v1(dp,{forceMount:void 0}),b1=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,i=Xr(dp,t);return o.jsx(JI,{scope:t,forceMount:r,children:d.Children.map(n,a=>o.jsx(Dn,{present:r||i.open,children:o.jsx(el,{asChild:!0,container:s,children:a})}))})};b1.displayName=dp;var Hc="DialogOverlay",_1=d.forwardRef((e,t)=>{const r=y1(Hc,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,i=Xr(Hc,e.__scopeDialog);return i.modal?o.jsx(Dn,{present:n||i.open,children:o.jsx(XI,{...s,ref:t})}):null});_1.displayName=Hc;var XI=d.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Xr(Hc,r);return o.jsx(Iu,{as:vs,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(Ce.div,{"data-state":hp(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),uo="DialogContent",j1=d.forwardRef((e,t)=>{const r=y1(uo,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,i=Xr(uo,e.__scopeDialog);return o.jsx(Dn,{present:n||i.open,children:i.modal?o.jsx(ZI,{...s,ref:t}):o.jsx(eO,{...s,ref:t})})});j1.displayName=uo;var ZI=d.forwardRef((e,t)=>{const r=Xr(uo,e.__scopeDialog),n=d.useRef(null),s=Ke(t,r.contentRef,n);return d.useEffect(()=>{const i=n.current;if(i)return ap(i)},[]),o.jsx(S1,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Se(e.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=r.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Se(e.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&i.preventDefault()}),onFocusOutside:Se(e.onFocusOutside,i=>i.preventDefault())})}),eO=d.forwardRef((e,t)=>{const r=Xr(uo,e.__scopeDialog),n=d.useRef(!1),s=d.useRef(!1);return o.jsx(S1,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),S1=d.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=e,l=Xr(uo,r),c=d.useRef(null),u=Ke(t,c);return ip(),o.jsxs(o.Fragment,{children:[o.jsx(Ru,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(Ei,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":hp(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(tO,{titleId:l.titleId}),o.jsx(nO,{contentRef:c,descriptionId:l.descriptionId})]})]})}),fp="DialogTitle",N1=d.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Xr(fp,r);return o.jsx(Ce.h2,{id:s.titleId,...n,ref:t})});N1.displayName=fp;var k1="DialogDescription",C1=d.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Xr(k1,r);return o.jsx(Ce.p,{id:s.descriptionId,...n,ref:t})});C1.displayName=k1;var E1="DialogClose",P1=d.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Xr(E1,r);return o.jsx(Ce.button,{type:"button",...n,ref:t,onClick:Se(e.onClick,()=>s.onOpenChange(!1))})});P1.displayName=E1;function hp(e){return e?"open":"closed"}var T1="DialogTitleWarning",[KD,R1]=gk(T1,{contentName:uo,titleName:fp,docsSlug:"dialog"}),tO=({titleId:e})=>{const t=R1(T1),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return d.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},rO="DialogDescriptionWarning",nO=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${R1(rO).contentName}}.`;return d.useEffect(()=>{var i;const s=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},A1=x1,I1=b1,Lu=_1,Fu=j1,$u=N1,zu=C1,O1=P1;const sO=A1,oO=I1,D1=d.forwardRef(({className:e,...t},r)=>o.jsx(Lu,{className:Ee("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));D1.displayName=Lu.displayName;const iO=rl("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),M1=d.forwardRef(({side:e="right",className:t,children:r,...n},s)=>o.jsxs(oO,{children:[o.jsx(D1,{}),o.jsxs(Fu,{ref:s,className:Ee(iO({side:e}),t),...n,children:[r,o.jsxs(O1,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[o.jsx(Mr,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));M1.displayName=Fu.displayName;const L1=({className:e,...t})=>o.jsx("div",{className:Ee("flex flex-col space-y-2 text-center sm:text-left",e),...t});L1.displayName="SheetHeader";const F1=d.forwardRef(({className:e,...t},r)=>o.jsx($u,{ref:r,className:Ee("text-lg font-semibold text-foreground",e),...t}));F1.displayName=$u.displayName;const aO=d.forwardRef(({className:e,...t},r)=>o.jsx(zu,{ref:r,className:Ee("text-sm text-muted-foreground",e),...t}));aO.displayName=zu.displayName;const tx=()=>{var Sp,Np,kp,Cp,Ep;const{user:e,signOut:t,isAdmin:r,loading:n}=tt(),{username:s}=ol(),i=Ye(),{toast:a}=Ft(),[l,c]=d.useState(null),[u,f]=d.useState(!0),[h,m]=d.useState([]),[g,y]=d.useState(!1),[p,b]=d.useState(!1),w=d.useRef(null),[v,x]=d.useState(!1),[_,j]=d.useState(null),[N,S]=d.useState(!1),[k,U]=d.useState(null),[W,V]=d.useState(!1),[q,re]=d.useState(0),[$,ee]=d.useState(null),[G,J]=d.useState([]),[P,F]=d.useState([]),[Q,se]=d.useState(!1),[O,X]=d.useState(!1),[ie,le]=d.useState([]),[T,L]=d.useState([]),[Y,D]=d.useState(!1),[M,z]=d.useState(!1),[ae,me]=d.useState(!1),[we,I]=d.useState(null),[R,B]=d.useState(!1),[Z,ue]=d.useState(!1),[ve,he]=d.useState(!1),[Ie,Fe]=d.useState(!1),[We,bt]=d.useState(""),[$t,Yt]=d.useState(!1),[hr,Rt]=d.useState(0),[At,kr]=d.useState(0),[hn,mn]=d.useState({}),[Ge,Cr]=d.useState({type:"all",targetUsername:"",title:"",message:""}),[sr,Mn]=d.useState(!1),[Ne,$e]=d.useState([]),[ze,_t]=d.useState(!1),[A,oe]=d.useState(!1),[pe,xe]=d.useState([]),[ye,ge]=d.useState(!1),[je,Ue]=d.useState({}),[pt,Be]=d.useState([]),[vo,zt]=d.useState(null),[Bu,vp]=d.useState(null),[fj,fl]=d.useState(!1),[mr,hj]=d.useState(null);d.useState(null);const xp=fn();d.useEffect(()=>{xp.pathname==="/profile"&&W&&(re(E=>E+1),V(!1))},[xp.pathname]),d.useEffect(()=>{if(!(l!=null&&l.user_id)||h.length===0||h.map(te=>te.id).length===0)return;const H=C.channel(`user_videos_${l.user_id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"videos",filter:`user_id=eq.${l.user_id}`},te=>{m(de=>de.map(_e=>_e.id===te.new.id?{..._e,...te.new}:_e))}).subscribe();return()=>{C.removeChannel(H)}},[l==null?void 0:l.user_id,h.length]),d.useEffect(()=>{if(!(l!=null&&l.user_id)||h.length===0)return;const E=C.channel(`user_views_${l.user_id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"video_views",filter:`video_id=in.(${h.map(H=>H.id).join(",")})`},H=>{var te;(te=H.new)!=null&&te.video_id&&m(de=>de.map(_e=>_e.id===H.new.video_id?{..._e,view_count:(_e.view_count||0)+1}:_e))}).subscribe();return()=>{C.removeChannel(E)}},[l==null?void 0:l.user_id,h.length]),d.useEffect(()=>{if(!(l!=null&&l.user_id))return;const E=C.channel(`user_follows_${l.user_id}`).on("postgres_changes",{event:"*",schema:"public",table:"follows",filter:`following_id=eq.${l.user_id}`},()=>{As()}).subscribe();return()=>{C.removeChannel(E)}},[l==null?void 0:l.user_id]),d.useEffect(()=>{mj(),g&&(r||xj(),e!=null&&e.id&&gj(e.id))},[s,e,g,r]),d.useEffect(()=>{l!=null&&l.user_id&&As()},[l==null?void 0:l.user_id]),d.useEffect(()=>{if(!(l!=null&&l.user_id))return;const E=setInterval(()=>{As()},3e4);return()=>clearInterval(E)},[l==null?void 0:l.user_id]),d.useEffect(()=>{!g&&(l!=null&&l.user_id)&&e&&Tj()},[g,l==null?void 0:l.user_id,e]),d.useEffect(()=>{g&&Mi((e==null?void 0:e.id)||"").then(E=>{ee(E)}).catch(()=>ee(0))},[g,e==null?void 0:e.id]),d.useEffect(()=>{if(!p)return;function E(H){w.current&&!w.current.contains(H.target)&&b(!1)}return document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[p]),d.useEffect(()=>{if(!Z)return;function E(H){H.target.closest(".relative")||ue(!1)}return document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[Z]);const mj=async()=>{try{f(!0);let E=e==null?void 0:e.id,H=!1;if(s){const{data:te,error:de}=await C.from("profiles").select("*").eq("username",s).single();if(de){console.error("Error fetching profile by username:",de);const{data:_e,error:it}=await C.from("profiles").select("*").eq("user_id",s).single();if(it){console.error("Profile not found:",it),c(null),f(!1);return}else c(_e),E=_e.user_id,H=_e.user_id===(e==null?void 0:e.id)}else c(te),E=te.user_id,H=te.user_id===(e==null?void 0:e.id)}else{const{data:te,error:de}=await C.from("profiles").select("*").eq("user_id",e==null?void 0:e.id).single();de?console.error("Error fetching profile:",de):(c(te),H=!0)}y(H),E&&await pj(E)}catch(E){console.error("Profile fetch error:",E)}finally{f(!1)}},wp=E=>E<1e3?E.toString():E<1e6?(E/1e3).toFixed(1)+"K":(E/1e6).toFixed(1)+"M",yp=async E=>{try{const H={};for(const te of E)try{const{data:de,error:_e}=await C.rpc("get_genuine_view_count",{video_uuid:te.id});!_e&&typeof de=="number"?H[te.id]=de:H[te.id]=te.view_count||0}catch(de){console.error(`Error getting view count for video ${te.id}:`,de),H[te.id]=te.view_count||0}Ue(te=>({...te,...H}))}catch(H){console.error("Error checking view counts:",H)}},pj=async E=>{try{const{data:H,error:te}=await C.from("videos").select("*").eq("user_id",E).order("created_at",{ascending:!1});if(te){console.error("Error fetching user videos:",te),m([]);return}m(H||[]),H&&H.length>0&&await yp(H)}catch(H){console.error("Error fetching user videos:",H),m([])}},gj=async E=>{if(g)try{const H=await e_(E);Be(H||[])}catch(H){console.error("Error fetching sponsored ads:",H),Be([])}},vj=async E=>{if(!(!e||Bu)){vp(E),zt(null);try{const H=await n4(E,e.id);H.success?(Be(te=>te.filter(de=>de.id!==E)),a({title:"Ad Deleted",description:"Your sponsored ad has been deleted successfully.",className:"bg-green-600 text-white border-green-700"})):a({title:"Delete Failed",description:H.error||"Failed to delete ad. Please try again.",variant:"destructive"})}catch(H){console.error("Error deleting ad:",H),a({title:"Delete Failed",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{vp(null)}}},xj=async()=>{if(e)try{const{data:E,error:H}=await C.from("saved_videos").select("video:videos(*)").eq("user_id",e.id).order("created_at",{ascending:!1});if(H){J([]);return}const te=(E||[]).map(de=>de.video);J(te),te&&te.length>0&&await yp(te)}catch{J([])}},wj=async()=>{if(k)try{const{videoId:E,videoUrl:H,thumbnailUrl:te}=k,{error:de}=await C.from("videos").delete().eq("id",E);if(de){a({title:"Error deleting video",description:de.message,variant:"destructive"}),S(!1),U(null);return}if(te){const{error:_e}=await C.storage.from("limeytt-uploads").remove([te]);_e&&console.error("Error deleting thumbnail from storage:",_e)}if(H){const{error:_e}=await C.storage.from("limeytt-uploads").remove([H]);_e&&console.error("Error deleting video file from storage:",_e)}a({title:"Video deleted",description:"Your video has been deleted."}),S(!1),U(null),m(_e=>_e.filter(it=>it.id!==E)),F(_e=>_e.filter(it=>it.id!==E)),J(_e=>_e.filter(it=>it.id!==E))}catch(E){console.error("Error confirming video deletion:",E),a({title:"Error deleting video",description:"Failed to delete video.",variant:"destructive"}),S(!1),U(null)}},yj=async()=>{if(l!=null&&l.user_id){D(!0);try{const{data:E,error:H}=await C.from("follows").select("follower_id").eq("following_id",l.user_id);if(H||!E){le([]);return}const te=E.map(de=>de.follower_id);if(te.length>0){const{data:de}=await C.from("profiles").select("user_id, username, avatar_url, display_name").in("user_id",te),_e=de||[];le(_e),e&&_e.length>0&&Sj(_e)}else le([])}finally{D(!1)}}},bj=async()=>{if(l!=null&&l.user_id){me(!0);try{const{data:E,error:H}=await C.from("follows").select("following_id").eq("follower_id",l.user_id);if(H||!E){L([]);return}const te=E.map(de=>de.following_id);if(te.length>0){const{data:de}=await C.from("profiles").select("user_id, username, avatar_url, display_name").in("user_id",te);L(de||[])}else L([])}finally{me(!1)}}},_j=async E=>{I(E);const{error:H}=await C.from("follows").delete().eq("follower_id",l.user_id).eq("following_id",E);H||(L(T.filter(te=>te.user_id!==E)),Rt(te=>Math.max(0,te-1)),As()),I(null)},jj=async E=>{if(!(l!=null&&l.user_id))return;I(E);const{error:H}=await C.from("follows").delete().eq("follower_id",E).eq("following_id",l.user_id);H?(console.error("Error removing follower:",H),a({title:"Error",description:"Failed to remove follower",variant:"destructive"})):(le(te=>te.filter(de=>de.user_id!==E)),kr(te=>Math.max(0,te-1)),As(),a({title:"Success",description:"Follower removed successfully"})),I(null)},Sj=async E=>{if(!(!e||E.length===0))try{const H=E.map(_e=>_e.user_id),{data:te,error:de}=await C.from("follows").select("following_id").eq("follower_id",e.id).in("following_id",H);if(!de&&te){const _e=new Set(te.map(Me=>Me.following_id)),it={};E.forEach(Me=>{it[Me.user_id]=_e.has(Me.user_id)}),mn(it)}}catch(H){console.error("Error checking follower follow status:",H)}},Nj=async E=>{if(!e||ve)return;he(!0);const H=hn[E];try{if(H){const{error:te}=await C.from("follows").delete().eq("follower_id",e.id).eq("following_id",E);te||mn(de=>({...de,[E]:!1}))}else{const{error:te}=await C.from("follows").insert({follower_id:e.id,following_id:E});te||mn(de=>({...de,[E]:!0}))}}catch(te){console.error("Error toggling follow status:",te)}he(!1)},kj=async E=>{if(E.length<1){$e([]),_t(!1);return}oe(!0);try{const{data:H,error:te}=await C.from("profiles").select("user_id, username, display_name, avatar_url").ilike("username",`%${E}%`).neq("user_id",e==null?void 0:e.id).limit(10);!te&&H&&($e(H),_t(!0))}catch(H){console.error("Error searching users:",H)}oe(!1)},Cj=E=>{Cr(H=>({...H,targetUsername:E})),kj(E)},Ej=E=>{Cr(H=>({...H,targetUsername:E})),_t(!1),$e([])},Pj=async()=>{var E;if(!Ge.title.trim()||!Ge.message.trim()){a({title:"Error",description:"Please fill in both title and message",variant:"destructive"});return}if(Ge.type==="individual"&&!Ge.targetUsername.trim()){a({title:"Error",description:"Please enter a username for individual notification",variant:"destructive"});return}Mn(!0);try{if(Ge.type==="all"){const{data:H,error:te}=await C.from("profiles").select("user_id");if(te)throw te;if(H.length===0){a({title:"Info",description:"No users to send notification to",variant:"default"});return}const de=H.map(it=>({to_user_id:it.user_id,from_user_id:e==null?void 0:e.id,type:"admin",title:Ge.title,message:`[ALL_USERS] ${Ge.message}`,recipient_count:H.length}));console.log("About to save All Users notifications:",{count:de.length,sampleMessage:(E=de[0])==null?void 0:E.message,sampleNotification:de[0]});const{error:_e}=await C.from("system_notifications").insert(de);if(_e)throw _e;a({title:"Success",description:`Push notification sent to all users (${H.length} users)`,className:"bg-green-600 text-white border-green-700"}),Vu()}else{const{data:H,error:te}=await C.from("profiles").select("user_id, username").eq("username",Ge.targetUsername.trim()).single();if(te||!H){a({title:"Error",description:"User not found or invalid selection",variant:"destructive"}),Mn(!1);return}const de=H.username,_e=Ge.title,it=`[TO:${de}] ${Ge.message}`;console.log("About to save individual notification:",{targetUsername:de,message:it,originalMessage:Ge.message});const Me=[{to_user_id:H.user_id,from_user_id:e==null?void 0:e.id,type:"admin",title:_e,message:it,sent_to_username:de,recipient_count:1}];H.user_id!==(e==null?void 0:e.id)&&Me.push({to_user_id:e==null?void 0:e.id,from_user_id:e==null?void 0:e.id,type:"admin_tracking",title:_e,message:it,sent_to_username:de,recipient_count:1}),console.log("Individual notifications to insert:",Me);const{error:Zr}=await C.from("system_notifications").insert(Me);if(Zr)throw Zr;a({title:"Success",description:`Push notification sent to @${H.username}`,className:"bg-green-600 text-white border-green-700"}),Vu()}Cr({type:"all",targetUsername:"",title:"",message:""})}catch(H){console.error("Error sending push notification:",H),a({title:"Error",description:"Failed to send push notification",variant:"destructive"})}Mn(!1)},Vu=async()=>{var H,te,de,_e,it;if(!e||!r)return;const E=await C.auth.getSession();console.log("JWT/User Debug Info:",{userId:e==null?void 0:e.id,userEmail:e==null?void 0:e.email,isAdmin:r,sessionUserId:(te=(H=E.data.session)==null?void 0:H.user)==null?void 0:te.id,sessionUserEmail:(_e=(de=E.data.session)==null?void 0:de.user)==null?void 0:_e.email,jwtPayload:(it=E.data.session)!=null&&it.access_token?JSON.parse(atob(E.data.session.access_token.split(".")[1])):null,timestamp:new Date().toISOString()}),ge(!0);try{const{data:Me,error:Zr}=await C.from("system_notifications").select("*").eq("from_user_id",e.id).in("type",["admin","admin_tracking"]).order("created_at",{ascending:!1}).limit(50);if(console.log("Raw notifications query result:",{notifications:Me==null?void 0:Me.slice(0,3),error:Zr,totalCount:Me==null?void 0:Me.length}),Zr)console.error("Error fetching sent notifications:",Zr),xe([]);else if(Me&&Array.isArray(Me)&&Me.length>0){console.log("Found notifications:",Me.length);const Wu=Me.filter(qe=>qe&&typeof qe=="object"&&"id"in qe&&"from_user_id"in qe);if(Wu.length===0){xe([]),ge(!1);return}const Pp=[...new Set(Wu.map(qe=>qe.to_user_id).filter(Boolean))];let $i={};if(Pp.length>0){const{data:qe,error:rt}=await C.from("profiles").select("user_id, username, display_name, avatar_url").in("user_id",Pp);!rt&&qe&&($i=qe.reduce((It,ht)=>(It[ht.user_id]=ht,It),{}))}const Is=Wu.reduce((qe,rt)=>{const It=`${rt.title}-${rt.message}`;return qe[It]||(qe[It]=[]),qe[It].push(rt),qe},{});Object.keys(Is).forEach(qe=>{const rt=Is[qe];if(rt.length>1&&(rt[0].message||"").match(/^\[TO:([^\]]+)\]/)){const pr=rt.filter(Os=>Os.type==="admin"),pn=rt.filter(Os=>Os.type==="admin_tracking");pr.length>0&&pn.length>0&&(Is[qe]=pr)}}),Object.keys(Is).forEach(qe=>{const rt=Is[qe];if(rt.length>1){rt.sort((ht,pr)=>new Date(ht.created_at).getTime()-new Date(pr.created_at).getTime());const It=new Date(rt[0].created_at).getTime();Is[qe]=rt.filter(ht=>new Date(ht.created_at).getTime()-It<=12e4)}});const Aj=Object.values(Is).map(qe=>{const rt=qe[0];let It=!1,ht=null;const pr=rt.message||"",pn=rt.sent_to_username,Os=pr.match(/^\[ALL_USERS\]/);if(Os)It=!0,ht=null;else if(pn)It=!1,ht=Object.values($i).find(Ln=>Ln.username===pn),ht||(ht={username:pn,display_name:pn,avatar_url:null,user_id:rt.to_user_id});else{const Ln=pr.match(/^\[TO:([^\]]+)\]/);if(Ln){It=!1;const en=Ln[1];ht=Object.values($i).find(qu=>qu.username===en),ht||(ht={username:en,display_name:en,avatar_url:null,user_id:rt.to_user_id})}else{const en=new Set(qe.map(qu=>qu.to_user_id));console.log("Unique recipients count:",en.size),en.size>5?(It=!0,ht=null):(It=!1,ht=$i[rt.to_user_id])}}let zi=pr;pn||pr.match(/^\[TO:[^\]]+\]/)?zi=pr.replace(/^\[TO:[^\]]+\]\s*/,""):Os&&(zi=pr.replace(/^\[ALL_USERS\]\s*/,"")),console.log("Message cleaning:",{original:pr,cleaned:zi});let xo=rt.recipient_count;return xo||(Os?xo=new Set(qe.map(en=>en.to_user_id)).size:pn?xo=1:xo=new Set(qe.map(en=>en.to_user_id)).size),console.log("Final notification data:",{isAllUsers:It,recipientCount:xo,targetUser:ht==null?void 0:ht.username,sentToUsername:pn,availableProfiles:Object.values($i).map(Ln=>Ln.username),cleanMessage:zi.substring(0,50)+"..."}),{...rt,message:zi,to_user:ht,recipient_count:xo,is_all_users:It}}).filter(qe=>qe!==null).sort((qe,rt)=>new Date(rt.created_at).getTime()-new Date(qe.created_at).getTime());xe(Aj)}else xe([])}catch(Me){console.error("Error fetching sent notifications:",Me),xe([])}ge(!1)};d.useEffect(()=>{r&&g&&(e!=null&&e.id)&&Vu()},[r,g,e==null?void 0:e.id]);const bp=()=>Array.isArray(h)?h.reduce((E,H)=>E+(H.like_count||0),0):0,_p=E=>{const H=new Date(E),de=Math.floor((new Date().getTime()-H.getTime())/1e3);return de<60?"Just now":de<3600?`${Math.floor(de/60)}m ago`:de<86400?`${Math.floor(de/3600)}h ago`:de<604800?`${Math.floor(de/86400)}d ago`:H.toLocaleDateString()},As=async()=>{var E;if(l!=null&&l.user_id)try{try{const{data:H,error:te,count:de}=await C.from("follows").select("id",{count:"exact",head:!0}).eq("follower_id",l.user_id);te?console.error("Error fetching following count:",te):Rt(de||0)}catch(H){console.error("Network error fetching following count:",H)}try{const{data:H,error:te,count:de}=await C.from("follows").select("id",{count:"exact",head:!0}).eq("following_id",l.user_id);te?console.error("Error fetching followers count:",te):kr(de||0)}catch(H){console.error("Network error fetching followers count:",H)}}catch(H){console.error("Error fetching follow counts:",H),(E=H.message)!=null&&E.includes("Failed to fetch")||a({title:"Error",description:"Failed to update follow counts. Please refresh the page.",variant:"destructive"})}},Tj=async()=>{if(!(!e||!(l!=null&&l.user_id))){console.log("Checking follow status for current user:",e.id,"to profile:",l.user_id);try{const{data:E,error:H}=await C.from("follows").select("id").eq("follower_id",e.id).eq("following_id",l.user_id).single(),te=!H&&E;console.log("Follow status result:",te?"Following":"Not following"),B(!!te)}catch(E){console.error("Error checking follow status:",E),B(!1)}}},jp=async()=>{if(!e||!(l!=null&&l.user_id)||ve)return;he(!0);const E=R,H=At,te=hr;try{if(R){B(!1),ue(!1),g?Rt(_e=>Math.max(0,_e-1)):kr(_e=>Math.max(0,_e-1));const{error:de}=await C.from("follows").delete().eq("follower_id",e.id).eq("following_id",l.user_id);de?(B(E),g?Rt(te):kr(H),a({title:"Error",description:"Failed to unfollow user. Please try again.",variant:"destructive"})):As()}else{B(!0),g?Rt(_e=>_e+1):kr(_e=>_e+1);const{error:de}=await C.from("follows").insert({follower_id:e.id,following_id:l.user_id});de?(B(E),g?Rt(te):kr(H),a({title:"Error",description:"Failed to follow user. Please try again.",variant:"destructive"})):As()}}catch(de){console.error("Error following/unfollowing:",de),B(E),g?Rt(te):kr(H),a({title:"Error",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{he(!1)}},Rj=async()=>{if(!(!We.trim()||!e||!(l!=null&&l.user_id)||$t)){Yt(!0);try{console.log("Sending message to user:",l.username);const{data:E,error:H}=await C.from("chats").select("*").or(`and(sender_id.eq.${e.id},receiver_id.eq.${l.user_id}),and(sender_id.eq.${l.user_id},receiver_id.eq.${e.id})`);if(H){console.error("Error checking for existing chat:",H),a({title:"Failed to send message",description:H.message,variant:"destructive"});return}console.log("Found existing chats:",E);const te=(E||[]).filter(Me=>Me.sender_id===e.id?!Me.deleted_for_sender:!Me.deleted_for_receiver),de=te.length>0?te[0]:null;console.log("Using existing chat:",de);let _e;if(de){console.log("Found existing non-deleted chat:",de.id),_e=de.id;const{error:Me}=await C.from("chats").update({last_message:We.trim(),updated_at:new Date().toISOString()}).eq("id",_e);if(Me)throw console.error("Error updating existing chat:",Me),Me}else{console.log("Creating new chat between",e.id,"and",l.user_id);const{data:Me,error:Zr}=await C.from("chats").insert({sender_id:e.id,receiver_id:l.user_id,last_message:We.trim(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(Zr){console.error("Error creating chat:",Zr),a({title:"Failed to create chat",description:Zr.message,variant:"destructive"});return}console.log("Created new chat:",Me),_e=Me.id}const{error:it}=await C.from("messages").insert({chat_id:_e,sender_id:e.id,receiver_id:l.user_id,content:We.trim(),created_at:new Date().toISOString()});if(it){console.error("Error sending message:",it),a({title:"Failed to send message",description:it.message,variant:"destructive"});return}console.log("Message sent successfully, navigating to chat:",_e),Fe(!1),bt(""),i(`/chat/${_e}`)}catch(E){console.error("Error sending message:",E),a({title:"Failed to send message",description:"An unexpected error occurred",variant:"destructive"})}finally{Yt(!1)}}};return u||n?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):l?l!=null&&l.deactivated&&!g?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"This user is deactivated"}),o.jsx("p",{className:"text-muted-foreground",children:"Their profile and videos are hidden."})]})}):l!=null&&l.deactivated&&g?(i("/deactivated",{replace:!0}),null):o.jsxs("div",{className:"min-h-screen bg-background pb-20 pt-24",children:[o.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10 p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-2xl font-black text-white tracking-wider logo-text-glow",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:"900",letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))"},children:g?"Profile":"Viewing..."}),o.jsx("div",{className:"flex items-center space-x-2",children:g?o.jsxs(o.Fragment,{children:[o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>V(!0),children:o.jsx(mC,{size:16})}),o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>i("/settings"),children:o.jsx(du,{size:16})}),r&&o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>i("/admin"),title:"Admin Dashboard",children:"👑"}),o.jsx(K,{variant:"outline",size:"sm",onClick:t,children:"Logout"})]}):o.jsx(K,{variant:"ghost",size:"sm",children:o.jsx(xa,{size:16})})})]})}),o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"flex flex-col items-center text-center",children:[o.jsx("div",{className:"relative mb-4",children:l!=null&&l.avatar_url?o.jsx("img",{src:l.avatar_url,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-2 border-primary cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{console.log("Profile image clicked"),z(!0)}}):o.jsx("div",{className:"w-24 h-24 rounded-full bg-primary/20 flex items-center justify-center text-3xl font-bold text-primary",children:((Np=(Sp=l==null?void 0:l.username)==null?void 0:Sp.charAt(0))==null?void 0:Np.toUpperCase())||"U"})}),o.jsx("h2",{className:"text-2xl font-bold text-foreground mb-1",children:(l==null?void 0:l.display_name)||(l==null?void 0:l.username)||"User"}),o.jsxs("p",{className:"text-muted-foreground mb-2",children:["@",(l==null?void 0:l.username)||"user"]}),(l==null?void 0:l.bio)&&o.jsx("p",{className:"text-foreground text-sm mb-4 max-w-xs text-center",children:l.bio}),g&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"TrinECredits:"}),o.jsxs(vt,{variant:"secondary",className:"bg-green-900 text-green-400",children:["TT$",$!==null?$.toFixed(2):"0.00"]})]}),o.jsxs("div",{className:"flex gap-2 mb-4",children:[o.jsx(K,{variant:"outline",size:"sm",onClick:()=>i("/edit-profile"),className:"flex-1",children:"Edit Profile"}),o.jsx(K,{variant:"neon",size:"sm",onClick:()=>i("/boost"),className:"flex-1",children:"Boost"})]})]}),g&&!r&&o.jsxs("div",{className:"flex items-center justify-center gap-8 mb-4",children:[o.jsxs("button",{className:"flex flex-col items-center group",onClick:()=>{bj(),X(!0)},children:[o.jsx("span",{className:"text-lg font-bold text-white group-hover:text-primary transition",children:hr}),o.jsx("span",{className:"text-xs text-muted-foreground group-hover:text-primary transition",children:"Following"})]}),o.jsxs("button",{className:"flex flex-col items-center group",onClick:()=>{yj(),se(!0)},children:[o.jsx("span",{className:"text-lg font-bold text-white group-hover:text-primary transition",children:At}),o.jsx("span",{className:"text-xs text-muted-foreground group-hover:text-primary transition",children:"Followers"})]}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("span",{className:"text-lg font-bold text-white",children:bp()}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Likes"})]})]}),!g&&o.jsxs("div",{className:"flex items-center justify-center gap-8 mb-4 mt-2",children:[o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("span",{className:"text-lg font-bold text-white",children:hr}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Following"})]}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("span",{className:"text-lg font-bold text-white",children:At}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Followers"})]}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("span",{className:"text-lg font-bold text-white",children:bp()}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Likes"})]})]})]})}),!g&&o.jsx("div",{className:"px-6 mb-4",children:o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx(K,{variant:R?"secondary":"default",size:"sm",onClick:()=>{R?ue(!Z):jp()},disabled:ve,className:"min-w-[100px] flex items-center justify-center",children:ve?"...":R?o.jsxs("span",{className:"flex items-center gap-1",children:["Following ",o.jsx(Cm,{size:14})]}):"Follow"}),Z&&o.jsx("div",{className:"absolute top-full left-0 mt-1 bg-red-600 rounded-md shadow-lg z-10",children:o.jsx("button",{onClick:jp,className:"w-full px-4 py-2 text-white text-sm hover:bg-red-700 rounded-md",children:"Unfollow"})})]}),R&&o.jsxs(K,{variant:"default",size:"sm",onClick:()=>Fe(!0),className:"bg-green-600 hover:bg-green-700 text-white min-w-[100px]",children:[o.jsx(Bs,{size:16,className:"mr-2"}),"Message"]})]})}),o.jsx("div",{className:"px-4",children:o.jsxs(Tu,{defaultValue:r?"push":"videos",className:"w-full",children:[o.jsxs(cl,{className:`grid w-full ${r&&g||g?"grid-cols-3":"grid-cols-1"}`,children:[r?o.jsxs(o.Fragment,{children:[o.jsxs(Kt,{value:"push",className:g?"":"justify-center",children:[o.jsx(va,{className:"inline mr-1",size:16}),"Push"]}),g&&o.jsxs(Kt,{value:"sent",children:[o.jsx(Bs,{className:"inline mr-1",size:16}),"Sent"]}),g&&o.jsxs(Kt,{value:"ads",children:[o.jsx(ss,{className:"inline mr-1",size:16}),"My Ads"]})]}):o.jsx(Kt,{value:"videos",className:g?"":"justify-center",children:"Videos"}),g&&!r&&o.jsxs(o.Fragment,{children:[o.jsxs(Kt,{value:"saved",children:[o.jsx($a,{className:"inline mr-1",size:16}),"Saved"]}),o.jsxs(Kt,{value:"ads",children:[o.jsx(ss,{className:"inline mr-1",size:16}),"My Ads"]})]})]}),o.jsx(Hr,{value:"videos",className:"mt-4",children:Array.isArray(h)&&h.length>0?o.jsx("div",{className:"grid grid-cols-3 gap-2",children:h.map((E,H)=>o.jsxs(ke,{className:"relative aspect-[9/16] cursor-pointer group bg-black/10 overflow-hidden",onClick:()=>{j(H),F(h),x(!0)},children:[o.jsxs("div",{className:"absolute top-2 left-2 z-10 flex items-center gap-1 bg-black/70 rounded-full px-2 py-1",children:[o.jsx(Mt,{size:16,className:"text-white"}),o.jsx("span",{className:"text-xs text-white font-semibold",children:wp(je[E.id]||0)})]}),g&&o.jsx("div",{className:"absolute",style:{top:"-6px",right:"-6px",zIndex:10,display:"flex",alignItems:"center"},children:o.jsx(K,{variant:"ghost",size:"icon",className:"p-1",onClick:te=>{te.stopPropagation(),U({type:"deleteVideo",videoId:E.id,videoUrl:E.video_url,thumbnailUrl:E.thumbnail_url}),S(!0)},children:o.jsx(xa,{size:20,style:{transform:"rotate(180deg)"}})})}),E.thumbnail_url?o.jsx("img",{src:E.thumbnail_url.startsWith("http")?E.thumbnail_url:C.storage.from("limeytt-uploads").getPublicUrl(E.thumbnail_url).data.publicUrl,alt:E.title,className:"w-full h-full object-cover rounded",onError:te=>{console.error("Error loading thumbnail:",te),te.target.src="/placeholder-thumbnail.png"}}):o.jsx("div",{className:"w-full h-full bg-black flex items-center justify-center text-white text-xs",children:"No Cover"}),o.jsx("div",{className:"absolute bottom-2 right-2",children:o.jsx(vt,{variant:"secondary",className:"bg-black/70 text-white text-xs",children:(()=>{const te=Number(E.duration);if(!te||isNaN(te)||te<0)return"0:00";const de=Math.floor(te/60),_e=Math.floor(te%60);return`${de}:${_e.toString().padStart(2,"0")}`})()})})]},E.id))}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx("span",{className:"text-2xl",children:"📹"})}),o.jsx("h3",{className:"text-lg font-semibold mb-2 text-foreground",children:"No videos yet"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:g?"You haven't uploaded any videos yet.":`${(l==null?void 0:l.username)||"This user"} hasn't uploaded any videos yet.`}),g&&o.jsx(K,{variant:"default",onClick:()=>i("/upload"),children:"Upload Your First Video"})]})}),g&&o.jsxs(Hr,{value:"ads",className:"mt-4",children:[o.jsx("div",{className:"flex justify-center mb-6",children:o.jsxs(K,{onClick:()=>i("/ad-stats"),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-semibold flex items-center gap-2",children:[o.jsx(ss,{size:16}),"Ad Stats"]})}),pt.length>0?o.jsx("div",{className:"grid grid-cols-3 gap-2",children:pt.map(E=>o.jsxs(ke,{className:"relative aspect-[9/16] cursor-pointer group bg-black/10 overflow-hidden hover:bg-black/20 transition-colors",onClick:()=>i(`/campaign/${E.id}`),children:[o.jsx("div",{className:"absolute top-2 left-2 z-10",children:o.jsx(vt,{variant:"secondary",className:`text-xs ${E.status==="active"?"bg-green-900 text-green-400":E.status==="pending"?"bg-yellow-900 text-yellow-400":E.status==="approved"?"bg-blue-900 text-blue-400":E.status==="rejected"?"bg-red-900 text-red-400":E.status==="expired"?"bg-gray-900 text-gray-400":"bg-purple-900 text-purple-400"}`,children:E.status==="active"?"🟢":E.status==="pending"?"⏳":E.status==="approved"?"✅":E.status==="rejected"?"❌":E.status==="expired"?"⏰":"📝"})}),o.jsx("div",{className:"absolute top-2 right-2 z-10",children:o.jsxs("div",{className:"relative",children:[o.jsx(K,{variant:"ghost",size:"sm",className:"p-1 bg-black/70 hover:bg-black/90 rounded-full",onClick:H=>{H.stopPropagation(),zt(vo===E.id?null:E.id)},children:o.jsx(xa,{size:16,className:"text-white"})}),vo===E.id&&o.jsx("div",{className:"fixed inset-0 z-30 flex items-center justify-center",onClick:H=>{H.stopPropagation(),zt(null)},children:o.jsxs("div",{className:"bg-black/90 backdrop-blur-md border border-white/10 rounded-lg py-2 min-w-[100px]",onClick:H=>H.stopPropagation(),children:[o.jsx("button",{className:"w-full px-3 py-2 text-center text-sm text-white hover:bg-white/10",onClick:H=>{H.stopPropagation(),i(`/campaign/${E.id}`),zt(null)},children:"Statistics"}),o.jsx("button",{className:"w-full px-3 py-2 text-center text-sm text-red-400 hover:bg-white/10",onClick:H=>{H.stopPropagation(),vj(E.id)},disabled:Bu===E.id,children:Bu===E.id?"Deleting...":"Delete Ad"}),o.jsx("button",{className:"w-full px-3 py-2 text-center text-sm text-white hover:bg-white/10",onClick:H=>{H.stopPropagation(),zt(null)},children:"Cancel"})]})})]})}),E.thumbnail_url?o.jsx("img",{src:E.thumbnail_url,alt:E.title,className:"w-full h-full object-cover rounded",onError:H=>{H.target.src="/placeholder-thumbnail.png"}}):o.jsx("div",{className:"w-full h-full bg-black flex items-center justify-center text-white text-xs",children:"No Cover"}),o.jsx("div",{className:"absolute bottom-2 right-2",children:o.jsxs(vt,{variant:"secondary",className:"bg-black/70 text-white text-xs",children:[E.duration,"s"]})}),o.jsx("div",{className:"absolute bottom-2 left-2 right-12",children:o.jsx("p",{className:"text-xs text-white font-medium truncate bg-black/70 px-2 py-1 rounded",children:E.title})})]},E.id))}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(ss,{size:32,className:"text-white/70"})}),o.jsx("h3",{className:"text-lg font-semibold mb-2 text-white",children:"No ads yet"}),o.jsx("p",{className:"text-white/70 mb-4",children:"Create your first sponsored ad to reach more viewers"}),o.jsx(K,{onClick:()=>i("/boost"),variant:"neon",className:"bg-primary text-black hover:bg-primary/90",children:"Create Your First Ad"})]})]}),g&&o.jsx(Hr,{value:"saved",className:"mt-4",children:o.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[G.map((E,H)=>o.jsxs(ke,{className:"relative aspect-[9/16] cursor-pointer group bg-black/10 overflow-hidden",onClick:()=>{j(H),F(G),x(!0)},children:[o.jsxs("div",{className:"absolute top-2 left-2 z-10 flex items-center gap-1 bg-black/70 rounded-full px-2 py-1",children:[o.jsx(Mt,{size:16,className:"text-white"}),o.jsx("span",{className:"text-xs text-white font-semibold",children:wp(je[E.id]||0)})]}),E.thumbnail_url?o.jsx("img",{src:E.thumbnail_url.startsWith("http")?E.thumbnail_url:C.storage.from("limeytt-uploads").getPublicUrl(E.thumbnail_url).data.publicUrl,alt:E.title,className:"w-full h-full object-cover rounded",onError:te=>{console.error("Error loading thumbnail:",te),te.target.src="/placeholder-thumbnail.png"}}):o.jsx("div",{className:"w-full h-full bg-black flex items-center justify-center text-white text-xs",children:"No Cover"}),o.jsx("div",{className:"absolute bottom-2 right-2",children:o.jsx(vt,{variant:"secondary",className:"bg-black/70 text-white text-xs",children:(()=>{const te=Number(E.duration);if(!te||isNaN(te)||te<0)return"0:00";const de=Math.floor(te/60),_e=Math.floor(te%60);return`${de}:${_e.toString().padStart(2,"0")}`})()})})]},E.id)),G.length===0&&o.jsx("div",{className:"text-center py-12 col-span-3",children:o.jsx("p",{className:"text-muted-foreground mb-4",children:"No saved videos yet"})})]})}),r&&o.jsx(Hr,{value:"push",className:"mt-4",children:o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Admin Message Center"}),o.jsx("p",{className:"text-white/70",children:"Send push notifications to users"})]}),o.jsx(ke,{className:"p-6 bg-black/20 border-white/10",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Send To"}),o.jsxs(WI,{value:Ge.type,onValueChange:E=>Cr(H=>({...H,type:E})),children:[o.jsx(h1,{className:"bg-black/30 border-white/20 text-white",children:o.jsx(qI,{})}),o.jsxs(g1,{children:[o.jsx(xh,{value:"all",children:"All Users"}),o.jsx(xh,{value:"individual",children:"Individual User"})]})]})]}),Ge.type==="individual"&&o.jsxs("div",{className:"relative",children:[o.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Username"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ze,{placeholder:"Start typing username...",value:Ge.targetUsername,onChange:E=>Cj(E.target.value),onFocus:()=>{Ge.targetUsername.length>=1&&_t(!0)},className:"bg-black/30 border-white/20 text-white placeholder-white/50"}),A&&o.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})})]}),ze&&Ne.length>0&&o.jsx("div",{className:"absolute z-10 w-full mt-1 bg-black/90 border border-white/20 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:Ne.map(E=>{var H;return o.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-white/10 cursor-pointer transition-colors",onClick:()=>Ej(E.username),children:[o.jsxs(kt,{className:"w-8 h-8",children:[o.jsx(Ct,{src:E.avatar_url,alt:E.username}),o.jsx(Et,{className:"bg-white/10 text-white text-xs",children:((H=E.username)==null?void 0:H.charAt(0).toUpperCase())||"U"})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-white font-medium truncate",children:E.display_name||E.username}),o.jsxs("div",{className:"text-white/60 text-sm truncate",children:["@",E.username]})]})]},E.user_id)})}),ze&&Ne.length===0&&Ge.targetUsername.length>=1&&!A&&o.jsx("div",{className:"absolute z-10 w-full mt-1 bg-black/90 border border-white/20 rounded-lg shadow-lg p-3",children:o.jsxs("div",{className:"text-white/60 text-sm text-center",children:['No users found matching "',Ge.targetUsername,'"']})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Title"}),o.jsx(Ze,{placeholder:"Notification title",value:Ge.title,onChange:E=>Cr(H=>({...H,title:E.target.value})),className:"bg-black/30 border-white/20 text-white placeholder-white/50",maxLength:100})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Message"}),o.jsx(Li,{placeholder:"Notification message",value:Ge.message,onChange:E=>Cr(H=>({...H,message:E.target.value})),className:"bg-black/30 border-white/20 text-white placeholder-white/50 min-h-[100px]",maxLength:500}),o.jsxs("div",{className:"text-xs text-white/50 mt-1",children:[Ge.message.length,"/500 characters"]})]}),o.jsx(K,{onClick:Pj,disabled:sr||!Ge.title.trim()||!Ge.message.trim(),className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3",children:sr?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Sending..."]}):o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Bs,{size:16}),"Send Push Notification"]})})]})})]})}),r&&g&&o.jsx(Hr,{value:"sent",className:"mt-4",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Sent Notifications"}),o.jsx("p",{className:"text-white/70",children:"View your sent push notifications"})]}),ye?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-4"}),o.jsx("p",{className:"text-white/70",children:"Loading sent notifications..."})]}):pe.length>0?o.jsx("div",{className:"space-y-4",children:pe.map(E=>{var H;return o.jsx(ke,{className:"p-4 bg-black/20 border-white/10 cursor-pointer hover:bg-black/30 transition-colors",onClick:()=>{hj(E),fl(!0)},children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"w-10 h-10 bg-yellow-600 rounded-full flex items-center justify-center flex-shrink-0",children:o.jsx(Dc,{size:20,className:"text-white"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-white font-semibold truncate",children:E.title}),o.jsx("div",{className:"flex items-center gap-2 text-xs text-white/60 flex-shrink-0",children:o.jsx("span",{children:_p(E.created_at)})})]}),o.jsx("p",{className:"text-white/60 text-sm mb-3",children:"Click to view full message"}),o.jsx("div",{className:"flex items-center gap-2",children:E.is_all_users?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs text-white/70",children:"All Users"}),o.jsxs("span",{className:"text-xs text-white/50",children:["(",E.recipient_count," recipients)"]})]}):E.to_user?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(kt,{className:"w-5 h-5",children:[o.jsx(Ct,{src:E.to_user.avatar_url,alt:E.to_user.username}),o.jsx(Et,{className:"bg-white/10 text-white text-xs",children:((H=E.to_user.username)==null?void 0:H.charAt(0).toUpperCase())||"U"})]}),o.jsxs("span",{className:"text-xs text-white/70",children:["@",E.to_user.username]})]}):o.jsx("span",{className:"text-xs text-white/70",children:"Unknown Recipient"})})]})]})},E.id)})}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Bs,{size:32,className:"text-white/70"})}),o.jsx("h3",{className:"text-lg font-semibold mb-2 text-white",children:"No notifications sent yet"}),o.jsx("p",{className:"text-white/70",children:"Your sent push notifications will appear here"})]})]})})]})}),v&&_!==null&&o.jsx(r_,{videos:P.length>0?P:h,startIndex:_,onClose:()=>x(!1)}),o.jsx(nr,{}),o.jsx(GI,{open:W,onClose:()=>V(!1),refreshKey:q}),N&&k&&k.type==="deleteVideo"&&o.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-black",children:[o.jsx("div",{className:"flex justify-end p-4",children:o.jsx("button",{className:"text-white text-lg font-bold",onClick:()=>{S(!1),U(null)},children:"Close"})}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center px-4 pb-8",children:[o.jsx("h3",{className:"text-2xl font-bold mb-6 text-primary logo-text-glow text-center",children:"Delete Video"}),o.jsx("p",{className:"text-white/70 text-lg mb-8 text-center max-w-md",children:"Are you sure you want to delete this video? This action cannot be undone."}),o.jsxs("div",{className:"flex space-x-4 w-full max-w-sm",children:[o.jsx(K,{onClick:()=>{S(!1),U(null)},variant:"outline",className:"flex-1 border-white/20 text-white hover:bg-white/10 h-12 text-lg",children:"Cancel"}),o.jsx(K,{onClick:wj,variant:"destructive",className:"flex-1 h-12 text-lg",children:"Delete"})]})]})]}),Q&&o.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-black",children:[o.jsxs("div",{className:"flex items-center justify-between p-4",children:[o.jsxs("h3",{className:"text-2xl font-bold text-primary logo-text-glow",children:["Followers (",At,")"]}),o.jsx("button",{className:"text-white text-lg font-bold",onClick:()=>se(!1),children:"Close"})]}),o.jsx("div",{className:"flex-1 px-4 pt-4 pb-8 overflow-y-auto",children:o.jsx("div",{className:"w-full max-w-md mx-auto space-y-4",children:Y?o.jsx("div",{className:"text-white text-center",children:"Loading..."}):ie.length===0?o.jsx("div",{className:"text-white text-center",children:"No followers yet"}):ie.map(E=>{var H,te;return o.jsxs("div",{className:"flex items-center justify-between bg-black/80 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>{se(!1),i(`/profile/${E.username}`)},children:[o.jsxs(kt,{className:"w-10 h-10",children:[o.jsx(Ct,{src:E.avatar_url||void 0,alt:E.username}),o.jsx(Et,{children:((te=(H=E.username)==null?void 0:H.charAt(0))==null?void 0:te.toUpperCase())||"U"})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-white font-semibold",children:E.display_name||E.username}),o.jsxs("span",{className:"text-gray-400 text-sm",children:["@",E.username]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[e&&E.user_id!==e.id&&o.jsx("button",{className:ga("p-2 rounded-full transition-colors",hn[E.user_id]?"bg-green-600 hover:bg-green-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white",ve&&"opacity-50 pointer-events-none"),onClick:de=>{de.stopPropagation(),Nj(E.user_id)},disabled:ve,title:hn[E.user_id]?"Unfollow":"Follow",children:hn[E.user_id]?o.jsx(km,{size:16}):o.jsx(io,{size:16})}),g&&o.jsx("button",{className:ga("p-2 rounded-full bg-red-600 hover:bg-red-700 text-white transition-colors",we===E.user_id&&"opacity-50 pointer-events-none"),onClick:de=>{de.stopPropagation(),jj(E.user_id)},disabled:we===E.user_id,title:"Remove follower",children:o.jsx(Gg,{size:16})})]})]},E.user_id)})})})]}),O&&o.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-black",children:[o.jsxs("div",{className:"flex items-center justify-between p-4",children:[o.jsxs("h3",{className:"text-2xl font-bold text-primary logo-text-glow",children:["Following (",hr,")"]}),o.jsx("button",{className:"text-white text-lg font-bold",onClick:()=>X(!1),children:"Close"})]}),o.jsx("div",{className:"flex-1 px-4 pt-4 pb-8 overflow-y-auto",children:o.jsx("div",{className:"w-full max-w-md mx-auto space-y-4",children:ae?o.jsx("div",{className:"text-white text-center",children:"Loading..."}):T.length===0?o.jsx("div",{className:"text-white text-center",children:"Not following anyone yet"}):T.map(E=>{var H,te;return o.jsxs("div",{className:"flex items-center justify-between bg-black/80 rounded-lg p-3",children:[o.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>{X(!1),i(`/profile/${E.username}`)},children:[o.jsxs(kt,{className:"w-10 h-10",children:[o.jsx(Ct,{src:E.avatar_url||void 0,alt:E.username}),o.jsx(Et,{children:((te=(H=E.username)==null?void 0:H.charAt(0))==null?void 0:te.toUpperCase())||"U"})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-white font-semibold",children:E.display_name||E.username}),o.jsxs("span",{className:"text-gray-400 text-sm",children:["@",E.username]})]})]}),o.jsx("button",{className:ga("p-2 rounded-full bg-red-600 hover:bg-red-700 text-white transition-colors",we===E.user_id&&"opacity-50 pointer-events-none"),onClick:de=>{de.stopPropagation(),_j(E.user_id)},disabled:we===E.user_id,children:o.jsx(Gg,{size:16})})]},E.user_id)})})})]}),o.jsx(sO,{open:Ie,onOpenChange:Fe,children:o.jsxs(M1,{side:"bottom",className:"rounded-t-xl max-h-[80vh] overflow-y-auto","aria-describedby":"message-sheet-description",children:[o.jsx("div",{className:"w-12 h-1.5 bg-muted rounded-full mx-auto mb-4"}),o.jsxs(L1,{className:"mb-4",children:[o.jsx(F1,{children:"Send Message"}),o.jsx("p",{id:"message-sheet-description",className:"text-sm text-muted-foreground",children:"Send a direct message to this user."})]}),o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsxs(kt,{className:"w-10 h-10",children:[o.jsx(Ct,{src:(l==null?void 0:l.avatar_url)||void 0,alt:l==null?void 0:l.username}),o.jsx(Et,{children:((Cp=(kp=l==null?void 0:l.username)==null?void 0:kp.charAt(0))==null?void 0:Cp.toUpperCase())||"U"})]}),o.jsxs("div",{children:[o.jsxs("p",{className:"font-medium",children:["@",l==null?void 0:l.username]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Send a message"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("textarea",{value:We,onChange:E=>bt(E.target.value),placeholder:"Type your message...",className:"w-full p-3 border rounded-lg resize-none h-24 bg-background",maxLength:500,autoFocus:!0}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(K,{variant:"outline",onClick:()=>{Fe(!1),bt("")},disabled:$t,children:"Cancel"}),o.jsxs(K,{onClick:Rj,disabled:!We.trim()||$t,className:"bg-green-600 hover:bg-green-700 text-white",children:[o.jsx(Bs,{size:16,className:"mr-2"}),$t?"Sending...":"Send Message"]})]})]})]})}),M&&(l==null?void 0:l.avatar_url)&&o.jsxs("div",{className:"fixed inset-0 z-50 bg-black flex flex-col",onClick:()=>z(!1),children:[o.jsx("div",{className:"p-4 flex justify-end",children:o.jsx(K,{variant:"ghost",size:"icon",onClick:()=>z(!1),className:"bg-black/50 hover:bg-black/70 text-white",children:o.jsx(Mr,{size:24})})}),o.jsx("div",{className:"flex-1 flex items-center justify-center p-4 pb-24",children:o.jsx("img",{src:l.avatar_url,alt:"Profile",className:"max-w-full max-h-full object-contain",onClick:E=>E.stopPropagation()})})]}),fj&&mr&&o.jsx("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4",onClick:()=>fl(!1),children:o.jsxs("div",{className:"bg-black/90 border border-white/20 rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",onClick:E=>E.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-yellow-600 rounded-full flex items-center justify-center",children:o.jsx(Dc,{size:20,className:"text-white"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:"Push Notification"}),o.jsx("p",{className:"text-sm text-white/60",children:_p(mr.created_at)})]})]}),o.jsx(K,{variant:"ghost",size:"icon",onClick:()=>fl(!1),className:"text-white hover:bg-white/10",children:o.jsx(Mr,{size:20})})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-white/70 block mb-2",children:"Title"}),o.jsx("p",{className:"text-white font-semibold text-lg",children:mr.title})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-white/70 block mb-2",children:"Message"}),o.jsx("div",{className:"bg-black/40 border border-white/10 rounded-lg p-4",children:o.jsx("p",{className:"text-white/90 leading-relaxed whitespace-pre-wrap",children:mr.message})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-white/70 block mb-2",children:"Sent to"}),o.jsx("div",{className:"bg-black/40 border border-white/10 rounded-lg p-4",children:mr.is_all_users?o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:o.jsx(va,{size:16,className:"text-white"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-medium",children:"All Users"}),o.jsxs("p",{className:"text-white/60 text-sm",children:[mr.recipient_count," recipients"]})]})]}):mr.to_user?o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs(kt,{className:"w-8 h-8",children:[o.jsx(Ct,{src:mr.to_user.avatar_url,alt:mr.to_user.username}),o.jsx(Et,{className:"bg-white/10 text-white text-sm",children:((Ep=mr.to_user.username)==null?void 0:Ep.charAt(0).toUpperCase())||"U"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-medium",children:mr.to_user.display_name||mr.to_user.username}),o.jsxs("p",{className:"text-white/60 text-sm",children:["@",mr.to_user.username]})]})]}):o.jsx("p",{className:"text-white/70",children:"Unknown Recipient"})})]})]}),o.jsx("div",{className:"p-6 border-t border-white/10",children:o.jsx(K,{onClick:()=>fl(!1),className:"w-full bg-white/10 hover:bg-white/20 text-white border-white/20",variant:"outline",children:"Close"})})]})})]}):o.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[o.jsx("div",{className:"sticky top-0 z-10 bg-background border-b border-border p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>i(-1),children:"← Back"}),o.jsx("h1",{className:"text-2xl font-black text-primary tracking-wider logo-text-glow",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:"900",letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))"},children:"Profile Not Found"}),o.jsx("div",{})]})}),o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-xl font-semibold mb-2",children:"User not found"}),o.jsx("p",{className:"text-muted-foreground",children:"The profile you're looking for doesn't exist."})]})})]})},lO=()=>{const e=fn(),t=d.useRef(null),r=d.useRef(null),[n,s]=d.useState(null),[i,a]=d.useState(""),[l,c]=d.useState(""),[u,f]=d.useState(!1),[h,m]=d.useState(null),[g,y]=d.useState("All"),{toast:p}=Ft(),{user:b}=tt(),[w,v]=d.useState(null),[x,_]=d.useState(null),j=Ye(),[N,S]=d.useState(null);if(d.useEffect(()=>{var $,ee;($=e.state)!=null&&$.file&&s(e.state.file),(ee=e.state)!=null&&ee.preview&&m(e.state.preview)},[e.state]),d.useEffect(()=>{b&&C.from("profiles").select("deactivated").eq("user_id",b.id).single().then(({data:$})=>S($))},[b]),N!=null&&N.deactivated)return o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-2xl font-bold text-primary mb-4",children:"Account Deactivated"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"You cannot upload while your account is deactivated."})]})});const k=($,ee)=>{var J;const G=(J=$.target.files)==null?void 0:J[0];if(G){if(!["video/mp4","video/webm","video/quicktime","video/mov","video/3gpp","video/ogg","video/x-matroska"].includes(G.type)){p({title:"Unsupported File Type",description:"Please select a supported video file (mp4, webm, mov, etc.)",variant:"destructive"}),$.target.value="",s(null),m(null);return}if(G.size>50*1024*1024){p({title:"File Too Large",description:"Your video is too large. The maximum allowed size is 50 MB. Please use a mobile app (like InShot, CapCut, or your phone's built-in editor) to compress your video before uploading.",variant:"destructive"}),$.target.value="",s(null),m(null);return}s(G);const F=URL.createObjectURL(G);if(m(F),!i){const Q=G.name.split(".")[0];a(Q.charAt(0).toUpperCase()+Q.slice(1))}}},U=()=>{r.current&&(r.current.value="",r.current.click())},W=$=>{var G;const ee=(G=$.target.files)==null?void 0:G[0];if(ee){const J=URL.createObjectURL(ee);j("/create-video",{state:{file:ee,preview:J}})}},V=$=>new Promise((ee,G)=>{const J=document.createElement("video");J.preload="metadata",J.src=URL.createObjectURL($),J.muted=!0,J.playsInline=!0,J.onloadedmetadata=()=>{const P=Math.round(J.duration);if(P>300){p({title:"Video Too Long",description:"Please select a video that is 5 minutes or less.",variant:"destructive"}),s(null),m(null),G(new Error("Video duration exceeds 5 minutes"));return}ee(P)},J.onerror=P=>{console.error("Video metadata extraction error:",P),p({title:"Failed to Load Video",description:"Could not read video metadata. This may happen with unsupported formats or corrupted files. Try a different video, preferably one recorded with your phone camera (mp4, mov, webm).",variant:"destructive"}),s(null),m(null),G(new Error("Failed to load video for metadata extraction"))}}),q=$=>new Promise((ee,G)=>{const J=document.createElement("video");J.preload="metadata",J.src=URL.createObjectURL($),J.muted=!0,J.playsInline=!0,J.onloadedmetadata=()=>{const P=Math.min(1,J.duration*.25);J.currentTime=P},J.onseeked=()=>{const P=document.createElement("canvas"),F=P.getContext("2d");P.width=320,P.height=568,F?(F.drawImage(J,0,0,P.width,P.height),P.toBlob(Q=>{Q?ee(Q):G(new Error("Failed to generate thumbnail"))},"image/jpeg",.8)):G(new Error("Failed to get canvas context"))},J.onerror=P=>G(new Error("Failed to load video for thumbnail generation"))}),re=async()=>{if(!n||!b||!i.trim()){p({title:"Missing Information",description:"Please select a file and add a title",variant:"destructive"});return}f(!0);try{let $=0,ee="";if(n.type.startsWith("video/")){if($=await V(n),!Number.isFinite($)||$<=0){p({title:"Invalid Video Duration",description:"Could not determine video duration. Please try a different video.",variant:"destructive"}),f(!1);return}if(w){const le=`${b.id}/thumbnails/cover_${Date.now()}.jpg`,{error:T}=await C.storage.from("limeytt-uploads").upload(le,w);T?p({title:"Cover upload failed",description:T.message,variant:"destructive"}):ee=le}else try{const le=await q(n),T=new File([le],"thumbnail.jpg",{type:"image/jpeg"}),L=`${b.id}/thumbnails/${Date.now()}.jpg`,{error:Y}=await C.storage.from("limeytt-uploads").upload(L,T);Y||(ee=L)}catch(le){console.warn("Failed to generate thumbnail:",le)}}const G=n.name.split(".").pop(),J=`${b.id}/${Date.now()}.${G}`,{data:P,error:F}=await C.storage.from("limeytt-uploads").upload(J,n);if(F){if(F.message&&F.message.toLowerCase().includes("maximum allowed size")){p({title:"File Too Large",description:"Your video is too large. The maximum allowed size is 50 MB.",variant:"destructive"}),f(!1);return}throw F}const{data:{publicUrl:Q}}=C.storage.from("limeytt-uploads").getPublicUrl(J),{data:se,error:O}=await C.from("profiles").select("username, avatar_url").eq("user_id",b.id).single();if(O||!se)throw new Error("Could not fetch user profile for video upload.");const{data:X,error:ie}=await C.from("videos").insert({title:i,description:l,video_url:Q,thumbnail_url:ee,duration:$,user_id:b.id,category:g,username:se.username,avatar_url:se.avatar_url}).select();if(ie)throw console.error("Database error details:",{code:ie.code,message:ie.message,details:ie.details,hint:ie.hint}),ie;p({title:"Upload Successful! 🎉",description:"Your content has been uploaded to Limey",className:"bg-green-600 text-white border-green-700"}),s(null),a(""),c(""),m(null),v(null),_(null)}catch($){console.error("Upload error:",$);let ee="Something went wrong";$.message?ee=$.message:$.code==="23503"?ee="User profile not found. Please try logging out and back in.":$.code==="23505"?ee="A video with this title already exists. Please choose a different title.":$.code==="42501"&&(ee="Permission denied. Please check your account status."),p({title:"Upload Failed",description:ee,variant:"destructive"})}finally{f(!1)}};return b?o.jsxs("div",{className:"min-h-screen bg-background pb-20 pt-24",children:[o.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10 p-4",children:o.jsx("div",{className:"flex items-center",children:o.jsx("span",{className:"text-2xl font-black text-white tracking-wider logo-text-glow",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:"900",letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))"},children:"Upload"})})}),o.jsxs("div",{className:"p-4 max-w-2xl mx-auto",children:[o.jsx(ke,{className:"p-8 border-2 border-dashed border-border hover:border-primary transition-colors",children:o.jsx("div",{className:"text-center",children:h?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-2 w-full max-w-xs mx-auto aspect-[9/16] bg-black rounded-lg overflow-hidden flex items-center justify-center",children:n!=null&&n.type.startsWith("video/")?o.jsx("video",{src:h,className:"w-full h-full object-cover",controls:!0}):o.jsx("img",{src:h,alt:"Preview",className:"w-full h-full object-cover"})}),o.jsxs("p",{className:"text-sm text-muted-foreground mt-2 text-center",children:[n==null?void 0:n.name," (",(((n==null?void 0:n.size)||0)/1024/1024).toFixed(2)," MB)"]}),o.jsx("input",{type:"file",accept:"video/*",className:"hidden",ref:t,onChange:$=>k($)}),o.jsx("div",{className:"flex justify-center mt-4",children:o.jsx(K,{variant:"outline",onClick:()=>{var $;t.current&&(t.current.value=""),($=t.current)==null||$.click()},children:"Change Video"})})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx("span",{className:"text-2xl",children:"📁"})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Create or Upload Your Content"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Use the Create button to record a new video, or Upload to select an existing video or image to share with the Limey community."})]}),o.jsx("input",{type:"file",accept:"video/*",capture:"environment",className:"hidden",ref:r,onChange:W}),o.jsx("input",{type:"file",accept:"video/*",onChange:$=>k($),className:"hidden",id:"file-upload"}),o.jsxs("div",{className:"flex gap-3 justify-center",children:[o.jsxs(K,{variant:"neon",className:"flex items-center gap-2",onClick:U,children:[o.jsx(lC,{size:18}),"Create"]}),o.jsx("label",{htmlFor:"file-upload",children:o.jsx(K,{variant:"neon",asChild:!0,className:"cursor-pointer flex items-center gap-2",children:o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(io,{size:18}),"Upload"]})})})]})]})})}),n&&o.jsx(ke,{className:"mt-6 p-6",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Cover Image"}),o.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[o.jsx("div",{className:"w-24 h-36 bg-black rounded overflow-hidden flex items-center justify-center border border-border",children:x?o.jsx("img",{src:x,alt:"Cover Preview",className:"w-full h-full object-cover"}):h?o.jsx("video",{src:h,className:"w-full h-full object-cover"}):o.jsx("span",{className:"text-white text-xs",children:"No Cover"})}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("input",{type:"file",accept:"image/*",className:"hidden",id:"cover-image-input",onChange:$=>{var G;const ee=(G=$.target.files)==null?void 0:G[0];ee&&(v(ee),_(URL.createObjectURL(ee)))}}),o.jsx("label",{htmlFor:"cover-image-input",children:o.jsx(K,{variant:"outline",className:"cursor-pointer",asChild:!0,children:o.jsx("span",{children:"Choose Cover Image"})})}),w&&o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{v(null),_(null)},children:"Use Default Thumbnail"})]})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Choose a custom cover image or use the default video thumbnail."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Title *"}),o.jsx(Ze,{placeholder:"Give your content a catchy title...",value:i,onChange:$=>a($.target.value),maxLength:100}),o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[i.length,"/100 characters"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Category"}),o.jsxs("select",{className:"w-full border rounded px-3 py-2 bg-background text-foreground",value:g||"All",onChange:$=>y($.target.value),required:!0,children:[o.jsx("option",{value:"All",children:"All"}),o.jsx("option",{value:"Anime",children:"Anime"}),o.jsx("option",{value:"Bar Limes",children:"Bar Limes"}),o.jsx("option",{value:"Cartoon",children:"Cartoon"}),o.jsx("option",{value:"Carnival",children:"Carnival"}),o.jsx("option",{value:"Comedy",children:"Comedy"}),o.jsx("option",{value:"Dance",children:"Dance"}),o.jsx("option",{value:"Dancehall",children:"Dancehall"}),o.jsx("option",{value:"DIY Projects",children:"DIY Projects"}),o.jsx("option",{value:"Educational",children:"Educational"}),o.jsx("option",{value:"Events",children:"Events"}),o.jsx("option",{value:"Fete",children:"Fete"}),o.jsx("option",{value:"Funny Vids",children:"Funny Vids"}),o.jsx("option",{value:"HOW TOs",children:"HOW TOs"}),o.jsx("option",{value:"Local News",children:"Local News"}),o.jsx("option",{value:"Music Vids",children:"Music Vids"}),o.jsx("option",{value:"Parties",children:"Parties"}),o.jsx("option",{value:"Soca",children:"Soca"}),o.jsx("option",{value:"Trini Celebs",children:"Trini Celebs"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Description"}),o.jsx(Li,{placeholder:"Tell viewers about your content...",value:l,onChange:$=>c($.target.value),maxLength:500,rows:4}),o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[l.length,"/500 characters"]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[n.type.startsWith("video/")&&o.jsx(vt,{variant:"secondary",children:"🎬 Video"}),n.type.startsWith("image/")&&o.jsx(vt,{variant:"secondary",children:"📷 Image"}),n.type.startsWith("audio/")&&o.jsx(vt,{variant:"secondary",children:"🎵 Audio"}),o.jsx(vt,{variant:"outline",children:"Trinidad & Tobago"})]}),o.jsxs("div",{className:"flex space-x-3 pt-4",children:[o.jsx(K,{variant:"outline",onClick:()=>{s(null),m(null),a(""),c("")},disabled:u,children:"Cancel"}),o.jsx(K,{variant:"neon",onClick:re,disabled:u||!i.trim(),className:"flex-1",children:u?"Uploading...":"Share to Limey 🚀"})]})]})}),o.jsxs(ke,{className:"mt-6 p-4 bg-muted/50",children:[o.jsx("h4",{className:"font-medium text-foreground mb-2 text-center",children:"📝 Upload Tips"}),o.jsxs("ul",{className:"text-sm text-muted-foreground space-y-4 text-center",children:[o.jsxs("li",{children:["• ",o.jsx("b",{children:"Max video duration:"})," 5 minutes"]}),o.jsxs("li",{children:["• ",o.jsx("b",{children:"Max file size:"})," 50 MB"]}),o.jsxs("li",{children:["• ",o.jsx("b",{children:"Supported file types:"})," mp4, mov, webm, 3gp, ogg, mkv"]}),o.jsxs("li",{children:["• If your video is too large, use free apps like ",o.jsx("b",{children:"CapCut"}),", ",o.jsx("b",{children:"InShot"}),", or your phone's built-in editor to compress the video and maintain quality before uploading."]}),o.jsx("li",{children:"• Keep videos under 60 seconds for best engagement"}),o.jsx("li",{children:"• Use good lighting and clear audio"}),o.jsx("li",{children:"• Add hashtags in your description to reach more viewers"}),o.jsx("li",{children:"• Upload during peak hours (6-9 PM) for maximum views"})]})]})]}),o.jsx(nr,{})]}):o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-2xl font-bold text-primary mb-4",children:"Please Sign In"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"You need to be signed in to upload content."}),o.jsx(K,{onClick:()=>window.location.href="/",variant:"neon",children:"Go to Sign In"})]})})};var mp="Switch",[cO,GD]=ks(mp),[uO,dO]=cO(mp),$1=d.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:u,form:f,...h}=e,[m,g]=d.useState(null),y=Ke(t,x=>g(x)),p=d.useRef(!1),b=m?f||!!m.closest("form"):!0,[w=!1,v]=xs({prop:s,defaultProp:i,onChange:u});return o.jsxs(uO,{scope:r,checked:w,disabled:l,children:[o.jsx(Ce.button,{type:"button",role:"switch","aria-checked":w,"aria-required":a,"data-state":B1(w),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:y,onClick:Se(e.onClick,x=>{v(_=>!_),b&&(p.current=x.isPropagationStopped(),p.current||x.stopPropagation())})}),b&&o.jsx(fO,{control:m,bubbles:!p.current,name:n,value:c,checked:w,required:a,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});$1.displayName=mp;var z1="SwitchThumb",U1=d.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,s=dO(z1,r);return o.jsx(Ce.span,{"data-state":B1(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})});U1.displayName=z1;var fO=e=>{const{control:t,checked:r,bubbles:n=!0,...s}=e,i=d.useRef(null),a=j_(r),l=Ey(t);return d.useEffect(()=>{const c=i.current,u=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(u,"checked").set;if(a!==r&&h){const m=new Event("click",{bubbles:n});h.call(c,r),c.dispatchEvent(m)}},[a,r,n]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:i,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function B1(e){return e?"checked":"unchecked"}var V1=$1,hO=U1;const W1=d.forwardRef(({className:e,...t},r)=>o.jsx(V1,{className:Ee("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:o.jsx(hO,{className:Ee("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));W1.displayName=V1.displayName;var mO="Label",q1=d.forwardRef((e,t)=>o.jsx(Ce.label,{...e,ref:t,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));q1.displayName=mO;var H1=q1;const pO=rl("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Us=d.forwardRef(({className:e,...t},r)=>o.jsx(H1,{ref:r,className:Ee(pO(),e),...t}));Us.displayName=H1.displayName;const gO=()=>{const{user:e,signOut:t}=tt(),r=Ye(),[n,s]=d.useState(null),[i,a]=d.useState(!0),[l,c]=d.useState(!1),[u,f]=d.useState(""),[h,m]=d.useState(""),[g,y]=d.useState(""),[p,b]=d.useState(!1),[w,v]=d.useState(!1),[x,_]=d.useState(!1),[j,N]=d.useState(!1);d.useState(!1);const[S,k]=d.useState(!1),[U,W]=d.useState(!1),[V,q]=d.useState(!1);d.useEffect(()=>{re()},[e]);const re=async()=>{if(e)try{const{data:J,error:P}=await C.from("user_settings").select("*").eq("user_id",e.id).single();if(P&&P.code!=="PGRST116")throw P;s(J||{notification_settings:{},privacy_settings:{private_account:!1},account_settings:{dark_mode:!1}})}catch(J){console.error("Error fetching settings:",J)}finally{a(!1)}},$=J=>{J?(q(!0),W(!0)):ee(!1)},ee=async J=>{if(e){k(!0);try{const{error:P}=await C.from("profiles").update({deactivated:J}).eq("user_id",e.id);if(P)throw P;J||$s({title:"Account reactivated",description:"Your account is now active.",className:"bg-green-600 text-white border-green-700"}),J&&(await t(),r("/"))}catch(P){$s({title:"Error",description:P.message||"Failed to update account status",variant:"destructive"})}finally{k(!1),W(!1),q(!1)}}},G=async()=>{if(e){if(h!==g){$s({title:"Error",description:"New passwords do not match",variant:"destructive"});return}if(h.length<6){$s({title:"Error",description:"Password must be at least 6 characters long",variant:"destructive"});return}N(!0);try{const{error:J}=await C.auth.updateUser({password:h});if(J)throw J;$s({title:"Password updated",description:"Your password has been changed successfully",className:"bg-green-600 text-white border-green-700"}),f(""),m(""),y(""),c(!1)}catch(J){$s({title:"Error",description:J.message||"Failed to update password",variant:"destructive"})}finally{N(!1)}}};return i?o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):o.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[o.jsx("div",{className:"sticky top-0 z-10 bg-background border-b border-border p-4",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>r(-1),children:o.jsx(Tn,{size:20})}),o.jsx("h1",{className:"text-2xl font-black text-primary tracking-wider logo-text-glow",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:"900",letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))"},children:"Settings"})]})}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs(ke,{children:[o.jsx(To,{children:o.jsx(Ro,{children:"Notifications"})}),o.jsx(Ao,{children:o.jsx("p",{className:"text-sm text-muted-foreground",children:"No notification settings available."})})]}),o.jsxs(ke,{children:[o.jsx(To,{children:o.jsx(Ro,{children:"Security"})}),o.jsxs(Ao,{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Us,{children:"Email"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:e==null?void 0:e.email})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Us,{children:"Password"}),o.jsxs(K,{variant:"ghost",size:"sm",onClick:()=>c(!l),children:[o.jsx(uC,{size:16,className:"mr-2"}),"Edit"]})]}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"********"})]}),l&&o.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Us,{htmlFor:"oldPassword",children:"Current Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ze,{id:"oldPassword",type:p?"text":"password",value:u,onChange:J=>f(J.target.value),placeholder:"Enter current password"}),o.jsx(K,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>b(!p),children:p?o.jsx(Jo,{size:16}):o.jsx(Mt,{size:16})})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Us,{htmlFor:"newPassword",children:"New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ze,{id:"newPassword",type:w?"text":"password",value:h,onChange:J=>m(J.target.value),placeholder:"Enter new password"}),o.jsx(K,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>v(!w),children:w?o.jsx(Jo,{size:16}):o.jsx(Mt,{size:16})})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Us,{htmlFor:"confirmPassword",children:"Confirm New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ze,{id:"confirmPassword",type:x?"text":"password",value:g,onChange:J=>y(J.target.value),placeholder:"Confirm new password"}),o.jsx(K,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>_(!x),children:x?o.jsx(Jo,{size:16}):o.jsx(Mt,{size:16})})]})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx(K,{onClick:G,disabled:j||!u||!h||!g,className:"flex-1",children:j?"Updating...":"Update Password"}),o.jsx(K,{variant:"outline",onClick:()=>{c(!1),f(""),m(""),y("")},className:"flex-1",children:"Cancel"})]})]})]})]}),o.jsxs(ke,{children:[o.jsx(To,{children:o.jsx(Ro,{children:"Privacy"})}),o.jsx(Ao,{children:o.jsx("p",{className:"text-sm text-muted-foreground",children:"Privacy settings will be available here in future updates."})})]}),o.jsxs(ke,{children:[o.jsx(To,{children:o.jsx(Ro,{children:"Account Management"})}),o.jsx(Ao,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between mt-4",children:[o.jsx(Us,{htmlFor:"deactivate",children:"Deactivate Account"}),o.jsx(W1,{id:"deactivate",checked:(n==null?void 0:n.deactivated)||!1,onCheckedChange:$,disabled:S})]})})]}),o.jsxs(ke,{children:[o.jsx(To,{children:o.jsx(Ro,{children:"Sign Out"})}),o.jsx(Ao,{children:o.jsx(K,{onClick:t,variant:"outline",className:"w-full",children:"Sign Out"})})]})]}),U&&o.jsx("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-background/95",children:o.jsxs("div",{className:"max-w-md w-full bg-card rounded-lg shadow-lg p-8 flex flex-col items-center",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4 text-primary",children:"Confirm Deactivation"}),o.jsx("p",{className:"text-muted-foreground mb-8 text-center",children:"Are you sure you want to deactivate your account? You will be logged out and your profile and videos will be hidden from others until you reactivate."}),o.jsxs("div",{className:"flex w-full gap-4",children:[o.jsx(K,{onClick:()=>ee(!0),className:"flex-1",children:"OK"}),o.jsx(K,{onClick:()=>{W(!1),q(!1)},variant:"outline",className:"flex-1",children:"Cancel"})]})]})}),o.jsx(nr,{})]})};var pp="Popover",[K1,YD]=ks(pp,[Ai]),dl=Ai(),[vO,Rs]=K1(pp),G1=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:a=!1}=e,l=dl(t),c=d.useRef(null),[u,f]=d.useState(!1),[h=!1,m]=xs({prop:n,defaultProp:s,onChange:i});return o.jsx(Fy,{...l,children:o.jsx(vO,{scope:t,contentId:Nn(),triggerRef:c,open:h,onOpenChange:m,onOpenToggle:d.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:u,onCustomAnchorAdd:d.useCallback(()=>f(!0),[]),onCustomAnchorRemove:d.useCallback(()=>f(!1),[]),modal:a,children:r})})};G1.displayName=pp;var Y1="PopoverAnchor",xO=d.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Rs(Y1,r),i=dl(r),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=s;return d.useEffect(()=>(a(),()=>l()),[a,l]),o.jsx(pu,{...i,...n,ref:t})});xO.displayName=Y1;var Q1="PopoverTrigger",wO=d.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Rs(Q1,r),i=dl(r),a=Ke(t,s.triggerRef),l=o.jsx(Ce.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":tj(s.open),...n,ref:a,onClick:Se(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:o.jsx(pu,{asChild:!0,...i,children:l})});wO.displayName=Q1;var gp="PopoverPortal",[yO,bO]=K1(gp,{forceMount:void 0}),J1=e=>{const{__scopePopover:t,forceMount:r,children:n,container:s}=e,i=Rs(gp,t);return o.jsx(yO,{scope:t,forceMount:r,children:o.jsx(Dn,{present:r||i.open,children:o.jsx(el,{asChild:!0,container:s,children:n})})})};J1.displayName=gp;var ji="PopoverContent",X1=d.forwardRef((e,t)=>{const r=bO(ji,e.__scopePopover),{forceMount:n=r.forceMount,...s}=e,i=Rs(ji,e.__scopePopover);return o.jsx(Dn,{present:n||i.open,children:i.modal?o.jsx(_O,{...s,ref:t}):o.jsx(jO,{...s,ref:t})})});X1.displayName=ji;var _O=d.forwardRef((e,t)=>{const r=Rs(ji,e.__scopePopover),n=d.useRef(null),s=Ke(t,n),i=d.useRef(!1);return d.useEffect(()=>{const a=n.current;if(a)return ap(a)},[]),o.jsx(Iu,{as:vs,allowPinchZoom:!0,children:o.jsx(Z1,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Se(e.onCloseAutoFocus,a=>{var l;a.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Se(e.onPointerDownOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Se(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),jO=d.forwardRef((e,t)=>{const r=Rs(ji,e.__scopePopover),n=d.useRef(!1),s=d.useRef(!1);return o.jsx(Z1,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),Z1=d.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:f,...h}=e,m=Rs(ji,r),g=dl(r);return ip(),o.jsx(Ru,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(Ei,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:o.jsx(zm,{"data-state":tj(m.open),role:"dialog",id:m.contentId,...g,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ej="PopoverClose",SO=d.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Rs(ej,r);return o.jsx(Ce.button,{type:"button",...n,ref:t,onClick:Se(e.onClick,()=>s.onOpenChange(!1))})});SO.displayName=ej;var NO="PopoverArrow",kO=d.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=dl(r);return o.jsx(Um,{...s,...n,ref:t})});kO.displayName=NO;function tj(e){return e?"open":"closed"}var CO=G1,EO=J1,rj=X1;const PO=CO,TO=d.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},s)=>o.jsx(EO,{children:o.jsx(rj,{ref:s,align:t,sideOffset:r,className:Ee("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));TO.displayName=rj.displayName;var rx=!1,Ws,wh,yh,lc,cc,nj,uc,bh,_h,jh,sj,Sh,Nh,oj,ij;function ir(){if(!rx){rx=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),r=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(Sh=/\b(iPhone|iP[ao]d)/.exec(e),Nh=/\b(iP[ao]d)/.exec(e),jh=/Android/i.exec(e),oj=/FBAN\/\w+;/i.exec(e),ij=/Mobile/i.exec(e),sj=!!/Win64/.exec(e),t){Ws=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,Ws&&document&&document.documentMode&&(Ws=document.documentMode);var n=/(?:Trident\/(\d+.\d+))/.exec(e);nj=n?parseFloat(n[1])+4:Ws,wh=t[2]?parseFloat(t[2]):NaN,yh=t[3]?parseFloat(t[3]):NaN,lc=t[4]?parseFloat(t[4]):NaN,lc?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),cc=t&&t[1]?parseFloat(t[1]):NaN):cc=NaN}else Ws=wh=yh=cc=lc=NaN;if(r){if(r[1]){var s=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);uc=s?parseFloat(s[1].replace("_",".")):!0}else uc=!1;bh=!!r[2],_h=!!r[3]}else uc=bh=_h=!1}}var kh={ie:function(){return ir()||Ws},ieCompatibilityMode:function(){return ir()||nj>Ws},ie64:function(){return kh.ie()&&sj},firefox:function(){return ir()||wh},opera:function(){return ir()||yh},webkit:function(){return ir()||lc},safari:function(){return kh.webkit()},chrome:function(){return ir()||cc},windows:function(){return ir()||bh},osx:function(){return ir()||uc},linux:function(){return ir()||_h},iphone:function(){return ir()||Sh},mobile:function(){return ir()||Sh||Nh||jh||ij},nativeApp:function(){return ir()||oj},android:function(){return ir()||jh},ipad:function(){return ir()||Nh}},RO=kh,Vl=!!(typeof window<"u"&&window.document&&window.document.createElement),AO={canUseDOM:Vl,canUseWorkers:typeof Worker<"u",canUseEventListeners:Vl&&!!(window.addEventListener||window.attachEvent),canUseViewport:Vl&&!!window.screen,isInWorker:!Vl},IO=AO,aj=IO,lj;aj.canUseDOM&&(lj=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function OO(e,t){if(!aj.canUseDOM||t&&!("addEventListener"in document))return!1;var r="on"+e,n=r in document;if(!n){var s=document.createElement("div");s.setAttribute(r,"return;"),n=typeof s[r]=="function"}return!n&&lj&&e==="wheel"&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}var DO=OO,MO=RO,LO=DO,nx=10,sx=40,ox=800;function cj(e){var t=0,r=0,n=0,s=0;return"detail"in e&&(r=e.detail),"wheelDelta"in e&&(r=-e.wheelDelta/120),"wheelDeltaY"in e&&(r=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=r,r=0),n=t*nx,s=r*nx,"deltaY"in e&&(s=e.deltaY),"deltaX"in e&&(n=e.deltaX),(n||s)&&e.deltaMode&&(e.deltaMode==1?(n*=sx,s*=sx):(n*=ox,s*=ox)),n&&!t&&(t=n<1?-1:1),s&&!r&&(r=s<1?-1:1),{spinX:t,spinY:r,pixelX:n,pixelY:s}}cj.getEventType=function(){return MO.firefox()?"DOMMouseScroll":LO("wheel")?"wheel":"mousewheel"};var FO=cj,$O=FO;const zO=Ch($O);function UO(e,t,r,n,s,i){i===void 0&&(i=0);var a=Si(e,t,i),l=a.width,c=a.height,u=Math.min(l,r),f=Math.min(c,n);return u>f*s?{width:f*s,height:f}:{width:u,height:u/s}}function BO(e){return e.width>e.height?e.width/e.naturalWidth:e.height/e.naturalHeight}function Xi(e,t,r,n,s){s===void 0&&(s=0);var i=Si(t.width,t.height,s),a=i.width,l=i.height;return{x:ix(e.x,a,r.width,n),y:ix(e.y,l,r.height,n)}}function ix(e,t,r,n){var s=t*n/2-r/2;return Uu(e,-s,s)}function ax(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function lx(e,t){return Math.atan2(t.y-e.y,t.x-e.x)*180/Math.PI}function VO(e,t,r,n,s,i,a){i===void 0&&(i=0),a===void 0&&(a=!0);var l=a?WO:qO,c=Si(t.width,t.height,i),u=Si(t.naturalWidth,t.naturalHeight,i),f={x:l(100,((c.width-r.width/s)/2-e.x/s)/c.width*100),y:l(100,((c.height-r.height/s)/2-e.y/s)/c.height*100),width:l(100,r.width/c.width*100/s),height:l(100,r.height/c.height*100/s)},h=Math.round(l(u.width,f.width*u.width/100)),m=Math.round(l(u.height,f.height*u.height/100)),g=u.width>=u.height*n,y=g?{width:Math.round(m*n),height:m}:{width:h,height:Math.round(h/n)},p=Xe(Xe({},y),{x:Math.round(l(u.width-y.width,f.x*u.width/100)),y:Math.round(l(u.height-y.height,f.y*u.height/100))});return{croppedAreaPercentages:f,croppedAreaPixels:p}}function WO(e,t){return Math.min(e,Math.max(0,t))}function qO(e,t){return t}function HO(e,t,r,n,s,i){var a=Si(t.width,t.height,r),l=Uu(n.width/a.width*(100/e.width),s,i),c={x:l*a.width/2-n.width/2-a.width*l*(e.x/100),y:l*a.height/2-n.height/2-a.height*l*(e.y/100)};return{crop:c,zoom:l}}function KO(e,t,r){var n=BO(t);return r.height>r.width?r.height/(e.height*n):r.width/(e.width*n)}function GO(e,t,r,n,s,i){r===void 0&&(r=0);var a=Si(t.naturalWidth,t.naturalHeight,r),l=Uu(KO(e,t,n),s,i),c=n.height>n.width?n.height/e.height:n.width/e.width,u={x:((a.width-e.width)/2-e.x)*c,y:((a.height-e.height)/2-e.y)*c};return{crop:u,zoom:l}}function cx(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function YO(e){return e*Math.PI/180}function Si(e,t,r){var n=YO(r);return{width:Math.abs(Math.cos(n)*e)+Math.abs(Math.sin(n)*t),height:Math.abs(Math.sin(n)*e)+Math.abs(Math.cos(n)*t)}}function Uu(e,t,r){return Math.min(Math.max(e,t),r)}function Wl(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(r){return typeof r=="string"&&r.length>0}).join(" ").trim()}var QO=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,JO=1,XO=3,ZO=1,eD=function(e){D4(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.cropperRef=d.createRef(),r.imageRef=d.createRef(),r.videoRef=d.createRef(),r.containerPosition={x:0,y:0},r.containerRef=null,r.styleRef=null,r.containerRect=null,r.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},r.dragStartPosition={x:0,y:0},r.dragStartCrop={x:0,y:0},r.gestureZoomStart=0,r.gestureRotationStart=0,r.isTouching=!1,r.lastPinchDistance=0,r.lastPinchRotation=0,r.rafDragTimeout=null,r.rafPinchTimeout=null,r.wheelTimer=null,r.currentDoc=typeof document<"u"?document:null,r.currentWindow=typeof window<"u"?window:null,r.resizeObserver=null,r.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},r.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!r.containerRef)){var n=!0;r.resizeObserver=new window.ResizeObserver(function(s){if(n){n=!1;return}r.computeSizes()}),r.resizeObserver.observe(r.containerRef)}},r.preventZoomSafari=function(n){return n.preventDefault()},r.cleanEvents=function(){r.currentDoc&&(r.currentDoc.removeEventListener("mousemove",r.onMouseMove),r.currentDoc.removeEventListener("mouseup",r.onDragStopped),r.currentDoc.removeEventListener("touchmove",r.onTouchMove),r.currentDoc.removeEventListener("touchend",r.onDragStopped),r.currentDoc.removeEventListener("gesturechange",r.onGestureChange),r.currentDoc.removeEventListener("gestureend",r.onGestureEnd),r.currentDoc.removeEventListener("scroll",r.onScroll))},r.clearScrollEvent=function(){r.containerRef&&r.containerRef.removeEventListener("wheel",r.onWheel),r.wheelTimer&&clearTimeout(r.wheelTimer)},r.onMediaLoad=function(){var n=r.computeSizes();n&&(r.emitCropData(),r.setInitialCrop(n)),r.props.onMediaLoaded&&r.props.onMediaLoaded(r.mediaSize)},r.setInitialCrop=function(n){if(r.props.initialCroppedAreaPercentages){var s=HO(r.props.initialCroppedAreaPercentages,r.mediaSize,r.props.rotation,n,r.props.minZoom,r.props.maxZoom),i=s.crop,a=s.zoom;r.props.onCropChange(i),r.props.onZoomChange&&r.props.onZoomChange(a)}else if(r.props.initialCroppedAreaPixels){var l=GO(r.props.initialCroppedAreaPixels,r.mediaSize,r.props.rotation,n,r.props.minZoom,r.props.maxZoom),i=l.crop,a=l.zoom;r.props.onCropChange(i),r.props.onZoomChange&&r.props.onZoomChange(a)}},r.computeSizes=function(){var n,s,i,a,l,c,u=r.imageRef.current||r.videoRef.current;if(u&&r.containerRef){r.containerRect=r.containerRef.getBoundingClientRect(),r.saveContainerPosition();var f=r.containerRect.width/r.containerRect.height,h=((n=r.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((s=r.videoRef.current)===null||s===void 0?void 0:s.videoWidth)||0,m=((i=r.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((a=r.videoRef.current)===null||a===void 0?void 0:a.videoHeight)||0,g=u.offsetWidth<h||u.offsetHeight<m,y=h/m,p=void 0;if(g)switch(r.state.mediaObjectFit){default:case"contain":p=f>y?{width:r.containerRect.height*y,height:r.containerRect.height}:{width:r.containerRect.width,height:r.containerRect.width/y};break;case"horizontal-cover":p={width:r.containerRect.width,height:r.containerRect.width/y};break;case"vertical-cover":p={width:r.containerRect.height*y,height:r.containerRect.height};break}else p={width:u.offsetWidth,height:u.offsetHeight};r.mediaSize=Xe(Xe({},p),{naturalWidth:h,naturalHeight:m}),r.props.setMediaSize&&r.props.setMediaSize(r.mediaSize);var b=r.props.cropSize?r.props.cropSize:UO(r.mediaSize.width,r.mediaSize.height,r.containerRect.width,r.containerRect.height,r.props.aspect,r.props.rotation);return(((l=r.state.cropSize)===null||l===void 0?void 0:l.height)!==b.height||((c=r.state.cropSize)===null||c===void 0?void 0:c.width)!==b.width)&&r.props.onCropSizeChange&&r.props.onCropSizeChange(b),r.setState({cropSize:b},r.recomputeCropPosition),r.props.setCropSize&&r.props.setCropSize(b),b}},r.saveContainerPosition=function(){if(r.containerRef){var n=r.containerRef.getBoundingClientRect();r.containerPosition={x:n.left,y:n.top}}},r.onMouseDown=function(n){r.currentDoc&&(n.preventDefault(),r.currentDoc.addEventListener("mousemove",r.onMouseMove),r.currentDoc.addEventListener("mouseup",r.onDragStopped),r.saveContainerPosition(),r.onDragStart(t.getMousePoint(n)))},r.onMouseMove=function(n){return r.onDrag(t.getMousePoint(n))},r.onScroll=function(n){r.currentDoc&&(n.preventDefault(),r.saveContainerPosition())},r.onTouchStart=function(n){r.currentDoc&&(r.isTouching=!0,!(r.props.onTouchRequest&&!r.props.onTouchRequest(n))&&(r.currentDoc.addEventListener("touchmove",r.onTouchMove,{passive:!1}),r.currentDoc.addEventListener("touchend",r.onDragStopped),r.saveContainerPosition(),n.touches.length===2?r.onPinchStart(n):n.touches.length===1&&r.onDragStart(t.getTouchPoint(n.touches[0]))))},r.onTouchMove=function(n){n.preventDefault(),n.touches.length===2?r.onPinchMove(n):n.touches.length===1&&r.onDrag(t.getTouchPoint(n.touches[0]))},r.onGestureStart=function(n){r.currentDoc&&(n.preventDefault(),r.currentDoc.addEventListener("gesturechange",r.onGestureChange),r.currentDoc.addEventListener("gestureend",r.onGestureEnd),r.gestureZoomStart=r.props.zoom,r.gestureRotationStart=r.props.rotation)},r.onGestureChange=function(n){if(n.preventDefault(),!r.isTouching){var s=t.getMousePoint(n),i=r.gestureZoomStart-1+n.scale;if(r.setNewZoom(i,s,{shouldUpdatePosition:!0}),r.props.onRotationChange){var a=r.gestureRotationStart+n.rotation;r.props.onRotationChange(a)}}},r.onGestureEnd=function(n){r.cleanEvents()},r.onDragStart=function(n){var s,i,a=n.x,l=n.y;r.dragStartPosition={x:a,y:l},r.dragStartCrop=Xe({},r.props.crop),(i=(s=r.props).onInteractionStart)===null||i===void 0||i.call(s)},r.onDrag=function(n){var s=n.x,i=n.y;r.currentWindow&&(r.rafDragTimeout&&r.currentWindow.cancelAnimationFrame(r.rafDragTimeout),r.rafDragTimeout=r.currentWindow.requestAnimationFrame(function(){if(r.state.cropSize&&!(s===void 0||i===void 0)){var a=s-r.dragStartPosition.x,l=i-r.dragStartPosition.y,c={x:r.dragStartCrop.x+a,y:r.dragStartCrop.y+l},u=r.props.restrictPosition?Xi(c,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):c;r.props.onCropChange(u)}}))},r.onDragStopped=function(){var n,s;r.isTouching=!1,r.cleanEvents(),r.emitCropData(),(s=(n=r.props).onInteractionEnd)===null||s===void 0||s.call(n)},r.onWheel=function(n){if(r.currentWindow&&!(r.props.onWheelRequest&&!r.props.onWheelRequest(n))){n.preventDefault();var s=t.getMousePoint(n),i=zO(n).pixelY,a=r.props.zoom-i*r.props.zoomSpeed/200;r.setNewZoom(a,s,{shouldUpdatePosition:!0}),r.state.hasWheelJustStarted||r.setState({hasWheelJustStarted:!0},function(){var l,c;return(c=(l=r.props).onInteractionStart)===null||c===void 0?void 0:c.call(l)}),r.wheelTimer&&clearTimeout(r.wheelTimer),r.wheelTimer=r.currentWindow.setTimeout(function(){return r.setState({hasWheelJustStarted:!1},function(){var l,c;return(c=(l=r.props).onInteractionEnd)===null||c===void 0?void 0:c.call(l)})},250)}},r.getPointOnContainer=function(n,s){var i=n.x,a=n.y;if(!r.containerRect)throw new Error("The Cropper is not mounted");return{x:r.containerRect.width/2-(i-s.x),y:r.containerRect.height/2-(a-s.y)}},r.getPointOnMedia=function(n){var s=n.x,i=n.y,a=r.props,l=a.crop,c=a.zoom;return{x:(s+l.x)/c,y:(i+l.y)/c}},r.setNewZoom=function(n,s,i){var a=i===void 0?{}:i,l=a.shouldUpdatePosition,c=l===void 0?!0:l;if(!(!r.state.cropSize||!r.props.onZoomChange)){var u=Uu(n,r.props.minZoom,r.props.maxZoom);if(c){var f=r.getPointOnContainer(s,r.containerPosition),h=r.getPointOnMedia(f),m={x:h.x*u-f.x,y:h.y*u-f.y},g=r.props.restrictPosition?Xi(m,r.mediaSize,r.state.cropSize,u,r.props.rotation):m;r.props.onCropChange(g)}r.props.onZoomChange(u)}},r.getCropData=function(){if(!r.state.cropSize)return null;var n=r.props.restrictPosition?Xi(r.props.crop,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):r.props.crop;return VO(n,r.mediaSize,r.state.cropSize,r.getAspect(),r.props.zoom,r.props.rotation,r.props.restrictPosition)},r.emitCropData=function(){var n=r.getCropData();if(n){var s=n.croppedAreaPercentages,i=n.croppedAreaPixels;r.props.onCropComplete&&r.props.onCropComplete(s,i),r.props.onCropAreaChange&&r.props.onCropAreaChange(s,i)}},r.emitCropAreaChange=function(){var n=r.getCropData();if(n){var s=n.croppedAreaPercentages,i=n.croppedAreaPixels;r.props.onCropAreaChange&&r.props.onCropAreaChange(s,i)}},r.recomputeCropPosition=function(){if(r.state.cropSize){var n=r.props.restrictPosition?Xi(r.props.crop,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):r.props.crop;r.props.onCropChange(n),r.emitCropData()}},r.onKeyDown=function(n){var s,i,a=r.props,l=a.crop,c=a.onCropChange,u=a.keyboardStep,f=a.zoom,h=a.rotation,m=u;if(r.state.cropSize){n.shiftKey&&(m*=.2);var g=Xe({},l);switch(n.key){case"ArrowUp":g.y-=m,n.preventDefault();break;case"ArrowDown":g.y+=m,n.preventDefault();break;case"ArrowLeft":g.x-=m,n.preventDefault();break;case"ArrowRight":g.x+=m,n.preventDefault();break;default:return}r.props.restrictPosition&&(g=Xi(g,r.mediaSize,r.state.cropSize,f,h)),n.repeat||(i=(s=r.props).onInteractionStart)===null||i===void 0||i.call(s),c(g)}},r.onKeyUp=function(n){var s,i;switch(n.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":n.preventDefault();break;default:return}r.emitCropData(),(i=(s=r.props).onInteractionEnd)===null||i===void 0||i.call(s)},r}return t.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=QO,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},t.prototype.componentWillUnmount=function(){var r,n;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(r=this.resizeObserver)===null||r===void 0||r.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((n=this.styleRef.parentNode)===null||n===void 0||n.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},t.prototype.componentDidUpdate=function(r){var n,s,i,a,l,c,u,f,h;r.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):r.aspect!==this.props.aspect?this.computeSizes():r.objectFit!==this.props.objectFit?this.computeSizes():r.zoom!==this.props.zoom?this.recomputeCropPosition():((n=r.cropSize)===null||n===void 0?void 0:n.height)!==((s=this.props.cropSize)===null||s===void 0?void 0:s.height)||((i=r.cropSize)===null||i===void 0?void 0:i.width)!==((a=this.props.cropSize)===null||a===void 0?void 0:a.width)?this.computeSizes():(((l=r.crop)===null||l===void 0?void 0:l.x)!==((c=this.props.crop)===null||c===void 0?void 0:c.x)||((u=r.crop)===null||u===void 0?void 0:u.y)!==((f=this.props.crop)===null||f===void 0?void 0:f.y))&&this.emitCropAreaChange(),r.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),r.video!==this.props.video&&((h=this.videoRef.current)===null||h===void 0||h.load());var m=this.getObjectFit();m!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:m},this.computeSizes)},t.prototype.getAspect=function(){var r=this.props,n=r.cropSize,s=r.aspect;return n?n.width/n.height:s},t.prototype.getObjectFit=function(){var r,n,s,i;if(this.props.objectFit==="cover"){var a=this.imageRef.current||this.videoRef.current;if(a&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var l=this.containerRect.width/this.containerRect.height,c=((r=this.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((n=this.videoRef.current)===null||n===void 0?void 0:n.videoWidth)||0,u=((s=this.imageRef.current)===null||s===void 0?void 0:s.naturalHeight)||((i=this.videoRef.current)===null||i===void 0?void 0:i.videoHeight)||0,f=c/u;return f<l?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},t.prototype.onPinchStart=function(r){var n=t.getTouchPoint(r.touches[0]),s=t.getTouchPoint(r.touches[1]);this.lastPinchDistance=ax(n,s),this.lastPinchRotation=lx(n,s),this.onDragStart(cx(n,s))},t.prototype.onPinchMove=function(r){var n=this;if(!(!this.currentDoc||!this.currentWindow)){var s=t.getTouchPoint(r.touches[0]),i=t.getTouchPoint(r.touches[1]),a=cx(s,i);this.onDrag(a),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var l=ax(s,i),c=n.props.zoom*(l/n.lastPinchDistance);n.setNewZoom(c,a,{shouldUpdatePosition:!1}),n.lastPinchDistance=l;var u=lx(s,i),f=n.props.rotation+(u-n.lastPinchRotation);n.props.onRotationChange&&n.props.onRotationChange(f),n.lastPinchRotation=u})}},t.prototype.render=function(){var r=this,n,s=this.props,i=s.image,a=s.video,l=s.mediaProps,c=s.cropperProps,u=s.transform,f=s.crop,h=f.x,m=f.y,g=s.rotation,y=s.zoom,p=s.cropShape,b=s.showGrid,w=s.style,v=w.containerStyle,x=w.cropAreaStyle,_=w.mediaStyle,j=s.classes,N=j.containerClassName,S=j.cropAreaClassName,k=j.mediaClassName,U=(n=this.state.mediaObjectFit)!==null&&n!==void 0?n:this.getObjectFit();return d.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(V){return r.containerRef=V},"data-testid":"container",style:v,className:Wl("reactEasyCrop_Container",N)},i?d.createElement("img",Xe({alt:"",className:Wl("reactEasyCrop_Image",U==="contain"&&"reactEasyCrop_Contain",U==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",U==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",k)},l,{src:i,ref:this.imageRef,style:Xe(Xe({},_),{transform:u||"translate(".concat(h,"px, ").concat(m,"px) rotate(").concat(g,"deg) scale(").concat(y,")")}),onLoad:this.onMediaLoad})):a&&d.createElement("video",Xe({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Wl("reactEasyCrop_Video",U==="contain"&&"reactEasyCrop_Contain",U==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",U==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",k)},l,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Xe(Xe({},_),{transform:u||"translate(".concat(h,"px, ").concat(m,"px) rotate(").concat(g,"deg) scale(").concat(y,")")}),controls:!1}),(Array.isArray(a)?a:[{src:a}]).map(function(W){return d.createElement("source",Xe({key:W.src},W))})),this.state.cropSize&&d.createElement("div",Xe({ref:this.cropperRef,style:Xe(Xe({},x),{width:this.state.cropSize.width,height:this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:Wl("reactEasyCrop_CropArea",p==="round"&&"reactEasyCrop_CropAreaRound",b&&"reactEasyCrop_CropAreaGrid",S)},c)))},t.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:XO,minZoom:JO,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:ZO},t.getMousePoint=function(r){return{x:Number(r.clientX),y:Number(r.clientY)}},t.getTouchPoint=function(r){return{x:Number(r.clientX),y:Number(r.clientY)}},t}(d.Component);const tD=A1,rD=I1,uj=d.forwardRef(({className:e,...t},r)=>o.jsx(Lu,{ref:r,className:Ee("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));uj.displayName=Lu.displayName;const nD=d.forwardRef(({className:e,children:t,...r},n)=>o.jsxs(rD,{children:[o.jsx(uj,{}),o.jsxs(Fu,{ref:n,className:Ee("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,o.jsxs(O1,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(Mr,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));nD.displayName=Fu.displayName;const sD=d.forwardRef(({className:e,...t},r)=>o.jsx($u,{ref:r,className:Ee("text-lg font-semibold leading-none tracking-tight",e),...t}));sD.displayName=$u.displayName;const oD=d.forwardRef(({className:e,...t},r)=>o.jsx(zu,{ref:r,className:Ee("text-sm text-muted-foreground",e),...t}));oD.displayName=zu.displayName;const iD=()=>{var P;const{user:e}=tt(),[t,r]=d.useState(""),[n,s]=d.useState(""),[i,a]=d.useState(""),[l,c]=d.useState(null),[u,f]=d.useState(!1),[h,m]=d.useState(null),[g,y]=d.useState({x:0,y:0}),[p,b]=d.useState(1),[w,v]=d.useState(null),[x,_]=d.useState(!1),[j,N]=d.useState(!1),[S,k]=d.useState(!1),U=d.useRef(null),{toast:W}=Ft(),V=Ye();d.useEffect(()=>{(async()=>{if(!e)return;const{data:Q,error:se}=await C.from("profiles").select("*").eq("user_id",e.id).single();!se&&Q&&(r(Q.username||""),s(Q.display_name||""),a(Q.bio||""),c(Q.avatar_url||null))})()},[e]);const q=F=>{var O;const Q=(O=F.target.files)==null?void 0:O[0];if(!Q)return;const se=new FileReader;se.onload=()=>{m(se.result),_(!0)},se.readAsDataURL(Q),U.current&&(U.current.value="")},re=(F,Q)=>{v(Q)},$=async()=>{if(!(!h||!e||!w)){f(!0);try{const F=await KC(h,w),Q=`avatars/${e.id}/profile.jpg`;await C.storage.from("limeytt-uploads").remove([Q]);const{error:se}=await C.storage.from("limeytt-uploads").upload(Q,F,{upsert:!0});if(se)W({title:"Failed to upload photo",variant:"destructive"});else{const{data:O}=C.storage.from("limeytt-uploads").getPublicUrl(Q);c(O.publicUrl+"?t="+Date.now()),W({title:"Profile photo updated!"})}}catch{W({title:"Failed to crop photo",variant:"destructive"})}f(!1),_(!1),m(null)}},ee=()=>{_(!1),m(null)},G=async()=>{if(!e||!window.confirm("Are you sure you want to remove your profile photo?"))return;const F=`avatars/${e.id}/profile.jpg`;await C.storage.from("limeytt-uploads").remove([F]),c(null),W({title:"Profile photo removed"})},J=async()=>{if(!e)return;const{error:F}=await C.from("profiles").update({username:t,display_name:n,bio:i,avatar_url:l}).eq("user_id",e.id);F?W({title:"Failed to update profile",variant:"destructive"}):(W({title:"Profile updated!"}),V("/profile"))};return o.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[o.jsx("div",{className:"sticky top-0 z-10 bg-background border-b border-border p-4",children:o.jsx("h1",{className:"text-2xl font-bold text-primary",children:"Edit Profile"})}),o.jsx("div",{className:"p-4 max-w-lg mx-auto",children:o.jsxs(ke,{className:"p-6 flex flex-col items-center",children:[o.jsx("div",{className:"relative mb-6",children:o.jsxs(PO,{open:j,onOpenChange:N,children:[o.jsxs("div",{className:"w-28 h-28 rounded-full overflow-hidden border-2 border-primary flex items-center justify-center group",tabIndex:0,role:"button","aria-label":"Profile photo menu",onClick:F=>{F.target===F.currentTarget&&k(!0)},children:[l?o.jsx("img",{src:l,alt:"Profile",className:"w-28 h-28 object-cover"}):o.jsx("div",{className:"w-28 h-28 bg-primary/20 flex items-center justify-center text-4xl font-bold text-primary",children:(P=e==null?void 0:e.email)==null?void 0:P.charAt(0).toUpperCase()}),o.jsx(K,{variant:"ghost",size:"icon",className:"absolute bottom-1 right-1 w-8 h-8 p-0 flex items-center justify-center bg-white/80 hover:bg-white border border-primary shadow",onClick:F=>{F.stopPropagation(),N(!0)},"aria-label":"Edit profile photo",style:{borderRadius:"50%"},children:o.jsx("span",{role:"img","aria-label":"camera",style:{fontSize:18},children:"📷"})}),o.jsx("input",{ref:U,type:"file",accept:"image/*",className:"hidden",onChange:q})]}),j&&o.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/30",onClick:()=>N(!1),children:o.jsxs("div",{className:"bg-white border rounded shadow-lg flex flex-col min-w-[140px] z-50",onClick:F=>F.stopPropagation(),children:[o.jsx("button",{className:"px-4 py-2 hover:bg-gray-100 text-left font-bold text-black",onClick:()=>{k(!0),N(!1)},children:"View"}),o.jsx("button",{className:"px-4 py-2 hover:bg-gray-100 text-left font-bold text-black",onClick:()=>{var F;(F=U.current)==null||F.click(),N(!1)},children:u?"Uploading...":"Change"}),o.jsx("button",{className:"px-4 py-2 hover:bg-red-100 text-left text-red-600",onClick:()=>{N(!1),G()},children:"Remove"})]})})]})}),S&&l?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",onClick:()=>k(!1),children:o.jsxs("div",{className:"relative",children:[o.jsx("button",{className:"absolute top-2 right-2 text-white text-2xl bg-black/60 rounded-full w-8 h-8 flex items-center justify-center z-10",onClick:F=>{F.stopPropagation(),k(!1)},"aria-label":"Close",children:"×"}),o.jsx("img",{src:l,alt:"Profile",className:"max-w-xs max-h-[80vh] rounded-lg border-2 border-primary bg-white",onClick:F=>F.stopPropagation()})]})}):null,o.jsx(tD,{open:x,onOpenChange:_,children:x&&o.jsxs("div",{className:"fixed inset-0 z-50 bg-black flex flex-col",children:[o.jsx("div",{className:"p-4 bg-black text-white",children:o.jsx("h2",{className:"text-xl font-bold text-center",children:"Crop Profile Photo"})}),o.jsx("div",{className:"flex-1 flex items-center justify-center bg-black",children:o.jsx("div",{className:"relative w-full h-full max-w-md max-h-md",children:o.jsx(eD,{image:h,crop:g,zoom:p,aspect:1,onCropChange:y,onZoomChange:b,onCropComplete:re,objectFit:"contain"})})}),o.jsxs("div",{className:"p-4 pb-24 bg-black border-t border-white/10 flex justify-between",children:[o.jsx(K,{onClick:ee,variant:"outline",className:"flex-1 mr-2",children:"Cancel"}),o.jsx(K,{onClick:$,variant:"neon",disabled:u,className:"flex-1 ml-2",children:u?"Uploading...":"Upload"})]})]})}),o.jsx(Ze,{className:"mb-4",placeholder:"Username",value:t,onChange:F=>r(F.target.value)}),o.jsx(Ze,{className:"mb-4",placeholder:"Display Name",value:n,onChange:F=>s(F.target.value)}),o.jsx(Li,{className:"mb-4",placeholder:"Bio",value:i,onChange:F=>a(F.target.value),maxLength:200}),o.jsx(K,{variant:"neon",className:"w-full mb-3",onClick:J,disabled:u,children:u?"Saving...":"Save Changes"}),o.jsx(K,{variant:"outline",className:"w-full",onClick:()=>V("/profile"),children:"Cancel"})]})}),o.jsx(nr,{})]})},aD=({src:e,className:t,globalMuted:r,...n})=>{const s=d.useRef(null),[i,a]=d.useState(!1),[l,c]=d.useState(!1),u=d.useRef(null),f=async()=>{try{"wakeLock"in navigator&&(u.current=await navigator.wakeLock.request("screen"))}catch(g){console.error("Failed to request wake lock:",g)}},h=async()=>{if(u.current)try{await u.current.release(),u.current=null}catch(g){console.error("Failed to release wake lock:",g)}};d.useEffect(()=>{const g=s.current;if(!g)return;g.muted=r;const y=new window.IntersectionObserver(([p])=>{p.isIntersecting&&p.intersectionRatio>=.5?(a(!0),g.play()):(a(!1),g.pause(),g.currentTime=0)},{threshold:.5});return y.observe(g),()=>{y.unobserve(g)}},[r]),d.useEffect(()=>{s.current&&(s.current.muted=r)},[r]),d.useEffect(()=>{const g=s.current;if(!g)return;const y=()=>{c(!0),f()},p=()=>{c(!1),h()};return g.addEventListener("play",y),g.addEventListener("pause",p),()=>{g.removeEventListener("play",y),g.removeEventListener("pause",p),h()}},[]);const m=()=>{s.current&&(l?s.current.pause():s.current.play())};return o.jsxs("div",{className:"relative w-full h-full",children:[o.jsx("video",{ref:s,src:e,loop:!0,muted:r,playsInline:!0,className:t,...n}),i&&!l&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20",children:o.jsx(K,{variant:"ghost",className:"w-16 h-16 rounded-full bg-white/20 hover:bg-white/30 text-white",onClick:g=>{g.stopPropagation(),m()},"data-control":!0,children:o.jsx(xi,{size:32,className:"ml-1"})})})]})},lD=()=>{const[e,t]=d.useState([]),[r,n]=d.useState(!0),[s,i]=d.useState(null),[a,l]=d.useState({}),[c,u]=d.useState({}),[f,h]=d.useState({}),[m,g]=d.useState({}),[y,p]=d.useState({}),[b,w]=d.useState({}),[v,x]=d.useState({}),[_,j]=d.useState(!1),[N,S]=d.useState(!1),[k,U]=d.useState(null),W=d.useRef(null),V=Ye(),{user:q}=tt();Ft(),d.useEffect(()=>{const T=document.createElement("style");return T.textContent=`
      @keyframes fire-glow {
        0%, 100% { 
          filter: drop-shadow(0 0 5px #ff6b35) drop-shadow(0 0 10px #ff8c42) drop-shadow(0 0 15px #ffa726);
          transform: rotate(-1deg) scale(1);
        }
        25% { 
          filter: drop-shadow(0 0 8px #ff5722) drop-shadow(0 0 15px #ff7043) drop-shadow(0 0 20px #ffab40);
          transform: rotate(1deg) scale(1.05);
        }
        50% { 
          filter: drop-shadow(0 0 6px #ff6b35) drop-shadow(0 0 12px #ff8c42) drop-shadow(0 0 18px #ffa726);
          transform: rotate(-0.5deg) scale(1.02);
        }
        75% { 
          filter: drop-shadow(0 0 9px #ff5722) drop-shadow(0 0 16px #ff7043) drop-shadow(0 0 22px #ffab40);
          transform: rotate(0.5deg) scale(1.03);
        }
      }
      
      .animate-fire {
        animation: fire-glow 2s ease-in-out infinite;
        display: inline-block;
        transform-origin: center bottom;
      }
    `,document.head.appendChild(T),()=>{document.head.removeChild(T)}},[]),d.useEffect(()=>{re()},[q]);const re=async()=>{if(q)try{n(!0),i(null);const{data:T,error:L}=await C.from("follows").select("following_id").eq("follower_id",q.id);if(L){console.error("Error fetching follows:",L),i("Failed to load videos. Please try again.");return}if(!T||T.length===0){t([]);return}const Y=T.map(he=>he.following_id),{data:D,error:M}=await C.from("videos").select(`
          id, 
          title, 
          description,
          video_url, 
          thumbnail_url, 
          duration, 
          user_id, 
          created_at,
          view_count,
          like_count,
          share_count,
          save_count
        `).in("user_id",Y).order("created_at",{ascending:!1}).limit(100);if(M){console.error("Error fetching videos:",M),i("Failed to load videos. Please try again.");return}if(!D||D.length===0){t([]);return}const z=[...new Set(D.map(he=>he.user_id))],{data:ae,error:me}=await C.from("profiles").select("user_id, username, avatar_url, deactivated").in("user_id",z);me&&console.error("Error fetching profiles:",me);const we=new Map;(ae||[]).forEach(he=>we.set(he.user_id,he));const R=D.map(he=>{const Ie=we.get(he.user_id);return{...he,profiles:Ie?{username:Ie.username,avatar_url:Ie.avatar_url,deactivated:Ie.deactivated,user_id:Ie.user_id}:null,avatar_url:Ie==null?void 0:Ie.avatar_url}}).filter(he=>he.profiles&&!he.profiles.deactivated),B={},Z={},ue={},ve={};R.forEach(he=>{B[he.id]=he.like_count||0,Z[he.id]=he.share_count||0,ue[he.id]=he.save_count||0,ve[he.id]=he.view_count||0}),h(he=>({...he,...B})),g(he=>({...he,...Z})),p(he=>({...he,...ue})),w(he=>({...he,...ve})),t(R),await $(R),await ee(R),await G(R),await J(R)}catch(T){console.error("Error in fetchFriendsVideos:",T),i("Failed to load videos. Please try again.")}finally{n(!1)}},$=async T=>{if(q)try{const L=T.map(z=>z.user_id).filter(z=>z!==q.id);if(L.length===0)return;const{data:Y}=await C.from("follows").select("following_id").eq("follower_id",q.id).in("following_id",L),D=new Set((Y==null?void 0:Y.map(z=>z.following_id))||[]),M={};T.forEach(z=>{z.user_id!==q.id&&(M[z.user_id]=D.has(z.user_id))}),l(z=>({...z,...M}))}catch(L){console.error("Error checking follow status:",L)}},ee=async T=>{if(q)try{const L=T.map(z=>z.id);if(L.length===0)return;const Y=new Set,D=5;for(let z=0;z<L.length;z+=D){const ae=L.slice(z,z+D);await Promise.all(ae.map(async me=>{try{const{data:we,error:I}=await C.from("video_likes").select("id").eq("video_id",me).eq("user_id",q.id);!I&&we&&we.length>0&&Y.add(me)}catch(we){console.error(`Error checking like for video ${me}:`,we)}}))}const M={};T.forEach(z=>{M[z.id]=Y.has(z.id)}),u(z=>({...z,...M}))}catch(L){console.error("Error checking like status:",L)}},G=async T=>{try{const L={};for(const Y of T)try{const{data:D,error:M}=await C.rpc("get_genuine_view_count",{video_uuid:Y.id});!M&&typeof D=="number"?L[Y.id]=D:L[Y.id]=Y.view_count||0}catch(D){console.error(`Error getting view count for video ${Y.id}:`,D),L[Y.id]=Y.view_count||0}w(Y=>({...Y,...L}))}catch(L){console.error("Error checking view counts:",L)}},J=async T=>{if(!(!q||T.length===0))try{const L=T.map(ae=>ae.id),D=(await C.from("saved_videos").select("video_id").eq("user_id",q.id).in("video_id",L)).data||[],M=new Set(D.map(ae=>ae.video_id)),z={};T.forEach(ae=>{ae&&ae.id&&(z[ae.id]=M.has(ae.id))}),x(z)}catch(L){console.error("Error checking saved status:",L)}},P=async(T,L)=>{if(q)try{const{data:Y}=await C.from("follows").select("*").eq("follower_id",q.id).eq("following_id",T).single();if(Y)return await C.from("follows").delete().eq("follower_id",q.id).eq("following_id",T),l(D=>({...D,[T]:!1})),!1;{const{error:D}=await C.from("follows").insert({follower_id:q.id,following_id:T});return D?(D&&D.code!=="23505"&&console.error("Error following:",D),!1):(l(M=>({...M,[T]:!0})),!0)}}catch(Y){return console.error("Error following/unfollowing:",Y),a[T]||!1}},F=async T=>{if(q)try{const L=c[T]||!1,Y=f[T]||0;u(z=>({...z,[T]:!L})),h(z=>({...z,[T]:L?Math.max(0,Y-1):Y+1}));const{data:D,error:M}=await C.rpc("toggle_video_like",{video_uuid:T});if(M){console.error("Error toggling like:",M),u(z=>({...z,[T]:L})),h(z=>({...z,[T]:Y}));return}}catch(L){console.error("Error handling like:",L)}},Q=async T=>{if(q)try{if(v[T]){const{error:L}=await C.from("saved_videos").delete().eq("user_id",q.id).eq("video_id",T);if(L)throw L;x(Y=>({...Y,[T]:!1})),p(Y=>({...Y,[T]:Math.max((Y[T]||0)-1,0)}))}else{const{error:L}=await C.from("saved_videos").insert({user_id:q.id,video_id:T});if(L)throw L;x(Y=>({...Y,[T]:!0})),p(Y=>({...Y,[T]:(Y[T]||0)+1}))}}catch(L){console.error("Error saving/unsaving video:",L),x(Y=>({...Y,[T]:!Y[T]}))}},se=async T=>{try{const{error:L}=await C.from("videos").update({share_count:(T.share_count||0)+1}).eq("id",T.id);L||g(Y=>({...Y,[T.id]:(Y[T.id]||0)+1}))}catch(L){console.error("Error incrementing share count:",L)}U(T),S(!0)},O=T=>T<1e3?T.toString():T<1e6?(T/1e3).toFixed(1)+"K":(T/1e6).toFixed(1)+"M",X=T=>{var L;return(L=T.profiles)!=null&&L.username?T.profiles.username:T.username?T.username:T.user_id?`user_${T.user_id.replace(/[^a-zA-Z0-9]/g,"").slice(0,8)}`:"unknown_user"},ie=T=>{const L=X(T);return q&&T.user_id===q.id?"/profile":`/profile/${L}`},le=T=>T.split(/(#[\w-]+)/g).map((L,Y)=>/^#[\w-]+$/.test(L)?o.jsx("button",{className:"text-lime-400 hover:underline font-semibold",onClick:D=>{D.stopPropagation()},children:L},Y):L);return o.jsxs("div",{className:"min-h-screen bg-black",children:[o.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10 p-2",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-2xl font-black text-white tracking-wider logo-text-glow",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:"900",letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))"},children:"Friends"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>V("/trending"),className:"text-white hover:bg-white/10","aria-label":"Trending",children:o.jsx("span",{className:"animate-fire text-xl",children:"🔥"})}),o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>V("/live"),className:"text-white hover:bg-white/10","aria-label":"Live",children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),o.jsx("span",{className:"text-sm font-medium",children:"LIVE"})]})}),o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>V("/settings"),className:"text-white hover:bg-white/10",children:o.jsx(du,{size:16})})]})]})}),o.jsx("div",{className:"fixed top-20 right-4 z-40",children:o.jsx(K,{variant:"ghost",size:"icon",onClick:()=>j(T=>!T),"aria-label":"Toggle Global Mute",className:"w-12 h-12 rounded-full p-0 text-white hover:bg-white/10",children:_?o.jsx(Tm,{size:24,className:"text-white"}):o.jsx(Pm,{size:24,className:"text-white"})})}),o.jsx("div",{ref:W,className:"h-screen overflow-y-auto snap-y snap-mandatory",style:{scrollSnapType:"y mandatory"},children:r?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):s?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-red-400 mb-4",children:s}),o.jsx(K,{onClick:re,variant:"outline",className:"text-white border-white/20 hover:bg-white/10",children:"Try Again"})]}):e.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(ly,{size:32,className:"text-white"})}),o.jsx("h3",{className:"text-lg font-semibold mb-2 text-white",children:"No videos available"}),o.jsx("p",{className:"text-white/70 mb-4",children:"No videos have been posted yet."}),o.jsx(K,{onClick:()=>V("/"),variant:"default",className:"bg-white text-black hover:bg-white/90",children:"Discover Videos"})]}):o.jsx("div",{className:"space-y-0",children:e.map(T=>o.jsxs("div",{"data-video-id":T.id,className:"relative h-screen snap-start snap-always flex items-center justify-center",onClick:L=>{const Y=["button[data-control]"];let D=L.target;for(;D&&D!==L.currentTarget;){if(Y.some(z=>D.matches(z)))return;D=D.parentElement}const M=L.currentTarget.querySelector("video");M&&(M.paused?M.play():M.pause())},children:[o.jsx("div",{className:"absolute top-0 left-0 right-0 h-16 bg-black z-10"}),o.jsx("div",{className:"absolute inset-0 top-16 bottom-32 overflow-hidden",children:o.jsx(aD,{src:T.video_url,className:"w-full h-full object-cover",globalMuted:_})}),o.jsx("div",{className:"absolute bottom-32 left-0 right-0 h-[1px] bg-white/20 z-10"}),o.jsx("div",{className:"absolute bottom-16 left-0 right-0 h-16 bg-black z-10"}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-black z-10"}),o.jsx("div",{className:"absolute bottom-16 left-0 right-0 p-4 text-white z-20",children:o.jsxs("div",{className:"flex justify-between items-end",children:[o.jsx("div",{className:"flex-1 mr-4 space-y-3",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-white font-semibold text-base leading-tight",children:T.title}),T.description&&o.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:le(T.description)})]})}),o.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[o.jsx("div",{className:"flex flex-col items-center",children:o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:L=>{L.stopPropagation(),V(ie(T))},className:"hover:opacity-80 transition-opacity","aria-label":`View ${X(T)}'s profile`,"data-control":!0,children:o.jsxs(kt,{className:"w-12 h-12 rounded-full",children:[o.jsx(Ct,{src:T.avatar_url||void 0,alt:X(T)}),o.jsx(Et,{children:X(T).charAt(0).toUpperCase()})]})}),q&&T.user_id!==q.id&&o.jsx("button",{onClick:async L=>{L.stopPropagation(),await P(T.user_id,X(T))},className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-6 h-6 bg-red-600 rounded-full flex items-center justify-center shadow-lg hover:bg-red-700 transition-colors","data-control":!0,children:a[T.user_id]?o.jsx("span",{className:"text-white font-bold text-sm",children:"✓"}):o.jsx(io,{size:14,className:"text-white"})})]})}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("button",{onClick:L=>{L.stopPropagation(),F(T.id)},className:"p-0 bg-transparent border-none","data-control":!0,children:o.jsx(vi,{size:28,className:`${c[T.id]?"text-red-500 fill-red-500":"text-white fill-white"} transition-colors`})}),o.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:f[T.id]||0})]}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(Mt,{size:28,className:"text-white"}),o.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:O(b[T.id]||0)})]}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("button",{onClick:L=>{L.stopPropagation(),Q(T.id)},className:"p-0 bg-transparent border-none","data-control":!0,children:o.jsx($a,{size:28,className:`${v[T.id]?"text-yellow-500 fill-yellow-500":"text-white fill-white"} transition-colors`})}),o.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:y[T.id]||0})]}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("button",{onClick:L=>{L.stopPropagation(),se(T)},className:"p-0 bg-transparent border-none","data-control":!0,children:o.jsx(wi,{size:28,className:"text-white fill-white"})}),o.jsx("span",{className:"text-white text-xs mt-1 font-medium",children:m[T.id]||0})]})]})]})})]},T.id))})}),o.jsx(nr,{}),k&&o.jsx(rp,{isOpen:N,onClose:()=>{S(!1),U(null)},video:k})]})},cD=()=>{var L,Y;const{user:e,isAdmin:t,loading:r}=tt(),n=Ye(),[s,i]=d.useState([]),[a,l]=d.useState([]),[c,u]=d.useState(!0),[f,h]=d.useState(!1),[m,g]=d.useState(null),[y,p]=d.useState({}),{inboxUnreadCount:b,systemUnreadCount:w,refreshCounts:v}=ep(),[x,_]=d.useState(!1),[j,N]=d.useState(null),[S,k]=d.useState(!1),[U,W]=d.useState(null),{toast:V}=Ft();d.useEffect(()=>{if(e){$(),re();const D=ee();let M=null;return t||(M=G()),()=>{D(),M&&M()}}},[e,t]);const q=async D=>{if(!(!e||D.length===0))try{const M=D.map(we=>we.id),{data:z,error:ae}=await C.from("messages").select("chat_id").in("chat_id",M).eq("receiver_id",e.id).eq("read_by_receiver",!1).eq("deleted_for_receiver",!1).eq("deleted_for_everyone",!1);if(ae){console.error("Error fetching chat unread counts:",ae);return}const me={};z==null||z.forEach(we=>{me[we.chat_id]=(me[we.chat_id]||0)+1}),p(me)}catch(M){console.error("Error fetching chat unread counts:",M)}},re=async()=>{if(e){if(t){l([]),h(!1);return}try{h(!0);let{data:D,error:M}=await C.from("system_notifications").select(`
          *,
          from_user:profiles!inner(username, avatar_url)
        `).eq("to_user_id",e.id).order("created_at",{ascending:!1}).limit(50);if(M){console.log("Join failed, trying without join:",M);const{data:z,error:ae}=await C.from("system_notifications").select("*").eq("to_user_id",e.id).order("created_at",{ascending:!1}).limit(50);if(!ae&&z){const me=z.map(we=>we.from_user_id).filter(Boolean);if(me.length>0){const{data:we}=await C.from("profiles").select("user_id, username, avatar_url").in("user_id",me);D=z.map(I=>({...I,from_user:(we==null?void 0:we.find(R=>R.user_id===I.from_user_id))||null}))}else D=z;M=null}else M=ae}M?console.error("Error fetching system notifications:",M):(l(D||[]),v())}catch(D){console.error("Error fetching system notifications:",D)}finally{h(!1)}}};d.useEffect(()=>{const D=M=>{M.target.closest("[data-dropdown]")||g(null)};return document.addEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}},[]);const $=async()=>{try{u(!0);const{data:D,error:M}=await C.from("chats").select(`*,
          sender:profiles!chats_sender_id_fkey(username, avatar_url, deactivated),
          receiver:profiles!chats_receiver_id_fkey(username, avatar_url, deactivated)
        `).or(`sender_id.eq.${e==null?void 0:e.id},receiver_id.eq.${e==null?void 0:e.id}`).order("updated_at",{ascending:!1});if(M)console.error("Error fetching chats:",M),V({title:"Error loading chats",description:"Please try refreshing the page",variant:"destructive"});else{const z=(D||[]).filter(I=>{var R,B;return!((R=I.sender)!=null&&R.deactivated||(B=I.receiver)!=null&&B.deactivated||I.sender_id===(e==null?void 0:e.id)&&I.deleted_for_sender||I.receiver_id===(e==null?void 0:e.id)&&I.deleted_for_receiver)});console.log("Filtered chats:",z.length,"out of",(D==null?void 0:D.length)||0),i(z);const ae=z.map(I=>I.id);let me=[];if(ae.length>0){const{data:I,error:R}=await C.from("messages").select("*").in("chat_id",ae).order("created_at",{ascending:!1}).limit(ae.length*5);!R&&I&&(me=I)}const we=z.map(I=>{const R=me.filter(Z=>Z.chat_id===I.id);let B=null;for(const Z of R){const ue=Z.sender_id===(e==null?void 0:e.id),ve=Z.deleted_for_everyone===!0,he=ue&&Z.deleted_for_sender===!0,Ie=!ue&&Z.deleted_for_receiver===!0;if(!ve&&!he&&!Ie){B=Z;break}}return{...I,last_visible_message:B}});i(we),we.length>0&&setTimeout(()=>{q(we)},100)}}catch(D){console.error("Error fetching chats:",D),V({title:"Error loading chats",description:"Please try refreshing the page",variant:"destructive"})}finally{u(!1)}},ee=()=>{console.log("Setting up real-time subscription for chats");const D=C.channel(`chats_${e==null?void 0:e.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"chats"},async M=>{console.log("New chat created:",M.new),i(me=>me.some(R=>R.id===M.new.id)||M.new.sender_id===(e==null?void 0:e.id)&&M.new.deleted_for_sender||M.new.receiver_id===(e==null?void 0:e.id)&&M.new.deleted_for_receiver?me:[M.new,...me]);const{data:z,error:ae}=await C.from("chats").select(`
            *,
            sender:profiles!chats_sender_id_fkey(username, avatar_url),
            receiver:profiles!chats_receiver_id_fkey(username, avatar_url)
          `).eq("id",M.new.id).single();z&&i(me=>{const we=me.filter(I=>I.id!==z.id);return[z,...we]})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"chats"},M=>{console.log("Chat updated:",M.new);const z=M.new;(z.sender_id===(e==null?void 0:e.id)||z.receiver_id===(e==null?void 0:e.id))&&i(ae=>{if(z.sender_id===(e==null?void 0:e.id)&&z.deleted_for_sender||z.receiver_id===(e==null?void 0:e.id)&&z.deleted_for_receiver)return console.log("Removing deleted chat from UI:",z.id),ae.filter(I=>I.id!==z.id);const we=ae.findIndex(I=>I.id===z.id);if(we>=0){const I=[...ae];return I[we]={...I[we],...z},I.sort((R,B)=>new Date(B.updated_at).getTime()-new Date(R.updated_at).getTime())}else return $(),ae})}).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`receiver_id=eq.${e==null?void 0:e.id}`},async M=>{console.log("New message received:",M.new),p(z=>({...z,[M.new.chat_id]:(z[M.new.chat_id]||0)+1})),await J(M.new.chat_id)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`receiver_id=eq.${e==null?void 0:e.id}`},async M=>{M.new.read_by_receiver&&!M.old.read_by_receiver&&(p(z=>({...z,[M.new.chat_id]:Math.max(0,(z[M.new.chat_id]||0)-1)})),setTimeout(()=>v(),100))}).subscribe(M=>{console.log("Chats subscription status:",M),M==="SUBSCRIBED"&&console.log("Successfully subscribed to real-time chats and messages")});return()=>{console.log("Cleaning up chats subscription"),D.unsubscribe()}},G=()=>{console.log("Setting up real-time subscription for system notifications");const D=C.channel(`system_notifications_${e==null?void 0:e.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"system_notifications",filter:`to_user_id=eq.${e==null?void 0:e.id}`},async M=>{var me;console.log("New system notification received:",M.new);const{data:z,error:ae}=await C.from("system_notifications").select(`
            *,
            from_user:profiles(username, avatar_url)
          `).eq("id",M.new.id).single();z&&!ae&&(l(we=>[z,...we]),z.type==="follow"?V({title:"New Follower!",description:`${((me=z.from_user)==null?void 0:me.username)||"Someone"} started following you`,className:"bg-blue-600 text-white border-blue-700"}):z.type==="like"&&V({title:"Video Liked!",description:z.message,className:"bg-red-600 text-white border-red-700"}))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"system_notifications",filter:`to_user_id=eq.${e==null?void 0:e.id}`},M=>{console.log("System notification updated:",M.new),l(z=>z.map(ae=>ae.id===M.new.id?{...ae,...M.new}:ae)),M.new.read!==M.old.read&&v()}).subscribe(M=>{console.log("System notifications subscription status:",M),M==="SUBSCRIBED"&&console.log("Successfully subscribed to real-time system notifications")});return()=>{console.log("Cleaning up system notifications subscription"),D.unsubscribe()}},J=async D=>{try{const{data:M,error:z}=await C.from("messages").select("*").eq("chat_id",D).order("created_at",{ascending:!1}).limit(5);if(z||!M)return;let ae=null;for(const me of M){const we=me.sender_id===(e==null?void 0:e.id),I=me.deleted_for_everyone===!0,R=we&&me.deleted_for_sender===!0,B=!we&&me.deleted_for_receiver===!0;if(!I&&!R&&!B){ae=me;break}}i(me=>me.map(we=>we.id===D?{...we,last_visible_message:ae}:we))}catch(M){console.error("Error updating last message for chat:",M)}},P=D=>!D||!e?null:D.sender_id===e.id?D.receiver:D.sender,F=D=>{const M=D.last_visible_message;return M?M.content===""||M.content==null?"Message deleted":M.content.length>50?M.content.substring(0,50)+"...":M.content:"No messages yet"},Q=D=>{const M=new Date(D),ae=(new Date().getTime()-M.getTime())/(1e3*60);return ae<1?"now":ae<60?`${Math.floor(ae)}m ago`:ae<1440?`${Math.floor(ae/60)}h ago`:`${Math.floor(ae/1440)}d ago`},se=async D=>{const M=s.find(z=>z.id===D);if(M){if(M.sender_id!==(e==null?void 0:e.id)){V({title:"Not allowed",description:"Only the creator of the chat can delete.",variant:"destructive"}),g(null);return}N({type:"deleteChat",chatId:D}),_(!0),g(null)}},O=async D=>{p(M=>({...M,[D]:0})),n(`/chat/${D}`),g(null);try{const{error:M}=await C.rpc("mark_messages_as_read",{chat_id_param:D,user_id_param:e==null?void 0:e.id});M?console.error("Error marking messages as read:",M):setTimeout(()=>v(),200)}catch(M){console.error("Error marking messages as read:",M)}},X=async()=>{if(!(!e||!j))try{const{chatId:D}=j,M=s.find(ae=>ae.id===D);if(!M)return;if(M.sender_id!==(e==null?void 0:e.id)){V({title:"Not allowed",description:"Only the creator of the chat can delete.",variant:"destructive"});return}console.log("Deleting chat:",D),i(ae=>ae.filter(me=>me.id!==D));const{error:z}=await C.from("chats").update({deleted_for_sender:!0,deleted_for_receiver:!0,updated_at:new Date().toISOString()}).eq("id",D);z?(console.error("Error deleting chat:",z),$(),V({title:"Failed to delete chat",description:z.message||"Please try again.",variant:"destructive"})):V({title:"Chat deleted",description:"The chat has been removed from both inboxes.",variant:"default"})}catch(D){console.error("Error deleting chat:",D),V({title:"Failed to delete chat",description:"An unexpected error occurred.",variant:"destructive"})}finally{_(!1),N(null)}},ie=async D=>{var M,z;await le(D.id),D.type==="admin"?(W(D),k(!0)):D.type==="follow"&&((M=D.from_user)!=null&&M.username)?n(`/profile/${D.from_user.username}`):D.type==="like"&&((z=D.from_user)!=null&&z.username)&&n(`/profile/${D.from_user.username}`)},le=async D=>{try{const{error:M}=await C.from("system_notifications").update({read:!0}).eq("id",D);M||(l(z=>z.map(ae=>ae.id===D?{...ae,read:!0}:ae)),v())}catch(M){console.error("Error marking notification as read:",M)}},T=D=>{switch(D){case"like":return o.jsx(vi,{size:16,className:"text-red-400"});case"follow":return o.jsx(hC,{size:16,className:"text-blue-400"});case"admin":return o.jsx(Dc,{size:16,className:"text-yellow-400"});default:return o.jsx(va,{size:16,className:"text-gray-400"})}};return o.jsxs("div",{className:"min-h-screen bg-black text-white",children:[o.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10 p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-2xl font-black text-white tracking-wider logo-text-glow",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:"900",letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))"},children:"Messages"}),o.jsx("div",{style:{width:40}})]})}),o.jsx("div",{className:"pt-20 pb-24",children:o.jsxs(Tu,{defaultValue:"inbox",className:"w-full",children:[o.jsxs(cl,{className:`mx-4 mb-4 max-w-md ${t?"grid grid-cols-1":"grid grid-cols-2"}`,children:[o.jsxs(Kt,{value:"inbox",className:"flex items-center gap-2",children:[o.jsx(wa,{size:16}),"Inbox",b>0&&o.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full min-w-[18px] h-[18px] flex items-center justify-center font-bold ml-1",children:b>99?"99+":b})]}),!t&&o.jsxs(Kt,{value:"system",className:"flex items-center gap-2",onClick:re,children:[o.jsx(va,{size:16}),"System",w>0&&o.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full min-w-[18px] h-[18px] flex items-center justify-center font-bold ml-1",children:w>99?"99+":w})]})]}),o.jsx(Hr,{value:"inbox",children:c?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):s.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(wa,{size:24})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No messages yet"}),o.jsx("p",{className:"text-white/70 mb-4",children:"Start a conversation with someone!"}),o.jsx(K,{variant:"outline",onClick:$,className:"border-white/20 text-white hover:bg-white/10",children:"Refresh"})]}):o.jsx("div",{className:"space-y-0",children:s.map(D=>{var z;const M=P(D);return M?o.jsxs("div",{className:"flex items-center p-4 border-b border-white/10 hover:bg-white/5 cursor-pointer transition-colors",onClick:()=>O(D.id),children:[o.jsxs("div",{className:"relative mr-3",children:[o.jsxs(kt,{className:"w-12 h-12",children:[o.jsx(Ct,{src:M.avatar_url,alt:M.username}),o.jsx(Et,{className:"bg-white/10 text-white",children:((z=M.username)==null?void 0:z.charAt(0).toUpperCase())||"U"})]}),y[D.id]>0&&o.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full min-w-[18px] h-[18px] flex items-center justify-center font-bold",children:y[D.id]>99?"99+":y[D.id]})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("h3",{className:"font-semibold text-white truncate",children:["@",M.username||"unknown"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs text-white/60 flex-shrink-0",children:Q(D.updated_at)}),y[D.id]>0&&o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]}),o.jsx("p",{className:"text-sm text-white/70 truncate",children:F(D)})]}),o.jsxs("div",{className:"relative ml-2",children:[o.jsx(K,{variant:"ghost",size:"sm",onClick:ae=>{ae.stopPropagation(),g(m===D.id?null:D.id)},className:"text-white/60 hover:text-white p-2",children:o.jsx(xa,{size:16})}),m===D.id&&o.jsxs("div",{className:"absolute top-full right-0 mt-2 bg-black/90 rounded-lg shadow-lg z-10 min-w-[140px] border border-white/10","data-dropdown":!0,children:[o.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 flex items-center gap-2 text-white",onClick:ae=>{ae.stopPropagation(),O(D.id)},children:[o.jsx(wa,{size:14}),"Open Chat"]}),D.sender_id===(e==null?void 0:e.id)?o.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 text-red-400 flex items-center gap-2",onClick:ae=>{ae.stopPropagation(),se(D.id)},children:[o.jsx(Kg,{size:14}),"Delete Chat"]}):o.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-white/10 text-red-400 flex items-center gap-2",onClick:ae=>{ae.stopPropagation(),V({title:"Not allowed",description:"Only the creator of the chat can delete.",variant:"destructive"}),g(null)},children:[o.jsx(Kg,{size:14}),"Delete Chat"]})]})]})]},D.id):null})})}),!t&&o.jsx(Hr,{value:"system",children:f?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):a.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(va,{size:24})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No notifications"}),o.jsx("p",{className:"text-white/70",children:"System notifications will appear here"})]}):o.jsx("div",{className:"space-y-0",children:a.map(D=>{var M;return o.jsxs("div",{className:`flex items-center p-4 border-b border-white/10 hover:bg-white/5 cursor-pointer transition-colors ${D.read?"":"bg-blue-900/20"}`,onClick:()=>ie(D),children:[o.jsx("div",{className:"mr-3",children:T(D.type)}),D.from_user&&o.jsx("div",{className:"relative mr-3",children:o.jsxs(kt,{className:"w-10 h-10",children:[o.jsx(Ct,{src:D.from_user.avatar_url,alt:D.from_user.username}),o.jsx(Et,{className:"bg-white/10 text-white",children:((M=D.from_user.username)==null?void 0:M.charAt(0).toUpperCase())||"U"})]})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("h3",{className:"font-semibold text-white truncate",children:D.title}),o.jsx("span",{className:"text-xs text-white/60 flex-shrink-0 ml-2",children:Q(D.created_at)})]}),o.jsx("p",{className:"text-sm text-white/60",children:"Click to view full message"})]}),!D.read&&o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full ml-2"})]},D.id)})})})]})}),x&&o.jsx("div",{className:"fixed inset-0 bg-black flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-black/90 rounded-lg p-6 max-w-sm mx-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-white mb-4 text-center",children:"Are you sure you want to delete this chat?"}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx(K,{onClick:()=>{_(!1),N(null)},variant:"outline",className:"flex-1",children:"Cancel"}),o.jsx(K,{onClick:X,variant:"destructive",className:"flex-1",children:"OK"})]})]})}),S&&U&&o.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-black/90 rounded-lg max-w-md w-full mx-4 border border-white/20",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-8 h-8 bg-yellow-600 rounded-full flex items-center justify-center",children:o.jsx(Dc,{size:16,className:"text-white"})}),o.jsx("h3",{className:"text-lg font-semibold text-white",children:"Admin Message"})]}),o.jsx("button",{onClick:()=>{k(!1),W(null)},className:"text-white/60 hover:text-white",children:o.jsx(Mr,{size:20})})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-white font-semibold mb-2",children:U.title}),o.jsx("p",{className:"text-white/80 leading-relaxed whitespace-pre-wrap",children:((Y=(L=U.message)==null?void 0:L.replace(/^\[ALL_USERS\]\s*/,""))==null?void 0:Y.replace(/^\[TO:[^\]]+\]\s*/,""))||U.message})]}),o.jsx("div",{className:"text-xs text-white/50",children:Q(U.created_at)})]}),o.jsx("div",{className:"p-4 border-t border-white/10",children:o.jsx(K,{onClick:()=>{k(!1),W(null)},className:"w-full bg-green-600 hover:bg-green-700 text-white",children:"Got it"})})]})}),o.jsx(nr,{})]})},uD=()=>{var we;const{chatId:e,userId:t}=ol(),r=Ye(),{user:n}=tt(),{refreshCounts:s}=ep(),[i,a]=d.useState([]),l=I=>{const R=new Set;return I.filter(B=>R.has(B.id)?(console.log("Removing duplicate message:",B.id),!1):(R.add(B.id),!0)).sort((B,Z)=>new Date(B.created_at).getTime()-new Date(Z.created_at).getTime())},[c,u]=d.useState(null),[f,h]=d.useState(""),[m,g]=d.useState(!0),[y,p]=d.useState(!1),b=d.useRef(null),w=d.useRef(null),[v,x]=d.useState(null),[_,j]=d.useState(!1);d.useState(null);const[N,S]=d.useState(!1),[k,U]=d.useState(!1),W=d.useRef(null),[V,q]=d.useState(!0),{toast:re}=Ft(),[$,ee]=d.useState(!1),[G,J]=d.useState(null);d.useEffect(()=>{if(console.log("=== CHAT USEFFECT RUNNING ==="),console.log("user:",n==null?void 0:n.id),console.log("chatId:",e),console.log("paramUserId:",t),n)if(e){console.log("Setting up chat with chatId:",e),P(),F(),console.log("About to set up real-time subscription...");const I=Q(),R=ae();return()=>{console.log("Cleaning up chat subscriptions"),I(),R(),W.current&&clearTimeout(W.current)}}else t&&(async()=>{console.log("Starting new chat with user:",t);const{data:I,error:R}=await C.from("chats").select("*").or(`and(sender_id.eq.${n.id},receiver_id.eq.${t}),and(sender_id.eq.${t},receiver_id.eq.${n.id})`);if(R){console.error("Error checking for existing chat:",R),re({title:"Failed to check for existing chat",description:R.message,variant:"destructive"});return}console.log("All existing chats found:",I);const B=I==null?void 0:I.find(ve=>ve.sender_id===n.id&&ve.receiver_id===t||ve.sender_id===t&&ve.receiver_id===n.id);let Z=!0,ue=null;if(B){const ve=B.sender_id===n.id&&B.deleted_for_sender||B.receiver_id===n.id&&B.deleted_for_receiver;console.log(`Existing chat found: ${B.id}, deleted_for_user: ${ve}`),ve?(console.log("Existing chat is deleted for current user, will create new chat"),Z=!0):(ue=B,Z=!1,console.log("Reusing existing non-deleted chat:",ue))}else console.log("No existing chat found, will create new chat"),Z=!0;if(Z){console.log("Creating new chat");const{data:ve,error:he}=await C.from("chats").insert({sender_id:n.id,receiver_id:t}).select().single();if(he){re({title:"Failed to start chat",description:he.message,variant:"destructive"});return}ue=ve,console.log("New chat created:",ue)}r(`/chat/${ue.id}`,{replace:!0})})()},[e,n,t]),d.useEffect(()=>{console.log("Messages state changed, count:",i.length),i.length>0&&V&&se()},[i,V]),d.useEffect(()=>{const I=R=>{R.target.closest("[data-dropdown]")||(x(null),j(!1))};return document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[]);const P=async()=>{try{console.log("Fetching chat with ID:",e);const{data:I,error:R}=await C.from("chats").select(`
          *,
          sender:profiles!chats_sender_id_fkey(username, avatar_url),
          receiver:profiles!chats_receiver_id_fkey(username, avatar_url)
        `).eq("id",e).single();if(R){console.error("Error fetching chat:",R),r("/inbox");return}if(I.sender_id===(n==null?void 0:n.id)&&I.deleted_for_sender||I.receiver_id===(n==null?void 0:n.id)&&I.deleted_for_receiver){console.log("Chat has been deleted by current user, redirecting to inbox"),r("/inbox");return}console.log("Chat data:",I),u(I);try{await C.rpc("mark_messages_as_read",{chat_id_param:e,user_id_param:n==null?void 0:n.id}),s()}catch(Z){console.error("Error marking messages as read:",Z)}}catch(I){console.error("Error fetching chat:",I),r("/inbox")}},F=async()=>{try{console.log("Fetching messages for chatId:",e);const{data:I,error:R}=await C.from("chats").select("*").eq("id",e).single();if(R){console.error("Chat access error:",R),r("/inbox");return}if(I.sender_id===(n==null?void 0:n.id)&&I.deleted_for_sender||I.receiver_id===(n==null?void 0:n.id)&&I.deleted_for_receiver){console.log("Chat has been deleted by current user, redirecting to inbox"),r("/inbox");return}console.log("Chat access confirmed:",I);const{data:Z,error:ue}=await C.from("messages").select("*").eq("chat_id",e).order("created_at",{ascending:!0});if(ue)console.error("Error fetching messages:",ue);else{console.log("Messages data:",Z);const ve=l(Z||[]);console.log("Unique messages after deduplication:",ve.length),a(ve)}}catch(I){console.error("Error fetching messages:",I)}finally{g(!1)}},Q=()=>{console.log("Setting up real-time subscription for chat:",e);const I=`messages_${e}_${Date.now()}`;console.log("Channel name:",I);const R=C.channel(`all_messages_${Date.now()}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},Z=>{console.log("=== ALL MESSAGES SUBSCRIPTION ==="),console.log("New message received (all messages):",Z.new),console.log("Message chat ID:",Z.new.chat_id),console.log("Current chat ID:",e),Z.new.chat_id===e&&console.log("This message belongs to current chat!")}).subscribe(Z=>{console.log("All messages subscription status:",Z)}),B=C.channel(I).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`chat_id=eq.${e}`},Z=>{console.log("=== REAL-TIME MESSAGE RECEIVED ==="),console.log("New message received via real-time:",Z.new),console.log("Current messages count before adding:",i.length),console.log("Chat ID from subscription:",e),console.log("Message chat ID:",Z.new.chat_id),a(ue=>{const ve=[...ue,Z.new],he=l(ve);return console.log("Adding new message via real-time, total unique messages:",he.length),he})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`chat_id=eq.${e}`},Z=>{console.log("Message updated via real-time:",Z.new),a(ue=>ue.map(ve=>ve.id===Z.new.id?Z.new:ve))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"messages",filter:`chat_id=eq.${e}`},Z=>{console.log("Message deleted via real-time:",Z.old),a(ue=>ue.filter(ve=>ve.id!==Z.old.id))}).subscribe(Z=>{console.log("Subscription status:",Z),Z==="SUBSCRIBED"?console.log("Successfully subscribed to real-time messages for chat:",e):Z==="CHANNEL_ERROR"?console.error("Channel error for chat:",e):Z==="TIMED_OUT"&&console.error("Subscription timed out for chat:",e)});return()=>{console.log("Cleaning up subscription for chat:",e),B.unsubscribe(),R.unsubscribe()}},se=()=>{b.current&&b.current.scrollIntoView({behavior:"smooth"})},O=I=>{const R=I.currentTarget,Z=R.scrollHeight-R.scrollTop-R.clientHeight<100;q(Z)},X=async()=>{if(!f.trim()||!n||!c){c||re({title:"Chat not loaded",description:"Please wait for the chat to load before sending a message.",variant:"destructive"});return}console.log("Sending message:",f.trim());const I=c.sender_id===n.id?c.receiver_id:c.sender_id;if(I===n.id){console.error("Cannot send message to yourself!");return}S(!1),z(!1),W.current&&clearTimeout(W.current),p(!0);const R=f.trim();h("");try{console.log("Attempting to send message with data:",{chat_id:e,sender_id:n.id,receiver_id:I,content:f.trim()});const{data:B,error:Z}=await C.from("messages").insert({chat_id:e,sender_id:n.id,receiver_id:I,content:R}).select().single();Z?(console.error("Error sending message:",Z),re({title:"Failed to send message",description:Z.message||"Please try again.",variant:"destructive"})):(console.log("Message sent successfully:",B),console.log("Current messages count before adding:",i.length),a(ue=>{const ve=[...ue,B],he=l(ve);return console.log("Adding sent message to local state, total unique messages:",he.length),he}),await C.from("chats").update({last_message:R,updated_at:new Date().toISOString()}).eq("id",e),q(!0),setTimeout(()=>se(),100))}catch(B){console.error("Error sending message:",B),re({title:"Failed to send message",description:B instanceof Error?B.message:"An unexpected error occurred",variant:"destructive"})}finally{p(!1)}},ie=I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),X())},le=async I=>{try{await navigator.clipboard.writeText(I),console.log("Message copied to clipboard:",I),x(null),re({title:"Message copied",description:"Message copied to clipboard."})}catch(R){console.error("Error copying message:",R);const B=document.createElement("textarea");B.value=I,document.body.appendChild(B),B.select();try{document.execCommand("copy"),console.log("Message copied to clipboard (fallback):",I),x(null),re({title:"Message copied",description:"Message copied to clipboard."})}catch(Z){console.error("Fallback copy failed:",Z),re({title:"Failed to copy",description:"Could not copy message to clipboard.",variant:"destructive"})}document.body.removeChild(B)}},T=async(I,R=!1)=>{x(null);const B=i.find(Z=>Z.id===I);if(B){if(B.deleted_for_everyone){re({title:"Cannot delete",description:"This message has already been deleted for everyone.",variant:"destructive"});return}J({type:R?"deleteForEveryone":"deleteForMe",messageId:I}),ee(!0)}},L=async()=>{if(!(!n||!G))try{const{type:I,messageId:R,chatId:B}=G;if(I==="deleteChat"){if((c==null?void 0:c.sender_id)!==(n==null?void 0:n.id)){re({title:"Not allowed",description:"Only the person who started the chat can delete it.",variant:"destructive"});return}console.log("Deleting chat for both users:",B);const{error:Z}=await C.from("chats").update({deleted_for_sender:!0,deleted_for_receiver:!0}).eq("id",B);Z?(console.error("Error deleting chat:",Z),re({title:"Failed to delete chat",description:Z.message||"Please try again.",variant:"destructive"})):(re({title:"Chat deleted",description:"The chat has been removed from both inboxes.",variant:"default"}),r("/inbox"))}else{const Z=I==="deleteForEveryone",ue=i.find(ve=>ve.id===R);if(!ue){re({title:"Message not found",description:"The message could not be found.",variant:"destructive"});return}if(ue.deleted_for_everyone){re({title:"Cannot delete",description:"This message has already been deleted for everyone.",variant:"destructive"});return}if(Z){const{error:ve}=await C.from("messages").update({deleted_for_everyone:!0}).eq("id",R);if(ve){console.error("Error deleting message for everyone:",ve),re({title:"Failed to delete message",description:ve.message,variant:"destructive"});return}console.log("Message deleted for everyone"),a(he=>{const Ie=he.map(Fe=>Fe.id===R?{...Fe,deleted_for_everyone:!0}:Fe);return console.log("Updated messages state (delete for everyone):",Ie),Ie}),re({title:"Message deleted for everyone",description:"The message has been removed for all users.",className:"bg-green-600 text-white border-green-700"})}else{const{error:ve}=await C.from("messages").update({deleted_for_sender:!0}).eq("id",R);if(ve){console.error("Error marking message as deleted for sender:",ve),re({title:"Failed to delete message",description:ve.message,variant:"destructive"});return}console.log("Message marked as deleted for sender"),a(he=>{const Ie=he.map(Fe=>Fe.id===R?{...Fe,deleted_for_sender:!0}:Fe);return console.log("Updated messages state:",Ie),Ie}),re({title:"Message deleted",description:"The message has been removed from your view.",className:"bg-green-600 text-white border-green-700"})}}}catch(I){console.error("Error deleting message:",I),re({title:"Failed to delete message",description:"An unexpected error occurred.",variant:"destructive"})}finally{ee(!1),J(null)}},Y=()=>!c||!n?null:c.sender_id===n.id?c.receiver&&c.receiver.user_id!==n.id?c.receiver:null:c.receiver_id===n.id&&c.sender&&c.sender.user_id!==n.id?c.sender:null,D=I=>{const R=new Date(I),Z=(new Date().getTime()-R.getTime())/(1e3*60);return Z<1?"now":Z<60?`${Math.floor(Z)}m ago`:Z<1440?`${Math.floor(Z/60)}h ago`:`${Math.floor(Z/1440)}d ago`},M=()=>{N||(S(!0),z(!0)),W.current&&clearTimeout(W.current),W.current=setTimeout(()=>{S(!1),z(!1)},3e3)},z=async I=>{if(!n||!e||!c)return;const B=c.sender_id===n.id?{typing_sender:I}:{typing_receiver:I};try{await C.from("chats").update(B).eq("id",e)}catch(Z){console.error("Error broadcasting typing status:",Z)}},ae=()=>{const I=C.channel(`typing_${e}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"chats",filter:`id=eq.${e}`},R=>{const B=R.new,Z=B.sender_id===(n==null?void 0:n.id);U(Z?B.typing_receiver===!0:B.typing_sender===!0)}).subscribe();return()=>{I.unsubscribe()}};if(d.useEffect(()=>{!m&&i.length>0&&setTimeout(()=>se(),100)},[m]),m)return o.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:o.jsx("div",{className:"text-white",children:"Loading chat..."})});if(!e||!c)return o.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:o.jsx("div",{className:"text-white",children:"Chat not found"})});const me=Y();return o.jsxs("div",{className:"min-h-screen bg-black text-white flex flex-col",children:[o.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/90 backdrop-blur-md border-b border-white/10 p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>r("/inbox"),children:o.jsx(Tn,{size:20})}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"relative",children:o.jsxs(kt,{className:"w-8 h-8",children:[o.jsx(Ct,{src:me==null?void 0:me.avatar_url,alt:me==null?void 0:me.username}),o.jsx(Et,{children:((we=me==null?void 0:me.username)==null?void 0:we.charAt(0).toUpperCase())||"U"})]})}),o.jsx("div",{children:o.jsxs("h2",{className:"font-semibold",children:["@",(me==null?void 0:me.username)||"unknown"]})})]}),o.jsx("div",{className:"w-8"})]})}),o.jsx("div",{ref:w,className:"flex-1 overflow-y-auto px-4 pt-20 pb-40",onScroll:O,children:i.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(wa,{size:24})}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No messages yet"}),o.jsx("p",{className:"text-white/70",children:"Start the conversation!"})]}):o.jsxs("div",{className:"space-y-4",children:[i.map((I,R)=>{const B=I.sender_id===(n==null?void 0:n.id),Z=I.deleted_for_everyone===!0,ue=B&&I.deleted_for_sender===!0,ve=!B&&I.deleted_for_receiver===!0,he=Z||ue||ve,Ie=I.id||`message-${R}-${I.created_at}`;return(I.deleted_for_sender||I.deleted_for_everyone)&&console.log("Message deletion state:",{id:I.id,deleted_for_sender:I.deleted_for_sender,deleted_for_everyone:I.deleted_for_everyone,isOwnMessage:B,isDeleted:he}),he?o.jsx("div",{className:`flex ${B?"justify-end":"justify-start"}`,children:o.jsx("span",{className:"text-xs text-white/40 italic",children:"Message deleted"})},`${Ie}-deleted`):o.jsx("div",{className:`flex ${B?"justify-end":"justify-start"}`,children:o.jsxs("div",{className:"relative flex items-start",children:[B&&!I.deleted_for_everyone&&o.jsx(K,{variant:"ghost",size:"sm",className:"w-6 h-6 p-0 mr-2 mt-1 text-white/60 hover:text-white",onClick:()=>x(v===I.id?null:I.id),children:o.jsx(xa,{size:16})}),o.jsxs("div",{className:`p-3 rounded-lg ${B?"bg-green-600 text-white":"bg-white/10 text-white"}`,children:[o.jsx("p",{className:"text-sm break-words break-all",children:I.content}),o.jsx("div",{className:"flex justify-end mt-1",children:o.jsx("p",{className:`text-xs ${D(I.created_at)==="now"?"text-green-400 font-medium":"opacity-70"}`,children:D(I.created_at)})})]}),v===I.id&&B&&!I.deleted_for_everyone&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center","data-dropdown":!0,children:o.jsxs("div",{className:"bg-black/90 rounded-lg shadow-lg min-w-[140px] max-w-[90vw] p-4",children:[o.jsxs("button",{className:"w-full px-3 py-2 text-sm hover:bg-white/10 flex flex-row items-center gap-2 rounded text-center justify-center",onClick:()=>le(I.content),children:[o.jsx(iy,{size:16}),"Copy"]}),o.jsx("button",{className:"w-full px-3 py-2 text-sm hover:bg-white/10 text-red-400 rounded text-center",onClick:()=>T(I.id,!1),children:"Delete for me"}),o.jsx("button",{className:"w-full px-3 py-2 text-sm hover:bg-white/10 text-red-400 rounded text-center",onClick:()=>T(I.id,!0),children:"Delete for everyone"}),o.jsx("button",{className:"w-full px-3 py-2 text-sm hover:bg-white/10 text-white/70 rounded text-center border-t border-white/10 mt-2 pt-3",onClick:()=>x(null),children:"Cancel"})]})})]})},Ie)}),o.jsx("div",{ref:b})]})}),o.jsxs("div",{className:"fixed bottom-12 left-0 right-0 p-4 bg-black/90 backdrop-blur-md border-t border-white/10 z-40",children:[k&&o.jsx("div",{className:"mb-2 px-3 py-1 flex justify-center",children:o.jsxs("div",{className:"flex items-center space-x-2 bg-white/10 rounded-full px-3 py-1",children:[o.jsxs("div",{className:"flex space-x-1",children:[o.jsx("div",{className:"w-2 h-2 bg-white/60 rounded-full animate-bounce"}),o.jsx("div",{className:"w-2 h-2 bg-white/60 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),o.jsx("div",{className:"w-2 h-2 bg-white/60 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),o.jsxs("span",{className:"text-xs text-white/60 italic",children:[(me==null?void 0:me.username)||"Someone"," is typing..."]})]})}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Ze,{value:f,onChange:I=>{h(I.target.value),M()},onKeyPress:ie,placeholder:"Type a message...",className:"flex-1 bg-white/10 border-white/20 text-white placeholder-white/50",disabled:y}),o.jsx(K,{onClick:X,disabled:y||!f.trim()||!c,className:"bg-green-600 hover:bg-green-700 disabled:opacity-50",children:o.jsx(Bs,{size:16})})]})]}),$&&o.jsx("div",{className:"fixed inset-0 bg-black flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-black/90 rounded-lg p-6 max-w-sm mx-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-white mb-4 text-center",children:(G==null?void 0:G.type)==="deleteChat"?"Are you sure you want to delete this chat?":"Are you sure you want to delete this message?"}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx(K,{onClick:()=>{ee(!1),J(null)},variant:"outline",className:"flex-1",children:"Cancel"}),o.jsx(K,{onClick:L,variant:"destructive",className:"flex-1",children:"OK"})]})]})}),o.jsx(nr,{})]})},dD=()=>{var p,b;const{username:e}=ol(),t=Ye(),{user:r}=tt(),[n,s]=d.useState(null),[i,a]=d.useState(""),[l,c]=d.useState(!0),[u,f]=d.useState(!1),{toast:h}=Ft();d.useEffect(()=>{e&&r&&m()},[e,r]);const m=async()=>{try{c(!0),console.log("Fetching receiver profile for username:",e);const{data:w,error:v}=await C.from("profiles").select("*").eq("username",e).single();v?(console.error("Error fetching receiver:",v),h({title:"User not found",description:"The user you're trying to message doesn't exist",variant:"destructive"}),t("/inbox")):(console.log("Receiver found:",w),s(w),w.user_id===(r==null?void 0:r.id)&&(h({title:"Cannot message yourself",description:"You cannot send a message to yourself",variant:"destructive"}),t("/inbox")))}catch(w){console.error("Error fetching receiver:",w),h({title:"Error loading user",description:"Please try again",variant:"destructive"}),t("/inbox")}finally{c(!1)}},g=async()=>{if(!i.trim()||!r||!n){i.trim()||h({title:"Empty message",description:"Please enter a message before sending",variant:"destructive"});return}f(!0),console.log("Sending message to:",n.username);try{const{data:w,error:v}=await C.from("chats").select("*").or(`and(sender_id.eq.${r.id},receiver_id.eq.${n.user_id}),and(sender_id.eq.${n.user_id},receiver_id.eq.${r.id})`);if(v){console.error("Error checking for existing chat:",v),alert("Failed to check for existing chat: "+v.message);return}const x=(w==null?void 0:w.filter(k=>k.sender_id===r.id?!k.deleted_for_sender:!k.deleted_for_receiver))||[],_=x.length>0?x[0]:null;console.log("Found existing chats:",w),console.log("Non-deleted chats:",x),console.log("Using existing chat:",_);let j,N=_;if(N){console.log("Found existing non-deleted chat:",N.id),j=N.id,console.log("Using existing chat:",N.id);const{error:k}=await C.from("chats").update({last_message:i.trim(),updated_at:new Date().toISOString()}).eq("id",j);if(k)throw console.error("Error updating existing chat:",k),k}else{console.log("Creating new chat between",r.id,"and",n.user_id);const{data:k,error:U}=await C.from("chats").insert({sender_id:r.id,receiver_id:n.user_id,last_message:i.trim(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(U){console.error("Error creating chat:",U),alert("Failed to create chat: "+U.message);return}console.log("Created new chat:",k),j=k.id}const{error:S}=await C.from("messages").insert({chat_id:j,sender_id:r.id,receiver_id:n.user_id,content:i.trim(),created_at:new Date().toISOString()});S?(console.error("Error sending message:",S),alert("Failed to send message: "+S.message)):(console.log("Message sent successfully, navigating to chat:",j),t(`/chat/${j}`))}catch(w){console.error("Error sending message:",w),alert("Failed to send message: "+(w instanceof Error?w.message:"An unexpected error occurred"))}finally{f(!1)}},y=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),g())};return l?o.jsx("div",{className:"min-h-screen bg-black flex justify-center items-center",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):n?o.jsxs("div",{className:"min-h-screen bg-black text-white flex flex-col",children:[o.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/90 backdrop-blur-md border-b border-white/10 p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>t("/inbox"),children:o.jsx(Tn,{size:20})}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"relative",children:[o.jsxs(kt,{className:"w-8 h-8",children:[o.jsx(Ct,{src:n==null?void 0:n.avatar_url,alt:n==null?void 0:n.username}),o.jsx(Et,{className:"bg-white/10 text-white",children:((p=n==null?void 0:n.username)==null?void 0:p.charAt(0).toUpperCase())||"U"})]}),o.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-black"})]}),o.jsxs("div",{children:[o.jsxs("h2",{className:"font-semibold",children:["@",(n==null?void 0:n.username)||"unknown"]}),o.jsx("p",{className:"text-xs text-white/60",children:"Send a message"})]})]}),o.jsx("div",{className:"w-8"})]})}),o.jsx("div",{className:"flex-1 pt-20 pb-32 px-4 flex flex-col justify-center",children:o.jsxs("div",{className:"max-w-md mx-auto w-full space-y-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-20 h-20 mx-auto mb-4",children:o.jsxs(kt,{className:"w-full h-full",children:[o.jsx(Ct,{src:n==null?void 0:n.avatar_url,alt:n==null?void 0:n.username}),o.jsx(Et,{className:"bg-white/10 text-white text-2xl",children:((b=n==null?void 0:n.username)==null?void 0:b.charAt(0).toUpperCase())||"U"})]})}),o.jsxs("h3",{className:"text-xl font-semibold mb-2",children:["Send a message to @",(n==null?void 0:n.username)||"unknown"]}),o.jsx("p",{className:"text-white/60 text-sm",children:"Start a conversation"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Ze,{value:i,onChange:w=>a(w.target.value),onKeyPress:y,placeholder:"Type your message...",className:"w-full bg-white/10 border-white/20 text-white placeholder-white/50 pr-12",disabled:u,maxLength:1e3}),o.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-xs text-white/40",children:[i.length,"/1000"]})]}),o.jsx(K,{onClick:g,disabled:u||!i.trim(),className:"w-full bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:u?o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),o.jsx("span",{children:"Sending..."})]}):o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Bs,{size:16}),o.jsx("span",{children:"Send Message"})]})})]})]})}),o.jsx(nr,{})]}):o.jsxs("div",{className:"min-h-screen bg-black text-white flex flex-col items-center justify-center",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"User not found"}),o.jsx(K,{onClick:()=>t("/inbox"),variant:"outline",children:"Back to Messages"})]})},fD=()=>{const e=fn();return d.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),o.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),o.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},dj=()=>{const e=localStorage.getItem("wp_jwt_validated");return localStorage.getItem("wp_jwt_token"),e==="true"},hD=()=>({validated:localStorage.getItem("wp_jwt_validated"),validationTime:localStorage.getItem("wp_jwt_validation_time"),isValid:dj(),note:"JWT validation does not expire - valid until logout"});function mD(){const[e,t]=d.useState(!1),[r,n]=d.useState(""),s=Ye(),{toast:i}=Ft(),{user:a,signOut:l}=tt(),{loading:c,linked:u,refresh:f}=cp(a==null?void 0:a.id),[h,m]=d.useState(!1),[g,y]=d.useState(""),[p,b]=d.useState(!1),[w,v]=d.useState(!1),x=d.useRef(!1);d.useEffect(()=>{const j=async()=>{if(a!=null&&a.id){const{data:S}=await Eu(a.id);S?(m(!0),y("")):(m(!1),y(""))}},N=()=>{const S=dj(),k=localStorage.getItem("wp_jwt_token");b(S),console.log("=== JWT Validation Debug ==="),console.log("JWT Validation Info:",hD()),console.log("JWT Validated:",S),console.log("Stored Token Present:",!!k),console.log("Token Length:",(k==null?void 0:k.length)||0),console.log("Raw validation value:",localStorage.getItem("wp_jwt_validated")),console.log("Validation time:",localStorage.getItem("wp_jwt_validation_time")),console.log("=== End Debug ===")};return j(),N(),()=>{x.current=!1}},[a]);const _=async()=>{var j,N,S,k,U;if(!p){n("Authentication required. Please log out and log back in.");return}if(e||w||x.current){console.log("Link already in progress or completed, ignoring click");return}x.current=!0,t(!0),n("");try{if(console.log("Starting quick link process..."),u){console.log("Wallet already linked, redirecting to wallet page"),v(!0),i({title:"Wallet already linked!",description:"Redirecting to wallet..."}),x.current=!1,s("/wallet");return}if(console.log("JWT validation passed - checking token availability..."),!localStorage.getItem("wp_jwt_token")){console.log("Token missing but validation passed - user needs to re-login for fresh token"),n("Since your wallet was unlinked, for security purposes you will need to sign out and sign in again before relinking your account."),x.current=!1,t(!1);return}console.log("Token available - attempting TrinEPay wallet link...");try{await Gb({email:(a==null?void 0:a.email)||"",password:"",passcode:""}),console.log("TrinEPay wallet link successful")}catch(V){console.error("TrinEPay wallet link failed:",V),(j=V.message)!=null&&j.includes("authentication")||(N=V.message)!=null&&N.includes("Not authenticated")||(S=V.message)!=null&&S.includes("credentials")?n("Authentication session expired. Please log out and log back in to refresh your authentication."):n(`Wallet linking failed: ${V.message||"Unknown error"}`),x.current=!1,t(!1);return}if(a!=null&&a.id){console.log("Inserting wallet link into Supabase for user:",a.id);try{const{error:V}=await Db(a.id);if(V)if(console.error("Supabase wallet link error:",V),V.status===406||(k=V.message)!=null&&k.includes("406"))console.log("Ignoring 406 error, TrinEPay linking was successful");else{n(`Database error: ${V.message||"Failed to link wallet in database"}`),x.current=!1,t(!1);return}console.log("Supabase wallet link completed")}catch(V){if(console.error("Supabase wallet link exception:",V),V.status===406||(U=V.message)!=null&&U.includes("406"))console.log("Ignoring 406 exception, TrinEPay linking was successful");else{n(`Database error: ${V.message||"Failed to link wallet in database"}`),x.current=!1,t(!1);return}}}console.log("Wallet linking completed successfully"),v(!0),console.log("Token before refresh:",!!localStorage.getItem("wp_jwt_token")),i({title:"Wallet linked successfully!",description:"Redirecting to wallet..."}),f(),console.log("Token after refresh:",!!localStorage.getItem("wp_jwt_token")),s("/wallet")}catch(W){console.error("Quick link error:",W),n(`Failed to link wallet: ${W.message||"Unknown error"}`)}finally{x.current=!1,t(!1)}};return h?o.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:o.jsxs("div",{className:"bg-black/90 p-6 rounded-lg w-full max-w-xs border border-white/10 text-center text-white",children:[o.jsx("h2",{className:"text-lg font-bold mb-4",children:"Wallet Already Linked"}),o.jsx("div",{className:"mb-4",children:"Your account is already linked to TrinEPay with email:"}),o.jsx("div",{className:"mb-4 font-semibold",children:g}),o.jsx(K,{className:"w-full",onClick:()=>s("/profile"),children:"Back to Profile"})]})}):o.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:o.jsxs("div",{className:"bg-black/90 p-6 rounded-lg w-full max-w-xs border border-white/10",children:[o.jsx("h2",{className:"text-lg font-bold text-white mb-4 text-center",children:"Link TrinEPay Account"}),o.jsxs("div",{className:"mb-4 p-2 bg-gray-800 rounded text-xs text-gray-300",children:[o.jsxs("div",{children:["JWT Validated: ",p?"✅ Yes":"❌ No"]}),o.jsxs("div",{children:["User Email: ",(a==null?void 0:a.email)||"None"]}),o.jsxs("div",{children:["Already Linked: ",h?"Yes":"No"]}),o.jsxs("div",{children:["Status Loading: ",c?"Yes":"No"]})]}),p&&o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"mb-4 p-3 bg-green-900/20 border border-green-500/20 rounded-lg",children:[o.jsx("div",{className:"text-green-400 text-sm mb-2",children:"✓ Authentication Verified"}),o.jsx("div",{className:"text-white/70 text-xs",children:"Your TrinEPay credentials were verified during login"})]}),o.jsxs("div",{className:"mb-4 text-white/80 text-sm",children:["Link to: ",o.jsx("span",{className:"font-semibold",children:a==null?void 0:a.email})]}),r&&o.jsx("div",{className:"text-red-400 mb-4 text-center text-sm",children:r}),r.includes("Since your wallet was unlinked")?o.jsx(K,{onClick:async()=>{await l(),s("/login")},className:"w-full mb-3 bg-yellow-600 hover:bg-yellow-700",disabled:e,children:"Log Out & Log Back In"}):o.jsx(K,{onClick:_,className:"w-full mb-3 bg-green-600 hover:bg-green-700",disabled:e||w,children:w?"Success! Redirecting...":e?"Linking...":"Link Wallet"})]}),!p&&o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"mb-4 p-4 bg-red-900/20 border border-red-500/20 rounded-lg",children:[o.jsx("div",{className:"text-red-400 text-lg mb-3",children:"🔒 Authentication Required"}),o.jsx("div",{className:"text-white/90 text-sm mb-3 leading-relaxed",children:"To link your wallet securely, your Limey and TrinEPay accounts must have matching credentials. If they don't match yet, or if you haven't logged in recently:"}),o.jsxs("div",{className:"text-left text-white/80 text-sm space-y-2 mb-4",children:[o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-yellow-400 font-bold",children:"1."}),o.jsxs("span",{children:["Update your Limey ",o.jsx("strong",{children:"OR"})," TrinEPay account so both have the same email and password"]})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-yellow-400 font-bold",children:"2."}),o.jsx("span",{children:"Log out of Limey completely"})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-yellow-400 font-bold",children:"3."}),o.jsx("span",{children:"Log back in with the matching credentials"})]}),o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-yellow-400 font-bold",children:"4."}),o.jsx("span",{children:"Return here to link your wallet"})]})]}),o.jsx("div",{className:"text-white/60 text-xs italic",children:"This ensures secure wallet linking and prevents authentication issues."})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(K,{onClick:()=>s("/settings"),className:"w-full bg-blue-600 hover:bg-blue-700",children:"Update Limey Account"}),o.jsx(K,{onClick:()=>window.open("https://theronm18.sg-host.com/manage-account/edit-account/","_blank"),variant:"outline",className:"w-full border-white/20 text-white hover:bg-white/10",children:"Update TrinEPay Account"}),o.jsx(K,{onClick:async()=>{await l(),s("/login")},variant:"outline",className:"w-full border-yellow-500/20 text-yellow-400 hover:bg-yellow-500/10",children:"Log Out & Log Back In"})]})]}),o.jsx(K,{type:"button",className:"w-full mt-2",variant:"ghost",onClick:()=>s("/profile"),disabled:e,children:"Cancel"})]})})}function pD(){const[e,t]=d.useState(""),[r,n]=d.useState(!1),[s,i]=d.useState(null),[a,l]=d.useState(null);d.useState(null);const[c,u]=d.useState(0),[f,h]=d.useState({per_transaction_limit:5e3,max_wallet_balance:2e4,max_monthly_transactions:2e4,user_role:"customer"}),[m,g]=d.useState(null),[y,p]=d.useState(null),[b,w]=d.useState([]),v=Ye(),{user:x,loading:_}=tt(),{loading:j,linked:N,refresh:S}=cp(x==null?void 0:x.id),k=async()=>{if(x){n(!0);try{const{data:V,error:q}=await Eu(x.id);V&&V.wallet_email?(g(!0),p(V.wallet_email)):g(!1);const re=await Mi(x.id);u(re);const $=await Kb();$&&h($);const{data:ee,error:G}=await C.from("trincredits_transactions").select("*").eq("user_id",x.id).order("created_at",{ascending:!1});G?console.error("Error fetching transactions:",G):w(ee)}catch(V){i(V.message)}finally{n(!1)}}};d.useEffect(()=>{k()},[x]);const U=async V=>{V.preventDefault(),n(!0),i(null),l(null);const q=parseFloat(e);if(isNaN(q)||q<=0){i("Please enter a valid amount"),n(!1);return}if(b.filter($=>$.transaction_type==="withdrawal"&&new Date($.created_at).getMonth()===new Date().getMonth()).reduce(($,ee)=>$+ee.amount,0)+q>f.max_monthly_transactions){i(`This transaction would exceed your monthly debit transaction limit of TT$${f.max_monthly_transactions.toLocaleString()}`),n(!1);return}if(c+q>f.max_wallet_balance){i(`This transaction would exceed your maximum wallet balance of TT$${f.max_wallet_balance.toLocaleString()}`),n(!1);return}if(q>f.per_transaction_limit){i(`Maximum per transaction for your TrinEPay account type is TT$${f.per_transaction_limit.toLocaleString()}`),n(!1);return}try{const $=await Yb({amount:q});await lo({userId:x.id,transactionType:"deposit",amount:q,description:"Deposit from TrinEPay",referenceId:$.transaction_id||$.id}),l("Deposit successful!"),t(""),k()}catch($){i($.message||"Failed to deposit")}finally{n(!1)}},W=async V=>{V.preventDefault(),n(!0),i(null),l(null);const q=parseFloat(e);if(isNaN(q)||q<=0){i("Please enter a valid amount"),n(!1);return}if(q>c){i("Insufficient Wallet Bal balance"),n(!1);return}if(q>f.per_transaction_limit){i(`Maximum per transaction for your TrinEPay account type is TT$${f.per_transaction_limit.toLocaleString()}`),n(!1);return}try{const re=await Qb({amount:q});await lo({userId:x.id,transactionType:"withdrawal",amount:q,description:"Withdrawal to TrinEPay",referenceId:re.transaction_id||re.id}),l("Withdrawal successful!"),t(""),k()}catch(re){i(re.message||"Failed to withdraw")}finally{n(!1)}};return j?o.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center text-white",children:"Loading..."}):N?o.jsxs("div",{className:"min-h-screen bg-black text-white",children:[o.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10 p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-2xl font-black text-white tracking-wider logo-text-glow",children:"Wallet"}),o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>v("/profile"),children:"← Back"})]})}),o.jsxs("div",{className:"pt-20 p-4",children:[o.jsxs("div",{className:"bg-black/90 p-6 rounded-lg w-full max-w-md mx-auto border border-white/10",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("div",{className:"text-lg",children:"Available in Limey"}),o.jsxs("div",{className:"text-3xl font-bold",children:["TT$",c.toFixed(2)]}),y&&o.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:["TrinEPay Email: ",y]}),o.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["Max per transaction: TT$",f.per_transaction_limit.toLocaleString()]}),o.jsxs("div",{className:"text-xs text-gray-400",children:["Max wallet balance: TT$",f.max_wallet_balance.toLocaleString()]}),o.jsxs("div",{className:"text-xs text-gray-400",children:["Monthly limit: TT$",f.max_monthly_transactions.toLocaleString()]})]}),o.jsxs(Tu,{defaultValue:"deposit",className:"w-full",children:[o.jsxs(cl,{className:"grid w-full grid-cols-2",children:[o.jsx(Kt,{value:"deposit",children:"Deposit"}),o.jsx(Kt,{value:"withdraw",children:"Withdraw"})]}),o.jsx(Hr,{value:"deposit",children:o.jsxs("form",{onSubmit:U,className:"space-y-4 mt-4",children:[o.jsx("input",{className:"w-full p-2 rounded bg-white text-black text-center font-semibold",type:"number",min:"100",max:"25000",step:"0.01",placeholder:"Amount (TT$100 - TT$25,000)",value:e,onChange:V=>t(V.target.value),required:!0}),o.jsx(K,{type:"submit",className:"w-full",disabled:r,children:r?"Processing...":"Deposit"})]})}),o.jsx(Hr,{value:"withdraw",children:o.jsxs("form",{onSubmit:W,className:"space-y-4 mt-4",children:[o.jsx("input",{className:"w-full p-2 rounded bg-white text-black text-center font-semibold",type:"number",min:"100",max:"25000",step:"0.01",placeholder:"Amount (TT$100 - TT$25,000)",value:e,onChange:V=>t(V.target.value),required:!0}),o.jsx(K,{type:"submit",className:"w-full",disabled:r,children:r?"Processing...":"Withdraw"})]})})]}),s&&o.jsx("div",{className:"text-red-400 mt-2 text-center",children:s}),a&&o.jsx("div",{className:"text-green-400 mt-2 text-center",children:a})]}),o.jsxs("div",{className:"mt-8",children:[o.jsx("h2",{className:"text-xl font-bold mb-4 text-center",children:"Transaction History"}),o.jsx("div",{className:"space-y-2",children:b.map(V=>o.jsxs("div",{className:"bg-black/90 p-4 rounded-lg border border-white/10 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:V.description||V.transaction_type}),o.jsx("div",{className:"text-sm text-gray-400",children:new Date(V.created_at).toLocaleString()})]}),o.jsxs("div",{className:`font-bold ${V.transaction_type==="deposit"?"text-green-400":"text-red-400"}`,children:[V.transaction_type==="deposit"?"+":"-","TT$",V.amount.toFixed(2)]})]},V.id))})]})]})]}):o.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:o.jsxs("div",{className:"bg-black/90 p-6 rounded-lg w-full max-w-xs border border-white/10 mt-20 text-center text-white",children:[o.jsx("div",{className:"mb-4",children:"Your account is not linked to TrinEPay."}),o.jsx(K,{onClick:()=>v("/wallet/link"),children:"Link TrinEPay Account"})]})})}const gD=({open:e,onClose:t,onVideoCaptured:r})=>{const n=d.useRef(null),[s,i]=d.useState(!1);d.useEffect(()=>{e&&n.current&&!s&&(n.current.value="",n.current.click(),i(!0)),e||i(!1)},[e]);const a=l=>{var u;const c=(u=l.target.files)==null?void 0:u[0];c&&r(c,URL.createObjectURL(c)),t()};return e?o.jsx("input",{ref:n,type:"file",accept:"video/*",capture:"environment",style:{display:"none"},onChange:a}):null},vD=e=>new Promise((t,r)=>{const n=document.createElement("video");n.preload="metadata",n.src=URL.createObjectURL(e),n.muted=!0,n.playsInline=!0,n.onloadedmetadata=()=>{const s=Math.round(n.duration);if(s>300){r(new Error("Video duration exceeds 5 minutes"));return}t(s)},n.onerror=s=>{r(new Error("Failed to load video for metadata extraction"))}}),xD=e=>new Promise((t,r)=>{const n=document.createElement("video");n.preload="metadata",n.src=URL.createObjectURL(e),n.muted=!0,n.playsInline=!0,n.onloadedmetadata=()=>{const s=Math.min(1,n.duration*.25);n.currentTime=s},n.onseeked=()=>{const s=document.createElement("canvas"),i=s.getContext("2d");s.width=320,s.height=568,i?(i.drawImage(n,0,0,s.width,s.height),s.toBlob(a=>{a?t(a):r(new Error("Failed to generate thumbnail"))},"image/jpeg",.8)):r(new Error("Failed to get canvas context"))},n.onerror=s=>r(new Error("Failed to load video for thumbnail generation"))}),wD=()=>{d.useRef(null);const[e,t]=d.useState(null),[r,n]=d.useState(null),[s,i]=d.useState(""),[a,l]=d.useState(""),[c,u]=d.useState(!1),[f,h]=d.useState("All"),[m,g]=d.useState(null),[y,p]=d.useState(null),[b,w]=d.useState(!1),{user:v}=tt(),{toast:x}=Ft(),_=fn(),j=Ye();d.useEffect(()=>{_.state&&_.state.file&&_.state.preview?(t(_.state.file),n(_.state.preview)):j("/upload")},[_.state,j]);const N=()=>{w(!0)},S=(U,W)=>{t(U),n(W),g(null),p(null),w(!1)},k=async()=>{if(!e||!v||!s.trim()){x({title:"Missing Information",description:"Please record a video and add a title",variant:"destructive"});return}u(!0);try{let U=0,W="";try{if(U=await vD(e),!Number.isFinite(U)||U<=0){x({title:"Invalid Video Duration",description:"Could not determine video duration. Please try a different video.",variant:"destructive"}),u(!1);return}}catch(Q){console.warn("Failed to extract duration:",Q),x({title:"Video Duration Issue",description:"Could not determine video duration. Continuing with upload.",variant:"warning"})}if(m){const Q=`${v.id}/thumbnails/cover_${Date.now()}.jpg`,{error:se}=await C.storage.from("limeytt-uploads").upload(Q,m);se?x({title:"Cover upload failed",description:se.message,variant:"destructive"}):W=Q}else try{const Q=await xD(e),se=new File([Q],"thumbnail.jpg",{type:"image/jpeg"}),O=`${v.id}/thumbnails/${Date.now()}.jpg`,{error:X}=await C.storage.from("limeytt-uploads").upload(O,se);X||(W=O)}catch(Q){console.warn("Failed to generate thumbnail:",Q)}const V=e.name.split(".").pop(),q=`${v.id}/${Date.now()}.${V}`,{data:re,error:$}=await C.storage.from("limeytt-uploads").upload(q,e);if($){x({title:"File Too Large",description:"Your video is too large. The maximum allowed size is 50 MB.",variant:"destructive"}),u(!1);return}const{data:{publicUrl:ee}}=C.storage.from("limeytt-uploads").getPublicUrl(q),{data:G,error:J}=await C.from("profiles").select("username, avatar_url").eq("user_id",v.id).single();if(J||!G)throw new Error("Could not fetch user profile for video upload.");const{data:P,error:F}=await C.from("videos").insert({title:s,description:a,video_url:ee,thumbnail_url:W,duration:U,user_id:v.id,category:f,username:G.username,avatar_url:G.avatar_url}).select();if(F)throw F;x({title:"Upload Successful! 🎉",description:"Your content has been uploaded to Limey",className:"bg-green-600 text-white border-green-700"}),t(null),n(null),i(""),l(""),h("All"),g(null),p(null),j("/upload")}catch(U){x({title:"Upload Failed",description:U.message||"Something went wrong",variant:"destructive"})}finally{u(!1)}};return o.jsxs("div",{className:"min-h-screen bg-background pb-20 pt-8",children:[o.jsx("div",{className:"max-w-2xl mx-auto p-4",children:r?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-full max-w-xs mx-auto aspect-[9/16] bg-black rounded-lg overflow-hidden flex items-center justify-center mb-4",children:o.jsx("video",{src:r,controls:!0,autoPlay:!0,loop:!0,className:"w-full h-full object-cover"})}),o.jsx("div",{className:"flex justify-center mt-4",children:o.jsx(K,{variant:"outline",onClick:N,children:"Recapture"})}),o.jsx(gD,{open:b,onClose:()=>w(!1),onVideoCaptured:S})]}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-64 border-2 border-dashed border-gray-400 rounded-lg",children:[o.jsx(K,{variant:"neon",onClick:N,children:"Go Back"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"No video found. Please record a video first."})]})}),r&&o.jsx(ke,{className:"mt-6 p-6 max-w-md mx-auto",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Cover Image"}),o.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[o.jsx("div",{className:"w-24 h-36 bg-black rounded overflow-hidden flex items-center justify-center border border-border",children:y?o.jsx("img",{src:y,alt:"Cover Preview",className:"w-full h-full object-cover"}):r?o.jsx("video",{src:r,className:"w-full h-full object-cover"}):o.jsx("span",{className:"text-white text-xs",children:"No Cover"})}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("input",{type:"file",accept:"image/*",className:"hidden",id:"cover-image-input",onChange:U=>{var V;const W=(V=U.target.files)==null?void 0:V[0];W&&(g(W),p(URL.createObjectURL(W)))}}),o.jsx("label",{htmlFor:"cover-image-input",children:o.jsx(K,{variant:"outline",asChild:!0,className:"cursor-pointer",children:o.jsx("span",{children:"Choose Cover Image"})})}),m&&o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>{g(null),p(null)},children:"Use Default Thumbnail"})]})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Choose a custom cover image or use the default video thumbnail."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Title *"}),o.jsx(Ze,{placeholder:"Give your content a catchy title...",value:s,onChange:U=>i(U.target.value),maxLength:100}),o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[s.length,"/100 characters"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Category"}),o.jsxs("select",{className:"w-full border rounded px-3 py-2 bg-background text-foreground",value:f||"All",onChange:U=>h(U.target.value),required:!0,children:[o.jsx("option",{value:"All",children:"All"}),o.jsx("option",{value:"Anime",children:"Anime"}),o.jsx("option",{value:"Bar Limes",children:"Bar Limes"}),o.jsx("option",{value:"Cartoon",children:"Cartoon"}),o.jsx("option",{value:"Carnival",children:"Carnival"}),o.jsx("option",{value:"Comedy",children:"Comedy"}),o.jsx("option",{value:"Dance",children:"Dance"}),o.jsx("option",{value:"Dancehall",children:"Dancehall"}),o.jsx("option",{value:"DIY Projects",children:"DIY Projects"}),o.jsx("option",{value:"Educational",children:"Educational"}),o.jsx("option",{value:"Events",children:"Events"}),o.jsx("option",{value:"Fete",children:"Fete"}),o.jsx("option",{value:"Funny Vids",children:"Funny Vids"}),o.jsx("option",{value:"HOW TOs",children:"HOW TOs"}),o.jsx("option",{value:"Local News",children:"Local News"}),o.jsx("option",{value:"Music Vids",children:"Music Vids"}),o.jsx("option",{value:"Parties",children:"Parties"}),o.jsx("option",{value:"Soca",children:"Soca"}),o.jsx("option",{value:"Trini Celebs",children:"Trini Celebs"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Description"}),o.jsx(Li,{placeholder:"Tell viewers about your content...",value:a,onChange:U=>l(U.target.value),maxLength:500,rows:4}),o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[a.length,"/500 characters"]})]}),o.jsxs("div",{className:"flex space-x-3 pt-4",children:[o.jsx(K,{variant:"outline",onClick:()=>j("/upload"),disabled:c,children:"Cancel"}),o.jsx(K,{variant:"neon",onClick:k,disabled:c||!s.trim(),className:"flex-1",children:c?"Uploading...":"Share to Limey 🚀"})]})]})})]})},yD=()=>{const{user:e,signOut:t}=tt(),r=Ye(),[n,s]=d.useState(!1),i=async()=>{e&&(s(!0),await C.from("profiles").update({deactivated:!1}).eq("user_id",e.id),s(!1),r("/"))};return d.useEffect(()=>{e||r("/login")},[e,r]),o.jsx("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-background",children:o.jsxs("div",{className:"max-w-md w-full bg-card rounded-lg shadow-lg p-8 flex flex-col items-center",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4 text-primary",children:"Account Deactivated"}),o.jsx("p",{className:"text-muted-foreground mb-8 text-center",children:"Your account is currently deactivated. To use Limey, please reactivate your account below."}),o.jsx(K,{onClick:i,disabled:n,className:"w-full mb-4",children:n?"Reactivating...":"Reactivate Account"}),o.jsx(K,{onClick:t,variant:"outline",className:"w-full",children:"Sign Out"})]})})},bD=()=>{var w;const{videoId:e}=ol(),t=Ye(),{user:r}=tt(),[n,s]=d.useState(null),[i,a]=d.useState(!0),[l,c]=d.useState(null),[u,f]=d.useState(0);d.useEffect(()=>{e&&(m(),h())},[e]);const h=async()=>{try{console.log("Testing video table access...");const{data:v,error:x}=await C.from("videos").select("id, title").limit(5);if(console.log("All videos test:",{allVideos:v,allError:x}),v&&v.length>0){console.log("Video table accessible. Sample videos:",v);const _=v.find(j=>j.id===e);if(_)console.log("Target video found in sample:",_);else{console.log("Target video NOT found in sample. Checking if it exists...");const{data:j,error:N}=await C.from("videos").select("id, title, user_id").eq("id",e);console.log("Specific video check:",{specificVideo:j,specificError:N})}}}catch(v){console.error("Error testing video query:",v)}};d.useEffect(()=>{if(n){const{generateVideoMetaTags:v}=require("@/utils/shareUtils"),x=v(n,u);document.title=x.title;const _=(N,S)=>{let k=document.querySelector(`meta[property="${N}"]`);k||(k=document.createElement("meta"),k.setAttribute("property",N),document.head.appendChild(k)),k.setAttribute("content",S)},j=(N,S)=>{let k=document.querySelector(`meta[name="${N}"]`);k||(k=document.createElement("meta"),k.setAttribute("name",N),document.head.appendChild(k)),k.setAttribute("content",S)};_("og:title",x.title),_("og:description",x.description),_("og:image",x.image),_("og:url",x.url),_("og:type",x.type),_("og:site_name",x.site_name),_("og:video",x.video_url),_("og:video:type",x.video_type),j("twitter:card","player"),j("twitter:title",x.title),j("twitter:description",x.description),j("twitter:image",x.image),j("twitter:creator",x.creator),j("twitter:player",x.video_url),j("twitter:player:width","405"),j("twitter:player:height","720"),j("description",x.description)}},[n,u]);const m=async()=>{try{a(!0),console.log("Fetching video with ID:",e);const{data:v,error:x}=await C.from("videos").select("id, title, description, video_url, thumbnail_url, category, user_id, created_at, like_count, view_count, username").eq("id",e).single();if(console.log("Video query result:",{videoData:v,videoError:x}),x){console.error("Error fetching video:",x),c(`Video not found: ${x.message}`);return}if(!v){console.error("No video data returned"),c("Video not found");return}console.log("Video data found:",v);const{data:_,error:j}=await C.from("profiles").select("username, avatar_url").eq("user_id",v.user_id).single();console.log("Profile query result:",{profileData:_,profileError:j});try{const{data:S,error:k}=await C.rpc("get_genuine_view_count",{video_uuid:e});console.log("View count result:",{genuineCount:S,viewError:k}),f(S||v.view_count||0)}catch(S){console.error("Error getting view count:",S),f(v.view_count||0)}const N={...v,profiles:_,username:_==null?void 0:_.username};console.log("Final video object:",N),s(N)}catch(v){console.error("Error fetching video:",v),c(`Failed to load video: ${v instanceof Error?v.message:"Unknown error"}`)}finally{a(!1)}},g=()=>{t(r?`/?video=${e}`:`/login?returnTo=${encodeURIComponent(`/?video=${e}`)}`)},y=()=>{t(`/?video=${e}`)},p=async()=>{if(!n)return;const v=`${window.location.origin}/video/${n.id}`;try{await navigator.share({title:n.title,text:n.description||`Check out this video by @${n.username||"user"}`,url:v})}catch{navigator.clipboard.writeText(v)}},b=v=>v<1e3?v.toString():v<1e6?(v/1e3).toFixed(1)+"K":(v/1e6).toFixed(1)+"M";return i?o.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:o.jsx("div",{className:"text-white",children:"Loading video..."})}):l||!n?o.jsx("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center text-white",children:o.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Video not found"}),o.jsx("p",{className:"text-white/70 mb-4",children:"This video may have been removed or is no longer available."}),l&&o.jsxs("div",{className:"bg-red-900/20 border border-red-500/20 rounded-lg p-4 mb-6",children:[o.jsxs("p",{className:"text-red-400 text-sm",children:["Debug info: ",l]}),o.jsxs("p",{className:"text-red-400 text-xs mt-2",children:["Video ID: ",e]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(K,{onClick:y,className:"w-full bg-green-600 hover:bg-green-700",children:"Try to Find in Feed"}),o.jsx(K,{onClick:()=>t("/"),variant:"outline",className:"w-full border-white/20 text-white hover:bg-white/10",children:"Go to Home Feed"})]})]})}):o.jsxs("div",{className:"min-h-screen bg-black text-white",children:[o.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/90 backdrop-blur-md border-b border-white/10 p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-2xl font-black text-white tracking-wider logo-text-glow",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:"900",letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))"},children:"Limey"}),o.jsx(K,{onClick:p,variant:"ghost",size:"sm",className:"text-white hover:bg-white/10",children:o.jsx(wi,{size:20})})]})}),o.jsx("div",{className:"pt-20 px-4",children:o.jsxs("div",{className:"max-w-md mx-auto",children:[o.jsxs("div",{className:"relative aspect-[9/16] bg-black rounded-lg overflow-hidden mb-4",children:[n.thumbnail_url?o.jsx("img",{src:n.thumbnail_url.startsWith("http")?n.thumbnail_url:C.storage.from("limeytt-uploads").getPublicUrl(n.thumbnail_url).data.publicUrl,alt:n.title,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-gray-800 flex items-center justify-center",children:o.jsx(xi,{size:48,className:"text-white/50"})}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:o.jsx("div",{className:"w-16 h-16 rounded-full bg-white/20 flex items-center justify-center",children:o.jsx(xi,{size:24,className:"text-white ml-1"})})}),o.jsxs("div",{className:"absolute bottom-4 left-4 flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-1 bg-black/70 rounded-full px-2 py-1",children:[o.jsx(vi,{size:16,className:"text-white"}),o.jsx("span",{className:"text-xs text-white font-semibold",children:n.like_count||0})]}),o.jsxs("div",{className:"flex items-center gap-1 bg-black/70 rounded-full px-2 py-1",children:[o.jsx(Mt,{size:16,className:"text-white"}),o.jsx("span",{className:"text-xs text-white font-semibold",children:b(u)})]})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs(kt,{className:"w-12 h-12",children:[o.jsx(Ct,{src:(w=n.profiles)==null?void 0:w.avatar_url,alt:n.username}),o.jsx(Et,{children:(n.username||"U").charAt(0).toUpperCase()})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-semibold",children:["@",n.username||"user"]}),o.jsx("p",{className:"text-sm text-white/70",children:"Creator"})]})]}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold mb-2",children:n.title}),n.description&&o.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:n.description})]}),n.category&&o.jsx("div",{className:"inline-block bg-white/10 rounded-full px-3 py-1",children:o.jsx("span",{className:"text-sm text-white/80",children:n.category})})]}),o.jsx("div",{className:"mt-8",children:o.jsx(K,{onClick:g,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3",size:"lg",children:r?"Watch in App":"Sign in to Watch"})}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-white/70 text-sm",children:"Join Limey to discover more amazing videos"})})]})})]})},_D=()=>{const e=Ye(),{user:t}=tt(),{toast:r}=Ft(),[n]=Km(),[s,i]=d.useState(null),[a,l]=d.useState(null),[c,u]=d.useState(0),[f,h]=d.useState(""),[m,g]=d.useState(""),[y,p]=d.useState(""),[b,w]=d.useState(""),[v,x]=d.useState(""),[_,j]=d.useState(""),[N,S]=d.useState(""),[k,U]=d.useState(1),[W,V]=d.useState(0),[q,re]=d.useState(!1),[$,ee]=d.useState(!1),[G,J]=d.useState(0),[P,F]=d.useState(30),[Q,se]=d.useState(null),O=d.useRef(null),X=d.useRef(null);d.useEffect(()=>{if(t){ie();const R=n.get("draft");R&&le(R)}},[t,n]);const ie=async()=>{try{const R=await Mi((t==null?void 0:t.id)||"");V(R)}catch(R){console.error("Error loading wallet balance:",R),V(0)}},le=async R=>{try{re(!0);const{data:B,error:Z}=await C.from("sponsored_ads").select("*").eq("id",R).eq("user_id",t==null?void 0:t.id).eq("status","draft").single();if(Z||!B){r({title:"Draft Not Found",description:"Could not load the draft. It may have been deleted.",variant:"destructive"});return}if(h(B.title||""),g(B.description||""),p(B.business_name||""),w(B.contact_number||""),x(B.website_url||""),j(B.support_email||""),S(B.price_info||""),U(B.boost_duration),u(B.duration||0),se(R),B.video_url){l(B.video_url);const ue=new File([""],"existing-video.mp4",{type:"video/mp4"});i(ue)}r({title:"Draft Loaded",description:"Continue editing your ad campaign",className:"bg-blue-600 text-white border-blue-700"})}catch(B){console.error("Error loading draft:",B),r({title:"Error Loading Draft",description:"Could not load the draft. Please try again.",variant:"destructive"})}finally{re(!1)}},T=R=>{var ve;const B=(ve=R.target.files)==null?void 0:ve[0];if(!B)return;if(console.log("Video file selected:",B.name,"Size:",B.size,"Type:",B.type),!B.type.startsWith("video/")){r({title:"Invalid File Type",description:"Please select a video file",variant:"destructive"});return}if(B.size>100*1024*1024){r({title:"File Too Large",description:"Video file must be under 100MB",variant:"destructive"});return}i(B);const Z=URL.createObjectURL(B);l(Z),console.log("Video preview URL created:",Z);const ue=document.createElement("video");ue.src=Z,ue.muted=!0,ue.playsInline=!0,ue.preload="metadata",ue.onloadedmetadata=()=>{const he=Math.round(ue.duration);console.log("Video duration loaded:",he),u(he),he>30?(ee(!0),J(0),F(Math.min(30,he))):(ee(!1),J(0),F(he))},ue.onerror=he=>{console.error("Error loading video metadata:",he),r({title:"Video Error",description:"Could not load video metadata. Please try a different video.",variant:"destructive"})},ue.load(),R.target.value=""},L=async()=>{if(!(!s||!a))try{re(!0);const R=document.createElement("video");R.src=a,await new Promise(ue=>{R.onloadedmetadata=ue});const B=document.createElement("canvas");if(!B.getContext("2d"))throw new Error("Could not get canvas context");B.width=R.videoWidth,B.height=R.videoHeight,u(P-G),ee(!1),r({title:"Video Trimmed",description:`Video trimmed to ${P-G} seconds`})}catch(R){console.error("Error trimming video:",R),r({title:"Trim Failed",description:"Could not trim video. Please try again.",variant:"destructive"})}finally{re(!1)}},Y=async R=>{try{if(console.log("Starting video upload:",{fileName:R.name,fileSize:R.size,fileType:R.type,userId:t==null?void 0:t.id}),R.name==="existing-video.mp4"&&R.size===0&&a)return console.log("Using existing video URL:",a),a;if(!R||R.size===0)return console.error("Invalid file provided for upload:",{file:R,hasFile:!!R,fileSize:R==null?void 0:R.size,fileName:R==null?void 0:R.name}),null;const B=R.name.split(".").pop(),Z=`${t==null?void 0:t.id}/sponsored/${Date.now()}.${B}`;console.log("Uploading to storage with filename:",Z);const{data:ue,error:ve}=await C.storage.from("limeytt-uploads").upload(Z,R);if(ve)return console.error("Supabase storage upload error:",ve),null;console.log("Upload successful, getting public URL");const{data:{publicUrl:he}}=C.storage.from("limeytt-uploads").getPublicUrl(Z);return console.log("Video uploaded successfully:",he),he}catch(B){return console.error("Exception in uploadVideoToStorage:",B),null}},D=async R=>{try{if(Q&&(s==null?void 0:s.name)==="existing-video.mp4"&&(s==null?void 0:s.size)===0)return null;console.log("Starting thumbnail generation for:",R);const B=document.createElement("video");B.src=R,B.muted=!0,B.playsInline=!0,B.preload="metadata",!R.startsWith("blob:")&&!R.includes(window.location.hostname)&&(B.crossOrigin="anonymous"),await new Promise((he,Ie)=>{const Fe=setTimeout(()=>{Ie(new Error("Video loading timeout"))},1e4);B.onloadedmetadata=()=>{clearTimeout(Fe),console.log("Video metadata loaded, duration:",B.duration),he(B)},B.onerror=We=>{clearTimeout(Fe),console.error("Video loading error:",We),Ie(new Error("Failed to load video"))},B.load()});const Z=Math.min(1,B.duration*.1);B.currentTime=Z,await new Promise((he,Ie)=>{const Fe=setTimeout(()=>{Ie(new Error("Video seek timeout"))},5e3);B.onseeked=()=>{clearTimeout(Fe),console.log("Video seeked to:",Z),he(B)},B.onerror=We=>{clearTimeout(Fe),console.error("Video seek error:",We),Ie(new Error("Failed to seek video"))}});const ue=document.createElement("canvas");ue.width=320,ue.height=568;const ve=ue.getContext("2d");if(!ve)throw new Error("Could not get canvas context");return ve.drawImage(B,0,0,ue.width,ue.height),console.log("Video frame drawn to canvas"),new Promise(he=>{ue.toBlob(async Ie=>{if(!Ie){console.error("Failed to create thumbnail blob"),he(null);return}console.log("Thumbnail blob created, size:",Ie.size);try{const Fe=new File([Ie],"thumbnail.jpg",{type:"image/jpeg"}),bt=`${t==null?void 0:t.id}/sponsored/thumbnails/${Date.now()}.jpg`;console.log("Uploading thumbnail to:",bt);const{data:$t,error:Yt}=await C.storage.from("limeytt-uploads").upload(bt,Fe);if(Yt){console.error("Error uploading thumbnail:",Yt),he(null);return}const{data:{publicUrl:hr}}=C.storage.from("limeytt-uploads").getPublicUrl(bt);console.log("Thumbnail uploaded successfully:",hr),he(hr)}catch(Fe){console.error("Error in thumbnail upload process:",Fe),he(null)}},"image/jpeg",.9)})}catch(B){return console.error("Error generating thumbnail:",B),null}},M=async()=>{if(!Q){i(null),l(null),h(""),g(""),p(""),w(""),x(""),j(""),S(""),u(0),U(1),ee(!1),J(0),F(30),r({title:"Form Cleared",description:"All form data has been cleared.",className:"bg-blue-600 text-white border-blue-700"});return}try{re(!0);const{error:R}=await C.from("sponsored_ads").delete().eq("id",Q).eq("user_id",t==null?void 0:t.id);if(R)throw new Error(R.message);r({title:"Draft Deleted",description:"Your draft has been deleted successfully.",className:"bg-red-600 text-white border-red-700"}),e("/profile")}catch(R){console.error("Error deleting draft:",R),r({title:"Delete Failed",description:R instanceof Error?R.message:"Could not delete draft. Please try again.",variant:"destructive"})}finally{re(!1)}},z=async()=>{if(!s||!f.trim()){r({title:"Missing Information",description:"Please add a video and title to save as draft",variant:"destructive"});return}try{re(!0);const R=await Y(s);if(!R)throw new Error("Failed to upload video");let B=null;try{B=await D(R),B||console.log("Thumbnail generation returned null, will proceed without thumbnail")}catch(Z){console.error("Thumbnail generation failed:",Z)}if(Q){const{data:Z}=await C.from("sponsored_ads").select("thumbnail_url").eq("id",Q).single(),ue=B||(Z==null?void 0:Z.thumbnail_url),{error:ve}=await C.from("sponsored_ads").update({title:f,description:m,video_url:R,thumbnail_url:ue,duration:c,business_name:y,contact_number:b,website_url:v,support_email:_,price_info:N,boost_duration:k,status:"draft",updated_at:new Date().toISOString()}).eq("id",Q);if(ve)throw new Error(ve.message||"Failed to update draft");r({title:"Draft Updated! 📝",description:"Your draft has been updated and saved to My Ads tab.",className:"bg-blue-600 text-white border-blue-700"})}else{const{success:Z,error:ue}=await Dd({title:f,description:m,video_url:R,thumbnail_url:B||void 0,duration:c,business_name:y,contact_number:b,website_url:v,support_email:_,price_info:N,boost_duration:k,user_id:(t==null?void 0:t.id)||"",status:"draft"});if(!Z)throw new Error(ue||"Failed to save draft");r({title:"Draft Saved! 📝",description:"Your ad has been saved as a draft in My Ads tab.",className:"bg-blue-600 text-white border-blue-700"})}e("/profile")}catch(R){console.error("Error saving draft:",R),r({title:"Save Failed",description:R instanceof Error?R.message:"Could not save draft. Please try again.",variant:"destructive"})}finally{re(!1)}},ae=async()=>{if(!s||!f.trim())return r({title:"Missing Information",description:"Please add a video and title to save as draft",variant:"destructive"}),!1;try{if(re(!0),console.log("handleSaveToDrafts - Starting save process"),console.log("Video file state:",{videoFile:s?{name:s.name,size:s.size,type:s.type}:null,videoPreview:a,editingDraftId:Q}),!s)throw new Error("No video file selected");const R=await Y(s);if(!R)throw new Error("Failed to upload video");const B=await D(R),{success:Z,adId:ue,error:ve}=await Dd({title:f,description:m,video_url:R,thumbnail_url:B||void 0,duration:c,business_name:y,contact_number:b,website_url:v,support_email:_,price_info:N,boost_duration:k,user_id:(t==null?void 0:t.id)||"",status:"draft"});if(!Z||!ue)throw new Error(ve||"Failed to save draft");return r({title:"Draft Saved! 📝",description:"Your ad has been saved as a draft. Add funds to your wallet to submit for approval.",className:"bg-blue-600 text-white border-blue-700"}),!0}catch(R){return console.error("Error saving draft:",R),r({title:"Failed to Save Draft",description:R instanceof Error?R.message:"Could not save draft. Please try again.",variant:"destructive"}),!1}finally{re(!1)}},me=async()=>{if(!s||!f.trim()){r({title:"Missing Information",description:"Please add a video and title",variant:"destructive"});return}const R=sa[k];if(W<R){await ae()&&e("/profile");return}try{re(!0);const B=await Xb((t==null?void 0:t.id)||"",R);if(!B.success)throw new Error(B.error||"Failed to deduct payment from wallet");if(console.log("handleBoostSubmit - Starting boost submission"),console.log("Video file state:",{videoFile:s?{name:s.name,size:s.size,type:s.type}:null,videoPreview:a,editingDraftId:Q}),!s)throw new Error("No video file selected");const Z=await Y(s);if(!Z){const{recordTrincreditsTransaction:We}=await In(async()=>{const{recordTrincreditsTransaction:bt}=await Promise.resolve().then(()=>Bv);return{recordTrincreditsTransaction:bt}},void 0);throw await We({userId:(t==null?void 0:t.id)||"",transactionType:"refund",amount:R,description:"Boost Refund - Video Upload Failed",referenceId:`failed_upload_${Date.now()}`}),new Error("Failed to upload video")}let ue=null;try{ue=await D(Z),ue||console.log("Thumbnail generation returned null, will proceed without thumbnail")}catch(We){console.error("Thumbnail generation failed:",We)}let ve,he,Ie;if(Q){const{data:We}=await C.from("sponsored_ads").select("thumbnail_url").eq("id",Q).single(),bt=ue||(We==null?void 0:We.thumbnail_url),{error:$t}=await C.from("sponsored_ads").update({title:f,description:m,video_url:Z,thumbnail_url:bt,duration:c,business_name:y,contact_number:b,website_url:v,support_email:_,price_info:N,boost_duration:k,status:"pending",updated_at:new Date().toISOString()}).eq("id",Q);ve=!$t,he=Q,Ie=$t==null?void 0:$t.message}else{const We=await Dd({title:f,description:m,video_url:Z,thumbnail_url:ue||void 0,duration:c,business_name:y,contact_number:b,website_url:v,support_email:_,price_info:N,boost_duration:k,user_id:(t==null?void 0:t.id)||"",status:"pending"});ve=We.success,he=We.adId,Ie=We.error}if(!ve||!he){const{recordTrincreditsTransaction:We}=await In(async()=>{const{recordTrincreditsTransaction:bt}=await Promise.resolve().then(()=>Bv);return{recordTrincreditsTransaction:bt}},void 0);throw await We({userId:(t==null?void 0:t.id)||"",transactionType:"refund",amount:R,description:"Boost Refund - Ad Creation Failed",referenceId:`failed_ad_${Date.now()}`}),new Error(Ie||"Failed to create sponsored ad")}const Fe=await JA(R,(t==null?void 0:t.id)||"",he);Fe.success||console.error("Failed to record boost transaction:",Fe.error),r({title:Q?"Draft Updated! 🚀":"Boost Submitted! 🚀",description:Q?"Your draft has been updated and submitted for approval":"Your boost campaign has been submitted for approval",className:"bg-green-600 text-white border-green-700"}),e("/profile")}catch(B){console.error("Error submitting boost:",B),r({title:"Boost Failed",description:B instanceof Error?B.message:"Could not submit boost. Please try again.",variant:"destructive"})}finally{re(!1)}},we=sa[k],I=W>=we;return o.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[o.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10 p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:o.jsx(Tn,{size:20,className:"text-white"})}),o.jsx("span",{className:"text-2xl font-black text-white tracking-wider logo-text-glow",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:"900",letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))"},children:Q?"Edit Draft":"Boost"})]}),o.jsx(K,{variant:"outline",size:"sm",onClick:()=>e("/ad-stats"),className:"text-white border-white/50 hover:bg-white/10",children:"My Campaigns"})]})}),o.jsx("div",{className:"pt-24 p-4",children:o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[o.jsx(ke,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"TrinECredits:"}),o.jsxs(vt,{variant:"secondary",className:"bg-green-900 text-green-400",children:["TT$",W.toFixed(2)]})]})}),o.jsxs(ke,{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Upload Your 30-Second Ad"}),a?o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"relative w-full max-w-xs mx-auto aspect-[9/16] bg-black rounded-lg overflow-hidden",children:o.jsx("video",{ref:X,src:a,className:"w-full h-full object-cover",controls:!0})}),o.jsxs("div",{className:"text-center",children:[o.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Duration: ",c," seconds"]}),c>30&&o.jsx(vt,{variant:"destructive",className:"mb-2",children:"Video too long - needs trimming"})]})]}):o.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-8 text-center",children:[o.jsx(fC,{size:48,className:"mx-auto mb-4 text-muted-foreground"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Upload your promotional video (max 30 seconds)"}),o.jsx("input",{type:"file",accept:"video/*,video/mp4,video/mov,video/avi,video/webm",className:"hidden",ref:O,onChange:T}),o.jsx(K,{onClick:()=>{var R;return(R=O.current)==null?void 0:R.click()},children:"Select Video"})]})]}),$&&o.jsxs(ke,{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Trim Video to 30 Seconds"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"Start Time (seconds)"}),o.jsx(Ze,{type:"number",min:"0",max:c-1,value:G,onChange:R=>J(Number(R.target.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"End Time (seconds)"}),o.jsx(Ze,{type:"number",min:G+1,max:Math.min(G+30,c),value:P,onChange:R=>F(Number(R.target.value))})]}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Trimmed duration: ",P-G," seconds"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(K,{onClick:L,disabled:q,children:"Apply Trim"}),o.jsx(K,{variant:"outline",onClick:()=>ee(!1),children:"Cancel"})]})]})]}),o.jsxs(ke,{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Ad Details"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"Ad Title *"}),o.jsx(Ze,{placeholder:"Enter your ad title",value:f,onChange:R=>h(R.target.value),maxLength:100})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"Ad Description"}),o.jsx(Li,{placeholder:"Describe your product or service",value:m,onChange:R=>g(R.target.value),maxLength:500})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"Business Name"}),o.jsx(Ze,{placeholder:"Your business name",value:y,onChange:R=>p(R.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"Contact Number"}),o.jsx(Ze,{placeholder:"Phone number for customers to reach you",value:b,onChange:R=>w(R.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"Website URL"}),o.jsx(Ze,{placeholder:"https://your-website.com",value:v,onChange:R=>x(R.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"Support Email"}),o.jsx(Ze,{type:"email",placeholder:"support@your-business.com",value:_,onChange:R=>j(R.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium",children:"Price Information"}),o.jsx(Ze,{placeholder:"e.g., Starting from $50, Free consultation",value:N,onChange:R=>S(R.target.value)})]})]})]}),o.jsxs(ke,{className:"p-6",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Select Boost Duration"}),o.jsx("div",{className:"space-y-3",children:Object.entries(sa).map(([R,B])=>o.jsxs("label",{className:"flex items-center justify-between p-3 border rounded-lg cursor-pointer hover:bg-muted/50",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"radio",name:"duration",value:R,checked:k===Number(R),onChange:Z=>U(Number(Z.target.value)),className:"text-primary"}),o.jsxs("span",{className:"font-medium",children:[R," ",Number(R)===1?"Day":"Days"]})]}),o.jsxs(vt,{variant:"outline",children:["TT$",B]})]},R))}),o.jsxs("div",{className:"mt-4 p-3 bg-muted/50 rounded-lg",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"font-medium",children:"Total Cost:"}),o.jsxs("span",{className:"text-lg font-bold text-primary",children:["TT$",we.toFixed(2)]})]}),!I&&o.jsxs("p",{className:"text-sm text-destructive mt-2",children:["Insufficient balance. You need TT$",(we-W).toFixed(2)," more."]})]})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("div",{className:"flex gap-2 flex-1",children:[o.jsx(K,{onClick:M,disabled:q,variant:"destructive",className:"flex-1",children:Q?"Delete":"Clear"}),o.jsx(K,{onClick:z,disabled:q||!s||!f.trim(),variant:"outline",className:"flex-1",children:q?"Saving...":"Save"})]}),o.jsx(K,{onClick:me,disabled:q||!s||!f.trim(),className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:q?"Submitting...":`Submit Boost - TT$${sa[k]}`})]}),o.jsxs(ke,{className:"p-4 bg-muted/50",children:[o.jsx("h4",{className:"font-medium mb-2",children:"💡 Boost Tips"}),o.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[o.jsx("li",{children:"• Keep your video under 30 seconds for maximum impact"}),o.jsx("li",{children:"• Include clear contact information for better results"}),o.jsx("li",{children:"• Your ad will be reviewed before going live"}),o.jsx("li",{children:"• Ads appear randomly in the home feed to reach more users"})]})]})]})}),o.jsx(nr,{})]})},jD=()=>{const e=Ye(),{user:t,isAdmin:r}=tt(),{toast:n}=Ft(),[s,i]=d.useState([]),[a,l]=d.useState(!0),[c,u]=d.useState(null);d.useEffect(()=>{if(!r){e("/");return}f()},[r,e]);const f=async()=>{try{l(!0),console.log("Admin dashboard loading ads...");const _=await XA();console.log("Admin dashboard received ads:",(_==null?void 0:_.length)||0),i(_)}catch(_){console.error("Error loading ads:",_),n({title:"Error",description:"Failed to load sponsored ads",variant:"destructive"})}finally{l(!1)}},h=async _=>{u(_);try{const j=await ZA(_);if(j.success)n({title:"Ad Approved",description:"The sponsored ad has been approved and will go live",className:"bg-green-600 text-white border-green-700"}),f();else throw new Error(j.error)}catch{n({title:"Error",description:"Failed to approve ad",variant:"destructive"})}finally{u(null)}},m=async _=>{u(_);try{const j=await e4(_);if(j.success)n({title:"Ad Rejected",description:"The sponsored ad has been rejected",className:"bg-red-600 text-white border-red-700"}),f();else throw new Error(j.error)}catch{n({title:"Error",description:"Failed to reject ad",variant:"destructive"})}finally{u(null)}},g=_=>{switch(_){case"pending":return"bg-yellow-900 text-yellow-400";case"approved":return"bg-blue-900 text-blue-400";case"active":return"bg-green-900 text-green-400";case"expired":return"bg-gray-900 text-gray-400";case"rejected":return"bg-red-900 text-red-400";case"draft":return"bg-purple-900 text-purple-400";default:return"bg-gray-900 text-gray-400"}},y=_=>new Date(_).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),p=()=>s.filter(_=>_.status!=="draft"&&_.status!=="rejected").reduce((_,j)=>_+j.boost_cost,0),b=()=>s.filter(_=>_.status==="active").length,w=()=>s.reduce((_,j)=>_+j.impressions,0),v=()=>s.reduce((_,j)=>_+j.clicks,0),x=_=>s.filter(j=>j.status===_);return r?o.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[o.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10 p-4",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:o.jsx(Tn,{size:20,className:"text-white"})}),o.jsx("span",{className:"text-2xl font-black text-white tracking-wider logo-text-glow",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:"900",letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))"},children:"Admin Dashboard"})]})}),o.jsx("div",{className:"pt-24 p-4",children:o.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsx(ke,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Em,{size:20,className:"text-green-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Revenue"}),o.jsxs("p",{className:"text-lg font-bold text-green-400",children:["TT$",p().toFixed(2)]})]})]})}),o.jsx(ke,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ss,{size:20,className:"text-blue-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Ads"}),o.jsx("p",{className:"text-lg font-bold text-blue-400",children:b()})]})]})}),o.jsx(ke,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Mt,{size:20,className:"text-purple-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Impressions"}),o.jsx("p",{className:"text-lg font-bold text-purple-400",children:w().toLocaleString()})]})]})}),o.jsx(ke,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-orange-400",children:"👆"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Clicks"}),o.jsx("p",{className:"text-lg font-bold text-orange-400",children:v().toLocaleString()})]})]})})]}),o.jsx(ke,{className:"p-6",children:o.jsxs(Tu,{defaultValue:"pending",className:"w-full",children:[o.jsxs(cl,{className:"grid w-full grid-cols-5",children:[o.jsxs(Kt,{value:"pending",className:"data-[state=active]:bg-green-600 data-[state=active]:text-white",title:"Pending Ads",children:["⏳ ",x("pending").length]}),o.jsxs(Kt,{value:"active",className:"data-[state=active]:bg-green-600 data-[state=active]:text-white",title:"Active Ads",children:["🟢 ",x("active").length]}),o.jsxs(Kt,{value:"approved",className:"data-[state=active]:bg-green-600 data-[state=active]:text-white",title:"Approved Ads",children:["✅ ",x("approved").length]}),o.jsxs(Kt,{value:"expired",className:"data-[state=active]:bg-green-600 data-[state=active]:text-white",title:"Expired Ads",children:["⏰ ",x("expired").length]}),o.jsxs(Kt,{value:"rejected",className:"data-[state=active]:bg-green-600 data-[state=active]:text-white",title:"Rejected Ads",children:["❌ ",x("rejected").length]})]}),["pending","active","approved","expired","rejected"].map(_=>o.jsx(Hr,{value:_,className:"space-y-4",children:a?o.jsx("div",{className:"text-center py-8",children:o.jsx("p",{className:"text-muted-foreground",children:"Loading ads..."})}):x(_).length===0?o.jsx("div",{className:"text-center py-8",children:o.jsxs("p",{className:"text-muted-foreground",children:["No ",_," ads found"]})}):x(_).map(j=>{var N;return o.jsx(ke,{className:"p-4",children:o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"w-24 h-32 bg-black rounded overflow-hidden flex-shrink-0",children:j.thumbnail_url?o.jsx("img",{src:j.thumbnail_url,alt:j.title,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center text-muted-foreground",children:"No thumbnail"})}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-white",children:j.title}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["by @",((N=j.profiles)==null?void 0:N.username)||"Unknown"]})]}),o.jsx(vt,{className:g(j.status),children:j.status.toUpperCase()})]}),j.description&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:j.description}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),o.jsxs("span",{className:"ml-1 text-white",children:[j.duration,"s"]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Boost:"}),o.jsxs("span",{className:"ml-1 text-white",children:[j.boost_duration," days"]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Cost:"}),o.jsxs("span",{className:"ml-1 text-green-400",children:["TT$",j.boost_cost]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Created:"}),o.jsx("span",{className:"ml-1 text-white",children:y(j.created_at)})]})]}),(j.impressions>0||j.clicks>0)&&o.jsxs("div",{className:"flex gap-4 text-xs",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Impressions:"}),o.jsx("span",{className:"ml-1 text-purple-400",children:j.impressions.toLocaleString()})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Clicks:"}),o.jsx("span",{className:"ml-1 text-orange-400",children:j.clicks.toLocaleString()})]}),j.impressions>0&&o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"CTR:"}),o.jsxs("span",{className:"ml-1 text-blue-400",children:[(j.clicks/j.impressions*100).toFixed(2),"%"]})]})]}),(j.business_name||j.contact_number||j.website_url)&&o.jsxs("div",{className:"text-xs space-y-1 pt-2 border-t border-border",children:[j.business_name&&o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Business:"}),o.jsx("span",{className:"ml-1 text-white",children:j.business_name})]}),j.contact_number&&o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Contact:"}),o.jsx("span",{className:"ml-1 text-white",children:j.contact_number})]}),j.website_url&&o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Website:"}),o.jsx("span",{className:"ml-1 text-blue-400",children:j.website_url})]})]}),j.status==="pending"&&o.jsxs("div",{className:"flex gap-2 pt-2",children:[o.jsxs(K,{size:"sm",variant:"default",onClick:()=>h(j.id),disabled:c===j.id,className:"bg-green-600 hover:bg-green-700",children:[o.jsx(km,{size:16,className:"mr-1"}),"Approve"]}),o.jsxs(K,{size:"sm",variant:"destructive",onClick:()=>m(j.id),disabled:c===j.id,children:[o.jsx(Mr,{size:16,className:"mr-1"}),"Reject"]})]})]})]})},j.id)})},_))]})})]})}),o.jsx(nr,{})]}):null},SD=()=>{const e=Ye(),{user:t}=tt(),{toast:r}=Ft(),[n,s]=d.useState([]),[i,a]=d.useState(!0);d.useEffect(()=>{t&&l()},[t]);const l=async()=>{try{a(!0);const b=(await e_((t==null?void 0:t.id)||"")||[]).map(w=>({id:w.id,title:w.title,description:w.description,video_url:w.video_url,thumbnail_url:w.thumbnail_url,duration:w.duration||0,business_name:w.business_name,boost_duration:w.boost_duration,boost_cost:w.boost_cost,campaign_start:w.campaign_start,campaign_end:w.campaign_end,status:w.status,impressions:w.impressions||0,clicks:w.clicks||0,created_at:w.created_at}));s(b)}catch(p){console.error("Error loading ads:",p),r({title:"Error",description:"Failed to load your ad campaigns",variant:"destructive"})}finally{a(!1)}},c=p=>{switch(p){case"pending":return"bg-yellow-900 text-yellow-400";case"approved":return"bg-blue-900 text-blue-400";case"active":return"bg-green-900 text-green-400";case"expired":return"bg-gray-900 text-gray-400";case"rejected":return"bg-red-900 text-red-400";case"draft":return"bg-purple-900 text-purple-400";default:return"bg-gray-900 text-gray-400"}},u=p=>new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),f=(p,b)=>b===0?0:(p/b*100).toFixed(2),h=()=>n.filter(p=>p.status!=="draft"&&p.status!=="rejected").reduce((p,b)=>p+b.boost_cost,0),m=()=>n.reduce((p,b)=>p+b.impressions,0),g=()=>n.reduce((p,b)=>p+b.clicks,0),y=()=>n.filter(p=>p.status==="active").length;return o.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[o.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10 p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"p-2",children:o.jsx(Tn,{size:20,className:"text-white"})}),o.jsx("span",{className:"text-2xl font-black text-white tracking-wider logo-text-glow absolute left-1/2 transform -translate-x-1/2",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:"900",letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))"},children:"Ad Stats"}),o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>e("/profile"),className:"p-2",children:o.jsx(Mr,{size:20,className:"text-white"})})]})}),o.jsx("div",{className:"pt-24 p-4",children:o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsx(ke,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Em,{size:20,className:"text-green-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Spent"}),o.jsxs("p",{className:"text-lg font-bold text-green-400",children:["TT$",h().toFixed(2)]})]})]})}),o.jsx(ke,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(_d,{size:20,className:"text-blue-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Ads"}),o.jsx("p",{className:"text-lg font-bold text-blue-400",children:y()})]})]})}),o.jsx(ke,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Mt,{size:20,className:"text-purple-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Impressions"}),o.jsx("p",{className:"text-lg font-bold text-purple-400",children:m().toLocaleString()})]})]})}),o.jsx(ke,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ay,{size:20,className:"text-orange-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Clicks"}),o.jsx("p",{className:"text-lg font-bold text-orange-400",children:g().toLocaleString()})]})]})})]}),o.jsxs(ke,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-white",children:"My Campaigns"}),o.jsx(K,{variant:"neon",size:"sm",onClick:()=>e("/boost"),children:"Create New Campaign"})]}),i?o.jsx("div",{className:"text-center py-8",children:o.jsx("p",{className:"text-muted-foreground",children:"Loading your campaigns..."})}):n.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(_d,{size:48,className:"mx-auto mb-4 text-muted-foreground"}),o.jsx("h3",{className:"text-lg font-semibold mb-2 text-white",children:"No campaigns yet"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first boost campaign to start promoting your business"}),o.jsx(K,{variant:"neon",onClick:()=>e("/boost"),children:"Create Campaign"})]}):o.jsx("div",{className:"space-y-4",children:n.map(p=>o.jsx(ke,{className:"p-4 cursor-pointer hover:bg-muted/20 transition-colors",onClick:()=>{p.status==="draft"?e(`/boost?draft=${p.id}`):e(`/campaign/${p.id}`)},children:o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("div",{className:"w-20 h-28 bg-black rounded overflow-hidden flex-shrink-0 relative",children:[p.thumbnail_url?o.jsx("img",{src:p.thumbnail_url,alt:p.title,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center text-muted-foreground",children:o.jsx(_d,{size:24})}),p.status==="draft"&&o.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center",children:o.jsx("div",{className:"bg-purple-600 text-white px-2 py-1 rounded text-xs font-bold",children:"DRAFT"})})]}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-white",children:p.title}),p.business_name&&o.jsx("p",{className:"text-sm text-muted-foreground",children:p.business_name})]}),o.jsx(vt,{className:c(p.status),children:p.status.toUpperCase()})]}),p.description&&o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:p.description}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2 text-xs",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),o.jsxs("span",{className:"ml-1 text-white",children:[p.boost_duration," days"]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Cost:"}),o.jsxs("span",{className:"ml-1 text-green-400",children:["TT$",p.boost_cost]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Impressions:"}),o.jsx("span",{className:"ml-1 text-purple-400",children:p.impressions.toLocaleString()})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Clicks:"}),o.jsx("span",{className:"ml-1 text-orange-400",children:p.clicks.toLocaleString()})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"CTR:"}),o.jsxs("span",{className:"ml-1 text-blue-400",children:[f(p.clicks,p.impressions),"%"]})]})]}),(p.campaign_start||p.campaign_end)&&o.jsxs("div",{className:"flex gap-4 text-xs",children:[p.campaign_start&&o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Started:"}),o.jsx("span",{className:"ml-1 text-white",children:u(p.campaign_start)})]}),p.campaign_end&&o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Ends:"}),o.jsx("span",{className:"ml-1 text-white",children:u(p.campaign_end)})]})]}),p.status==="active"&&p.impressions>0&&o.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[o.jsx(ss,{size:16,className:"text-green-400"}),o.jsx("span",{className:"text-sm text-green-400",children:p.impressions>100?"Performing well":"Building momentum"})]})]})]})},p.id))})]}),n.length>0&&o.jsxs(ke,{className:"p-4 bg-muted/50",children:[o.jsx("h4",{className:"font-medium mb-2",children:"📈 Performance Tips"}),o.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[o.jsx("li",{children:"• Higher CTR (Click-Through Rate) indicates more engaging content"}),o.jsx("li",{children:"• Active campaigns get more impressions during peak hours (6-9 PM)"}),o.jsx("li",{children:"• Include clear contact information for better conversion"}),o.jsx("li",{children:"• Longer campaigns (7+ days) typically perform better"})]})]})]})}),o.jsx(nr,{})]})},ND=()=>{const e=Ye(),{campaignId:t}=ol(),{user:r}=tt(),{toast:n}=Ft(),[s,i]=d.useState(null),[a,l]=d.useState(!0),[c,u]=d.useState(!1);d.useEffect(()=>{t&&r&&f()},[t,r]);const f=async()=>{try{l(!0);const{data:p,error:b}=await C.from("sponsored_ads").select("*").eq("id",t).eq("user_id",r==null?void 0:r.id).single();if(b){console.error("Error loading campaign:",b),n({title:"Error",description:"Failed to load campaign details",variant:"destructive"}),e("/ad-stats");return}i(p)}catch(p){console.error("Error loading campaign:",p),n({title:"Error",description:"Failed to load campaign details",variant:"destructive"}),e("/ad-stats")}finally{l(!1)}},h=p=>{switch(p){case"pending":return"bg-yellow-900 text-yellow-400";case"approved":return"bg-blue-900 text-blue-400";case"active":return"bg-green-900 text-green-400";case"expired":return"bg-gray-900 text-gray-400";case"rejected":return"bg-red-900 text-red-400";case"draft":return"bg-purple-900 text-purple-400";default:return"bg-gray-900 text-gray-400"}},m=p=>new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),g=(p,b)=>b===0?0:(p/b*100).toFixed(2),y=()=>{const p=document.querySelector("video");p&&(p.paused?(p.play(),u(!0)):(p.pause(),u(!1)))};return a?o.jsx("div",{className:"min-h-screen bg-background pb-20 flex items-center justify-center",children:o.jsx("p",{className:"text-muted-foreground",children:"Loading campaign..."})}):s?o.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[o.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/20 backdrop-blur-md border-b border-white/10 p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(K,{variant:"ghost",size:"sm",onClick:()=>e("/ad-stats"),className:"p-2",children:o.jsx(Tn,{size:20,className:"text-white"})}),o.jsx("span",{className:"text-2xl font-black text-white tracking-wider logo-text-glow",style:{fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',fontWeight:"900",letterSpacing:"0.15em",filter:"drop-shadow(0 0 8px hsl(120, 100%, 50%))"},children:"Campaign Details"})]}),(s==null?void 0:s.status)==="draft"&&o.jsx(K,{variant:"outline",size:"sm",onClick:()=>e(`/boost?draft=${s.id}`),className:"text-white border-white/50 hover:bg-white/10",children:"Edit"})]})}),o.jsx("div",{className:"pt-24 p-4",children:o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[o.jsx(ke,{className:"p-6",children:o.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[o.jsxs("div",{className:"relative w-full md:w-80 aspect-[9/16] bg-black rounded-lg overflow-hidden",children:[o.jsx("div",{className:"absolute top-4 left-4 z-10",children:o.jsx(vt,{className:h(s.status),children:s.status.toUpperCase()})}),o.jsx("video",{src:s.video_url,className:"w-full h-full object-cover",controls:!1,onClick:y}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center cursor-pointer",onClick:y,children:o.jsx("div",{className:"bg-black/50 rounded-full p-4",children:c?o.jsx(cC,{size:32,className:"text-white"}):o.jsx(xi,{size:32,className:"text-white"})})})]}),o.jsxs("div",{className:"flex-1 space-y-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:s.title}),s.description&&o.jsx("p",{className:"text-muted-foreground",children:s.description})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx(Em,{size:20,className:"text-green-400 mx-auto mb-1"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Cost"}),o.jsxs("p",{className:"font-bold text-green-400",children:["TT$",s.boost_cost]})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(nC,{size:20,className:"text-blue-400 mx-auto mb-1"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Duration"}),o.jsxs("p",{className:"font-bold text-blue-400",children:[s.boost_duration," days"]})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(Mt,{size:20,className:"text-purple-400 mx-auto mb-1"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Impressions"}),o.jsx("p",{className:"font-bold text-purple-400",children:s.impressions.toLocaleString()})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(ay,{size:20,className:"text-orange-400 mx-auto mb-1"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Clicks"}),o.jsx("p",{className:"font-bold text-orange-400",children:s.clicks.toLocaleString()})]})]}),s.impressions>0&&o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Click-Through Rate"}),o.jsxs("p",{className:"text-xl font-bold text-primary",children:[g(s.clicks,s.impressions),"%"]})]})]})]})}),(s.business_name||s.contact_number||s.website_url||s.support_email||s.price_info)&&o.jsxs(ke,{className:"p-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Business Information"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.business_name&&o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-white mb-1",children:"Business Name"}),o.jsx("p",{className:"text-muted-foreground",children:s.business_name})]}),s.contact_number&&o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-white mb-1",children:"Contact Number"}),o.jsx("p",{className:"text-muted-foreground",children:s.contact_number})]}),s.website_url&&o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-white mb-1",children:"Website"}),o.jsx("p",{className:"text-blue-400",children:s.website_url})]}),s.support_email&&o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-white mb-1",children:"Support Email"}),o.jsx("p",{className:"text-blue-400",children:s.support_email})]}),s.price_info&&o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("h3",{className:"font-medium text-white mb-1",children:"Pricing Information"}),o.jsx("p",{className:"text-muted-foreground",children:s.price_info})]})]})]}),o.jsxs(ke,{className:"p-6",children:[o.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Campaign Timeline"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-muted-foreground",children:"Created:"}),o.jsx("span",{className:"text-white",children:m(s.created_at)})]}),s.campaign_start&&o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-muted-foreground",children:"Started:"}),o.jsx("span",{className:"text-white",children:m(s.campaign_start)})]}),s.campaign_end&&o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-muted-foreground",children:"Ends:"}),o.jsx("span",{className:"text-white",children:m(s.campaign_end)})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-muted-foreground",children:"Status:"}),o.jsx(vt,{className:h(s.status),children:s.status.toUpperCase()})]})]})]}),s.status==="pending"&&o.jsx(ke,{className:"p-4 bg-yellow-900/20 border-yellow-600",children:o.jsx("p",{className:"text-yellow-400 text-center",children:"⏳ Your campaign is pending approval. It will go live once approved by our team."})}),s.status==="rejected"&&o.jsx(ke,{className:"p-4 bg-red-900/20 border-red-600",children:o.jsx("p",{className:"text-red-400 text-center",children:"❌ Your campaign was rejected. Please review our advertising guidelines and try again."})}),s.status==="approved"&&o.jsx(ke,{className:"p-4 bg-blue-900/20 border-blue-600",children:o.jsx("p",{className:"text-blue-400 text-center",children:"✅ Your campaign has been approved and will start running soon!"})}),s.status==="active"&&o.jsx(ke,{className:"p-4 bg-green-900/20 border-green-600",children:o.jsx("p",{className:"text-green-400 text-center",children:"🟢 Your campaign is currently active and reaching users!"})}),s.status==="expired"&&o.jsx(ke,{className:"p-4 bg-gray-900/20 border-gray-600",children:o.jsx("p",{className:"text-gray-400 text-center",children:"⏰ Your campaign has ended. Create a new campaign to continue promoting your business."})})]})}),o.jsx(nr,{})]}):o.jsx("div",{className:"min-h-screen bg-background pb-20 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Campaign not found"}),o.jsx(K,{onClick:()=>e("/ad-stats"),children:"Back to My Campaigns"})]})})},kD=new _P,CD=()=>o.jsx(SP,{client:kD,children:o.jsx($A,{children:o.jsxs(Z2,{children:[o.jsx(XC,{}),o.jsx(CE,{}),o.jsx(yT,{children:o.jsxs(fT,{children:[o.jsx(Qe,{path:"/",element:o.jsx(jt,{children:o.jsx(s4,{})})}),o.jsx(Qe,{path:"/trending",element:o.jsx(jt,{children:o.jsx(o4,{})})}),o.jsx(Qe,{path:"/friends",element:o.jsx(jt,{children:o.jsx(lD,{})})}),o.jsx(Qe,{path:"/live",element:o.jsx(jt,{children:o.jsx(i4,{})})}),o.jsx(Qe,{path:"/upload",element:o.jsx(jt,{children:o.jsx(lO,{})})}),o.jsx(Qe,{path:"/profile",element:o.jsx(jt,{children:o.jsx(tx,{})})}),o.jsx(Qe,{path:"/profile/:username",element:o.jsx(jt,{children:o.jsx(tx,{})})}),o.jsx(Qe,{path:"/settings",element:o.jsx(jt,{children:o.jsx(gO,{})})}),o.jsx(Qe,{path:"/inbox",element:o.jsx(jt,{children:o.jsx(cD,{})})}),o.jsx(Qe,{path:"/chat/:chatId",element:o.jsx(jt,{children:o.jsx(uD,{})})}),o.jsx(Qe,{path:"/message/:username",element:o.jsx(jt,{children:o.jsx(dD,{})})}),o.jsx(Qe,{path:"/login",element:o.jsx(WA,{})}),o.jsx(Qe,{path:"/signup",element:o.jsx(qA,{})}),o.jsx(Qe,{path:"/welcome",element:o.jsx(UA,{})}),o.jsx(Qe,{path:"/edit-profile",element:o.jsx(iD,{})}),o.jsx(Qe,{path:"/wallet/link",element:o.jsx(jt,{children:o.jsx(mD,{})})}),o.jsx(Qe,{path:"/wallet",element:o.jsx(jt,{children:o.jsx(pD,{})})}),o.jsx(Qe,{path:"/create-video",element:o.jsx(jt,{children:o.jsx(wD,{})})}),o.jsx(Qe,{path:"/deactivated",element:o.jsx(yD,{})}),o.jsx(Qe,{path:"/video/:videoId",element:o.jsx(bD,{})}),o.jsx(Qe,{path:"/boost",element:o.jsx(jt,{children:o.jsx(_D,{})})}),o.jsx(Qe,{path:"/admin",element:o.jsx(jt,{children:o.jsx(jD,{})})}),o.jsx(Qe,{path:"/ad-stats",element:o.jsx(jt,{children:o.jsx(SD,{})})}),o.jsx(Qe,{path:"/campaign/:campaignId",element:o.jsx(jt,{children:o.jsx(ND,{})})}),o.jsx(Qe,{path:"*",element:o.jsx(fD,{})})]})})]})})});Aw(document.getElementById("root")).render(o.jsx(CD,{}));
